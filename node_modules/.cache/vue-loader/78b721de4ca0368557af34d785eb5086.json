{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/craft/craftLine/child_info/CraftTab.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/craft/craftLine/child_info/CraftTab.vue","mtime":1558939579924},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { columnsInfo } from '../basic_lib/column.js'\n\nconst data = []\nfor (let i = 0; i < 2; i++) {\n  data.push({\n    key: i.toString(),\n    name: `Edrward ${i}`,\n    remark: 32,\n    qc: `London Park no. ${i}`,\n    file: `London Park no. ${i}`\n  })\n}\n\nexport default {\n  data() {\n    this.cacheData = data.map(item => ({ ...item }))\n    return {\n      data,\n      columnsInfo\n    }\n  },\n  methods: {\n    handleChange(value, key, column) {\n      const newData = [...this.data]\n      const target = newData.filter(item => key === item.key)[0]\n      console.log(target)\n      if (target) {\n        target[column] = value\n        this.data = newData\n        console.log(this.data)\n      }\n    },\n    edit(key) {\n      const newData = [...this.data]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        target.editable = true\n        this.data = newData\n      }\n    },\n    save(key) {\n      const newData = [...this.data]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        delete target.editable\n        this.data = newData\n        this.cacheData = newData.map(item => ({ ...item }))\n      }\n    },\n    cancel(key) {\n      const newData = [...this.data]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        Object.assign(\n          target,\n          this.cacheData.filter(item => key === item.key)[0]\n        )\n        delete target.editable\n        this.data = newData\n      }\n    }\n  }\n}\n",{"version":3,"sources":["CraftTab.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CraftTab.vue","sourceRoot":"src/views/product/craft/craftLine/child_info","sourcesContent":["<template>\n  <a-table :columns=\"columnsInfo\" :dataSource=\"data\" :pagination=\"false\">\n    <template\n      v-for=\"col in ['name', 'qc', 'remark', 'file']\"\n      :slot=\"col\"\n      slot-scope=\"text, record, index\"\n    >\n      <div :key=\"col\">\n        <a-input\n          v-if=\"record.editable\"\n          style=\"margin: -5px 0\"\n          :value=\"text\"\n          @change=\"e => handleChange(e.target.value, record.key, col)\"\n        />\n        <template v-else>{{text}}</template>\n      </div>\n    </template>\n    <template slot=\"operation\" slot-scope=\"text, record, index\">\n      <div class=\"editable-row-operations\">\n        <span v-if=\"record.editable\">\n          <a @click=\"() => save(record.key)\">保存</a>\n          <a @click=\"() => cancel(record.key)\">取消</a>\n        </span>\n        <span v-else>\n          <a @click=\"() => edit(record.key)\">编辑</a>\n        </span>\n      </div>\n    </template>\n  </a-table>\n</template>\n<script>\nimport { columnsInfo } from '../basic_lib/column.js'\n\nconst data = []\nfor (let i = 0; i < 2; i++) {\n  data.push({\n    key: i.toString(),\n    name: `Edrward ${i}`,\n    remark: 32,\n    qc: `London Park no. ${i}`,\n    file: `London Park no. ${i}`\n  })\n}\n\nexport default {\n  data() {\n    this.cacheData = data.map(item => ({ ...item }))\n    return {\n      data,\n      columnsInfo\n    }\n  },\n  methods: {\n    handleChange(value, key, column) {\n      const newData = [...this.data]\n      const target = newData.filter(item => key === item.key)[0]\n      console.log(target)\n      if (target) {\n        target[column] = value\n        this.data = newData\n        console.log(this.data)\n      }\n    },\n    edit(key) {\n      const newData = [...this.data]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        target.editable = true\n        this.data = newData\n      }\n    },\n    save(key) {\n      const newData = [...this.data]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        delete target.editable\n        this.data = newData\n        this.cacheData = newData.map(item => ({ ...item }))\n      }\n    },\n    cancel(key) {\n      const newData = [...this.data]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        Object.assign(\n          target,\n          this.cacheData.filter(item => key === item.key)[0]\n        )\n        delete target.editable\n        this.data = newData\n      }\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.editable-row-operations a {\n  margin-right: 8px;\n}\n</style>\n"]}]}