{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/sale/orderList/addAddress.vue?vue&type=style&index=0&id=d40a71ac&lang=less&scoped=true&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/sale/orderList/addAddress.vue","mtime":1559179259584},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/less-loader/dist/cjs.js","mtime":1556420627437},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import \"~styles/variable.less\";\n.inputWidth {\n  .inputWidth();\n}\n",{"version":3,"sources":["addAddress.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+JA;AACA;AACA;AACA","file":"addAddress.vue","sourceRoot":"src/views/sale/orderList","sourcesContent":["<template>\n  <div class=\"address\">\n    <a-form>\n      <a-form-item label=\"收件人姓名\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 16 }\" required>\n        <a-input v-model=\"obj.receiver\"/>\n      </a-form-item>\n      <a-form-item label=\"所在地区\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 16 }\" required>\n        <a-cascader\n          :options=\"areas\"\n          placeholder\n          v-model=\"obj.areas\"\n          :fieldNames=\"{label:'name',value:'id',children:'childrens'}\"\n          @change=\"areaHandleChange\"\n        />\n      </a-form-item>\n      <a-form-item label=\"街道地址\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 16 }\" required>\n        <a-input v-model=\"obj.detailAddr\"/>\n      </a-form-item>\n      <a-form-item label=\"邮政编码\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 16 }\" required>\n        <a-input v-model=\"obj.postCode\"/>\n      </a-form-item>\n      <a-form-item label=\"手机号码\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 16 }\" required>\n        <a-input v-model=\"obj.phone\" max=\"11\"/>\n      </a-form-item>\n      <a-form-item :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 14,offset:5 }\">\n        <a-checkbox @change=\"defaultSelect\" :defaultChecked=\"defaultAdd\">设为默认收货地址</a-checkbox>\n      </a-form-item>\n    </a-form>\n    <div class=\"model-btn\" style=\"text-align:center\">\n      <a-button\n        type=\"primary\"\n        style=\"background:#8F939A;border:none;margin-right:8px;\"\n        @click=\"handleCancel\"\n      >关闭</a-button>\n      <a-button type=\"primary\" style=\"background:#F0BB2E;border:none;\" @click=\"handleOk\">保存</a-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { postJson, get, put } from '@/api/axios.js'\nimport api from '@/api/index.js'\nconst areas = require(\"@/assets/utils/area.js\");\nexport default {\n  props: ['custId'],\n  data() {\n    return {\n      areas: areas.areas,\n      defaultAdd: true,\n      obj: {\n        area: \"\",\n        areaStr: \"\",\n        city: \"\",\n        cityStr: \"\",\n        custId: this.custId,\n        defaultGoodsAddr: \"\",\n        deleted: 0,\n        detailAddr: \"\",\n        id: \"\",\n        phone: \"\",\n        postCode: \"\",\n        province: \"\",\n        provinceStr: \"\",\n        receiver: \"\",\n        areas: [],\n      }\n    }\n  },\n  methods: {\n    defaultSelect(e) {\n      this.defaultAdd = e.target.checked;\n    },\n    areaHandleChange(val) {\n      this.obj.areas = val;\n    },\n    handleOk(e) {\n      var data = this.obj;\n      if (data.receiver === \"\") {\n        this.$message.error(\"请输入收件人姓名\");\n        return;\n      }\n\n      if (!data.areas.length) {\n        this.$message.error(\"请选择收件地址\");\n        return;\n      }\n\n      if (data.detailAddr === \"\") {\n        this.$message.error(\"请输入详细收获地址\");\n        return;\n      }\n\n      if (data.postCode === \"\") {\n        this.$message.error(\"请输入正确的邮政编码\");\n        return;\n      }\n\n      if (!/^[0-9]\\d{5}/.test(data.postCode)) {\n        this.$message.error(\"请输入正确的邮政编码\");\n        return;\n      }\n\n      if (data.phone === \"\") {\n        this.$message.error(\"请输入正确的手机号码\");\n        return;\n      }\n      if (!/^1[34578]\\d{9}$/.test(data.phone)) {\n        this.$message.error(\"请输入正确的手机号码\");\n        return;\n      }\n      this.getCityProvince();\n      var parmas = { ...data };\n      parmas.defaultGoodsAddr = this.defaultAdd ? 1 : 0;\n      delete parmas.areas;\n      postJson(api.setAddressIvo, parmas).then(res => {\n        if (res.data.code == 0) {\n          this.$message.success('添加地址成功')\n        }\n        this.$emit('addressCancel', true)\n      });\n\n    },\n    // 根据code获取省市区的名字\n    getCityProvince() {\n      var areas = this.areas;\n      var allCityCode = this.obj.areas;\n      var city = allCityCode[0],\n        province = allCityCode[1],\n        area = allCityCode[2];\n      for (let item in areas) {\n        if (areas[item].id === city) {\n          this.obj.cityStr = areas[item].name;\n          this.obj.city = city;\n          var cityProvinces = areas[item].childrens;\n          for (let i in cityProvinces) {\n            if (cityProvinces[i].id === province) {\n              this.obj.provinceStr = cityProvinces[i].name;\n              this.obj.province = province;\n              var provinceChildrens = cityProvinces[i].childrens;\n              for (let j in provinceChildrens) {\n                if (provinceChildrens[j].id === area) {\n                  this.obj.areaStr = provinceChildrens[j].name;\n                  this.obj.area = area;\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    handleCancel(e) {\n      this.$emit('addressCancel', false)\n    },\n  }\n}\n\n</script>\n\n<style lang='less' scoped>\n@import \"~styles/variable.less\";\n.inputWidth {\n  .inputWidth();\n}\n</style>\n"]}]}