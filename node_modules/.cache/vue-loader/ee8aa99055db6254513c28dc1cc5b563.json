{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/sale/orderList/basic_lib/addAddress.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/sale/orderList/basic_lib/addAddress.vue","mtime":1559732998295},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { postJson } from '@/api/axios.js'\nimport api from '@/api/index.js'\nconst areas = require('@/assets/utils/area.js')\nexport default {\n  props: {\n    custId: {\n      type: String,\n      default: '',\n      required: false\n    },\n    obj: {\n      type: Object,\n      required: false,\n      default: function () {\n        return {\n          area: '',\n          areaStr: '',\n          city: '',\n          cityStr: '',\n          custId: this.custId,\n          defaultGoodsAddr: '',\n          deleted: 0,\n          detailAddr: '',\n          id: '',\n          phone: '',\n          postCode: '',\n          province: '',\n          provinceStr: '',\n          receiver: '',\n          areas: [],\n          index: ''\n        }\n      }\n    }\n  },\n  data() {\n    return {\n      areas: areas.areas,\n      defaultAdd: true,\n      form: this.$form.createForm(this)\n    }\n  },\n\n  methods: {\n    defaultSelect(e) {\n      this.defaultAdd = e.target.checked\n    },\n    areaHandleChange(val) {\n      this.obj.areas = val\n    },\n    handleOk(e) {\n      e.preventDefault()\n      let data = this.obj\n      this.getCityProvince()\n      this.form.validateFields(\n        (err, val) => {\n          if (!err) {\n            data = { ...data, ...(val.obj) }\n            var parmas = { ...data }\n            parmas.defaultGoodsAddr = this.defaultAdd ? 1 : 0\n            if (this.custId !== '') {\n              delete parmas.areas\n              delete parmas.index\n              postJson(api.setAddressIvo, parmas).then(res => {\n                if (res.data.code === 0) {\n                  this.$message.success('添加地址成功')\n                }\n                this.$emit('addressCancel', true)\n              })\n            } else {\n              this.$emit('addressCancel', parmas)\n            }\n            this.form.resetFields()\n          }\n        }\n      )\n    },\n    // 根据code获取省市区的名字\n    getCityProvince() {\n      var areas = this.areas\n      var allCityCode = this.obj.areas\n      var city = allCityCode[0]\n      var province = allCityCode[1]\n      var area = allCityCode[2]\n      for (const item in areas) {\n        if (areas[item].id === city) {\n          this.obj.cityStr = areas[item].name\n          this.obj.city = city\n          var cityProvinces = areas[item].childrens\n          for (const i in cityProvinces) {\n            if (cityProvinces[i].id === province) {\n              this.obj.provinceStr = cityProvinces[i].name\n              this.obj.province = province\n              var provinceChildrens = cityProvinces[i].childrens\n              for (const j in provinceChildrens) {\n                if (provinceChildrens[j].id === area) {\n                  this.obj.areaStr = provinceChildrens[j].name\n                  this.obj.area = area\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    handleCancel(e) {\n      this.$emit('addressCancel', false)\n    }\n  }\n}\n",{"version":3,"sources":["addAddress.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addAddress.vue","sourceRoot":"src/views/sale/orderList/basic_lib","sourcesContent":["<template>\n  <div class=\"address\">\n    <a-form :form=\"form\">\n      <a-form-item label=\"收件人姓名\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 16 }\" required>\n        <a-input\n          v-decorator=\"['obj.receiver',{rules:[{ required: true, message: '请输入收件人姓名'}],initialValue:obj.receiver}]\"\n        />\n      </a-form-item>\n      <a-form-item label=\"所在地区\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 16 }\" required>\n        <a-cascader\n          :options=\"areas\"\n          placeholder\n          v-decorator=\"['obj.areas',{rules:[{ required: true, message: '请选择收件人所在地区'}],initialValue:obj.areas}]\"\n          :fieldNames=\"{label:'name',value:'id',children:'childrens'}\"\n          @change=\"areaHandleChange\"\n        />\n      </a-form-item>\n      <a-form-item label=\"街道地址\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 16 }\" required>\n        <a-input\n          v-decorator=\"['obj.detailAddr',{rules:[{ required: true, message: '请输入收件人详细地址'}],initialValue:obj.detailAddr}]\"\n        />\n      </a-form-item>\n      <a-form-item label=\"邮政编码\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 16 }\" required>\n        <a-input\n          v-decorator=\"['obj.postCode',{rules:[{ required: true, message: '请输入邮政编码'}],initialValue:obj.postCode}]\"\n        />\n      </a-form-item>\n      <a-form-item label=\"手机号码\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 16 }\" required>\n        <a-input\n          v-decorator=\"['obj.phone',{rules:[{ required: true, message: '请输入收件人手机号码'}],initialValue:obj.phone}]\"\n          max=\"11\"\n        />\n      </a-form-item>\n      <a-form-item :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 14,offset:5 }\">\n        <a-checkbox @change=\"defaultSelect\" :defaultChecked=\"defaultAdd\">设为默认收货地址</a-checkbox>\n      </a-form-item>\n      <a-form-item style=\"text-align:center\">\n        <a-button\n          type=\"primary\"\n          style=\"background:#8F939A;border:none;margin-right:8px;\"\n          @click=\"handleCancel\"\n        >关闭</a-button>\n        <a-button type=\"primary\" style=\"background:#F0BB2E;border:none;\" @click=\"handleOk\">保存</a-button>\n      </a-form-item>\n    </a-form>\n  </div>\n</template>\n\n<script>\nimport { postJson } from '@/api/axios.js'\nimport api from '@/api/index.js'\nconst areas = require('@/assets/utils/area.js')\nexport default {\n  props: {\n    custId: {\n      type: String,\n      default: '',\n      required: false\n    },\n    obj: {\n      type: Object,\n      required: false,\n      default: function () {\n        return {\n          area: '',\n          areaStr: '',\n          city: '',\n          cityStr: '',\n          custId: this.custId,\n          defaultGoodsAddr: '',\n          deleted: 0,\n          detailAddr: '',\n          id: '',\n          phone: '',\n          postCode: '',\n          province: '',\n          provinceStr: '',\n          receiver: '',\n          areas: [],\n          index: ''\n        }\n      }\n    }\n  },\n  data() {\n    return {\n      areas: areas.areas,\n      defaultAdd: true,\n      form: this.$form.createForm(this)\n    }\n  },\n\n  methods: {\n    defaultSelect(e) {\n      this.defaultAdd = e.target.checked\n    },\n    areaHandleChange(val) {\n      this.obj.areas = val\n    },\n    handleOk(e) {\n      e.preventDefault()\n      let data = this.obj\n      this.getCityProvince()\n      this.form.validateFields(\n        (err, val) => {\n          if (!err) {\n            data = { ...data, ...(val.obj) }\n            var parmas = { ...data }\n            parmas.defaultGoodsAddr = this.defaultAdd ? 1 : 0\n            if (this.custId !== '') {\n              delete parmas.areas\n              delete parmas.index\n              postJson(api.setAddressIvo, parmas).then(res => {\n                if (res.data.code === 0) {\n                  this.$message.success('添加地址成功')\n                }\n                this.$emit('addressCancel', true)\n              })\n            } else {\n              this.$emit('addressCancel', parmas)\n            }\n            this.form.resetFields()\n          }\n        }\n      )\n    },\n    // 根据code获取省市区的名字\n    getCityProvince() {\n      var areas = this.areas\n      var allCityCode = this.obj.areas\n      var city = allCityCode[0]\n      var province = allCityCode[1]\n      var area = allCityCode[2]\n      for (const item in areas) {\n        if (areas[item].id === city) {\n          this.obj.cityStr = areas[item].name\n          this.obj.city = city\n          var cityProvinces = areas[item].childrens\n          for (const i in cityProvinces) {\n            if (cityProvinces[i].id === province) {\n              this.obj.provinceStr = cityProvinces[i].name\n              this.obj.province = province\n              var provinceChildrens = cityProvinces[i].childrens\n              for (const j in provinceChildrens) {\n                if (provinceChildrens[j].id === area) {\n                  this.obj.areaStr = provinceChildrens[j].name\n                  this.obj.area = area\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    handleCancel(e) {\n      this.$emit('addressCancel', false)\n    }\n  }\n}\n</script>\n\n<style lang='less' scoped>\n@import \"~styles/variable.less\";\n\n.inputWidth {\n  .inputWidth();\n}\n</style>\n"]}]}