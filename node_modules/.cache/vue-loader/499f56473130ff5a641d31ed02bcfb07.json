{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/customer/Customer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/customer/Customer.vue","mtime":1556420575737},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Animation from '@/assets/utils/Animation'\nimport { showCustomersPage, removeCustomer, getCustomerAndMallUser } from './getPage.js'\nimport AddCustomerInfo from './AddCustomerInfo'\n\nconst columns = [\n  {\n    title: '客户编码',\n    dataIndex: 'clientCode',\n    scopedSlots: { customRender: 'clientCode' }\n  },\n  {\n    title: '客户简称',\n    dataIndex: 'clientShortName'\n  },\n  {\n    title: '客户经理',\n    dataIndex: 'clientAbbreviation'\n  },\n  {\n    title: '联系人',\n    dataIndex: 'clientName'\n  },\n  {\n    title: '联系方式',\n    dataIndex: 'clientPhone'\n  },\n  {\n    title: '所属行业',\n    dataIndex: 'clientIndustryValue'\n  },\n  {\n    title: '客户等级',\n    dataIndex: 'clientLevel'\n  },\n  {\n    title: '状态',\n    dataIndex: 'clientStatus',\n    scopedSlots: { customRender: 'clientStatus' }\n  }\n]\n\nexport default {\n  name: 'Customer',\n  data() {\n    return {\n      // 高级搜索 展开/关闭\n      advanced: false,\n      // 地域data\n      options: [\n        {\n          value: 'zhejiang',\n          label: 'Zhejiang',\n          children: [\n            {\n              value: 'hangzhou',\n              label: 'Hangzhou',\n              children: [\n                {\n                  value: 'xihu',\n                  label: 'West Lake'\n                }\n              ]\n            }\n          ]\n        },\n        {\n          value: 'jiangsu',\n          label: 'Jiangsu',\n          children: [\n            {\n              value: 'nanjing',\n              label: 'Nanjing',\n              children: [\n                {\n                  value: 'zhonghuamen',\n                  label: 'Zhong Hua Men'\n                }\n              ]\n            }\n          ]\n        }\n      ],\n      // table\n      tabData: [],\n      columns,\n      pagination: {\n        total: 0,\n        defaultPageSize: 5,\n        defaultCurrent: 1\n      },\n      loading: false,\n      selectedRowKeys: [], // Check here to configure the default column,\n      deleteCustomer: '',\n      visible: false,\n      setCustomerAndMallUser: {},\n      isEdit: false,\n      title: '新建客户信息'\n    }\n  },\n  mounted() {\n    // 初始化客户信息\n    showCustomersPage.call(this)\n  },\n  methods: {\n    // 地域选择\n    onChangeArea(value) {\n      console.log(value)\n    },\n    // 客户等级\n    onleChangeRank(value) {\n      console.log(value)\n    },\n    // 行业\n    onleChangeindustry(value) {\n      console.log(value)\n    },\n    toggleAdvanced() {\n      this.advanced = !this.advanced\n    },\n    // table 选择操作\n    onChangeTab(selectedRowKeys, selectedRows) {\n      console.log(selectedRowKeys)\n      console.log(selectedRows)\n      this.selectedRowKeys = selectedRowKeys\n      // 选中删除供应商数\n      this.deleteCustomer = ''\n      selectedRowKeys.forEach((item, index) => {\n        console.log(item)\n        this.deleteCustomer += `customerIds=${item}&`\n      })\n      console.log(this.deleteCustomer)\n    },\n    // 删除tab列表项\n    onDeleteCustomer() {\n      const that = this\n      this.$confirm({\n        title: '删除',\n        content: '您确认要删除？',\n        okText: '删除',\n        okType: 'danger',\n        cancelText: '取消',\n        onOk() {\n          if (that.selectedRowKeys.length === 0) {\n            that.$message.error('请先选择要删除的项')\n            return false\n          }\n          that.loading = true\n          removeCustomer.call(that)\n          setTimeout(() => {\n            showCustomersPage.call(that)\n          }, 200)\n        },\n        onCancel() {\n          console.log('Cancel')\n        }\n      })\n    },\n    // 分页管理\n    onChangePage(pagination, filters, sorter) {\n      console.log(pagination.current + '分页下标')\n      showCustomersPage.call(this, pagination.current)\n      // 切换分页先清空选中状态\n      this.selectedRowKeys = []\n    },\n    // 新增客户信息\n    addCustomerInfo() {\n      this.visible = true\n      this.isEdit = false\n    },\n    // 取消客户信息\n    onCustomerInfo() {\n      this.visible = false\n    },\n    // 客户信息详情\n    onChangeCode(record) {\n      this.visible = true\n      this.title = '客户信息详情'\n      // 编辑按钮显示\n      this.isEdit = true\n      getCustomerAndMallUser.call(this, record.key)\n    },\n    // 客户状态\n    onChangeStatus(record) {\n      console.log(record)\n    },\n    // $emit改变isvisible\n    isVisible(isVisible) {\n      this.visible = isVisible\n    }\n  },\n  computed: {\n    rowSelection() {\n      const { selectedRowKeys } = this\n      return {\n        selectedRowKeys,\n        onChange: this.onChangeTab,\n        hideDefaultSelections: false\n      }\n    }\n  },\n  components: {\n    Animation,\n    AddCustomerInfo\n  }\n}\n",{"version":3,"sources":["Customer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8HA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Customer.vue","sourceRoot":"src/views/customer","sourcesContent":["<template>\n  <div class=\"client\">\n    <!-- 头部选择区 -->\n    <div class=\"client-add\">\n      <a-button type=\"primary\" @click=\"addCustomerInfo\">\n        <a-icon type=\"plus\"/>新建\n      </a-button>\n      <!-- 弹出层 -->\n      <a-drawer\n        destroyOnClose\n        :title=\"title\"\n        placement=\"right\"\n        :closable=\"false\"\n        :width=\"1080\"\n        @close=\"onCustomerInfo\"\n        :visible=\"visible\"\n        :wrapStyle=\"{height: 'calc(100% - 108px)',overflow: 'auto',paddingBottom: '108px'}\"\n      >\n        <AddCustomerInfo @isVisible=\"isVisible\"  :isEdit=\"isEdit\" :setCustomerAndMallUser=\"setCustomerAndMallUser\"></AddCustomerInfo>\n      </a-drawer>\n      <a-button type=\"danger\" class=\"client-remove\" @click=\"onDeleteCustomer\">\n        <a-icon type=\"delete\"/>删除\n      </a-button>\n      <a-dropdown>\n        <span>\n          <a-icon class=\"client-derive\" type=\"check-circle\"/>\n          <span>更多</span>\n        </span>\n        <a-menu slot=\"overlay\">\n          <a-menu-item key=\"0\">\n            <span>导入</span>\n          </a-menu-item>\n          <a-menu-item key=\"1\">\n            <span>导出</span>\n          </a-menu-item>\n        </a-menu>\n      </a-dropdown>\n    </div>\n    <!-- 客户选择 -->\n    <div class=\"client-select\">\n      <a-form layout=\"inline\">\n        <a-row>\n          <a-col :span=\"18\">\n            <a-row>\n              <a-col :span=\"24\">\n                <a-form-item label=\"客户名称\">\n                  <a-input placeholder=\"请输入客户名称\"/>\n                </a-form-item>\n                <a-form-item label=\"客户经理\">\n                  <a-cascader\n                    :options=\"options\"\n                    style=\"width: 280px\"\n                    @change=\"onChangeArea\"\n                    placeholder=\"请输入客户经理\"\n                  />\n                </a-form-item>\n                <a-form-item label=\"客户等级\">\n                  <a-select defaultValue=\"普通\" style=\"width: 120px\" @change=\"onleChangeRank\">\n                    <a-select-option value=\"普通\">普通</a-select-option>\n                    <a-select-option value=\"一般\">一般</a-select-option>\n                    <a-select-option value=\"重点\">重点</a-select-option>\n                    <a-select-option value=\"VIP\">VIP</a-select-option>\n                  </a-select>\n                </a-form-item>\n              </a-col>\n            </a-row>\n            <Animation name=\"fadeIn\">\n              <a-row v-if=\"advanced\">\n                <a-col :span=\"24\">\n                  <a-form-item label=\"客户编码\">\n                    <a-input placeholder=\"请输入客户编码\"/>\n                  </a-form-item>\n                  <a-form-item label=\"行业\">\n                    <a-select defaultValue=\"汽油\" style=\"width: 120px\" @change=\"onleChangeindustry\">\n                      <a-select-option value=\"汽油\">汽油</a-select-option>\n                      <a-select-option value=\"石头\">一石头般</a-select-option>\n                      <a-select-option value=\"电子电器\">电子电器</a-select-option>\n                      <a-select-option value=\"五金\">五金</a-select-option>\n                      <a-select-option value=\"轨道交通\">轨道交通</a-select-option>\n                      <a-select-option value=\"其他\">其他</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                </a-col>\n              </a-row>\n            </Animation>\n          </a-col>\n          <a-col :span=\"6\">\n            <a-form-item>\n              <a-button type=\"primary\">查询</a-button>\n              <a-button class=\"client-select-reset\">重置</a-button>\n              <a-button size=\"small\" @click=\"toggleAdvanced\">\n                <a-icon :type=\"advanced ? 'up' : 'down'\"/>\n                {{ advanced ? '收起' : '展开' }}\n              </a-button>\n            </a-form-item>\n          </a-col>\n        </a-row>\n      </a-form>\n    </div>\n    <!-- table -->\n    <div class=\"client-table\">\n      <a-table\n        :columns=\"columns\"\n        @change=\"onChangePage\"\n        :dataSource=\"tabData\"\n        :pagination=\"pagination\"\n        :rowSelection=\"rowSelection\"\n        :loading=\"loading\"\n      >\n        <template slot=\"clientCode\" slot-scope=\"text, record\">\n          <a @click=\"onChangeCode(record)\" href=\"javascript:;\">{{text}}</a>\n        </template>\n        <template slot=\"clientStatus\" slot-scope=\"text, record\">\n          <a\n            @click=\"onChangeStatus(record)\"\n            href=\"javascript:;\"\n            class=\"client-status\"\n            :class=\"[`${text}` === '0' ? 'statusOk' : 'statusNo']\"\n            :title=\"[`${text}` === '0' ? '使用中' : '']\"\n          ></a>\n        </template>\n      </a-table>\n    </div>\n  </div>\n</template>\n<script>\nimport Animation from '@/assets/utils/Animation'\nimport { showCustomersPage, removeCustomer, getCustomerAndMallUser } from './getPage.js'\nimport AddCustomerInfo from './AddCustomerInfo'\n\nconst columns = [\n  {\n    title: '客户编码',\n    dataIndex: 'clientCode',\n    scopedSlots: { customRender: 'clientCode' }\n  },\n  {\n    title: '客户简称',\n    dataIndex: 'clientShortName'\n  },\n  {\n    title: '客户经理',\n    dataIndex: 'clientAbbreviation'\n  },\n  {\n    title: '联系人',\n    dataIndex: 'clientName'\n  },\n  {\n    title: '联系方式',\n    dataIndex: 'clientPhone'\n  },\n  {\n    title: '所属行业',\n    dataIndex: 'clientIndustryValue'\n  },\n  {\n    title: '客户等级',\n    dataIndex: 'clientLevel'\n  },\n  {\n    title: '状态',\n    dataIndex: 'clientStatus',\n    scopedSlots: { customRender: 'clientStatus' }\n  }\n]\n\nexport default {\n  name: 'Customer',\n  data() {\n    return {\n      // 高级搜索 展开/关闭\n      advanced: false,\n      // 地域data\n      options: [\n        {\n          value: 'zhejiang',\n          label: 'Zhejiang',\n          children: [\n            {\n              value: 'hangzhou',\n              label: 'Hangzhou',\n              children: [\n                {\n                  value: 'xihu',\n                  label: 'West Lake'\n                }\n              ]\n            }\n          ]\n        },\n        {\n          value: 'jiangsu',\n          label: 'Jiangsu',\n          children: [\n            {\n              value: 'nanjing',\n              label: 'Nanjing',\n              children: [\n                {\n                  value: 'zhonghuamen',\n                  label: 'Zhong Hua Men'\n                }\n              ]\n            }\n          ]\n        }\n      ],\n      // table\n      tabData: [],\n      columns,\n      pagination: {\n        total: 0,\n        defaultPageSize: 5,\n        defaultCurrent: 1\n      },\n      loading: false,\n      selectedRowKeys: [], // Check here to configure the default column,\n      deleteCustomer: '',\n      visible: false,\n      setCustomerAndMallUser: {},\n      isEdit: false,\n      title: '新建客户信息'\n    }\n  },\n  mounted() {\n    // 初始化客户信息\n    showCustomersPage.call(this)\n  },\n  methods: {\n    // 地域选择\n    onChangeArea(value) {\n      console.log(value)\n    },\n    // 客户等级\n    onleChangeRank(value) {\n      console.log(value)\n    },\n    // 行业\n    onleChangeindustry(value) {\n      console.log(value)\n    },\n    toggleAdvanced() {\n      this.advanced = !this.advanced\n    },\n    // table 选择操作\n    onChangeTab(selectedRowKeys, selectedRows) {\n      console.log(selectedRowKeys)\n      console.log(selectedRows)\n      this.selectedRowKeys = selectedRowKeys\n      // 选中删除供应商数\n      this.deleteCustomer = ''\n      selectedRowKeys.forEach((item, index) => {\n        console.log(item)\n        this.deleteCustomer += `customerIds=${item}&`\n      })\n      console.log(this.deleteCustomer)\n    },\n    // 删除tab列表项\n    onDeleteCustomer() {\n      const that = this\n      this.$confirm({\n        title: '删除',\n        content: '您确认要删除？',\n        okText: '删除',\n        okType: 'danger',\n        cancelText: '取消',\n        onOk() {\n          if (that.selectedRowKeys.length === 0) {\n            that.$message.error('请先选择要删除的项')\n            return false\n          }\n          that.loading = true\n          removeCustomer.call(that)\n          setTimeout(() => {\n            showCustomersPage.call(that)\n          }, 200)\n        },\n        onCancel() {\n          console.log('Cancel')\n        }\n      })\n    },\n    // 分页管理\n    onChangePage(pagination, filters, sorter) {\n      console.log(pagination.current + '分页下标')\n      showCustomersPage.call(this, pagination.current)\n      // 切换分页先清空选中状态\n      this.selectedRowKeys = []\n    },\n    // 新增客户信息\n    addCustomerInfo() {\n      this.visible = true\n      this.isEdit = false\n    },\n    // 取消客户信息\n    onCustomerInfo() {\n      this.visible = false\n    },\n    // 客户信息详情\n    onChangeCode(record) {\n      this.visible = true\n      this.title = '客户信息详情'\n      // 编辑按钮显示\n      this.isEdit = true\n      getCustomerAndMallUser.call(this, record.key)\n    },\n    // 客户状态\n    onChangeStatus(record) {\n      console.log(record)\n    },\n    // $emit改变isvisible\n    isVisible(isVisible) {\n      this.visible = isVisible\n    }\n  },\n  computed: {\n    rowSelection() {\n      const { selectedRowKeys } = this\n      return {\n        selectedRowKeys,\n        onChange: this.onChangeTab,\n        hideDefaultSelections: false\n      }\n    }\n  },\n  components: {\n    Animation,\n    AddCustomerInfo\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.client {\n  .client-add {\n    .client-remove {\n      margin: 0 20px;\n    }\n    .client-derive {\n      color: #6bc67b;\n      margin-right: 5px;\n    }\n  }\n  .client-select {\n    margin: 20px 0;\n    .client-select-reset {\n      margin: 0 8px;\n    }\n  }\n  .client-table {\n    .client-status {\n      width: 12px;\n      height: 12px;\n      border-radius: 50%;\n      display: inline-block;\n    }\n    .statusOk {\n      background: #6bc67b;\n    }\n    .statusNo {\n      background: #d8d8d8;\n    }\n  }\n}\n</style>\n"]}]}