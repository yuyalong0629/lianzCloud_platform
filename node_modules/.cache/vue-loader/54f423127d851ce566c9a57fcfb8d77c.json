{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/components/headerMenu/HeaderMenu.vue?vue&type=style&index=0&id=0ab51aaf&lang=less&scoped=true&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/components/headerMenu/HeaderMenu.vue","mtime":1563524989347},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/less-loader/dist/cjs.js","mtime":1556420627437},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.headerMenu {\n  float: right;\n  margin-right: 24px;\n  .action {\n    margin-right: 20px;\n    .username {\n      font-size: 14px;\n      cursor: pointer;\n      margin-left: 5px;\n    }\n  }\n}\n",{"version":3,"sources":["HeaderMenu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HeaderMenu.vue","sourceRoot":"src/components/headerMenu","sourcesContent":["<template>\n  <div class=\"headerMenu\">\n    <a href=\"javascript:;\" class=\"approve\" @click=\"getApproval\">\n      <a-icon type=\"audit\" style=\"font-size:16px;\" />\n    </a>\n    <!-- 外链 -->\n    <a href=\"javascript:;\" @click=\"showModal\">\n      <a-icon type=\"home\" style=\"font-size:16px;margin:0 10px;\" />\n    </a>\n    <HeaderNotice class=\"action\" />\n    <a-dropdown>\n      <span class=\"action ant-dropdown-link user-dropdown-menu\">\n        <a-avatar style=\"backgroundColor:#87D068\" icon=\"user\" />\n        <span class=\"username\">{{ this.getNick }}</span>\n      </span>\n      <a-menu slot=\"overlay\" class=\"user-dropdown-menu-wrapper\" style=\"marginTop: 24px;\">\n        <a-menu-item key=\"0\">\n          <router-link to=\"/\">\n            <a-icon type=\"user\" style=\"marginRight: 4px;\" />\n            <span>个人中心</span>\n          </router-link>\n        </a-menu-item>\n        <a-menu-item key=\"1\">\n          <router-link to=\"/\">\n            <a-icon type=\"setting\" style=\"marginRight: 4px;\" />\n            <span>账户设置</span>\n          </router-link>\n        </a-menu-item>\n        <a-menu-divider />\n        <a-menu-item key=\"3\">\n          <a href=\"javascript:;\" @click=\"handleLogout\">\n            <a-icon type=\"logout\" style=\"marginRight: 4px;\" />\n            <span>退出登录</span>\n          </a>\n        </a-menu-item>\n      </a-menu>\n    </a-dropdown>\n    <a-modal title=\"请输入管理员密码\" :visible=\"visible\" @cancel=\"handleCancel\" :footer=\"null\">\n      <a-form @submit=\"handleOk\">\n        <a-form-item>\n          <a-input type=\"password\" placeholder=\"请输入管理员密码\" v-model=\"password\" />\n        </a-form-item>\n        <a-row>\n          <a-col :span=\"24\" :style=\"{ textAlign: 'right' }\">\n            <a-button @click=\"handleCancel\" style=\"margin-right:10px;\">取消</a-button>\n            <a-button type=\"primary\" html-type=\"submit\">确定</a-button>\n          </a-col>\n        </a-row>\n      </a-form>\n    </a-modal>\n  </div>\n</template>\n<script>\nimport { post, get } from '@/api/axios.js'\nimport api from '@/api/index.js'\nimport HeaderNotice from './HeaderNotice'\n\nexport default {\n  name: 'HeaderMenu',\n  data() {\n    return {\n      visible: false,\n      password: '',\n      url: ''\n    }\n  },\n  created() {\n    this.getHref()\n  },\n  methods: {\n    handleLogout() {\n      const that = this\n      this.$confirm({\n        title: '提示',\n        okText: '退出',\n        cancelText: '取消',\n        content: '真的要退出登录吗 ?',\n        onOk() {\n          that.$router.replace('/user/login')\n          localStorage.removeItem('ACCESS_TOKEN')\n        },\n        onCancel() { }\n      })\n    },\n    showModal() {\n      this.visible = true\n    },\n    handleOk(e) {\n      e.preventDefault()\n      if (!this.password) {\n        this.$message.warning('请输入管理员密码')\n        return\n      }\n      var newPage = window.open()\n      const url = this.url\n      post(api.companyValidate, { password: this.password }).then(res => {\n        if (res.data.code === 0) {\n          this.password = ''\n          this.visible = false\n          // const orgmanageUrl = `http://192.168.1.121:8082/#/getInfo?key=${res.data.data.key}`\n          const orgmanageUrl = `${url}/#/getInfo?key=${res.data.data.key}`\n          newPage.location.href = orgmanageUrl\n        } else {\n          this.password = ''\n          this.visible = false\n          const confirm = newPage.confirm(res.data.msg)\n          if (confirm) {\n            newPage.close()\n          } else {\n            newPage.location.href = location.href\n          }\n          // this.$message.error(res.data.msg)\n        }\n      }).catch(err => {\n        console.log(err)\n      })\n    },\n    // 获取组织架构链接地址\n    getHref() {\n      get(api.getBackStageUrl).then(res => {\n        if (res.data.code === 0) {\n          this.url = res.data.data\n        }\n      })\n    },\n    handleCancel(e) {\n      this.visible = false\n      this.password = ''\n    },\n    // 审批\n    getApproval() {\n      this.$router.push({ path: '/approval/backlog', query: { key: 1 } })\n    }\n  },\n  computed: {\n    getNick() {\n      return localStorage.getItem('NICK')\n    }\n  },\n  components: {\n    HeaderNotice\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.headerMenu {\n  float: right;\n  margin-right: 24px;\n  .action {\n    margin-right: 20px;\n    .username {\n      font-size: 14px;\n      cursor: pointer;\n      margin-left: 5px;\n    }\n  }\n}\n</style>\n"]}]}