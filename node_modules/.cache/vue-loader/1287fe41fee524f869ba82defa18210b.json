{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/views/sale/orderList/child_lib/address.vue?vue&type=style&index=0&id=6b2f8d6c&lang=less&scoped=true&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/views/sale/orderList/child_lib/address.vue","mtime":1564364286161},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/less-loader/dist/cjs.js","mtime":1556420627437},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.editable-add-btn {\n  cursor: pointer;\n  margin: 10px;\n  display: block;\n  line-height: 30px;\n  text-align: center;\n  border: 1px dashed #ccc;\n}\n.address-list-item {\n  cursor: pointer;\n  margin-bottom: 10px;\n  &-desc {\n    font-size: 14px;\n    color: #333333;\n    padding: 15px 20px;\n    border-radius: 4px;\n    background: #fafafa;\n    border: 1px solid #d8d8d8;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    ul {\n      display: flex;\n      margin-bottom: 0;\n    }\n    li {\n      &:not(:last-child)::after {\n        content: \"/\";\n        margin: 0 10px;\n      }\n    }\n  }\n}\n.item-active {\n  .address-list-item-desc {\n    position: relative;\n    background-color: #fdfffa;\n    border: 1px solid #69b412;\n    &::after {\n      content: \"\";\n      border-top-right-radius: 3px;\n      border-width: 15px;\n      border-style: solid;\n      border-color: #69b412 #69b412 transparent transparent;\n      position: absolute;\n      right: 0px;\n      top: 0px;\n    }\n    &::before {\n      content: \"\";\n      position: absolute;\n      width: 7px;\n      height: 14px;\n      border-right: 2px solid #fff;\n      border-bottom: 2px solid #fff;\n      transform: rotate(40deg);\n      top: 0px;\n      right: 5px;\n      color: #fff;\n      font-size: 10px;\n      z-index: 999;\n      font-size: 16px;\n    }\n  }\n}\n",{"version":3,"sources":["address.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"address.vue","sourceRoot":"src/views/sale/orderList/child_lib","sourcesContent":["<template>\n  <a-row>\n    <div\n      class=\"address-list\"\n      v-for=\"(item,index) in addressList\"\n      :key=\"item.id\"\n      @click=\"choseAddress(index,item.id)\"\n    >\n      <div\n        class=\"address-list-item\"\n        :class=\"{'item-active':item.id ==addressId}\"\n        v-if=\"editInfo && item.id ==addressId && !editDetial\"\n      >\n        <div class=\"address-list-item-desc\">\n          {{ocustName}}\n          <ul>\n            <li>收件人：{{item.receiver}}</li>\n            <li>联系方式：{{item.phone}}</li>\n            <li>地址：{{item.cityAddress?item.cityAddress:''}}{{item.detailAddr}}</li>\n          </ul>\n        </div>\n      </div>\n      <div\n        class=\"address-list-item\"\n        :class=\"{'item-active':item.id ==addressId}\"\n        v-else-if=\"!editInfo || editDetial\"\n      >\n        <div class=\"address-list-item-desc\">\n          {{ocustName}}\n          <ul>\n            <li>收件人：{{item.receiver}}</li>\n            <li>联系方式：{{item.phone}}</li>\n            <li>地址：{{item.cityAddress?item.cityAddress:''}}{{item.detailAddr}}</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    <span class=\"editable-add-btn\" @click=\"addAddress\" v-show=\"!editInfo || editDetial\">+添加地址</span>\n    <a-modal v-model=\"visible\" title=\"添加地址\" :footer=\"null\">\n      <addAddress :custId=\"custId\" @addressCancel=\"addressCancel\"></addAddress>\n    </a-modal>\n  </a-row>\n</template>\n\n<script>\nimport addAddress from '../basic_lib/addAddress'\nimport { areas } from 'utils/area.js'\nimport { get } from '@/api/axios.js'\nimport api from '@/api/index.js'\nexport default {\n  props: {\n    ocustName: String,\n    custId: String,\n    editInfo: {\n      type: Boolean,\n      required: true,\n      default: false\n    },\n    editDetial: {\n      type: Boolean,\n      required: true,\n      default: false\n    },\n    addrId: String\n  },\n  components: {\n    addAddress\n  },\n  data() {\n    return {\n      addressList: [],\n      visible: false,\n      areas,\n      addressId: this.addrId\n    }\n  },\n  watch: {\n    custId(newVal) {\n      this.getAddressList(newVal)\n    },\n    deep: true\n  },\n  created() {\n    this.getAddressList(this.custId)\n  },\n  methods: {\n    // 地址添加\n    addAddress() {\n      if (this.custId !== '') {\n        this.visible = true\n      } else {\n        this.$message.warning('请先选择客户名称')\n      }\n    },\n    choseAddress(index, id) {\n      if (this.editInfo && !this.editDetial) {\n        return\n      }\n      const addressList = this.addressList\n      addressList.forEach(item => {\n        item.defaultGoodsAddr = 0\n      })\n      addressList[index].defaultGoodsAddr = 1\n      this.addressId = id\n      this.$emit('setAddressId', id)\n    },\n    // 关闭地址新增\n    addressCancel(data) {\n      if (data) {\n        this.getAddressList(this.custId)\n      }\n      this.visible = false\n    },\n    // 通过客户Id查询地址列表\n    getAddressList(id) {\n      get(api.getAddressList + `/${id}`).then(res => {\n        const data = res.data.data\n        if (data.length > 0) {\n          data.forEach(item => {\n            if (item.city !== null && item.province !== null && item.area !== null) {\n              item['cityAddress'] = this.getCPA(this.areas, [item.city, item.province, item.area], 0, [])\n            }\n          })\n        }\n        this.addressList = data\n      })\n    },\n    getCPA(data, code, i, cityAddress) {\n      data.forEach(item => {\n        if (item.id === code[i]) {\n          cityAddress.push(item.name)\n          if (item.childrens) {\n            this.getCPA(item.childrens, code, i + 1, cityAddress)\n          }\n        }\n      })\n      return cityAddress.join('')\n    }\n  }\n}\n</script>\n\n<style lang='less' scoped>\n.editable-add-btn {\n  cursor: pointer;\n  margin: 10px;\n  display: block;\n  line-height: 30px;\n  text-align: center;\n  border: 1px dashed #ccc;\n}\n.address-list-item {\n  cursor: pointer;\n  margin-bottom: 10px;\n  &-desc {\n    font-size: 14px;\n    color: #333333;\n    padding: 15px 20px;\n    border-radius: 4px;\n    background: #fafafa;\n    border: 1px solid #d8d8d8;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    ul {\n      display: flex;\n      margin-bottom: 0;\n    }\n    li {\n      &:not(:last-child)::after {\n        content: \"/\";\n        margin: 0 10px;\n      }\n    }\n  }\n}\n.item-active {\n  .address-list-item-desc {\n    position: relative;\n    background-color: #fdfffa;\n    border: 1px solid #69b412;\n    &::after {\n      content: \"\";\n      border-top-right-radius: 3px;\n      border-width: 15px;\n      border-style: solid;\n      border-color: #69b412 #69b412 transparent transparent;\n      position: absolute;\n      right: 0px;\n      top: 0px;\n    }\n    &::before {\n      content: \"\";\n      position: absolute;\n      width: 7px;\n      height: 14px;\n      border-right: 2px solid #fff;\n      border-bottom: 2px solid #fff;\n      transform: rotate(40deg);\n      top: 0px;\n      right: 5px;\n      color: #fff;\n      font-size: 10px;\n      z-index: 999;\n      font-size: 16px;\n    }\n  }\n}\n</style>\n"]}]}