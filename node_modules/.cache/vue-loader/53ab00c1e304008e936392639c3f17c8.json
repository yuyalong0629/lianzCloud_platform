{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/sale/orderList/Order.vue?vue&type=style&index=0&id=a7826f86&lang=less&scoped=true&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/sale/orderList/Order.vue","mtime":1557971448749},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/less-loader/dist/cjs.js","mtime":1556420627437},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import \"~styles/variable.less\";\n\n.inputWidth {\n  .inputWidth();\n}\n\n.order {\n  .order-add {\n    .order-remove {\n      margin: 0 20px;\n    }\n    .order-derive {\n      color: #6bc67b;\n      margin-right: 5px;\n    }\n    .delete-btn {\n      margin: 0 20px;\n      cursor: pointer;\n      .delete-icon {\n        color: #f00;\n        margin-right: 3px;\n      }\n    }\n  }\n  .order-select {\n    margin: 20px 0 0;\n    .order-select-reset {\n      margin: 0 8px;\n    }\n  }\n}\n.status-color {\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  // text-align: center\n}\n.status-green {\n  background-color: #6bc67b;\n}\n.status-gray {\n  background-color: #d8d8d8;\n}\n.status-red {\n  background-color: #f5222d;\n}\n.status-yellow {\n  background-color: yellow;\n}\n",{"version":3,"sources":["Order.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgtBA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Order.vue","sourceRoot":"src/views/sale/orderList","sourcesContent":["<template>\n  <div class=\"order\">\n    <!-- 头部选择区 -->\n    <div class=\"order-add\">\n      <a-button type=\"primary\" @click=\"addOrderList\" v-if=\"showAdd\">\n        <a-icon type=\"plus\"/>新建\n      </a-button>\n      <!-- 弹出层 -->\n      <a-drawer\n        destroyOnClose\n        placement=\"right\"\n        :closable=\"false\"\n        :width=\"1080\"\n        @close=\"onCustomerInfo\"\n        :visible=\"visible\"\n        :wrapStyle=\"{height: 'calc(100% - 108px)',overflow: 'auto',paddingBottom: '108px'}\"\n      >\n        <AddOrderList @isVisible=\"isVisible\" :ocustAmaldarList=\"ocustAmaldarList\"></AddOrderList>\n      </a-drawer>\n      <span v-show=\"showDelete\" class=\"delete-btn\" @click=\"deleteOrder\">\n        <a-icon class=\"delete-icon\" type=\"delete\"/>\n        <span>删除</span>\n      </span>\n      <!-- <a-dropdown>\n        <span>\n          <a-icon class=\"order-derive\" type=\"check-circle\"/>\n          <span>更多</span>\n        </span>\n        <a-menu slot=\"overlay\">\n          <a-menu-item key=\"0\">\n            <span>导入</span>\n          </a-menu-item>\n          <a-menu-item key=\"1\">\n            <span>导出</span>\n          </a-menu-item>\n        </a-menu>\n      </a-dropdown>-->\n    </div>\n    <div class=\"order-select\" v-if=\"showList\">\n      <a-form layout=\"horizontal\">\n        <a-row>\n          <a-col :span=\"22\">\n            <a-row>\n              <a-col :span=\"6\">\n                <a-form-item\n                  :label-col=\"formItemLayout.labelCol\"\n                  :wrapper-col=\"formItemLayout.wrapperCol\"\n                  label=\"订单编号\"\n                >\n                  <a-input\n                    class=\"inputWidth\"\n                    placeholder=\"请输入订单编号\"\n                    @change=\"(e)=>{inputChange(e.target.value,'oorderNumber')}\"\n                  />\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"6\">\n                <a-form-item\n                  :label-col=\"formItemLayout.labelCol\"\n                  :wrapper-col=\"formItemLayout.wrapperCol\"\n                  label=\"采购单号\"\n                >\n                  <a-input\n                    class=\"inputWidth\"\n                    placeholder=\"请输入客户采购单号\"\n                    @change=\"(e)=>{inputChange(e.target.value,'opurchaseOrderno')}\"\n                  />\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"6\">\n                <a-form-item\n                  :label-col=\"formItemLayout.labelCol\"\n                  :wrapper-col=\"formItemLayout.wrapperCol\"\n                  label=\"客户名称\"\n                >\n                  <a-select\n                    class=\"inputWidth\"\n                    showSearch\n                    :allowClear=\"true\"\n                    @change=\"(val)=>{inputChange(val,'ocustName')}\"\n                    placeholder=\"请输入客户名称\"\n                    @popupScroll=\"e=>currentPageChange(e,'customer')\"\n                    :getPopupContainer=\"triggerNode => triggerNode.parentNode\"\n                  >\n                    <a-select-option v-for=\"item in ocustNameList\" :key=\"item\">{{item}}</a-select-option>\n                  </a-select>\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"6\">\n                <a-form-item\n                  :label-col=\"formItemLayout.labelCol\"\n                  :wrapper-col=\"formItemLayout.wrapperCol\"\n                  label=\"客户编码\"\n                >\n                  <a-select\n                    class=\"inputWidth\"\n                    showSearch\n                    :allowClear=\"true\"\n                    @change=\"(val)=>{inputChange(val,'ocustCode')}\"\n                    placeholder=\"请输入客户编码\"\n                    @popupScroll=\"e=>currentPageChange(e,'customer')\"\n                    :getPopupContainer=\"triggerNode => triggerNode.parentNode\"\n                  >\n                    <a-select-option v-for=\"item in ocustCodeList\" :key=\"item\">{{item}}</a-select-option>\n                  </a-select>\n                </a-form-item>\n              </a-col>\n            </a-row>\n            <Animation name=\"fadeIn\">\n              <a-row v-if=\"advanced\">\n                <a-col :span=\"6\">\n                  <a-form-item\n                    :label-col=\"formItemLayout.labelCol\"\n                    :wrapper-col=\"formItemLayout.wrapperCol\"\n                    label=\"客户经理\"\n                  >\n                    <a-select\n                      class=\"inputWidth\"\n                      showSearch\n                      :allowClear=\"true\"\n                      @change=\"(val)=>{inputChange(val,'ocustAmaldar')}\"\n                      placeholder=\"请输入客户经理\"\n                      :getPopupContainer=\"triggerNode => triggerNode.parentNode\"\n                    >\n                      <a-select-option v-for=\"item in ocustAmaldarList\" :key=\"item\">{{item}}</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                </a-col>\n                <a-col :span=\"6\">\n                  <a-form-item\n                    :label-col=\"formItemLayout.labelCol\"\n                    :wrapper-col=\"formItemLayout.wrapperCol\"\n                    label=\"产品编码\"\n                  >\n                    <a-select\n                      class=\"inputWidth\"\n                      showSearch\n                      :allowClear=\"true\"\n                      @change=\"(val)=>{inputChange(val,'odSkuCode')}\"\n                      placeholder=\"请输入产品编码\"\n                      @popupScroll=\"e=>currentPageChange(e,'companyGoods')\"\n                      :getPopupContainer=\"triggerNode => triggerNode.parentNode\"\n                    >\n                      <a-select-option v-for=\"item in odSkuCodeList\" :key=\"item\">{{item}}</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                </a-col>\n                <a-col :span=\"6\">\n                  <a-form-item\n                    :label-col=\"formItemLayout.labelCol\"\n                    :wrapper-col=\"formItemLayout.wrapperCol\"\n                    label=\"产品规格\"\n                  >\n                    <a-select\n                      class=\"inputWidth\"\n                      showSearch\n                      :allowClear=\"true\"\n                      @change=\"(val)=>{inputChange(val,'odSpec')}\"\n                      placeholder=\"请输入产品规格\"\n                      @popupScroll=\"e=>currentPageChange(e,'companyGoods')\"\n                      :getPopupContainer=\"triggerNode => triggerNode.parentNode\"\n                    >\n                      <a-select-option v-for=\"item in odSpecList\" :key=\"item\">{{item}}</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                </a-col>\n                <a-col :span=\"6\">\n                  <a-form-item\n                    :label-col=\"formItemLayout.labelCol\"\n                    :wrapper-col=\"formItemLayout.wrapperCol\"\n                    label=\"订单来源\"\n                  >\n                    <a-select\n                      class=\"inputWidth\"\n                      placeholder=\"请选择订单来源\"\n                      @change=\"(val)=>{inputChange(val,'osource')}\"\n                      :getPopupContainer=\"triggerNode => triggerNode.parentNode\"\n                    >\n                      <a-select-option value=\"0\">线上商城</a-select-option>\n                      <a-select-option value=\"1\">线上定制</a-select-option>\n                      <a-select-option value=\"2\">线下定制</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                </a-col>\n                <a-col :span=\"6\">\n                  <a-form-item\n                    :label-col=\"formItemLayout.labelCol\"\n                    :wrapper-col=\"formItemLayout.wrapperCol\"\n                    label=\"订单状态\"\n                  >\n                    <a-select\n                      class=\"inputWidth\"\n                      placeholder=\"请选择订单状态\"\n                      @change=\"(val)=>{inputChange(val,'ostatus')}\"\n                      :getPopupContainer=\"triggerNode => triggerNode.parentNode\"\n                    >\n                      <a-select-option value=\"0\">预订单</a-select-option>\n                      <a-select-option value=\"1\">已提交</a-select-option>\n                      <a-select-option value=\"2\">已接单</a-select-option>\n                      <a-select-option value=\"3\">已拒单</a-select-option>\n                      <a-select-option value=\"4\">已完成</a-select-option>\n                      <a-select-option value=\"5\">已取消</a-select-option>\n                      <a-select-option value=\"6\">已经发货</a-select-option>\n                      <a-select-option value=\"7\">部分发货</a-select-option>\n                      <a-select-option value=\"8\">未发货</a-select-option>\n                      <a-select-option value=\"9\">已签收</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                </a-col>\n                <a-col :span=\"6\">\n                  <a-form-item\n                    :label-col=\"formItemLayout.labelCol\"\n                    :wrapper-col=\"formItemLayout.wrapperCol\"\n                    label=\"承诺交期\"\n                  >\n                    <a-date-picker\n                      class=\"inputWidth\"\n                      format=\"YYYY/MM/DD\"\n                      placeholder=\"请选择承诺交期\"\n                      @change=\"(date, dateString)=>{inputChange(dateString,'odPromiseDueDate')}\"\n                    />\n                  </a-form-item>\n                </a-col>\n                <!-- <a-form-item label=\"生产中心\">\n                    <a-select\n                      showSearch\n\n                      @change=\"(val)=>{inputChange(val,'oproductionBase')}\"\n                      placeholder=\"请输入生产中心\"\n                    >\n                      <a-select-option\n                        v-for=\"i in 25\"\n                        :key=\"(i + 9).toString(36) + i\"\n                      >{{(i + 9).toString(36) + i}}</a-select-option>\n                    </a-select>\n                </a-form-item>-->\n              </a-row>\n            </Animation>\n          </a-col>\n          <a-col :span=\"2\">\n            <a-form-item style=\"text-align:center\">\n              <span @click=\"toggleAdvanced\" style=\"cursor: pointer;\">\n                {{ advanced ? '收起' : '展开' }}\n                <a-icon :type=\"advanced ? 'caret-up' : 'caret-down'\"/>\n              </span>\n            </a-form-item>\n          </a-col>\n        </a-row>\n      </a-form>\n    </div>\n    <div class=\"order-table\">\n      <a-table\n        :columns=\"columns\"\n        @change=\"onChangePage\"\n        :dataSource=\"tabData\"\n        :pagination=\"pagination\"\n        :rowSelection=\"rowSelection\"\n        :loading=\"loading\"\n        :scroll=\"{ x: '190%',y:'' }\"\n      >\n        <template slot=\"oorderNumber\" slot-scope=\"text,record\">\n          <a href=\"javascript:;\" @click=\"goOrderDetail(record.id)\">{{text}}</a>\n        </template>\n        <template slot=\"osource\" slot-scope=\"text\">\n          <span v-if=\"text === 'MALLONLINE'\">线上商城</span>\n          <span v-if=\"text === 'CUSTOMIZEDONLINE'\">线上定制</span>\n          <span v-if=\"text === 'CUSTOMIZEDUNDERLINE'\">线下定制</span>\n        </template>\n        <template slot=\"ostatus\" slot-scope=\"text\">\n          <a\n            href=\"javascript:;\"\n            title=\"已接单\"\n            v-if=\"text === 'ACCEPTORDER'\"\n            class=\"status-color status-green\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"预订单\"\n            v-if=\"text === 'PREORDER'\"\n            class=\"status-color status-gray\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"已提交\"\n            v-if=\"text === 'SUBMISSIONORDER'\"\n            class=\"status-color status-gray\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"已拒单\"\n            v-if=\"text === 'REJECTORDER'\"\n            class=\"status-color status-red\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"已完成\"\n            v-if=\"text === 'FINISH'\"\n            class=\"status-color status-green\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"已取消\"\n            v-if=\"text === 'CANCEL'\"\n            class=\"status-color status-green\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"已经发货\"\n            v-if=\"text === 'HAVEDELLIVERY'\"\n            class=\"status-color status-green\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"部分发货\"\n            v-if=\"text === 'PARTDELLIVERY'\"\n            class=\"status-color status-green\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"未发货\"\n            v-if=\"text === 'UNDELLIVERY'\"\n            class=\"status-color status-green\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"已签收\"\n            v-if=\"text === 'ALREADYLIVERY'\"\n            class=\"status-color status-green\"\n          ></a>\n        </template>\n        <template\n          v-for=\"col in ['odSkuCode', 'odSkuName', 'odSpec','taxRate','price', 'odNumber', 'odAmount', 'odRequireDueDate','odPromiseDueDate','ofigureNumber','orderplacingTime']\"\n          :slot=\"col\"\n          slot-scope=\"text, record\"\n        >\n          <template v-if=\"col === 'odSkuCode'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span>{{record.skuList[index].odSkuCode}}</span>\n            </div>\n          </template>\n          <template v-if=\"col === 'odSkuName'\">\n            <div\n              v-for=\"(item,index) in record.skuList\"\n              :key=\"index\"\n            >{{record.skuList[index].odSkuName}}</div>\n          </template>\n          <template v-if=\"col === 'odSpec'\">\n            <div\n              v-for=\"(item,index) in record.skuList\"\n              :key=\"index\"\n            >{{record.skuList[index].odSpec}}</div>\n          </template>\n          <template v-if=\"col === 'taxRate'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span v-if=\"record.skuList[index].sku\">{{record.skuList[index].sku.taxRate}}</span>\n            </div>\n          </template>\n          <template v-if=\"col === 'price'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span v-if=\"record.skuList[index].sku\">{{record.skuList[index].sku.price}}</span>\n            </div>\n          </template>\n          <template v-if=\"col === 'odNumber'\">\n            <div\n              v-for=\"(item,index) in record.skuList\"\n              :key=\"index\"\n            >{{record.skuList[index].odNumber}}</div>\n          </template>\n          <template v-if=\"col === 'odAmount'\">\n            <div\n              v-for=\"(item,index) in record.skuList\"\n              :key=\"index\"\n            >{{record.skuList[index].odAmount}}</div>\n          </template>\n          <template v-if=\"col === 'odRequireDueDate'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span\n                v-if=\"record.skuList[index].odRequireDueDate\"\n              >{{record.skuList[index].odRequireDueDate | formatDate}}</span>\n              <span v-else></span>\n            </div>\n          </template>\n          <template v-if=\"col === 'odPromiseDueDate'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span\n                v-if=\"record.skuList[index].odPromiseDueDate\"\n              >{{record.skuList[index].odPromiseDueDate | formatDate}}</span>\n              <span v-else></span>\n            </div>\n          </template>\n          <!-- <template v-if=\"col === 'ofigureNumber'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">{{record.skuList[index].odOrderplacingTime}}</div>\n          </template>-->\n          <template v-if=\"col === 'orderplacingTime'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span\n                v-if=\"record.skuList[index].odOrderplacingTime\"\n              >{{record.skuList[index].odOrderplacingTime | formatDate}}</span>\n              <span v-else></span>\n            </div>\n          </template>\n        </template>\n      </a-table>\n    </div>\n\n    <a-drawer\n      destroyOnClose\n      placement=\"right\"\n      :closable=\"false\"\n      :width=\"1080\"\n      @close=\"onDetial\"\n      :visible=\"detial\"\n      :wrapStyle=\"{overflow: 'auto',paddingBottom: '108px'}\"\n    >\n      <OrderDetial\n        @orderDetialInfo=\"orderDetialInfo\"\n        :detialList=\"detialList\"\n        :ocustAmaldarList=\"ocustAmaldarList\"\n      ></OrderDetial>\n    </a-drawer>\n  </div>\n</template>\n\n<script>\nimport Animation from \"@/assets/common/Animation\";\nimport { postJson, get, deleted } from \"@/api/axios.js\";\nimport api from \"@/api/index.js\";\nimport AddOrderList from \"./addOrderList.vue\";\nimport OrderDetial from \"./orderDetial\";\nimport {\n  getListCompanyGoods,\n  getCompanyAllUsers,\n  getListCompanyCusts\n} from \"./menu.js\";\nimport { columns } from './orderColumns';\nconst formItemLayout = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 18 }\n}\nexport default {\n  components: {\n    Animation,\n    AddOrderList,\n    OrderDetial\n  },\n  data() {\n    return {\n      formItemLayout,\n      advanced: false,\n      showList: false, // 列表显示和搜索\n      showAdd: false, // 新建显示\n      showDelete: false, // 批量删除显示\n      pagination: {\n        total: 0,\n        defaultPageSize: 15,\n        defaultCurrent: 1,\n        showQuickJumper: true,\n        hideOnSinglePage: true\n      },\n      columns,\n      tabData: [],\n      selectedRowKeys: [],\n      selectedRows: [],\n      loading: true,\n      orderEncapsulation: {\n        ocustAmaldar: \"\", // 客户经理\n        ocustCode: \"\", // 客户编码\n        ocustName: \"\", // 客户名称\n        odPromiseDueDate: \"\", // 承诺时间\n        odSkuCode: \"\", // 商品编号\n        odSpec: \"\", // 商品规格\n        oorderNumber: \"\", // 订单编号\n        oproductionBase: \"\", // 生产基地\n        odPurchaseOrderno: \"\", // 采购单号\n        osource: 0, // 订单来源\n        ostatus: 0 // 订单状态\n      },\n      visible: false,\n      detial: false,\n      detialList: \"\",\n      customerPage: 1, // 客户名称&&客户编码 搜索分页\n      companyGoods: 1, // 产品编码&&产品规格 搜索分页\n      ocustNameList: [], // 客户名称\n      ocustCodeList: [], // 客户编码\n      ocustAmaldarList: [], //客户经理\n      odSkuCodeList: [], // 产品编码\n      odSpecList: [], // 产品规格\n      buttons: [] // 页面显示的按钮\n    };\n  },\n  created() {\n    this.getFunctionPage()\n    getListCompanyGoods.call(this, this.companyGoods)\n    getCompanyAllUsers.call(this)\n    getListCompanyCusts.call(this, this.customerPage)\n  },\n  computed: {\n    rowSelection() {\n      const { selectedRowKeys } = this;\n      return {\n        selectedRowKeys,\n        onChange: this.onChangeTab,\n        hideDefaultSelections: false\n      };\n    },\n    funcIdArray() {\n      return this.$store.state.funcIdArray\n    }\n  },\n  watch: {\n    visible(newVal, oldVal) {\n      if (!newVal) {\n        this.getOrderList();\n      }\n    },\n    funcIdArray(newVal, oldVal) {\n      this.getFunctionPage(newVal);\n    }\n  },\n  methods: {\n    toggleAdvanced() {\n      this.advanced = !this.advanced;\n    },\n    // 翻页时触发\n    onChangePage(pagination, filters, sorter) {\n      this.getOrderList(pagination.current);\n    },\n    // 获取列表数据\n    getOrderList(currentPage = 1, pageSize = 15) {\n      let timeout\n      let _this = this\n      this.loading = true;\n      if (timeout) {\n        clearTimeout(timeout)\n        timeout = null\n      } else {\n        timeout = setTimeout(() => {\n          postJson(\n            api.getOrderList + `${currentPage}/${pageSize}`,\n            _this.orderEncapsulation\n          ).then(res => {\n            if (res.data.code === 0) {\n              if (res.data.data.records) {\n                _this.tabData = res.data.data.records;\n                _this.tabData.forEach((item, index) => {\n                  item.key = index;\n                });\n              } else {\n                _this.tabData = []\n              }\n              _this.pagination.total = res.data.data.total;\n            }\n            _this.loading = false;\n            _this.selectedRowKeys = [];\n          });\n        }, 500)\n      }\n    },\n    // 关闭新建订单抽屉\n    isVisible(isVisible) {\n      this.visible = isVisible;\n      this.getOrderList()\n    },\n    // 关闭订单详情抽屉\n    orderDetialInfo(status) {\n      this.detial = status\n      this.getOrderList()\n    },\n    // 关闭新建订单抽屉\n    onCustomerInfo() {\n      this.visible = false;\n    },\n    // 关闭订单详情抽屉\n    onDetial() {\n      this.detial = false;\n    },\n    // 打开新建订单抽屉\n    addOrderList() {\n      this.visible = true;\n    },\n    // 打开订单详情抽屉\n    goOrderDetail(id) {\n      this.detialList = id;\n      this.detial = true;\n    },\n    // 搜索\n    inputChange(val, type) {\n      switch (type) {\n        case \"oorderNumber\":\n          this.orderEncapsulation.oorderNumber = val;\n          this.getOrderList();\n          break;\n        case \"opurchaseOrderno\":\n          this.orderEncapsulation.opurchaseOrderno = val;\n          this.getOrderList();\n          break;\n        case \"ocustName\":\n          this.orderEncapsulation.ocustName = val;\n          this.getOrderList();\n          break;\n        case \"ocustCode\":\n          this.orderEncapsulation.ocustCode = val;\n          this.getOrderList();\n          break;\n        case \"ocustAmaldar\":\n          this.orderEncapsulation.ocustAmaldar = val;\n          this.getOrderList();\n          break;\n        case \"odSkuCode\":\n          this.orderEncapsulation.odSkuCode = val;\n          this.getOrderList();\n          break;\n        case \"odSpec\":\n          this.orderEncapsulation.odSpec = val;\n          this.getOrderList();\n          break;\n        case \"osource\":\n          this.onChangePage.osource = val;\n          this.getOrderList();\n          break;\n        case \"ostatus\":\n          this.orderEncapsulation.ostatus = val;\n          this.getOrderList();\n          break;\n        case \"odPromiseDueDate\":\n          this.orderEncapsulation.odPromiseDueDate = val;\n          this.getOrderList();\n          break;\n        case \"oproductionBase\":\n          this.orderEncapsulation.oproductionBase = val;\n          this.getOrderList();\n          break;\n        default:\n          this.getOrderList();\n          break;\n      }\n    },\n    onChangeTab(selectedRowKeys, selectedRows) {\n      this.selectedRowKeys = selectedRowKeys;\n      this.selectedRows = selectedRows\n    },\n    // 订单的批量删除\n    deleteOrder() {\n      var selectedRowKeys = this.selectedRowKeys\n      var selectedRows = this.selectedRows\n      var idStr = []\n      var _this = this\n      if (selectedRowKeys.length === 0) {\n        this.$message.error('请选择要删除的订单')\n        return\n      } else {\n        selectedRows.forEach((item, index) => {\n          idStr.push(item.id)\n        })\n        this.$confirm({\n          title: \"您确定要删除订单信息吗？\",\n          content: \"当您点击确定过后将删除选中的订单信息\",\n          cancelText: \"取消\",\n          okText: \"确定\",\n          onOk() {\n            deleted(api.deletedBatch + `?idStr=${idStr.join(',')}`).then(res => {\n              if (res.data.code === 0) {\n                _this.$message.success('删除成功')\n                _this.getOrderList()\n              }\n            })\n          },\n          onCancel() { }\n        });\n      }\n    },\n    // 获取允许的操作和页面自定义的布局\n    getFunctionPage(val) {\n      var data = {}\n      data.funcId = val || this.funcIdArray\n      data.pageType = 'LIST'\n      get(api.functionPage, data).then(res => {\n        if (res.data.code === 0) {\n          var buttons = res.data.data.buttons\n          buttons.forEach((item, index) => {\n            this.loading = false;\n            if (item.btnOptType === 'LIST') {\n              this.getOrderList()\n              this.showList = true\n            }\n            if (item.btnOptType === 'ADD') {\n              this.showAdd = true\n            }\n            if (item.btnOptType === 'DELETES') {\n              this.showDelete = true\n            }\n          })\n          this.buttons = buttons\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      })\n    },\n    // 选择框下来状态\n    currentPageChange(e, type) {\n      const boxHeigth = e.target.scrollHeight - 1\n      const box = {\n        scrollTop: e.target.scrollTop,\n      }\n      if (parseFloat(getComputedStyle(document.querySelector('.ant-select-dropdown-content')).height) + box.scrollTop > boxHeigth) {\n        switch (type) {\n          case 'customer':\n            getListCompanyCusts.call(this, this.customerPage)\n            break;\n          case 'companyGoods':\n            getListCompanyGoods.call(this, this.companyGoods)\n            break\n        }\n      }\n    }\n  }\n};\n</script>\n\n<style lang='less' scoped>\n@import \"~styles/variable.less\";\n\n.inputWidth {\n  .inputWidth();\n}\n\n.order {\n  .order-add {\n    .order-remove {\n      margin: 0 20px;\n    }\n    .order-derive {\n      color: #6bc67b;\n      margin-right: 5px;\n    }\n    .delete-btn {\n      margin: 0 20px;\n      cursor: pointer;\n      .delete-icon {\n        color: #f00;\n        margin-right: 3px;\n      }\n    }\n  }\n  .order-select {\n    margin: 20px 0 0;\n    .order-select-reset {\n      margin: 0 8px;\n    }\n  }\n}\n.status-color {\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  // text-align: center\n}\n.status-green {\n  background-color: #6bc67b;\n}\n.status-gray {\n  background-color: #d8d8d8;\n}\n.status-red {\n  background-color: #f5222d;\n}\n.status-yellow {\n  background-color: yellow;\n}\n</style>\n\n<style>\n.ant-form-item {\n  margin-bottom: 8px;\n}\n</style>\n"]}]}