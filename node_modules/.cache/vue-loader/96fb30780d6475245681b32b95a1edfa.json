{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/sale/orderList/Order.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/sale/orderList/Order.vue","mtime":1556540711864},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Animation from \"@/assets/utils/Animation\";\nimport { postJson, get } from \"@/api/axios.js\";\nimport api from \"@/api/index.js\";\nimport AddOrderList from \"./addOrderList.vue\";\nimport OrderDetial from \"./orderDetial\";\nimport {\n  getListCompanyGoods,\n  getCompanyAllUsers,\n  getListCompanyCusts\n} from \"./menu.js\";\nconst columns = [\n  {\n    title: \"订单编码\",\n    dataIndex: \"oorderNumber\",\n    scopedSlots: { customRender: \"oorderNumber\" },\n    fixed: \"left\"\n  },\n  {\n    title: \"采购单号\",\n    dataIndex: \"opurchaseOrderno\"\n  },\n  {\n    title: \"客户简称\",\n    dataIndex: \"ocustShortName\"\n  },\n  {\n    title: \"净价总计(元)\",\n    dataIndex: \"ototalNetPrice\"\n  },\n  {\n    title: \"销售总价(元)\",\n    dataIndex: \"ototalPrice\"\n  },\n  {\n    title: \"订单总计(元)\",\n    dataIndex: \"ototalSum\"\n  },\n  {\n    title: \"回款金额(元)\",\n    dataIndex: \"oprePayment\"\n  },\n  {\n    title: \"生产基地\",\n    dataIndex: \"oproductionBase\"\n  },\n  {\n    title: \"客户经理\",\n    dataIndex: \"ocustAmaldar\"\n  },\n  {\n    title: \"客户编码\",\n    dataIndex: \"ocustCode\"\n  },\n  {\n    title: \"状态来源\",\n    dataIndex: \"osource\",\n    scopedSlots: { customRender: \"osource\" }\n  },\n  {\n    title: \"状态\",\n    dataIndex: \"ostatus\",\n    scopedSlots: { customRender: \"ostatus\" }\n  },\n  {\n    title: \"产品编码\",\n    dataIndex: \"odSkuCode\",\n    scopedSlots: { customRender: \"odSkuCode\" }\n  },\n  {\n    title: \"产品名称\",\n    dataIndex: \"odSkuName\",\n    scopedSlots: { customRender: \"odSkuName\" }\n  },\n  {\n    title: \"产品规格\",\n    dataIndex: \"odSpec\",\n    scopedSlots: { customRender: \"odSpec\" }\n  },\n  {\n    title: \"税率(%)\",\n    dataIndex: \"taxRate\",\n    scopedSlots: { customRender: \"taxRate\" }\n  },\n  {\n    title: \"单价(元)\",\n    dataIndex: \"price\",\n    scopedSlots: { customRender: \"price\" }\n  },\n  {\n    title: \"订单数量\",\n    dataIndex: \"odNumber\",\n    scopedSlots: { customRender: \"odNumber\" }\n  },\n  {\n    title: \"订单总计(元)\",\n    dataIndex: \"odAmount\",\n    scopedSlots: { customRender: \"odAmount\" }\n  },\n  {\n    title: \"要求交期\",\n    dataIndex: \"odRequireDueDate\",\n    scopedSlots: { customRender: \"odRequireDueDate\" }\n  },\n  {\n    title: \"承诺交期\",\n    dataIndex: \"odPromiseDueDate\",\n    scopedSlots: { customRender: \"odPromiseDueDate\" }\n  },\n  {\n    title: \"客户图号\",\n    dataIndex: \"ofigureNumber\",\n    scopedSlots: { customRender: \"ofigureNumber\" }\n  },\n  {\n    title: \"订单日期\",\n    dataIndex: \"orderplacingTime\",\n    scopedSlots: { customRender: \"orderplacingTime\" }\n  }\n  // {\n  //   title: \"工厂厂长\",\n  //   dataIndex: \"\"\n  // },\n  // {\n  //   title: \"备注\",\n  //   dataIndex: \"\"\n  // }\n];\nexport default {\n  components: {\n    Animation,\n    AddOrderList,\n    OrderDetial\n  },\n  data() {\n    return {\n      advanced: false,\n      // 地域data\n      options: [\n        {\n          value: \"zhejiang\",\n          label: \"Zhejiang\",\n          children: [\n            {\n              value: \"hangzhou\",\n              label: \"Hangzhou\",\n              children: [\n                {\n                  value: \"xihu\",\n                  label: \"West Lake\"\n                }\n              ]\n            }\n          ]\n        },\n        {\n          value: \"jiangsu\",\n          label: \"Jiangsu\",\n          children: [\n            {\n              value: \"nanjing\",\n              label: \"Nanjing\",\n              children: [\n                {\n                  value: \"zhonghuamen\",\n                  label: \"Zhong Hua Men\"\n                }\n              ]\n            }\n          ]\n        }\n      ],\n      pagination: {\n        total: 0,\n        defaultPageSize: 10,\n        defaultCurrent: 1\n      },\n      columns,\n      tabData: [],\n      selectedRowKeys: [],\n      loading: true,\n      orderEncapsulation: {\n        ocustAmaldar: \"\", // 客户经理\n        ocustCode: \"\", // 客户编码\n        ocustName: \"\", // 客户名称\n        odPromiseDueDate: \"\", // 承诺时间\n        odSkuCode: \"\", // 商品编号\n        odSpec: \"\", // 商品规格\n        oorderNumber: \"\", // 订单编号\n        oproductionBase: \"\", // 生产基地\n        odPurchaseOrderno: \"\", // 采购单号\n        osource: 0, // 订单来源\n        ostatus: 0 // 订单状态\n      },\n      visible: false,\n      detial: false,\n      detialList: \"\",\n      ocustNameList: [], // 客户名称\n      ocustCodeList: [], // 客户编码\n      ocustAmaldarList: [], //客户经理\n      odSkuCodeList: [], // 产品编码\n      odSpecList: [] // 产品规格\n    };\n  },\n  created() {\n    this.getOrderList();\n    getListCompanyGoods.call(this);\n    getCompanyAllUsers.call(this);\n    getListCompanyCusts.call(this);\n  },\n  computed: {\n    rowSelection() {\n      const { selectedRowKeys } = this;\n      return {\n        selectedRowKeys,\n        onChange: this.onChangeTab,\n        hideDefaultSelections: false\n      };\n    }\n  },\n  watch: {\n    visible(newVal, oldVal) {\n      if (!newVal) {\n        this.getOrderList();\n      }\n    }\n  },\n  methods: {\n    toggleAdvanced() {\n      this.advanced = !this.advanced;\n    },\n    onChangePage(pagination, filters, sorter) {\n      this.getOrderList(pagination.current);\n    },\n    getOrderList(currentPage = 1, pageSize = 10) {\n      this.loading = true;\n      postJson(\n        api.getOrderList + `${currentPage}/${pageSize}`,\n        this.orderEncapsulation\n      ).then(res => {\n        if (res.data.data.records) {\n          this.tabData = res.data.data.records;\n          this.tabData.forEach((item, index) => {\n            item.key = index;\n          });\n        }\n        this.pagination.total = res.data.data.total;\n        this.loading = false;\n        this.selectedRowKeys = [];\n      });\n    },\n    isVisible(isVisible) {\n      this.visible = isVisible;\n    },\n    orderDetialInfo(status){\n      this.detial= status\n    },\n    onCustomerInfo() {\n      this.visible = false;\n    },\n    onDetial() {\n      this.detial = false;\n    },\n    addOrderList() {\n      this.visible = true;\n    },\n    goOrderDetail(id) {\n      this.detialList = id;\n      this.detial = true;\n    },\n    inputChange(val, type) {\n      switch (type) {\n        case \"oorderNumber\":\n          this.orderEncapsulation.oorderNumber = val;\n          this.getOrderList();\n          break;\n        case \"opurchaseOrderno\":\n          this.orderEncapsulation.opurchaseOrderno = val;\n          this.getOrderList();\n          break;\n        case \"ocustName\":\n          this.orderEncapsulation.ocustName = this.ocustNameList[val];\n          this.getOrderList();\n          break;\n        case \"ocustCode\":\n          this.orderEncapsulation.ocustCode = val;\n          this.getOrderList();\n          break;\n        case \"ocustAmaldar\":\n          this.orderEncapsulation.ocustAmaldar = val;\n          this.getOrderList();\n          break;\n        case \"odSkuCode\":\n          this.orderEncapsulation.odSkuCode = val;\n          this.getOrderList();\n          break;\n        case \"odSpec\":\n          this.orderEncapsulation.odSpec = val;\n          this.getOrderList();\n          break;\n        case \"osource\":\n          this.onChangePage.osource = val;\n          this.getOrderList();\n          break;\n        case \"ostatus\":\n          this.orderEncapsulation.ostatus = val;\n          this.getOrderList();\n          break;\n        case \"odPromiseDueDate\":\n          this.orderEncapsulation.odPromiseDueDate = val;\n          this.getOrderList();\n          break;\n        case \"oproductionBase\":\n          this.orderEncapsulation.oproductionBase = val;\n          this.getOrderList();\n          break;\n        default:\n          this.getOrderList();\n          break;\n      }\n    },\n    onChangeTab(selectedRowKeys, selectedRows) {\n      console.log(selectedRowKeys, selectedRows);\n      this.selectedRowKeys = selectedRowKeys;\n    }\n  }\n};\n",{"version":3,"sources":["Order.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Order.vue","sourceRoot":"src/views/sale/orderList","sourcesContent":["<template>\n  <div class=\"order\">\n    <!-- 头部选择区 -->\n    <div class=\"order-add\">\n      <a-button type=\"primary\" @click=\"addOrderList\">\n        <a-icon type=\"plus\"/>新建\n      </a-button>\n      <!-- 弹出层 -->\n      <a-drawer\n        destroyOnClose\n        placement=\"right\"\n        :closable=\"false\"\n        :width=\"1300\"\n        @close=\"onCustomerInfo\"\n        :visible=\"visible\"\n      >\n        <AddOrderList @isVisible=\"isVisible\" :ocustAmaldarList=\"ocustAmaldarList\"></AddOrderList>\n      </a-drawer>\n      <a-button type=\"danger\" class=\"order-remove\">\n        <a-icon type=\"delete\"/>删除\n      </a-button>\n      <a-dropdown>\n        <span>\n          <a-icon class=\"order-derive\" type=\"check-circle\"/>\n          <span>更多</span>\n        </span>\n        <a-menu slot=\"overlay\">\n          <a-menu-item key=\"0\">\n            <span>导入</span>\n          </a-menu-item>\n          <a-menu-item key=\"1\">\n            <span>导出</span>\n          </a-menu-item>\n        </a-menu>\n      </a-dropdown>\n    </div>\n    <div class=\"order-select\">\n      <a-form layout=\"inline\">\n        <a-row>\n          <a-col :span=\"18\">\n            <a-row>\n              <a-col :span=\"24\">\n                <a-form-item label=\"订单编号\">\n                  <a-input\n                    placeholder=\"请输入订单编号\"\n                    style=\"width: 200px\"\n                    @change=\"(e)=>{inputChange(e.target.value,'oorderNumber')}\"\n                  />\n                </a-form-item>\n                <a-form-item label=\"采购单号\">\n                  <a-input\n                    placeholder=\"请输入客户采购单号\"\n                    style=\"width: 200px\"\n                    @change=\"(e)=>{inputChange(e.target.value,'opurchaseOrderno')}\"\n                  />\n                </a-form-item>\n                <a-form-item label=\"客户名称\">\n                  <a-select\n                    showSearch\n                    style=\"width: 200px\"\n                    @change=\"(val)=>{inputChange(val,'ocustName')}\"\n                    placeholder=\"请输入客户名称\"\n                  >\n                    <a-select-option v-for=\"(item,index) in ocustNameList\" :key=\"index\">{{item}}</a-select-option>\n                  </a-select>\n                </a-form-item>\n                <a-form-item label=\"客户编码\">\n                  <a-select\n                    showSearch\n                    style=\"width: 200px\"\n                    @change=\"(val)=>{inputChange(val,'ocustCode')}\"\n                    placeholder=\"请输入客户编码\"\n                  >\n                    <a-select-option v-for=\"item in ocustCodeList\" :key=\"item\">{{item}}</a-select-option>\n                  </a-select>\n                </a-form-item>\n              </a-col>\n            </a-row>\n            <Animation name=\"fadeIn\">\n              <a-row v-if=\"advanced\">\n                <a-col :span=\"24\">\n                  <a-form-item label=\"客户经理\">\n                    <a-select\n                      showSearch\n                      style=\"width: 200px\"\n                      @change=\"(val)=>{inputChange(val,'ocustAmaldar')}\"\n                      placeholder=\"请输入客户经理\"\n                    >\n                      <a-select-option v-for=\"item in ocustAmaldarList\" :key=\"item\">{{item}}</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                  <a-form-item label=\"产品编码\">\n                    <a-select\n                      showSearch\n                      style=\"width: 200px\"\n                      @change=\"(val)=>{inputChange(val,'odSkuCode')}\"\n                      placeholder=\"请输入产品编码\"\n                    >\n                      <a-select-option v-for=\"item in odSkuCodeList\" :key=\"item\">{{item}}</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                  <a-form-item label=\"产品规格\">\n                    <a-select\n                      showSearch\n                      style=\"width: 200px\"\n                      @change=\"(val)=>{inputChange(val,'odSpec')}\"\n                      placeholder=\"请输入产品规格\"\n                    >\n                      <a-select-option v-for=\"item in odSpecList\" :key=\"item\">{{item}}</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                  <a-form-item label=\"订单来源\">\n                    <a-select\n                      placeholder=\"请选择订单来源\"\n                      style=\"width: 200px\"\n                      @change=\"(val)=>{inputChange(val,'osource')}\"\n                    >\n                      <a-select-option value=\"0\">线上商城</a-select-option>\n                      <a-select-option value=\"1\">线上定制</a-select-option>\n                      <a-select-option value=\"2\">线下定制</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                  <a-form-item label=\"订单状态\">\n                    <a-select\n                      placeholder=\"请选择订单状态\"\n                      style=\"width: 200px\"\n                      @change=\"(val)=>{inputChange(val,'ostatus')}\"\n                    >\n                      <a-select-option value=\"0\">预订单</a-select-option>\n                      <a-select-option value=\"1\">已提交</a-select-option>\n                      <a-select-option value=\"2\">已接单</a-select-option>\n                      <a-select-option value=\"3\">已拒单</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                  <a-form-item label=\"承诺交期\">\n                    <a-date-picker\n                      format=\"YYYY/MM/DD\"\n                      placeholder=\"请选择承诺交期\"\n                      @change=\"(date, dateString)=>{inputChange(dateString,'odPromiseDueDate')}\"\n                      style=\"width: 200px\"\n                    />\n                  </a-form-item>\n                  <!-- <a-form-item label=\"生产中心\">\n                    <a-select\n                      showSearch\n                      style=\"width: 200px\"\n                      @change=\"(val)=>{inputChange(val,'oproductionBase')}\"\n                      placeholder=\"请输入生产中心\"\n                    >\n                      <a-select-option\n                        v-for=\"i in 25\"\n                        :key=\"(i + 9).toString(36) + i\"\n                      >{{(i + 9).toString(36) + i}}</a-select-option>\n                    </a-select>\n                  </a-form-item>-->\n                </a-col>\n              </a-row>\n            </Animation>\n          </a-col>\n          <a-col :span=\"6\">\n            <a-form-item>\n              <a-button type=\"primary\" class=\"order-select-reset\">查询</a-button>\n              <a-button size=\"small\" @click=\"toggleAdvanced\">\n                <a-icon :type=\"advanced ? 'up' : 'down'\"/>\n                {{ advanced ? '收起' : '展开' }}\n              </a-button>\n            </a-form-item>\n          </a-col>\n        </a-row>\n      </a-form>\n    </div>\n    <div class=\"order-table\">\n      <a-table\n        :columns=\"columns\"\n        @change=\"onChangePage\"\n        :dataSource=\"tabData\"\n        :pagination=\"pagination\"\n        :rowSelection=\"rowSelection\"\n        :loading=\"loading\"\n        :scroll=\"{ x: '200%',y:'' }\"\n      >\n        <template slot=\"oorderNumber\" slot-scope=\"text,record\">\n          <a href=\"javascript:;\" @click=\"goOrderDetail(record.id)\">{{text}}</a>\n        </template>\n        <template slot=\"osource\" slot-scope=\"text\">\n          <span v-if=\"text === 'MALLONLINE'\">线上商城</span>\n          <span v-if=\"text === 'CUSTOMIZEDONLINE'\">线上定制</span>\n          <span v-if=\"text === 'CUSTOMIZEDUNDERLINE'\">线下定制</span>\n        </template>\n        <template slot=\"ostatus\" slot-scope=\"text\">\n          <span v-if=\"text === 'PREORDER'\">预订单</span>\n          <span v-if=\"text === 'SUBMISSIONORDER'\">已提交</span>\n          <span v-if=\"text === 'ACCEPTORDER'\">已接单</span>\n          <span v-if=\"text === 'REJECTORDER'\">已拒单</span>\n        </template>\n        <template\n          v-for=\"col in ['odSkuCode', 'odSkuName', 'odSpec','taxRate','price', 'odNumber', 'odAmount', 'odRequireDueDate','odPromiseDueDate','ofigureNumber','orderplacingTime']\"\n          :slot=\"col\"\n          slot-scope=\"text, record\"\n        >\n          <template v-if=\"col === 'odSkuCode'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <a href>{{record.skuList[index].odSkuCode}}</a>\n            </div>\n          </template>\n          <template v-if=\"col === 'odSkuName'\">\n            <div\n              v-for=\"(item,index) in record.skuList\"\n              :key=\"index\"\n            >{{record.skuList[index].odSkuName}}</div>\n          </template>\n          <template v-if=\"col === 'odSpec'\">\n            <div\n              v-for=\"(item,index) in record.skuList\"\n              :key=\"index\"\n            >{{record.skuList[index].odSpec}}</div>\n          </template>\n          <template v-if=\"col === 'taxRate'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span v-if=\"record.skuList[index].sku\">{{record.skuList[index].sku.taxRate}}</span>\n            </div>\n          </template>\n          <template v-if=\"col === 'price'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span v-if=\"record.skuList[index].sku\">{{record.skuList[index].sku.price}}</span>\n            </div>\n          </template>\n          <template v-if=\"col === 'odNumber'\">\n            <div\n              v-for=\"(item,index) in record.skuList\"\n              :key=\"index\"\n            >{{record.skuList[index].odNumber}}</div>\n          </template>\n          <template v-if=\"col === 'odAmount'\">\n            <div\n              v-for=\"(item,index) in record.skuList\"\n              :key=\"index\"\n            >{{record.skuList[index].odAmount}}</div>\n          </template>\n          <template v-if=\"col === 'odRequireDueDate'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span\n                v-if=\"record.skuList[index].odRequireDueDate\"\n              >{{record.skuList[index].odRequireDueDate | formatDate}}</span>\n              <span v-else></span>\n            </div>\n          </template>\n          <template v-if=\"col === 'odPromiseDueDate'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span\n                v-if=\"record.skuList[index].odPromiseDueDate\"\n              >{{record.skuList[index].odPromiseDueDate | formatDate}}</span>\n              <span v-else></span>\n            </div>\n          </template>\n          <!-- <template v-if=\"col === 'ofigureNumber'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">{{record.skuList[index].odOrderplacingTime}}</div>\n          </template>-->\n          <template v-if=\"col === 'orderplacingTime'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span\n                v-if=\"record.skuList[index].odOrderplacingTime\"\n              >{{record.skuList[index].odOrderplacingTime | formatDate}}</span>\n              <span v-else></span>\n            </div>\n          </template>\n        </template>\n      </a-table>\n    </div>\n\n    <a-drawer\n      destroyOnClose\n      placement=\"right\"\n      :closable=\"false\"\n      :width=\"1300\"\n      @close=\"onDetial\"\n      :visible=\"detial\"\n    >\n      <OrderDetial @orderDetialInfo=\"orderDetialInfo\" :detialList=\"detialList\" :ocustAmaldarList=\"ocustAmaldarList\"></OrderDetial>\n    </a-drawer>\n  </div>\n</template>\n\n<script>\nimport Animation from \"@/assets/utils/Animation\";\nimport { postJson, get } from \"@/api/axios.js\";\nimport api from \"@/api/index.js\";\nimport AddOrderList from \"./addOrderList.vue\";\nimport OrderDetial from \"./orderDetial\";\nimport {\n  getListCompanyGoods,\n  getCompanyAllUsers,\n  getListCompanyCusts\n} from \"./menu.js\";\nconst columns = [\n  {\n    title: \"订单编码\",\n    dataIndex: \"oorderNumber\",\n    scopedSlots: { customRender: \"oorderNumber\" },\n    fixed: \"left\"\n  },\n  {\n    title: \"采购单号\",\n    dataIndex: \"opurchaseOrderno\"\n  },\n  {\n    title: \"客户简称\",\n    dataIndex: \"ocustShortName\"\n  },\n  {\n    title: \"净价总计(元)\",\n    dataIndex: \"ototalNetPrice\"\n  },\n  {\n    title: \"销售总价(元)\",\n    dataIndex: \"ototalPrice\"\n  },\n  {\n    title: \"订单总计(元)\",\n    dataIndex: \"ototalSum\"\n  },\n  {\n    title: \"回款金额(元)\",\n    dataIndex: \"oprePayment\"\n  },\n  {\n    title: \"生产基地\",\n    dataIndex: \"oproductionBase\"\n  },\n  {\n    title: \"客户经理\",\n    dataIndex: \"ocustAmaldar\"\n  },\n  {\n    title: \"客户编码\",\n    dataIndex: \"ocustCode\"\n  },\n  {\n    title: \"状态来源\",\n    dataIndex: \"osource\",\n    scopedSlots: { customRender: \"osource\" }\n  },\n  {\n    title: \"状态\",\n    dataIndex: \"ostatus\",\n    scopedSlots: { customRender: \"ostatus\" }\n  },\n  {\n    title: \"产品编码\",\n    dataIndex: \"odSkuCode\",\n    scopedSlots: { customRender: \"odSkuCode\" }\n  },\n  {\n    title: \"产品名称\",\n    dataIndex: \"odSkuName\",\n    scopedSlots: { customRender: \"odSkuName\" }\n  },\n  {\n    title: \"产品规格\",\n    dataIndex: \"odSpec\",\n    scopedSlots: { customRender: \"odSpec\" }\n  },\n  {\n    title: \"税率(%)\",\n    dataIndex: \"taxRate\",\n    scopedSlots: { customRender: \"taxRate\" }\n  },\n  {\n    title: \"单价(元)\",\n    dataIndex: \"price\",\n    scopedSlots: { customRender: \"price\" }\n  },\n  {\n    title: \"订单数量\",\n    dataIndex: \"odNumber\",\n    scopedSlots: { customRender: \"odNumber\" }\n  },\n  {\n    title: \"订单总计(元)\",\n    dataIndex: \"odAmount\",\n    scopedSlots: { customRender: \"odAmount\" }\n  },\n  {\n    title: \"要求交期\",\n    dataIndex: \"odRequireDueDate\",\n    scopedSlots: { customRender: \"odRequireDueDate\" }\n  },\n  {\n    title: \"承诺交期\",\n    dataIndex: \"odPromiseDueDate\",\n    scopedSlots: { customRender: \"odPromiseDueDate\" }\n  },\n  {\n    title: \"客户图号\",\n    dataIndex: \"ofigureNumber\",\n    scopedSlots: { customRender: \"ofigureNumber\" }\n  },\n  {\n    title: \"订单日期\",\n    dataIndex: \"orderplacingTime\",\n    scopedSlots: { customRender: \"orderplacingTime\" }\n  }\n  // {\n  //   title: \"工厂厂长\",\n  //   dataIndex: \"\"\n  // },\n  // {\n  //   title: \"备注\",\n  //   dataIndex: \"\"\n  // }\n];\nexport default {\n  components: {\n    Animation,\n    AddOrderList,\n    OrderDetial\n  },\n  data() {\n    return {\n      advanced: false,\n      // 地域data\n      options: [\n        {\n          value: \"zhejiang\",\n          label: \"Zhejiang\",\n          children: [\n            {\n              value: \"hangzhou\",\n              label: \"Hangzhou\",\n              children: [\n                {\n                  value: \"xihu\",\n                  label: \"West Lake\"\n                }\n              ]\n            }\n          ]\n        },\n        {\n          value: \"jiangsu\",\n          label: \"Jiangsu\",\n          children: [\n            {\n              value: \"nanjing\",\n              label: \"Nanjing\",\n              children: [\n                {\n                  value: \"zhonghuamen\",\n                  label: \"Zhong Hua Men\"\n                }\n              ]\n            }\n          ]\n        }\n      ],\n      pagination: {\n        total: 0,\n        defaultPageSize: 10,\n        defaultCurrent: 1\n      },\n      columns,\n      tabData: [],\n      selectedRowKeys: [],\n      loading: true,\n      orderEncapsulation: {\n        ocustAmaldar: \"\", // 客户经理\n        ocustCode: \"\", // 客户编码\n        ocustName: \"\", // 客户名称\n        odPromiseDueDate: \"\", // 承诺时间\n        odSkuCode: \"\", // 商品编号\n        odSpec: \"\", // 商品规格\n        oorderNumber: \"\", // 订单编号\n        oproductionBase: \"\", // 生产基地\n        odPurchaseOrderno: \"\", // 采购单号\n        osource: 0, // 订单来源\n        ostatus: 0 // 订单状态\n      },\n      visible: false,\n      detial: false,\n      detialList: \"\",\n      ocustNameList: [], // 客户名称\n      ocustCodeList: [], // 客户编码\n      ocustAmaldarList: [], //客户经理\n      odSkuCodeList: [], // 产品编码\n      odSpecList: [] // 产品规格\n    };\n  },\n  created() {\n    this.getOrderList();\n    getListCompanyGoods.call(this);\n    getCompanyAllUsers.call(this);\n    getListCompanyCusts.call(this);\n  },\n  computed: {\n    rowSelection() {\n      const { selectedRowKeys } = this;\n      return {\n        selectedRowKeys,\n        onChange: this.onChangeTab,\n        hideDefaultSelections: false\n      };\n    }\n  },\n  watch: {\n    visible(newVal, oldVal) {\n      if (!newVal) {\n        this.getOrderList();\n      }\n    }\n  },\n  methods: {\n    toggleAdvanced() {\n      this.advanced = !this.advanced;\n    },\n    onChangePage(pagination, filters, sorter) {\n      this.getOrderList(pagination.current);\n    },\n    getOrderList(currentPage = 1, pageSize = 10) {\n      this.loading = true;\n      postJson(\n        api.getOrderList + `${currentPage}/${pageSize}`,\n        this.orderEncapsulation\n      ).then(res => {\n        if (res.data.data.records) {\n          this.tabData = res.data.data.records;\n          this.tabData.forEach((item, index) => {\n            item.key = index;\n          });\n        }\n        this.pagination.total = res.data.data.total;\n        this.loading = false;\n        this.selectedRowKeys = [];\n      });\n    },\n    isVisible(isVisible) {\n      this.visible = isVisible;\n    },\n    orderDetialInfo(status){\n      this.detial= status\n    },\n    onCustomerInfo() {\n      this.visible = false;\n    },\n    onDetial() {\n      this.detial = false;\n    },\n    addOrderList() {\n      this.visible = true;\n    },\n    goOrderDetail(id) {\n      this.detialList = id;\n      this.detial = true;\n    },\n    inputChange(val, type) {\n      switch (type) {\n        case \"oorderNumber\":\n          this.orderEncapsulation.oorderNumber = val;\n          this.getOrderList();\n          break;\n        case \"opurchaseOrderno\":\n          this.orderEncapsulation.opurchaseOrderno = val;\n          this.getOrderList();\n          break;\n        case \"ocustName\":\n          this.orderEncapsulation.ocustName = this.ocustNameList[val];\n          this.getOrderList();\n          break;\n        case \"ocustCode\":\n          this.orderEncapsulation.ocustCode = val;\n          this.getOrderList();\n          break;\n        case \"ocustAmaldar\":\n          this.orderEncapsulation.ocustAmaldar = val;\n          this.getOrderList();\n          break;\n        case \"odSkuCode\":\n          this.orderEncapsulation.odSkuCode = val;\n          this.getOrderList();\n          break;\n        case \"odSpec\":\n          this.orderEncapsulation.odSpec = val;\n          this.getOrderList();\n          break;\n        case \"osource\":\n          this.onChangePage.osource = val;\n          this.getOrderList();\n          break;\n        case \"ostatus\":\n          this.orderEncapsulation.ostatus = val;\n          this.getOrderList();\n          break;\n        case \"odPromiseDueDate\":\n          this.orderEncapsulation.odPromiseDueDate = val;\n          this.getOrderList();\n          break;\n        case \"oproductionBase\":\n          this.orderEncapsulation.oproductionBase = val;\n          this.getOrderList();\n          break;\n        default:\n          this.getOrderList();\n          break;\n      }\n    },\n    onChangeTab(selectedRowKeys, selectedRows) {\n      console.log(selectedRowKeys, selectedRows);\n      this.selectedRowKeys = selectedRowKeys;\n    }\n  }\n};\n</script>\n\n<style lang='less' scoped>\n.order {\n  .order-add {\n    .order-remove {\n      margin: 0 20px;\n    }\n    .order-derive {\n      color: #6bc67b;\n      margin-right: 5px;\n    }\n  }\n  .order-select {\n    margin: 20px 0;\n    .order-select-reset {\n      margin: 0 8px;\n    }\n  }\n  // .order-table {\n  //   .order-status {\n  //     width: 12px;\n  //     height: 12px;\n  //     border-radius: 50%;\n  //     display: inline-block;\n  //   }\n  //   .statusOk {\n  //     background: #6bc67b;\n  //   }\n  //   .statusNo {\n  //     background: #d8d8d8;\n  //   }\n  // }\n}\n</style>\n"]}]}