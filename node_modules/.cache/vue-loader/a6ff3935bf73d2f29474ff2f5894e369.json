{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/views/sale/dispatchOrder/child_lib/companyList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/views/sale/dispatchOrder/child_lib/companyList.vue","mtime":1560776825616},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport infiniteScroll from 'vue-infinite-scroll'\nimport api from '@/api/index'\nimport { get } from '@/api/axios'\nexport default {\n  props: ['factoryId'],\n  directives: { infiniteScroll },\n  data() {\n    return {\n      companyNameListSize: 0,\n      dataCompany: [],\n      busy: false,\n      loadingCompony: false,\n      currentPage: 1,\n      pageSize: 20,\n      name: ''\n    }\n  },\n  methods: {\n    setFactoryId(id, name) {\n      this.$emit('selectCompany', { id, name })\n    },\n    handleCompanyNameList() {\n      const data = this.dataCompany\n      this.loadingCompony = true\n      if (data.length >= this.companyNameListSize && this.companyNameListSize !== 0) {\n        this.$message.warning('暂时没有更多数据')\n        this.busy = true\n        this.loadingCompony = false\n        return false\n      } else {\n        this.getCompanyList()\n        this.loadingCompony = false\n      }\n    },\n    getCompanyList() {\n      const data = {}\n      data.currentPage = this.currentPage\n      data.pageSize = this.pageSize\n      data.type = 'FACTORY'\n      get(api.companyList, data).then(res => {\n        if (res.data.code === 0) {\n          this.companyNameListSize = Number(res.data.data.total)\n          if (this.dataCompany) {\n            this.dataCompany = this.dataCompany.concat(res.data.data.records)\n          } else {\n            this.dataCompany = res.data.data.records\n          }\n          this.currentPage += 1\n        }\n      })\n    }\n  }\n}\n",{"version":3,"sources":["companyList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"companyList.vue","sourceRoot":"src/views/sale/dispatchOrder/child_lib","sourcesContent":["<template>\n  <div>\n    <div\n      class=\"company-name-list\"\n      v-infinite-scroll=\"handleCompanyNameList\"\n      :infinite-scroll-disabled=\"busy\"\n      :infinite-scroll-distance=\"10\"\n    >\n      <a-list :dataSource=\"dataCompany\">\n        <a-list-item slot=\"renderItem\" slot-scope=\"item\">\n          <p\n            class=\"company-list-item\"\n            :class=\"{active:factoryId===item.id}\"\n            @click=\"setFactoryId(item.id,item.companyName)\"\n          >{{item.companyName}}</p>\n        </a-list-item>\n        <div v-if=\"loadingCompony\" class=\"demo-loading-container\">\n          <a-spin/>\n        </div>\n      </a-list>\n    </div>\n  </div>\n</template>\n\n<script>\nimport infiniteScroll from 'vue-infinite-scroll'\nimport api from '@/api/index'\nimport { get } from '@/api/axios'\nexport default {\n  props: ['factoryId'],\n  directives: { infiniteScroll },\n  data() {\n    return {\n      companyNameListSize: 0,\n      dataCompany: [],\n      busy: false,\n      loadingCompony: false,\n      currentPage: 1,\n      pageSize: 20,\n      name: ''\n    }\n  },\n  methods: {\n    setFactoryId(id, name) {\n      this.$emit('selectCompany', { id, name })\n    },\n    handleCompanyNameList() {\n      const data = this.dataCompany\n      this.loadingCompony = true\n      if (data.length >= this.companyNameListSize && this.companyNameListSize !== 0) {\n        this.$message.warning('暂时没有更多数据')\n        this.busy = true\n        this.loadingCompony = false\n        return false\n      } else {\n        this.getCompanyList()\n        this.loadingCompony = false\n      }\n    },\n    getCompanyList() {\n      const data = {}\n      data.currentPage = this.currentPage\n      data.pageSize = this.pageSize\n      data.type = 'FACTORY'\n      get(api.companyList, data).then(res => {\n        if (res.data.code === 0) {\n          this.companyNameListSize = Number(res.data.data.total)\n          if (this.dataCompany) {\n            this.dataCompany = this.dataCompany.concat(res.data.data.records)\n          } else {\n            this.dataCompany = res.data.data.records\n          }\n          this.currentPage += 1\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.company-list-item {\n  margin: 10px;\n  cursor: pointer;\n  &.active {\n    color: #007aff;\n  }\n}\n</style>\n"]}]}