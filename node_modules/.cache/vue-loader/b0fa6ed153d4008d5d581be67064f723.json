{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/goods/Goods.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/goods/Goods.vue","mtime":1556588326435},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getGoodsTree, searchGoods, getTabHeader, getGoodsViews } from './goods.js'\nimport GoodsInfo from './GoodsInfo'\n\nexport default {\n  name: 'goods',\n  data() {\n    return {\n      scrollLen: { x: 500 },\n      title: '产品信息',\n      pagination: {},\n      // table\n      tabData: [],\n      columns: [\n        {\n          title: '产品编码',\n          dataIndex: 'code',\n          key: 'code',\n          width: 106,\n          fixed: 'left'\n        },\n        {\n          title: '上下架',\n          dataIndex: 'saleStatus',\n          key: 'saleStatus',\n          width: 106,\n          fixed: 'left'\n        },\n        {\n          title: '产品名称',\n          dataIndex: 'name',\n          key: 'name',\n          width: 106,\n          scopedSlots: { customRender: 'name' },\n          fixed: 'left'\n        },\n        {\n          title: '规格',\n          dataIndex: 'spec',\n          key: 'spec',\n          width: 106,\n          fixed: 'left'\n        },\n        {\n          title: '单位',\n          dataIndex: 'nuit',\n          key: 'nuit',\n          width: 106,\n          fixed: 'left'\n        },\n        {\n          title: '客户编码',\n          dataIndex: 'customCode',\n          key: 'customCode',\n          width: 106\n        },\n        {\n          title: '价格',\n          dataIndex: 'price',\n          key: 'price',\n          width: 106\n        },\n        {\n          title: '时间',\n          key: 'creatTime',\n          width: 106,\n          dataIndex: 'creatTime',\n          fixed: 'right'\n        }\n      ],\n      loading: false,\n      visible: false,\n      treeData: [],\n      addCloumn: [],\n      isCatId: '',\n      isCustId: '',\n      addGoodsId: '',\n      // Goods详情\n      setGoodsViews: {},\n      isEdit: false\n    }\n  },\n  created() {\n    getGoodsTree.call(this)\n  },\n  mounted() {\n    // 初始化客户信息\n    // showCustomersPage.call(this)\n  },\n  methods: {\n    // tree\n    onSelect(selectedKeys, info) {\n      console.log(info.node.dataRef.custundefined)\n      this.isCustId =\n        info.node.dataRef.custundefined === null\n          ? '0'\n          : info.node.dataRef.custundefined\n      // 判断是否存在字母\n      const isLetter = /[a-z]/i\n      if (!isLetter.test(selectedKeys[0])) {\n        console.log(selectedKeys)\n        const params = {\n          catIds: selectedKeys,\n          pageNo: '1',\n          pageSize: '999'\n        }\n        this.isCatId = selectedKeys[0]\n        getTabHeader.call(this, { catId: selectedKeys[0] }).then(() => {\n          searchGoods.call(this, params)\n        })\n      }\n    },\n    onExpand() {\n      console.log('Trigger Expand')\n    },\n    onDeleteProgoods() {},\n    showDrawer() {\n      if (this.isCatId !== '') {\n        this.visible = true\n        this.isEdit = false\n        return false\n      }\n      this.$message.error('请先选择分类')\n    },\n    onClose() {\n      this.visible = false\n    },\n    // $emit改变isvisible\n    isVisible(isVisible) {\n      this.visible = isVisible\n    },\n    // 商品详情\n    onHanldeGoodsInfo(record) {\n      console.log(record)\n      getGoodsViews.call(this, record.key)\n      this.visible = true\n      this.isEdit = true\n    }\n  },\n  components: {\n    GoodsInfo\n  }\n}\n",{"version":3,"sources":["Goods.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Goods.vue","sourceRoot":"src/views/product/goods","sourcesContent":["<template>\n  <div class=\"goods\">\n    <!-- 产品列表选择区 -->\n    <div class=\"goods-add\">\n      <a-button type=\"primary\" @click=\"showDrawer\">\n        <a-icon type=\"plus\"/>新建\n      </a-button>\n      <!-- 弹出层 -->\n      <a-drawer\n        :title=\"title\"\n        placement=\"right\"\n        :closable=\"false\"\n        :width=\"1080\"\n        @close=\"onClose\"\n        :visible=\"visible\"\n        :wrapStyle=\"{height: 'calc(100% - 108px)',overflow: 'auto',paddingBottom: '108px'}\"\n      >\n        <GoodsInfo @isVisible=\"isVisible\" :setGoodsViews=\"setGoodsViews\" :isCatId=\"isCatId\" :isEdit=\"isEdit\" :isCustId=\"isCustId\"></GoodsInfo>\n      </a-drawer>\n    </div>\n    <!-- 产品分类 -->\n    <div class=\"goods-tab\">\n      <!-- Tree -->\n      <div class=\"goods-tree\">\n        <a-directory-tree @expand=\"onExpand\" @select=\"onSelect\" :treeData=\"treeData\"/>\n      </div>\n      <!-- Table -->\n      <div class=\"goods-list\">\n        <a-table class=\"goods-list\" :pagination=\"pagination\" :columns=\"columns\" :dataSource=\"tabData\" :scroll=\"scrollLen\">\n          <a slot=\"name\" slot-scope=\"text, record\" href=\"javascript:;\" @click=\"onHanldeGoodsInfo(record)\">{{ text }}</a>\n        </a-table>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getGoodsTree, searchGoods, getTabHeader, getGoodsViews } from './goods.js'\nimport GoodsInfo from './GoodsInfo'\n\nexport default {\n  name: 'goods',\n  data() {\n    return {\n      scrollLen: { x: 500 },\n      title: '产品信息',\n      pagination: {},\n      // table\n      tabData: [],\n      columns: [\n        {\n          title: '产品编码',\n          dataIndex: 'code',\n          key: 'code',\n          width: 106,\n          fixed: 'left'\n        },\n        {\n          title: '上下架',\n          dataIndex: 'saleStatus',\n          key: 'saleStatus',\n          width: 106,\n          fixed: 'left'\n        },\n        {\n          title: '产品名称',\n          dataIndex: 'name',\n          key: 'name',\n          width: 106,\n          scopedSlots: { customRender: 'name' },\n          fixed: 'left'\n        },\n        {\n          title: '规格',\n          dataIndex: 'spec',\n          key: 'spec',\n          width: 106,\n          fixed: 'left'\n        },\n        {\n          title: '单位',\n          dataIndex: 'nuit',\n          key: 'nuit',\n          width: 106,\n          fixed: 'left'\n        },\n        {\n          title: '客户编码',\n          dataIndex: 'customCode',\n          key: 'customCode',\n          width: 106\n        },\n        {\n          title: '价格',\n          dataIndex: 'price',\n          key: 'price',\n          width: 106\n        },\n        {\n          title: '时间',\n          key: 'creatTime',\n          width: 106,\n          dataIndex: 'creatTime',\n          fixed: 'right'\n        }\n      ],\n      loading: false,\n      visible: false,\n      treeData: [],\n      addCloumn: [],\n      isCatId: '',\n      isCustId: '',\n      addGoodsId: '',\n      // Goods详情\n      setGoodsViews: {},\n      isEdit: false\n    }\n  },\n  created() {\n    getGoodsTree.call(this)\n  },\n  mounted() {\n    // 初始化客户信息\n    // showCustomersPage.call(this)\n  },\n  methods: {\n    // tree\n    onSelect(selectedKeys, info) {\n      console.log(info.node.dataRef.custundefined)\n      this.isCustId =\n        info.node.dataRef.custundefined === null\n          ? '0'\n          : info.node.dataRef.custundefined\n      // 判断是否存在字母\n      const isLetter = /[a-z]/i\n      if (!isLetter.test(selectedKeys[0])) {\n        console.log(selectedKeys)\n        const params = {\n          catIds: selectedKeys,\n          pageNo: '1',\n          pageSize: '999'\n        }\n        this.isCatId = selectedKeys[0]\n        getTabHeader.call(this, { catId: selectedKeys[0] }).then(() => {\n          searchGoods.call(this, params)\n        })\n      }\n    },\n    onExpand() {\n      console.log('Trigger Expand')\n    },\n    onDeleteProgoods() {},\n    showDrawer() {\n      if (this.isCatId !== '') {\n        this.visible = true\n        this.isEdit = false\n        return false\n      }\n      this.$message.error('请先选择分类')\n    },\n    onClose() {\n      this.visible = false\n    },\n    // $emit改变isvisible\n    isVisible(isVisible) {\n      this.visible = isVisible\n    },\n    // 商品详情\n    onHanldeGoodsInfo(record) {\n      console.log(record)\n      getGoodsViews.call(this, record.key)\n      this.visible = true\n      this.isEdit = true\n    }\n  },\n  components: {\n    GoodsInfo\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.goods {\n  .goods-add {\n    margin-bottom: 15px;\n  }\n  .goods-remove {\n    margin: 0 10px;\n  }\n  .goods-select-reset {\n    margin: 0 10px;\n  }\n  .goods-select {\n    margin: 16px 0;\n  }\n  .goods-tab {\n    display: flex;\n    .goods-tree {\n      border: 1px solid #eeeeee;\n      flex: 0 0 180px;\n      margin-right: 15px;\n    }\n    .goods-list {\n      flex: 1;\n      overflow: hidden;\n    }\n  }\n}\n</style>\n"]}]}