{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/components/list_classification/classification.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/components/list_classification/classification.vue","mtime":1563972971493},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport api from '@/api/index'\nimport { get } from '@/api/axios'\nimport infiniteScroll from 'vue-infinite-scroll'\nexport default {\n  directives: { infiniteScroll },\n  props: {\n    category: {\n      type: String,\n      defalut: '',\n      required: true\n    }\n  },\n  data() {\n    return {\n      busy: false,\n      loading: false,\n      data: [],\n      dataSize: 0,\n      currentPage: 1,\n      pageSize: 20,\n      name: '',\n      activeId: ''\n    }\n  },\n  methods: {\n    onSearch(value) {\n      this.data = []\n      this.name = value\n      this.currentPage = 1\n      this.getCompanyList(value)\n    },\n    companyPurchase(id) {\n      this.activeId = id\n      this.$emit('purchaseListId', id)\n    },\n    handleCompanyNameList() {\n      const data = this.data\n      this.loading = true\n      if (data.length >= this.dataSize && this.dataSize !== 0) {\n        this.$message.warning('暂时没有更多数据')\n        this.busy = true\n        this.loading = false\n        return\n      }\n      this.getCompanyList(this.name)\n    },\n    getCompanyList(val) {\n      const data = {}\n      data.currentPage = this.currentPage\n      data.pageSize = this.pageSize\n      data.type = this.category\n      data.name = val\n      get(api.companyList, data).then(res => {\n        if (res.data.code === 0) {\n          this.dataSize = Number(res.data.data.total)\n          this.data = this.data.concat(res.data.data.records)\n          this.currentPage += 1\n        }\n        this.loading = false\n      })\n    }\n  }\n\n}\n",{"version":3,"sources":["classification.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"classification.vue","sourceRoot":"src/components/list_classification","sourcesContent":["<template>\n  <div class=\"purchase-left\">\n    <div class=\"purchase-left-search\">\n      <a-input-search @search=\"onSearch\" enterButton />\n      <div\n        class=\"demo-infinite-container\"\n        v-infinite-scroll=\"handleCompanyNameList\"\n        :infinite-scroll-disabled=\"busy\"\n        :infinite-scroll-distance=\"10\"\n      >\n        <a-list :dataSource=\"data\">\n          <a-list-item slot=\"renderItem\" slot-scope=\"item\">\n            <a-list-item-meta>\n              <p\n                slot=\"description\"\n                class=\"company-name\"\n                @click=\"companyPurchase(item.id)\"\n                :class=\"{active:item.id===activeId}\"\n              >{{item.companyName}}</p>\n            </a-list-item-meta>\n          </a-list-item>\n          <div v-if=\"loading && !busy\" class=\"demo-loading-container\">\n            <a-spin />\n          </div>\n        </a-list>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport api from '@/api/index'\nimport { get } from '@/api/axios'\nimport infiniteScroll from 'vue-infinite-scroll'\nexport default {\n  directives: { infiniteScroll },\n  props: {\n    category: {\n      type: String,\n      defalut: '',\n      required: true\n    }\n  },\n  data() {\n    return {\n      busy: false,\n      loading: false,\n      data: [],\n      dataSize: 0,\n      currentPage: 1,\n      pageSize: 20,\n      name: '',\n      activeId: ''\n    }\n  },\n  methods: {\n    onSearch(value) {\n      this.data = []\n      this.name = value\n      this.currentPage = 1\n      this.getCompanyList(value)\n    },\n    companyPurchase(id) {\n      this.activeId = id\n      this.$emit('purchaseListId', id)\n    },\n    handleCompanyNameList() {\n      const data = this.data\n      this.loading = true\n      if (data.length >= this.dataSize && this.dataSize !== 0) {\n        this.$message.warning('暂时没有更多数据')\n        this.busy = true\n        this.loading = false\n        return\n      }\n      this.getCompanyList(this.name)\n    },\n    getCompanyList(val) {\n      const data = {}\n      data.currentPage = this.currentPage\n      data.pageSize = this.pageSize\n      data.type = this.category\n      data.name = val\n      get(api.companyList, data).then(res => {\n        if (res.data.code === 0) {\n          this.dataSize = Number(res.data.data.total)\n          this.data = this.data.concat(res.data.data.records)\n          this.currentPage += 1\n        }\n        this.loading = false\n      })\n    }\n  }\n\n}\n</script>\n\n<style lang=\"less\" scoped>\n.purchase-left {\n  border: 1px solid #eee;\n  min-height: 840px;\n  max-height: 840px;\n  padding: 10px;\n  box-sizing: border-box;\n\n  .company-name {\n    font-size: 14px;\n    padding: 10px 20px;\n    margin: 0;\n    text-align: left;\n    cursor: pointer;\n\n    &.active {\n      background-color: #4a90e2;\n      color: #fff;\n    }\n  }\n}\n\n.demo-infinite-container {\n  border: none;\n  border-radius: 4px;\n  overflow: auto;\n  margin: 8px 0;\n  padding: 0px 24px;\n  max-height: 770px;\n}\n\n.demo-loading-container {\n  margin-top: 40%;\n  width: 100%;\n  text-align: center;\n}\n</style>\n"]}]}