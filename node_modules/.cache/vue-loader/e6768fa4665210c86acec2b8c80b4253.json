{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/sale/orderList/orderDetial.vue?vue&type=style&index=0&id=cc63db4c&lang=less&scoped=true&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/sale/orderList/orderDetial.vue","mtime":1556611719947},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/less-loader/dist/cjs.js","mtime":1556420627437},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import \"~styles/variable.less\";\n.addCustomer-title {\n  border-left: 4px solid #1890ff;\n  padding-left: 6px;\n}\n.add-order-list {\n  position: relative;\n  .edit {\n    position: absolute;\n    top: 0;\n    right: 20px;\n    & > button {\n      margin-right: 10px;\n    }\n  }\n}\n",{"version":3,"sources":["orderDetial.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"orderDetial.vue","sourceRoot":"src/views/sale/orderList","sourcesContent":["<template>\n  <div class=\"add-order-list\">\n    <a-tabs defaultActiveKey=\"1\" @change=\"callback\">\n      <a-tab-pane tab=\"订单详情\" key=\"0\" disabled></a-tab-pane>\n      <a-tab-pane tab=\"销售订单信息\" key=\"1\">\n        <a-form layout=\"inline\">\n          <a-row :gutter=\"24\">\n            <a-col :span=\"24\">\n              <h3 class=\"addCustomer-title\">订单详情</h3>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"订单编码：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input disabled placeholder=\"订单编码自动生成\" style=\"width: 240px\"/>\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"净价总价：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input\n                  placeholder=\"请输入净价总价\"\n                  v-model=\"mallOrderIntactDto.ototalNetPrice\"\n                  style=\"width: 240px\"\n                  :disabled=\"editDetial === false\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"状态：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-select\n                  placeholder=\"请选择状态\"\n                  style=\"width: 240px\"\n                  :disabled=\"editDetial === false\"\n                  @change=\"(val)=>{inputChange(val,'ostatus')}\"\n                  :value=\"mallOrderIntactDto.ostatus==='PREORDER'?'预订单':mallOrderIntactDto.ostatus==='SUBMISSIONORDER'?'已提交':mallOrderIntactDto.ostatus==='ACCEPTORDER'?'已接单':'已拒单'\"\n                >\n                  <a-select-option value=\"0\">预订单</a-select-option>\n                  <a-select-option value=\"1\">已提交</a-select-option>\n                  <a-select-option value=\"2\">已接单</a-select-option>\n                  <a-select-option value=\"3\">已拒单</a-select-option>\n                </a-select>\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"客户名称：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-select\n                  showSearch\n                  style=\"width: 240px\"\n                  placeholder=\"请输入客户名称\"\n                  @change=\"(val)=>{inputChange(val,'ocustName')}\"\n                  :value=\"mallOrderIntactDto.ocustName\"\n                  :disabled=\"editDetial === false\"\n                >\n                  <a-select-option v-for=\"(item,index) in ocustNameList\" :key=\"index\">{{item}}</a-select-option>\n                </a-select>\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"销售总价：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input\n                  placeholder=\"请输入销售总价\"\n                  v-model=\"mallOrderIntactDto.ototalPrice\"\n                  style=\"width: 240px\"\n                  :disabled=\"editDetial === false\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"客户经理：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-select\n                  showSearch\n                  style=\"width: 240px\"\n                  placeholder=\"请输入客户经理\"\n                  @change=\"(val)=>{inputChange(val,'ocustAmaldarList')}\"\n                  :value=\"mallOrderIntactDto.ocustAmaldar\"\n                  :disabled=\"editDetial === false\"\n                >\n                  <a-select-option v-for=\"item in ocustAmaldarList\" :key=\"item\">{{item}}</a-select-option>\n                </a-select>\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"订单总计\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input\n                  placeholder=\"请输入订单总计\"\n                  v-model=\"mallOrderIntactDto.ototalSum\"\n                  style=\"width: 240px\"\n                  :disabled=\"editDetial === false\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"收货人：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input\n                  placeholder=\"请输入收货人\"\n                  v-model=\"mallOrderIntactDto.oaddresseeName\"\n                  style=\"width: 240px\"\n                  :disabled=\"editDetial === false\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"客户单号：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input\n                  v-model=\"mallOrderIntactDto.ocustOrderNo\"\n                  placeholder=\"请输入客户单号\"\n                  style=\"width: 240px\"\n                  :disabled=\"editDetial === false\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"运输费用：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input\n                  placeholder=\"请输入运输费用\"\n                  v-model=\"mallOrderIntactDto.otransportationCost\"\n                  style=\"width: 240px\"\n                  :disabled=\"editDetial === false\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"联系方式：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input\n                  placeholder=\"请输入联系方式\"\n                  v-model=\"mallOrderIntactDto.ophone\"\n                  style=\"width: 240px\"\n                  :disabled=\"editDetial === false\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"订单类型：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-select\n                  placeholder=\"请选择订单类型\"\n                  @change=\"(val)=>{inputChange(val,'otype')}\"\n                  style=\"width: 240px\"\n                  :value=\"mallOrderIntactDto.otype\"\n                  :disabled=\"editDetial === false\"\n                >\n                  <a-select-option value=\"0\">正式</a-select-option>\n                  <a-select-option value=\"1\">样品</a-select-option>\n                  <a-select-option value=\"2\">季度返点</a-select-option>\n                </a-select>\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"包装费用：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input\n                  placeholder=\"请输入包装费用\"\n                  v-model=\"mallOrderIntactDto.opackingCharges\"\n                  style=\"width: 240px\"\n                  :disabled=\"editDetial === false\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"收货地址：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input\n                  placeholder=\"请输入包装费用\"\n                  style=\"width: 240px\"\n                  :value=\"mallOrderIntactDto.olocation\"\n                  disabled\n                  v-if=\"editDetial === false\"\n                />\n                <a-cascader\n                  v-if=\"editDetial !== false\"\n                  :options=\"areas\"\n                  placeholder=\"请选择收货地址\"\n                  @change=\"areaChange\"\n                  :fieldNames=\"{label:'name',value:'id',children:'childrens'}\"\n                  style=\"width:240px\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"收款订单：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-select\n                  placeholder=\"请选择收款订单\"\n                  @change=\"(val)=>{inputChange(val,'opayment')}\"\n                  style=\"width: 240px\"\n                  :value=\"mallOrderIntactDto.opayment === 'false'?'否':'是'\"\n                  :disabled=\"editDetial === false\"\n                >\n                  <a-select-option value=\"0\">是</a-select-option>\n                  <a-select-option value=\"1\">否</a-select-option>\n                </a-select>\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"其他费用：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input\n                  placeholder=\"请输入其他费用\"\n                  v-model=\"mallOrderIntactDto.ootherCharges\"\n                  style=\"width: 240px\"\n                  :disabled=\"editDetial === false\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"详细地址：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input\n                  v-model=\"mallOrderIntactDto.ostreet\"\n                  placeholder=\"请输入详细地址\"\n                  style=\"width: 240px\"\n                  :disabled=\"editDetial === false\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"预收款：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input\n                  placeholder=\"请输入预收款\"\n                  v-model=\"mallOrderIntactDto.oprePayment\"\n                  style=\"width: 240px\"\n                  :disabled=\"editDetial === false\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"备注：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input\n                  v-model=\"mallOrderIntactDto.oremarks\"\n                  style=\"width: 240px\"\n                  :disabled=\"editDetial === false\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"总邮费：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input\n                  placeholder=\"请输入总邮费\"\n                  v-model=\"mallOrderIntactDto.otatalPostage\"\n                  style=\"width: 240px\"\n                  :disabled=\"editDetial === false\"\n                />\n              </a-form-item>\n            </a-col>\n          </a-row>\n          <!-- <a-row :gutter=\"24\" style=\"margin-top:10px\">\n            <a-col :span=\"24\">\n              <h3 class=\"addCustomer-title\">订单分配</h3>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"计划员：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input placeholder=\"请输入订单编号\" style=\"width: 240px\"/>\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"工厂厂长：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input placeholder=\"请输入净价总价\" style=\"width: 240px\"/>\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"生产基地：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-cascader\n                  :options=\"areas\"\n                  placeholder=\"请选择生产基地\"\n                  :fieldNames=\"{label:'name',value:'id',children:'childrens'}\"\n                  style=\"width:240px\"\n                />\n              </a-form-item>\n            </a-col>\n          </a-row>-->\n        </a-form>\n        <a-row :gutter=\"24\" style=\"margin-top:10px\">\n          <a-col :span=\"24\">\n            <h3 class=\"addCustomer-title\">产品详情</h3>\n          </a-col>\n          <a-table :columns=\"columns\" :dataSource=\"dataSource\" :pagination=\"false\">\n            <template slot=\"odNumber\" slot-scope=\"text,record\">\n              <editable\n                :text=\"text\"\n                @change=\"onCellChange(record.key, 'odNumber', $event)\"\n                v-if=\"editDetial\"\n              ></editable>\n              <span v-else>{{text}}</span>\n            </template>\n            <template slot=\"odAmount\" slot-scope=\"text,record\">\n              <editable\n                :text=\"text\"\n                @change=\"onCellChange(record.key, 'odAmount', $event)\"\n                v-if=\"editDetial\"\n              ></editable>\n              <span v-else>{{text}}</span>\n            </template>\n            <template slot=\"odRequireDueDate\" slot-scope=\"text,record\">\n              <a-date-picker\n                @change=\"(date,dateString)=>changeDate(record.key,'odRequireDueDate',dateString)\"\n                v-if=\"editDetial\"\n              />\n              <span v-else>\n                <span v-if=\"text\">{{text | formatDate}}</span>\n                <span v-else></span>\n              </span>\n            </template>\n            <template slot=\"odPromiseDueDate\" slot-scope=\"text,record\">\n              <a-date-picker\n                @change=\"(date,dateString)=>changeDate(record.key,'odPromiseDueDate',dateString)\"\n                v-if=\"editDetial\"\n              />\n              <span v-else>\n                <span v-if=\"text\">{{text | formatDate}}</span>\n                <span v-else></span>\n              </span>\n            </template>\n          </a-table>\n        </a-row>\n        <a-row :gutter=\"24\" style=\"margin-top:10px\">\n          <a-col :span=\"24\">\n            <h3 class=\"addCustomer-title\">附件</h3>\n            <a-upload\n              action=\"api/ic/user/file/uploadFile\"\n              :data=\"{'bizType':'ORDER'}\"\n              :headers=\"headers\"\n              :defaultFileList=\"defaultFileList\"\n              @change=\"handleChange\"\n              :disabled=\"editDetial === false\"\n            >\n              <a-button>\n                <a-icon type=\"upload\"/>Upload\n              </a-button>\n            </a-upload>\n          </a-col>\n        </a-row>\n        <div\n          :style=\"{\n          width: '100%',\n          borderTop: '1px solid #e9e9e9',\n          padding: '10px 16px',\n          background: '#fff',\n          textAlign: 'right',\n        }\"\n        >\n          <a-button :style=\"{marginRight: '8px'}\" @click=\"cancelHandle\">取消</a-button>\n          <a-button type=\"primary\" @click=\"orderSubmit\" :disabled=\"editDetial === false\">提交</a-button>\n        </div>\n      </a-tab-pane>\n      <a-tab-pane tab=\"生产信息\" key=\"2\" forceRender>生产信息</a-tab-pane>\n      <a-tab-pane tab=\"质检信息\" key=\"3\">质检信息</a-tab-pane>\n      <a-tab-pane tab=\"仓储信息\" key=\"4\">仓储信息</a-tab-pane>\n      <a-tab-pane tab=\"发货信息\" key=\"5\">发货信息</a-tab-pane>\n    </a-tabs>\n    <div class=\"edit\">\n      <a-button @click=\"orderDetialEdit\" v-if=\"showUpdate\">编辑</a-button>\n      <!-- <a-button>打印</a-button> -->\n      <a-button v-if=\"showDelete\">删除</a-button>\n      <!-- <a-button>更多</a-button> -->\n    </div>\n  </div>\n</template>\n\n<script>\nimport { areas } from '@/views/customer/area.js'\nimport { postJson, get } from '@/api/axios.js'\nimport api from '@/api/index.js'\nimport Editable from './Editable'\nimport {\n  getListCompanyGoods,\n  getListCompanyCusts,\n  getListCustomerGoods\n} from './menu.js'\nconst columns = [\n  {\n    title: '产品编码',\n    dataIndex: 'sku.code'\n  },\n  {\n    title: '产品名称',\n    dataIndex: 'sku.name'\n  },\n  {\n    title: '产品规格',\n    dataIndex: 'sku.spec'\n  },\n  {\n    title: '税率(%)',\n    dataIndex: 'sku.taxRate'\n  },\n  {\n    title: '单价(元)',\n    dataIndex: 'sku.price'\n  },\n  {\n    title: '订单数量',\n    dataIndex: 'odNumber',\n    scopedSlots: { customRender: 'odNumber' }\n  },\n  {\n    title: '订单总计(元)',\n    dataIndex: 'odAmount',\n    scopedSlots: { customRender: 'odAmount' }\n  },\n  {\n    title: '客户编码',\n    dataIndex: 'ocustCode'\n  },\n  // {\n  //   title: \"客户图号\",\n  //   dataIndex: \"\"\n  // },\n  {\n    title: '客户采购单号',\n    dataIndex: 'odPurchaseOrderno'\n  },\n  {\n    title: '要求交期',\n    dataIndex: 'odRequireDueDate',\n    scopedSlots: { customRender: 'odRequireDueDate' }\n  },\n  {\n    title: '承诺交期',\n    dataIndex: 'odPromiseDueDate',\n    scopedSlots: { customRender: 'odPromiseDueDate' }\n  }\n]\nconst formItemLayout = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 18 }\n}\nexport default {\n  props: ['detialList', 'ocustAmaldarList'],\n  components: {\n    Editable\n  },\n  data() {\n    return {\n      showUpdate: false, // 新建显示\n      showDelete: false, // 批量删除显示\n      formItemLayout,\n      columns,\n      mallOrderIntactDto: {\n        ocustOrderNo: '', //客户单号\n        provinceStr: '', // 省\n        cityStr: '', // 市\n        areaStr: '', // 区\n        custId: '', // 商城客户id\n        ocustShortName: '', //客户简称\n        ototalSum: '', // 总金额，订单总计（销售总计）\n        otatalPostage: '', //总邮费 1\n        ototalNetPrice: '', // 净价总价（净价总计）1\n        ototalPrice: '', // 销售总价（含税）（单*数*（1+6%）） 1\n        oaddresseeName: '', //收件人姓名 1\n        olocation: '', // 收件人所在地 1\n        ostreet: '', //收件人详细地址 1\n        opostCode: '', //收件人邮编\n        ophone: '', //收件人手机号码 1\n        otransportationCost: '', //运输费用 1\n        opackingCharges: '', //包装费用 1\n        ootherCharges: '', //其他费用 1\n        oattachment: '', //上传附件 1\n        ocustAmaldar: '', //客户经理 1\n        opayment: true, //收款订单 1\n        ostatus: '', //订单状态 1\n        otype: '', //订单类型 1\n        oprePayment: ''\n      },\n      areas,\n      dataSource: [],\n      isAddContactInfo: false,\n      headers: {\n        'AUTH-TOKEN': localStorage.getItem('ACCESS_TOKEN'),\n        companyId: localStorage.getItem('companyId')\n      },\n      editDetial: false,\n      defaultFileList: [], // 附件列表\n      uploadFile: [],\n      ocustName: '',\n      listCompanyCusts: [],\n      ocustNameList: [],\n      listCustomerGoods: [], //商品信息\n      odSkuCodeList: [], // 产品编码\n      odSpecList: [], // 产品规格\n      buttons: []\n    }\n  },\n  created() {\n    this.getFunctionPage()\n    getListCompanyGoods.call(this)\n    getListCompanyCusts.call(this)\n  },\n  computed: {\n    funcIdArray() {\n      return this.$store.state.funcIdArray\n    }\n  },\n  watch: {\n    funcIdArray(newVal, oldVal) {\n      this.getFunctionPage(newVal);\n    }\n  },\n  methods: {\n    callback(key) {\n      console.log(key)\n    },\n    showAddContactInfo(dataSource) {\n      const ototalSum = 0 //订单总计\n      // const ototalNetPrice = 0; //净价总计\n      const ototalPrice = 0 //销售总价（含税）\n      for (const i in dataSource) {\n        ototalSum += parseFloat(dataSource[i].odAmount)\n        ototalPrice = parseFloat(\n          (\n            ototalPrice +\n            dataSource[i].sku.price *\n            dataSource[i].odNumber *\n            (1 + dataSource[i].sku.taxRate / 100)\n          ).toFixed(3)\n        )\n      }\n      this.mallOrderIntactDto.ototalSum = ototalSum\n      this.mallOrderIntactDto.ototalNetPrice = ototalSum\n      this.mallOrderIntactDto.ototalPrice = ototalPrice\n    },\n    // 图片上传/修改时的操作\n    handleChange(info) {\n      const uploadFile = []\n      const defaultFileList = info.fileList\n      for (const i in defaultFileList) {\n        if (defaultFileList[i].response) {\n          uploadFile.push(defaultFileList[i].response.data)\n        }\n      }\n      this.uploadFile = uploadFile\n      this.defaultFileList = info.fileList\n    },\n    // 根据type类型的不同设置相应的值\n    inputChange(val, type) {\n      switch (type) {\n        case 'ostatus':\n          this.mallOrderIntactDto.ostatus = val\n          break\n        case 'ocustName':\n          this.ocustName = val\n          this.mallOrderIntactDto.ocustShortName = this.listCompanyCusts[\n            val\n          ].custShortName\n          const custId = this.listCompanyCusts[val].id\n          this.mallOrderIntactDto.custId = custId\n          getListCustomerGoods.call(this, custId)\n          break\n        case 'ocustAmaldarList':\n          this.mallOrderIntactDto.ocustAmaldar = val\n          break\n        case 'otype':\n          this.mallOrderIntactDto.otype = val\n          break\n        case 'opayment':\n          this.mallOrderIntactDto.opayment = val === 0 ? 'true' : 'false'\n          break\n        default:\n          break\n      }\n    },\n    // 获取地址编码\n    areaChange(val) {\n      this.getCityProvince(val)\n    },\n    // 根据code码获取省市区的str\n    getCityProvince(code) {\n      const areas = this.areas\n      const allCityCode = code\n      const city = allCityCode[0],\n        province = allCityCode[1],\n        area = allCityCode[2]\n      for (const item in areas) {\n        if (areas[item].id === city) {\n          this.mallOrderIntactDto.cityStr = areas[item].name\n          const cityProvinces = areas[item].childrens\n          for (const i in cityProvinces) {\n            if (cityProvinces[i].id === province) {\n              this.mallOrderIntactDto.provinceStr = cityProvinces[i].name\n              const provinceChildrens = cityProvinces[i].childrens\n              for (const j in provinceChildrens) {\n                if (provinceChildrens[j].id === area) {\n                  this.mallOrderIntactDto.areaStr = provinceChildrens[j].name\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    // 取消订单详情的修改/查看\n    cancelHandle() {\n      this.editDetial = false\n      this.$emit('orderDetialInfo', false)\n    },\n    // 订单修改 提交并退出\n    orderSubmit() {\n      this.$emit('isVisible', false)\n      this.mallOrderIntactDto.oattachment = this.uploadFile.join(',')\n      this.mallOrderIntactDto.skuList = this.dataSource\n      postJson(api.orderSave, this.mallOrderIntactDto).then(res => {\n        if (res.data.code === 0) {\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      })\n    },\n    // 获取订单详情\n    getOrderDetail(id) {\n      get(api.getOrderDetail + `${id}`).then(res => {\n        console.log(res.data.data)\n        this.mallOrderIntactDto = res.data.data\n        const skuList = res.data.data.skuList\n        const oattachment = res.data.data.oattachment\n        for (const i in skuList) {\n          skuList[i].key = i\n          skuList[i].opurchaseOrderno = this.detialList.opurchaseOrderno\n          skuList[i].ocustCode = this.detialList.ocustCode\n        }\n        this.dataSource = skuList\n        if (oattachment) {\n          const oattachmentObj = []\n          const oattachmentList = oattachment.split(',')\n          for (const i in oattachmentList) {\n            oattachment.push({\n              uid: i,\n              url: oattachmentList[i]\n            })\n          }\n          this.defaultFileList = oattachmentObj\n        }\n        // this.detial = true;\n      })\n    },\n    // 是否进行订单修改\n    orderDetialEdit() {\n      this.editDetial = true\n    },\n    // 表格内容的修改\n    onCellChange(key, dataIndex, value) {\n      const dataSource = [...this.dataSource]\n      const target = dataSource.find(item => item.key === key)\n      if (target) {\n        target[dataIndex] = value\n        target.odAmount = parseFloat((value * target.sku.price).toFixed(3))\n        // console.log(target[dataIndex]);\n        this.dataSource = dataSource\n        this.showAddContactInfo(dataSource)\n      }\n    },\n    // 日期的修改\n    changeDate(key, dataIndex, value) {\n      // console.log(key,dataIndex,value);\n      const dataSource = [...this.dataSource]\n      const target = dataSource.find(item => item.key === key)\n      if (target) {\n        target[dataIndex] = value\n        // console.log(target[dataIndex]);\n        this.dataSource = dataSource\n      }\n      console.log(dataSource)\n    },\n    // 获取允许的操作和页面自定义的布局\n    getFunctionPage(val) {\n      var data = {}\n      data.funcId = val || this.funcIdArray\n      data.pageType = 'FORM'\n      get(api.functionPage, data).then(res => {\n        console.log(res.data.data)\n        if (res.data.code === 0) {\n          var buttons = res.data.data.buttons\n          buttons.forEach((item, index) => {\n            if (item.btnOptType === 'DETAIL') {\n              this.getOrderDetail(this.detialList)\n            }\n            if (item.btnOptType === 'UPDATE') {\n              this.showUpdate = true\n            }\n            if (item.btnOptType === 'DELETE') {\n              this.showDelete = true\n            }\n          })\n          this.buttons = buttons\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang='less' scoped>\n@import \"~styles/variable.less\";\n.addCustomer-title {\n  border-left: 4px solid #1890ff;\n  padding-left: 6px;\n}\n.add-order-list {\n  position: relative;\n  .edit {\n    position: absolute;\n    top: 0;\n    right: 20px;\n    & > button {\n      margin-right: 10px;\n    }\n  }\n}\n</style>\n"]}]}