{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/pdm/goods/child_info/tab_goodsInfo/bomInfo/drawer/BomDrawer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/pdm/goods/child_info/tab_goodsInfo/bomInfo/drawer/BomDrawer.vue","mtime":1559697950994},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport infiniteScroll from 'vue-infinite-scroll'\nimport { bomSearch } from './index'\n\nexport default {\n  name: 'BomDrawer',\n  directives: { infiniteScroll },\n  data() {\n    return {\n      data: [],\n      loading: false,\n      busy: false,\n      num: 1, // 滚动加载数据\n      page: 1 // 初始化总页数\n    }\n  },\n  props: {\n    keepKey: {\n      type: Number,\n      default: 0\n    }\n  },\n  beforeMount() {\n    bomSearch(1).then(res => {\n      if (res.data.code === 0) {\n        // console.log(res.data.data.records)\n        this.data = res.data.data.records.map((item, index) => ({\n          ...item.sku,\n          index\n        }))\n        // console.log(this.data)\n        this.page = res.data.data.pages\n      }\n    })\n  },\n  methods: {\n    handleInfiniteOnLoad() {\n      const data = this.data\n      this.loading = true\n      if (this.num > this.page) {\n        this.$message.warning('没有更多数据了')\n        this.busy = true\n        this.loading = false\n        return\n      }\n      bomSearch(this.num).then(res => {\n        if (res.data.code === 0) {\n          this.loading = false\n          this.data = data.concat(\n            res.data.data.records.map((item, index) => ({\n              ...item.sku,\n              index\n            }))\n          )\n          // console.log(this.data)\n          this.num++\n        }\n      })\n    },\n    onChangeSearch(item) {\n      this.$emit('bomInfo', { key: this.keepKey, bomInfo: item })\n    },\n    // 关闭列表抽屉\n    onChildrenDrawerClose() {\n      this.$emit('isChildrenDrawer', false)\n    },\n    // 提交\n    onChildrenDrawerSubmit() {\n      // console.log(this.data)\n      // this.$emit('setCraftList', this.data)\n      this.$emit('isChildrenDrawer', false)\n    }\n  }\n}\n",{"version":3,"sources":["BomDrawer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BomDrawer.vue","sourceRoot":"src/views/product/pdm/goods/child_info/tab_goodsInfo/bomInfo/drawer","sourcesContent":["<template>\n  <div class=\"craft-diagram\">\n    <h3>原材料分类</h3>\n    <div\n      class=\"demo-infinite-container\"\n      v-infinite-scroll=\"handleInfiniteOnLoad\"\n      :infinite-scroll-disabled=\"busy\"\n      :infinite-scroll-distance=\"10\"\n    >\n      <a-list :dataSource=\"data\">\n        <a-list-item style=\"cursor: pointer;\" slot=\"renderItem\" slot-scope=\"item, index\">\n          <a-list-item-meta :description=\"item.name\" @click=\"onChangeSearch(item)\"></a-list-item-meta>\n        </a-list-item>\n        <div v-if=\"loading && !busy\" class=\"demo-loading-container\">\n          <a-spin/>\n        </div>\n      </a-list>\n    </div>\n    <div\n      :style=\"{\n          position: 'absolute',\n          left: 0,\n          bottom: 0,\n          width: '100%',\n          borderTop: '1px solid #E9E9E9',\n          padding: '10px 16px',\n          background: '#FFF',\n          textAlign: 'right'\n        }\"\n    >\n      <a-button :style=\"{marginRight: '8px'}\" @click=\"onChildrenDrawerClose\">取消</a-button>\n      <a-button type=\"primary\" :style=\"{marginRight: '8px'}\" @click=\"onChildrenDrawerSubmit\">确定</a-button>\n    </div>\n  </div>\n</template>\n<script>\nimport infiniteScroll from 'vue-infinite-scroll'\nimport { bomSearch } from './index'\n\nexport default {\n  name: 'BomDrawer',\n  directives: { infiniteScroll },\n  data() {\n    return {\n      data: [],\n      loading: false,\n      busy: false,\n      num: 1, // 滚动加载数据\n      page: 1 // 初始化总页数\n    }\n  },\n  props: {\n    keepKey: {\n      type: Number,\n      default: 0\n    }\n  },\n  beforeMount() {\n    bomSearch(1).then(res => {\n      if (res.data.code === 0) {\n        // console.log(res.data.data.records)\n        this.data = res.data.data.records.map((item, index) => ({\n          ...item.sku,\n          index\n        }))\n        // console.log(this.data)\n        this.page = res.data.data.pages\n      }\n    })\n  },\n  methods: {\n    handleInfiniteOnLoad() {\n      const data = this.data\n      this.loading = true\n      if (this.num > this.page) {\n        this.$message.warning('没有更多数据了')\n        this.busy = true\n        this.loading = false\n        return\n      }\n      bomSearch(this.num).then(res => {\n        if (res.data.code === 0) {\n          this.loading = false\n          this.data = data.concat(\n            res.data.data.records.map((item, index) => ({\n              ...item.sku,\n              index\n            }))\n          )\n          // console.log(this.data)\n          this.num++\n        }\n      })\n    },\n    onChangeSearch(item) {\n      this.$emit('bomInfo', { key: this.keepKey, bomInfo: item })\n    },\n    // 关闭列表抽屉\n    onChildrenDrawerClose() {\n      this.$emit('isChildrenDrawer', false)\n    },\n    // 提交\n    onChildrenDrawerSubmit() {\n      // console.log(this.data)\n      // this.$emit('setCraftList', this.data)\n      this.$emit('isChildrenDrawer', false)\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.demo-infinite-container {\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n  overflow: auto;\n  padding: 8px 24px 8px 10px;\n  height: 90vh;\n}\n.demo-loading-container {\n  position: absolute;\n  bottom: 40px;\n  width: 100%;\n  text-align: center;\n}\n</style>\n"]}]}