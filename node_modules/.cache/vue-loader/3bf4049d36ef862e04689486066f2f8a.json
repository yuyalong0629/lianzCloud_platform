{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/goods/GoodsInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/goods/GoodsInfo.vue","mtime":1557488049867},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { addGoods, addGoodsSub, reGoodsUpdate } from './goods.js'\nimport { goodsInfoForm } from './goodsData.js'\nimport EditorBar from './EditorBar'\nimport zhCN from 'ant-design-vue/lib/locale-provider/zh_CN'\nimport moment from 'moment'\nimport 'moment/locale/zh-cn'\nimport { setTimeout } from 'timers'\nimport Title from 'utils/Title.vue'\n\nmoment.locale('zh-cn')\nexport default {\n  name: 'GoodsInfo',\n  data() {\n    return {\n      zhCN,\n      // goodsInfo: this.$form.createForm(this),\n      loading: false,\n      dateFormat: 'YYYY-MM-DD HH:mm:ss',\n      goodsInfo: this.$form.createForm(this),\n      previewVisible: false,\n      previewImage: '',\n      headers: {},\n      fileList: [],\n      getCatId: '',\n      getCustId: '',\n      ifCustId: true,\n      isGoodsAttr: true,\n      getCatAllAttrAndOptions: [],\n      getCatAllAttrSelect: [],\n      getCatAllAttrInput: [],\n      setGoodsValueSelect: [],\n      setGoodsValueInput: [],\n      timer: null,\n      // 表单Params\n      goodsInfoForm,\n      // 产品属性\n      goodsAttr: [],\n      newGoodsAttr: [],\n      editor: {\n        info: ''\n      },\n      isClear: false,\n      getGoodsViewsVal: null,\n      saleAfterDate: '2019-04-24',\n      saleBeforeDate: '2019-04-29',\n      editorValue: '',\n      isDisabled: false,\n      categoryEdit: '点击编辑',\n      goodsTaxIcon: '%',\n      goodsWeightIcon: 'KG',\n      isInfoDisplay: true,\n      isInfoDisplayStyle: {\n        display: 'block'\n      },\n      isLabelColor: false,\n      isColor: true\n    }\n  },\n  props: {\n    isCatId: {\n      type: String,\n      required: true\n    },\n    isCustId: {\n      type: String,\n      required: true\n    },\n    setGoodsViews: {\n      type: Object,\n      required: true\n    },\n    isEdit: {\n      type: Boolean,\n      default: false\n    }\n  },\n  created() {\n    this.headers['AUTH-TOKEN'] = localStorage.getItem('ACCESS_TOKEN')\n    this.headers['companyId'] = localStorage.getItem('companyId')\n  },\n  beforeDestroy() {\n    clearTimeout(this.timer)\n  },\n  methods: {\n    moment,\n    // 一级新建列表遮罩显示\n    onClose() {\n      this.isVisible = false\n      this.$emit('isVisible', this.isVisible)\n    },\n    // 保存提交\n    onEditSave(e) {\n      e.preventDefault()\n      this.goodsInfo.validateFields((err, values) => {\n        if (!err) {\n          console.log(values)\n          // 获取表单所有字段value\n          const params = {\n            sku: {\n              ad: this.goodsInfoForm.goodsAd, // 商品广告语\n              afterSale: this.goodsInfoForm.goodsAfterSale, // 售后说明\n              catId: this.getCatId, // 所属类目\n              custDrawNum: this.goodsInfoForm.custDrawNum, // 客户产品图号\n              custDrawVersion: this.goodsInfoForm.custDrawVersion, // 客户产品图号版本号\n              custMaterialName: this.goodsInfoForm.custMaterialName, // 客户物料名\n              custMaterialNum: this.goodsInfoForm.custMaterialNum, // 客户物料号\n              customCode: this.goodsInfoForm.customCode, // 定制编码\n              customFor: this.getCustId, // 定制客户\n              customGoods: this.getCustId > 0 ? 'true' : 'false', // 是否定制商品\n              customSpec: this.goodsInfoForm.customSpec, // 定制规格\n              customVer: 0, // 定制版本\n              deliveryDesc: this.goodsInfoForm.deliveryDesc, // 发货期\n              drawNum: this.goodsInfoForm.drawNum, // 产品图号\n              drawVersion: this.goodsInfoForm.drawVersion, // 产品图号版本号\n              minSale: values.goodsStartNum, // 起售数量\n              name: values.goodsName, // 商品名称\n              netPrice: this.goodsInfoForm.netPrice, // 净价（不含税的价格）\n              originalPrice: this.goodsInfoForm.originalPrice, // 原价(页面展示，不作实际计算使用)\n              perVers: '', // 关联的历史版本\n              postage: this.goodsInfoForm.postage === '无' ? 0 : 0, // 使用邮费模板\n              price: values.goodsNnitprice, // 单价（净价加税费的合计，即销售价）\n              recommend: this.goodsInfoForm.recommend, // 是否推荐产品\n              saleAfter: this.goodsInfoForm.saleAfter, // 上架时间\n              saleBefore: this.goodsInfoForm.saleBefore, // 下架时间\n              saleStatus: this.goodsInfoForm.saleStatus === '上架' ? '0' : '1', // 上架状态（0上架 1下架）\n              skuPic: this.goodsInfoForm.skuPic, // 商品主图\n              taxRate: values.goodsTax, // 税率（百分比）\n              toleranceGrade:\n                this.goodsInfoForm.toleranceGrade === '1'\n                  ? '0'\n                  : this.goodsInfoForm.toleranceGrade === '2'\n                  ? '1'\n                  : '2', // 弹簧公差等级(根据公差等级计算允许的误差值)\n              unit: this.goodsInfoForm.unit, // 计量单位\n              weight: this.goodsInfoForm.weight // 重量\n            },\n            // 库存\n            inventory: {\n              store: values.goodsStockNum\n            },\n            // 包装方式\n            pack: {\n              maxPackCount: this.goodsInfoForm.maxPackCount,\n              maxPackName: this.goodsInfoForm.maxPackName,\n              mediumPackCount: this.goodsInfoForm.mediumPackCount,\n              mediumPackName: this.goodsInfoForm.mediumPackName,\n              minPackCount: this.goodsInfoForm.minPackCount,\n              minPackName: this.goodsInfoForm.minPackName\n            },\n            // 产品属性\n            attrs: this.newGoodsAttr,\n            detail: {\n              detail: this.editor.info,\n              standard: this.goodsInfoForm.standard\n            }\n          }\n          console.log(params)\n          addGoodsSub.call(this, params)\n        }\n      })\n    },\n    // 是否含税\n    onChangeTax(checked) {\n      console.log(checked)\n    },\n    // 是否推介产品\n    onChangePromotion(checked) {\n      this.goodsInfoForm.recommend = checked\n      console.log(this.goodsInfoForm.recommend)\n    },\n    // 发货日期\n    onChangeShipDate(date, dateString) {\n      console.log(date, dateString)\n    },\n    // 上架时间\n    onChangeShelfDate(date, dateString) {\n      console.log(date, dateString)\n      this.saleAfterDate = dateString\n      this.goodsInfoForm.saleAfter = dateString\n    },\n    // 下架时间\n    onChangeObtainedDate(date, dateString) {\n      console.log(date, dateString)\n      this.saleBeforeDate = dateString\n      this.goodsInfoForm.saleBefore = dateString\n    },\n    // 图片上传\n    handleCancel() {\n      this.previewVisible = false\n    },\n    handlePreview(file) {\n      this.previewImage = file.url || file.thumbUrl\n      this.previewVisible = true\n      // console.log(this.previewImage)\n      // console.log(this.previewVisible)\n      console.log(file)\n    },\n    handleChange({ fileList }) {\n      this.fileList = fileList\n      // 商品主图\n      this.timer = setTimeout(() => {\n        this.goodsInfoForm.skuPic = fileList[0].response.data\n      }, 500)\n    },\n    // 获取产品属性ID\n    setCatId() {\n      // 获取产品参数信息\n      addGoods.call(this, this.getCatId).then(() => {\n        this.getCatAllAttrSelect = []\n        this.getCatAllAttrInput = []\n        this.getCatAllAttrAndOptions.forEach(item => {\n          // console.log(item)\n          if (item.inputType === 'RADIO' || item.inputType === 'CHECKBOX') {\n            this.getCatAllAttrSelect.push({\n              name: item.name,\n              id: item.id,\n              required: item.required,\n              attrType: item.attrType,\n              options: item.optionList\n            })\n          }\n          if (item.inputType === 'INPUT') {\n            this.getCatAllAttrInput.push({\n              name: item.name,\n              id: item.id,\n              required: item.required,\n              attrType: item.attrType,\n              valType: item.valType\n            })\n          }\n        })\n        console.log(this.getCatAllAttrSelect)\n        console.log(this.getCatAllAttrInput)\n      })\n      // 设置默认值\n      this.timer = setTimeout(() => {\n        this.goodsInfo.setFieldsValue({\n          goodsTax: '6', // 税率\n          goodsStartNum: '1', // 起售数量\n          goodsStockNum: '0' // 库存数量\n        })\n      }, 400)\n    },\n    // 判断客户详情是否显示\n    setCustId() {\n      console.log(this.getCustId)\n      if (this.getCustId !== '0') {\n        this.ifCustId = true\n        return\n      }\n      this.ifCustId = false\n    },\n    // SELECT\n    handleChangeGoodsParam(item, index) {\n      // console.log(index)\n      // console.log(item)\n      console.log(this.setGoodsValueSelect[index])\n      this.goodsAttr.push({\n        id: item.id,\n        attrType: item.attrType,\n        realVal: this.setGoodsValueSelect[index]\n      })\n      const hash = {}\n      const newArr = this.goodsAttr.reduceRight((item, next) => {\n        hash[next.id] ? '' : (hash[next.id] = true && item.push(next))\n        return item\n      }, [])\n      console.log(newArr)\n      // console.log(this.goodsAttr)\n    },\n    // INPUT\n    onChangeInput(item, index) {\n      console.log(item)\n      // 判断浮点数\n      if (item.valType === 'DECIMAL') {\n        const reg = /^-?(0|[1-9][0-9]*)(\\.[0-9]*)?$/\n        const value = this.setGoodsValueInput[index]\n        console.log(value)\n        if (\n          (!isNaN(value) && reg.test(value)) ||\n          value === '' ||\n          value === '-'\n        ) {\n          console.log(value)\n          this.setGoodsValueInput[index] = value\n          // PUSH\n          this.goodsAttr.push({\n            id: item.id,\n            attrType: item.attrType,\n            realVal: this.setGoodsValueInput[index]\n          })\n          // 去重复\n          const hash = {}\n          const newArr = this.goodsAttr.reduceRight((item, next) => {\n            hash[next.id] ? '' : (hash[next.id] = true && item.push(next))\n            return item\n          }, [])\n          this.newGoodsAttr = newArr\n          console.log(this.newGoodsAttr)\n          return false\n        }\n        this.setGoodsValueInput[index] = ''\n      }\n      // 判断整数\n      if (item.valType === 'NUMBER') {\n        console.log('判断整数')\n        const reg = /^[0-9]*[1-9][0-9]*$/\n        const value = this.setGoodsValueInput[index]\n        console.log(value)\n        if (\n          (!isNaN(value) && reg.test(value)) ||\n          value === '' ||\n          value === '-'\n        ) {\n          console.log(value)\n          this.setGoodsValueInput[index] = value\n          // PUSH\n          this.goodsAttr.push({\n            id: item.id,\n            attrType: item.attrType,\n            realVal: this.setGoodsValueInput[index]\n          })\n          // 去重复\n          const hash = {}\n          const newArr = this.goodsAttr.reduceRight((item, next) => {\n            hash[next.id] ? '' : (hash[next.id] = true && item.push(next))\n            return item\n          }, [])\n          this.newGoodsAttr = newArr\n          console.log(this.newGoodsAttr)\n          return false\n        }\n        this.setGoodsValueInput[index] = ''\n      }\n      // 判断字符串\n      if (item.valType === 'STRING' || item.valType === null) {\n        const value = this.setGoodsValueInput[index]\n        this.setGoodsValueInput[index] = value\n        // PUSH\n        this.goodsAttr.push({\n          id: item.id,\n          attrType: item.attrType,\n          realVal: this.setGoodsValueInput[index]\n        })\n        console.log(this.goodsAttr)\n        // 去重复\n        const hash = {}\n        const newArr = this.goodsAttr.reduceRight((item, next) => {\n          hash[next.id] ? '' : (hash[next.id] = true && item.push(next))\n          return item\n        }, [])\n        this.newGoodsAttr = newArr\n        console.log(this.newGoodsAttr)\n      }\n    },\n    onBlurInput() {\n      console.log(this.setGoodsValueInput)\n    },\n    // 富文本获取HTML\n    onChangeEditor(val) {\n      this.editor.info = ''\n      this.editor.info = val\n      console.log(this.editor.info)\n    },\n    // Goods详情\n    getGoodsViews() {\n      console.log(this.getGoodsViewsVal)\n      this.isDisabled = true\n      this.goodsTaxIcon = ''\n      this.goodsWeightIcon = ''\n      this.isInfoDisplay = false\n      this.isLabelColor = true\n      this.isInfoDisplayStyle.display = 'none'\n      this.timer = setTimeout(() => {\n        this.goodsInfo.setFieldsValue({\n          goodsName: this.getGoodsViewsVal.sku.name, // 产品名称\n          goodsNnitprice: this.getGoodsViewsVal.sku.price, // 单价\n          goodsTax: this.getGoodsViewsVal.sku.taxRate, // 税率\n          goodsStartNum: this.getGoodsViewsVal.sku.minSale, // 起售数量\n          goodsStockNum: this.getGoodsViewsVal.inventory.store, // 库存数量\n        })\n        this.goodsInfoForm.drawNum = this.getGoodsViewsVal.sku.drawNum, // 产品图号\n        this.goodsInfoForm.drawVersion = this.getGoodsViewsVal.sku.drawVersion, // 产品版本号\n        this.goodsInfoForm.maxPackCount = this.getGoodsViewsVal.pack.maxPackCount, // 最大包装\n        this.goodsInfoForm.maxPackName = this.getGoodsViewsVal.pack.maxPackName, // 最大包装单位\n        this.goodsInfoForm.mediumPackCount = this.getGoodsViewsVal.pack.mediumPackCount, // 中等包装\n        this.goodsInfoForm.mediumPackName = this.getGoodsViewsVal.pack.mediumPackName, // 单位\n        this.goodsInfoForm.minPackCount = this.getGoodsViewsVal.pack.minPackCount, // 最小包装\n        this.goodsInfoForm.minPackName = this.getGoodsViewsVal.pack.minPackName, // 单位\n        this.goodsInfoForm.netPrice = this.getGoodsViewsVal.sku.netPrice, // 净价\n        this.goodsInfoForm.originalPrice = this.getGoodsViewsVal.sku.originalPrice, // 原价\n        this.goodsInfoForm.goodsAd = this.getGoodsViewsVal.sku.ad, // 广告语\n        this.goodsInfoForm.goodsAfterSale = this.getGoodsViewsVal.sku.afterSale, // 售后说明\n        this.goodsInfoForm.deliveryDesc = this.getGoodsViewsVal.sku.deliveryDesc, // 发货期\n        this.goodsInfoForm.postage =\n          this.getGoodsViewsVal.sku.postage === '0' ? '无' : '无' // 发货期\n        this.goodsInfoForm.unit = this.getGoodsViewsVal.sku.unit, // 单位\n        this.goodsInfoForm.weight = this.getGoodsViewsVal.sku.weight // 重量\n        this.goodsInfoForm.toleranceGrade = this.getGoodsViewsVal.sku.toleranceGrade, // 弹簧公差等级\n        this.goodsInfoForm.saleStatus =\n          this.getGoodsViewsVal.sku.saleStatus === 'UNSALE' ? '下架' : '上架' // 上下架\n        this.saleAfterDate = this.getGoodsViewsVal.sku.saleAfter, // 上下架时间\n        this.saleBeforeDate = this.getGoodsViewsVal.sku.saleBefore, // 上下架时间\n        this.goodsInfoForm.recommend = this.getGoodsViewsVal.sku.recommend // 是否推荐产品\n        // 客户详情\n        this.goodsInfoForm.customCode = this.getGoodsViewsVal.sku.customCode, // 客户编码\n        this.goodsInfoForm.customSpec = this.getGoodsViewsVal.sku.customSpec, // 客户规格\n        this.goodsInfoForm.custDrawNum = this.getGoodsViewsVal.sku.custDrawNum, // 客户产品图号\n        this.goodsInfoForm.custDrawVersion = this.getGoodsViewsVal.sku.custDrawVersion, // 客户产品图号版本号\n        this.goodsInfoForm.custMaterialName = this.getGoodsViewsVal.sku.custMaterialName,// 客户物料名\n        this.goodsInfoForm.custMaterialNum = this.getGoodsViewsVal.sku.custMaterialNum, // 客户物料号\n        // 产品属性\n        this.getCatAllAttrSelect = []\n        this.getCatAllAttrInput = []\n        this.getGoodsViewsVal.attrs.forEach(item => {\n          if (item.inputType === 'RADIO' || item.inputType === 'CHECKBOX') {\n            this.getCatAllAttrSelect.push({\n              name: item.name,\n              id: item.id,\n              required: item.required,\n              attrType: item.attrType,\n              options: item.optionList\n            })\n            this.setGoodsValueSelect.push(item.realVal || '无')\n            console.log(this.setGoodsValueSelect)\n          }\n          if (item.inputType === 'INPUT') {\n            this.getCatAllAttrInput.push({\n              name: item.name,\n              id: item.id,\n              required: item.required,\n              attrType: item.attrType,\n              valType: item.valType\n            })\n            this.setGoodsValueInput.push(item.realVal || '无')\n          }\n        })\n      }, 400)\n      // 富文本\n      this.editorValue = this.getGoodsViewsVal.detail.detail\n      console.log(this.editor.info)\n      // 执行标准\n      this.goodsInfoForm.standard = this.getGoodsViewsVal.detail.standard\n    },\n    // 保存编辑\n    onHandleCategoryEdit() {\n      // 上级分类隐藏域\n      if (this.categoryEdit === '点击编辑') {\n        this.isDisabled = false\n        this.categoryEdit = '取消编辑'\n        this.isInfoDisplayStyle.display = 'block'\n        this.isLabelColor = false\n        this.isInfoDisplay = true\n        return false\n      }\n      this.isDisabled = true\n      this.isInfoDisplay = false\n      this.isLabelColor = true\n      this.isInfoDisplayStyle.display = 'none'\n      this.categoryEdit = '点击编辑'\n    },\n    // 保存修改\n    onEditUpdate(e) {\n      e.preventDefault()\n      this.goodsInfo.validateFields((err, values) => {\n        if (!err) {\n          console.log(values)\n          // 获取表单所有字段value\n          const params = {\n            sku: {\n              ad: this.goodsInfoForm.goodsAd, // 商品广告语\n              afterSale: this.goodsInfoForm.goodsAfterSale, // 售后说明\n              catId: this.getCatId, // 所属类目\n              custDrawNum: this.goodsInfoForm.custDrawNum, // 客户产品图号\n              custDrawVersion: this.goodsInfoForm.custDrawVersion, // 客户产品图号版本号\n              custMaterialName: this.goodsInfoForm.custMaterialName, // 客户物料名\n              custMaterialNum: this.goodsInfoForm.custMaterialNum, // 客户物料号\n              customCode: this.goodsInfoForm.customCode, // 定制编码\n              customFor: this.getCustId, // 定制客户\n              customGoods: this.getCustId > 0 ? 'true' : 'false', // 是否定制商品\n              customSpec: this.goodsInfoForm.customSpec, // 定制规格\n              customVer: 0, // 定制版本\n              deliveryDesc: this.goodsInfoForm.deliveryDesc, // 发货期\n              drawNum: this.goodsInfoForm.drawNum, // 产品图号\n              drawVersion: this.goodsInfoForm.drawVersion, // 产品图号版本号\n              minSale: values.goodsStartNum, // 起售数量\n              name: values.goodsName, // 商品名称\n              netPrice: this.goodsInfoForm.netPrice, // 净价（不含税的价格）\n              originalPrice: this.goodsInfoForm.originalPrice, // 原价(页面展示，不作实际计算使用)\n              perVers: '', // 关联的历史版本\n              postage: this.goodsInfoForm.postage === '无' ? 0 : 0, // 使用邮费模板\n              price: values.goodsNnitprice, // 单价（净价加税费的合计，即销售价）\n              recommend: this.goodsInfoForm.recommend, // 是否推荐产品\n              saleAfter:\n                this.goodsInfoForm.saleAfter ||\n                this.getGoodsViewsVal.sku.saleAfter, // 上架时间\n              saleBefore:\n                this.goodsInfoForm.saleBefore ||\n                this.getGoodsViewsVal.sku.saleBefore, // 下架时间\n              saleStatus: this.goodsInfoForm.saleStatus === '上架' ? '0' : '1', // 上架状态（0上架 1下架）\n              skuPic: this.goodsInfoForm.skuPic, // 商品主图\n              taxRate: values.goodsTax, // 税率（百分比）\n              toleranceGrade:\n                this.goodsInfoForm.toleranceGrade === '1'\n                  ? '0'\n                  : this.goodsInfoForm.toleranceGrade === '2'\n                  ? '1'\n                  : '2', // 弹簧公差等级(根据公差等级计算允许的误差值)\n              unit: this.goodsInfoForm.unit, // 计量单位\n              weight: this.goodsInfoForm.weight // 重量\n            },\n            // 库存\n            inventory: {\n              store: values.goodsStockNum\n            },\n            // 包装方式\n            pack: {\n              maxPackCount: this.goodsInfoForm.maxPackCount,\n              maxPackName: this.goodsInfoForm.maxPackName,\n              mediumPackCount: this.goodsInfoForm.mediumPackCount,\n              mediumPackName: this.goodsInfoForm.mediumPackName,\n              minPackCount: this.goodsInfoForm.minPackCount,\n              minPackName: this.goodsInfoForm.minPackName\n            },\n            // 产品属性\n            attrs: this.newGoodsAttr,\n            detail: {\n              detail: this.editor.info || this.getGoodsViewsVal.detail.detail,\n              standard: this.goodsInfoForm.standard\n            }\n          }\n          console.log(params)\n          reGoodsUpdate.call(this, params)\n        }\n      })\n    }\n  },\n  watch: {\n    isCatId: {\n      immediate: true,\n      handler(val) {\n        console.log(val)\n        this.getCatId = val\n        this.setCatId()\n      },\n      deep: true\n    },\n    isCustId: {\n      immediate: true,\n      handler(val) {\n        this.getCustId = val\n        this.setCustId()\n      },\n      deep: true\n    },\n    setGoodsViews: {\n      handler(val) {\n        this.getGoodsViewsVal = val\n        this.getGoodsViews()\n      },\n      deep: true\n    }\n  },\n  computed: {\n    isCategoryEdit() {\n      return this.isEdit\n    }\n  },\n  components: {\n    EditorBar,\n    Title\n  }\n}\n",{"version":3,"sources":["GoodsInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6oBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GoodsInfo.vue","sourceRoot":"src/views/product/goods","sourcesContent":["<template>\n  <a-locale-provider :locale=\"zhCN\">\n    <div class=\"goodsInfo\">\n      <a-form :form=\"goodsInfo\" layout=\"horizontal\" hideRequiredMark>\n        <a-row>\n          <Title>\n            <a-col :span=\"12\">\n              <h3 class=\"prompt-title\">{{ isCategoryEdit === false ? '新建商品信息' : '商品信息详情' }}</h3>\n            </a-col>\n            <a-col :span=\"12\" class=\"categoryEdit-wrapper\" v-if=\"isCategoryEdit\">\n              <a-button\n                size=\"small\"\n                @click=\"onHandleCategoryEdit\"\n                class=\"categoryEdit\"\n              >{{ categoryEdit }}</a-button>\n            </a-col>\n          </Title>\n          <a-col :span=\"24\">\n            <h3 class=\"goodsInfo-title\">产品详情</h3>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"产品编码\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input disabled value=\"默认生成\"/>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"产品名称\"\n              :label-col=\"{ span: 4 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input\n                :disabled=\"isDisabled\"\n                v-decorator=\"['goodsName', {rules: [{ required: true, message: '请输入产品名称' }]}]\"\n                placeholder=\"产品名称\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"产品图号\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input :disabled=\"isDisabled\" v-model=\"goodsInfoForm.drawNum\" placeholder=\"产品图号\"/>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"产品图号版本号\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 10 }\"\n            >\n              <a-input\n                :disabled=\"isDisabled\"\n                v-model=\"goodsInfoForm.drawVersion\"\n                placeholder=\"产品图号版本号\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"最大包装\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input-group compact>\n                <a-input\n                  :disabled=\"isDisabled\"\n                  style=\"width: 60%\"\n                  v-model=\"goodsInfoForm.maxPackCount\"\n                  placeholder=\"最大包装\"\n                />\n                <a-input\n                  :disabled=\"isDisabled\"\n                  style=\"width: 40%\"\n                  v-model=\"goodsInfoForm.maxPackName\"\n                  placeholder=\"单位\"\n                />\n              </a-input-group>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"中等包装\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input-group compact>\n                <a-input\n                  :disabled=\"isDisabled\"\n                  style=\"width: 60%\"\n                  v-model=\"goodsInfoForm.mediumPackCount\"\n                  placeholder=\"中等包装\"\n                />\n                <a-input\n                  :disabled=\"isDisabled\"\n                  style=\"width: 40%\"\n                  v-model=\"goodsInfoForm.mediumPackName\"\n                  placeholder=\"单位\"\n                />\n              </a-input-group>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"最小包装\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input-group compact>\n                <a-input\n                  :disabled=\"isDisabled\"\n                  style=\"width: 60%\"\n                  v-model=\"goodsInfoForm.minPackCount\"\n                  placeholder=\"最小包装\"\n                />\n                <a-input\n                  :disabled=\"isDisabled\"\n                  style=\"width: 40%\"\n                  v-model=\"goodsInfoForm.minPackName\"\n                  placeholder=\"单位\"\n                />\n              </a-input-group>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"净价\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input :disabled=\"isDisabled\" v-model=\"goodsInfoForm.netPrice\" placeholder=\"净价\"/>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"单价\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input\n                :disabled=\"isDisabled\"\n                v-decorator=\"['goodsNnitprice', {rules: [{ required: true, message: '请输入单价' }]}]\"\n                placeholder=\"单价\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"税率\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input\n                :disabled=\"isDisabled\"\n                v-decorator=\"['goodsTax', {rules: [{ required: true, message: '请输入税率' }]}]\"\n                :addonAfter=\"goodsTaxIcon\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"12\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"原价\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input\n                :disabled=\"isDisabled\"\n                v-model=\"goodsInfoForm.originalPrice\"\n                placeholder=\"原价\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"起售数量\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input-number\n                :disabled=\"isDisabled\"\n                v-decorator=\"['goodsStartNum', {rules: [{ required: true, message: '请输入起售数量' }]}]\"\n                placeholder=\"起售数量\"\n                style=\"width: 200px;\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"库存数量\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input-number\n                :disabled=\"isDisabled\"\n                v-decorator=\"['goodsStockNum', {rules: [{ required: true, message: '请输入库存数量' }]}]\"\n                placeholder=\"库存数量\"\n                style=\"width: 200px;\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"24\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"广告语\"\n              :label-col=\"{ span: 2 }\"\n              :wrapper-col=\"{ span: 14 }\"\n            >\n              <a-input\n                :disabled=\"isDisabled\"\n                placeholder=\"广告语\"\n                v-model=\"goodsInfoForm.goodsAd\"\n                autosize\n                class=\"labelLeft\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"24\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"售后说明\"\n              :label-col=\"{ span: 2 }\"\n              :wrapper-col=\"{ span: 14 }\"\n            >\n              <a-input\n                :disabled=\"isDisabled\"\n                v-model=\"goodsInfoForm.goodsAfterSale\"\n                placeholder=\"售后说明\"\n                autosize\n                class=\"labelLeft\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"发货期\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 14 }\"\n            >\n              <a-input\n                :disabled=\"isDisabled\"\n                v-model=\"goodsInfoForm.deliveryDesc\"\n                placeholder=\"发货期\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"邮费模版\"\n              :label-col=\"{ span: 2 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <!-- <a-textarea v-model=\"goodsInfoForm.postage\" placeholder=\"邮费模版\" autosize/> -->\n              <a-select\n                :class=\"{setColor: isColor}\"\n                class=\"inputWidth\"\n                :disabled=\"isDisabled\"\n                v-model=\"goodsInfoForm.postage\"\n                :showArrow=\"isInfoDisplay\"\n                placeholder=\"邮费模版\"\n              >\n                <a-select-option value=\"0\">无</a-select-option>\n              </a-select>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"单位\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input :disabled=\"isDisabled\" v-model=\"goodsInfoForm.unit\" placeholder=\"单位\"/>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"单个重量\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input\n                :disabled=\"isDisabled\"\n                :addonAfter=\"goodsWeightIcon\"\n                v-model=\"goodsInfoForm.weight\"\n                placeholder=\"单个重量\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"弹簧公差等级\"\n              :label-col=\"{ span: 8 }\"\n              :wrapper-col=\"{ span: 10 }\"\n            >\n              <a-select\n                :class=\"{setColor: isColor}\"\n                :disabled=\"isDisabled\"\n                v-model=\"goodsInfoForm.toleranceGrade\"\n                placeholder=\"弹簧公差等级\"\n                class=\"inputWidth\"\n                :showArrow=\"isInfoDisplay\"\n              >\n                <a-select-option value=\"1\">1</a-select-option>\n                <a-select-option value=\"2\">2</a-select-option>\n                <a-select-option value=\"3\">3</a-select-option>\n              </a-select>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"上下架\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-select\n                :class=\"{setColor: isColor}\"\n                :disabled=\"isDisabled\"\n                v-model=\"goodsInfoForm.saleStatus\"\n                placeholder=\"上下架\"\n                class=\"inputWidth\"\n                :showArrow=\"isInfoDisplay\"\n              >\n                <a-select-option value=\"上架\">上架</a-select-option>\n                <a-select-option value=\"下架\">下架</a-select-option>\n              </a-select>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"上架时间\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 14 }\"\n            >\n              <a-date-picker\n                :disabled=\"isDisabled\"\n                showTime\n                placeholder=\"上架时间\"\n                :format=\"dateFormat\"\n                :value=\"moment(saleAfterDate, dateFormat)\"\n                @change=\"onChangeShelfDate\"\n              >\n                <a-icon slot=\"suffixIcon\" type=\"calendar\" :style=\"isInfoDisplayStyle\"/>\n              </a-date-picker>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"12\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"下架时间\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 14 }\"\n            >\n              <a-date-picker\n                :disabled=\"isDisabled\"\n                showTime\n                placeholder=\"下架时间\"\n                :format=\"dateFormat\"\n                :value=\"moment(saleBeforeDate, dateFormat)\"\n                @change=\"onChangeObtainedDate\"\n              >\n                <a-icon slot=\"suffixIcon\" type=\"calendar\" :style=\"isInfoDisplayStyle\"/>\n              </a-date-picker>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"是否含税\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 6 }\"\n            >\n              <a-switch :disabled=\"isDisabled\" @change=\"onChangeTax\"/>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"是否推荐产品\"\n              :label-col=\"{ span: 10 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-switch\n                :disabled=\"isDisabled\"\n                v-model=\"goodsInfoForm.recommend\"\n                @change=\"onChangePromotion\"\n              />\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <!-- 客户详情 -->\n        <a-row v-if=\"ifCustId\">\n          <a-col :span=\"24\">\n            <h3 class=\"goodsInfo-title\">客户详情</h3>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"定制编码\"\n              :label-col=\"{ span: 8 }\"\n              :wrapper-col=\"{ span: 14 }\"\n            >\n              <a-input\n                :disabled=\"isDisabled\"\n                v-model=\"goodsInfoForm.customCode\"\n                placeholder=\"定制编码\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"客户规格\"\n              :label-col=\"{ span: 8 }\"\n              :wrapper-col=\"{ span: 15 }\"\n            >\n              <a-input\n                :disabled=\"isDisabled\"\n                v-model=\"goodsInfoForm.customSpec\"\n                placeholder=\"客户规格\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"版本号\"\n              :label-col=\"{ span: 8 }\"\n              :wrapper-col=\"{ span: 14 }\"\n            >\n              <a-input :disabled=\"isDisabled\" placeholder=\"版本号\"/>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"客户产品图号\"\n              :label-col=\"{ span: 8 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input\n                :disabled=\"isDisabled\"\n                v-model=\"goodsInfoForm.custDrawNum\"\n                placeholder=\"客户产品图号\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"客户产品图号版本号\"\n              :label-col=\"{ span: 8 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input\n                :disabled=\"isDisabled\"\n                v-model=\"goodsInfoForm.custDrawVersion\"\n                placeholder=\"客户产品图号版本号\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"客户物料号\"\n              :label-col=\"{ span: 6 }\"\n              :wrapper-col=\"{ span: 14 }\"\n            >\n              <a-input\n                :disabled=\"isDisabled\"\n                v-model=\"goodsInfoForm.custMaterialNum\"\n                placeholder=\"客户物料号\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"8\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"客户物料名\"\n              :label-col=\"{ span: 8 }\"\n              :wrapper-col=\"{ span: 14 }\"\n            >\n              <a-input\n                :disabled=\"isDisabled\"\n                v-model=\"goodsInfoForm.custMaterialName\"\n                placeholder=\"客户物料名\"\n              />\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row>\n          <a-col :span=\"24\">\n            <h3 class=\"goodsInfo-title\">产品属性</h3>\n          </a-col>\n          <!-- SELECT -->\n          <a-col\n            :span=\"8\"\n            v-if=\"getCatAllAttrSelect.length > 0 ? isGoodsAttr : !isGoodsAttr\"\n            v-for=\"(item, index) in getCatAllAttrSelect\"\n            :key=\"item.name\"\n          >\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              :label=\"item.name\"\n              :label-col=\"{ span: 8 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-select\n                allowClear\n                :class=\"{setColor: isColor}\"\n                :disabled=\"isDisabled\"\n                v-model=\"setGoodsValueSelect[index]\"\n                :placeholder=\"`请输入${item.name}`\"\n                @change=\"handleChangeGoodsParam(item, index)\"\n                class=\"inputWidth\"\n                :showArrow=\"isInfoDisplay\"\n              >\n                <a-select-option\n                  :value=\"cItem.val\"\n                  v-for=\"(cItem, index) in item.options\"\n                  :key=\"index\"\n                >{{ cItem.val }}</a-select-option>\n              </a-select>\n            </a-form-item>\n          </a-col>\n          <!-- INPUT -->\n          <a-col\n            :span=\"8\"\n            v-if=\"getCatAllAttrInput.length > 0 ? isGoodsAttr : !isGoodsAttr\"\n            v-for=\"(item, index) in getCatAllAttrInput\"\n            :key=\"index\"\n          >\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              :label=\"item.name\"\n              :label-col=\"{ span: 8 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input\n                :disabled=\"isDisabled\"\n                v-model=\"setGoodsValueInput[index]\"\n                @change=\"onChangeInput(item, index)\"\n                @blur=\"onBlurInput\"\n                :placeholder=\"item.valType === 'DECIMAL' ? `请输入浮点数` : (item.valType === 'NUMBER' ? `请输入整数` : `请输入字符串`)\"\n                maxlength=\"25\"\n              />\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row>\n          <a-col :span=\"24\">\n            <h3 class=\"goodsInfo-title\">详细描述</h3>\n          </a-col>\n          <a-col :span=\"24\" class=\"markdown-wrapper\">\n            <editor-bar\n              v-model=\"editor.info\"\n              :editorValue=\"editorValue\"\n              :isClear=\"isClear\"\n              @change=\"onChangeEditor\"\n            ></editor-bar>\n          </a-col>\n          <a-col :span=\"24\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"轮播图上传\"\n              :label-col=\"{ span: 4 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <div class=\"clearfix\">\n                <a-upload\n                  :disabled=\"isDisabled\"\n                  action=\"/api/ic/user/file/uploadFile\"\n                  :data=\"{'bizType': 'GOODS'}\"\n                  :headers=\"headers\"\n                  listType=\"picture-card\"\n                  :fileList=\"fileList\"\n                  @preview=\"handlePreview\"\n                  @change=\"handleChange\"\n                >\n                  <div v-if=\"fileList.length < 10\">\n                    <a-icon type=\"plus\"/>\n                    <div class=\"ant-upload-text\">Upload</div>\n                  </div>\n                </a-upload>\n                <a-modal :visible=\"previewVisible\" :footer=\"null\" @cancel=\"handleCancel\">\n                  <img alt=\"example\" style=\"width: 100%\" :src=\"previewImage\">\n                </a-modal>\n              </div>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"24\" style=\"marginBottom: 30px;\">\n            <a-form-item\n              :class=\"{ setLabelColor: isLabelColor }\"\n              label=\"执行标准\"\n              :label-col=\"{ span: 4 }\"\n              :wrapper-col=\"{ span: 12 }\"\n            >\n              <a-input :disabled=\"isDisabled\" v-model=\"goodsInfoForm.standard\" placeholder=\"执行标准\"/>\n            </a-form-item>\n          </a-col>\n        </a-row>\n      </a-form>\n      <div\n        :style=\"{\n          position: 'absolute',\n          left: 0,\n          bottom: 0,\n          width: '100%',\n          borderTop: '1px solid #e9e9e9',\n          padding: '10px 16px',\n          background: '#fff',\n          textAlign: 'right',\n          zIndex: 100\n        }\"\n      >\n        <a-button :style=\"{marginRight: '8px'}\" @click=\"onClose\">取消</a-button>\n        <a-button @click=\"onEditSave\" type=\"primary\" v-if=\"!isCategoryEdit\" :loading=\"loading\">提交</a-button>\n        <a-button\n          @click=\"onEditUpdate\"\n          type=\"primary\"\n          v-if=\"isCategoryEdit\"\n          :disabled=\"isDisabled\"\n          :loading=\"loading\"\n        >保存</a-button>\n      </div>\n    </div>\n  </a-locale-provider>\n</template>\n<script>\nimport { addGoods, addGoodsSub, reGoodsUpdate } from './goods.js'\nimport { goodsInfoForm } from './goodsData.js'\nimport EditorBar from './EditorBar'\nimport zhCN from 'ant-design-vue/lib/locale-provider/zh_CN'\nimport moment from 'moment'\nimport 'moment/locale/zh-cn'\nimport { setTimeout } from 'timers'\nimport Title from 'utils/Title.vue'\n\nmoment.locale('zh-cn')\nexport default {\n  name: 'GoodsInfo',\n  data() {\n    return {\n      zhCN,\n      // goodsInfo: this.$form.createForm(this),\n      loading: false,\n      dateFormat: 'YYYY-MM-DD HH:mm:ss',\n      goodsInfo: this.$form.createForm(this),\n      previewVisible: false,\n      previewImage: '',\n      headers: {},\n      fileList: [],\n      getCatId: '',\n      getCustId: '',\n      ifCustId: true,\n      isGoodsAttr: true,\n      getCatAllAttrAndOptions: [],\n      getCatAllAttrSelect: [],\n      getCatAllAttrInput: [],\n      setGoodsValueSelect: [],\n      setGoodsValueInput: [],\n      timer: null,\n      // 表单Params\n      goodsInfoForm,\n      // 产品属性\n      goodsAttr: [],\n      newGoodsAttr: [],\n      editor: {\n        info: ''\n      },\n      isClear: false,\n      getGoodsViewsVal: null,\n      saleAfterDate: '2019-04-24',\n      saleBeforeDate: '2019-04-29',\n      editorValue: '',\n      isDisabled: false,\n      categoryEdit: '点击编辑',\n      goodsTaxIcon: '%',\n      goodsWeightIcon: 'KG',\n      isInfoDisplay: true,\n      isInfoDisplayStyle: {\n        display: 'block'\n      },\n      isLabelColor: false,\n      isColor: true\n    }\n  },\n  props: {\n    isCatId: {\n      type: String,\n      required: true\n    },\n    isCustId: {\n      type: String,\n      required: true\n    },\n    setGoodsViews: {\n      type: Object,\n      required: true\n    },\n    isEdit: {\n      type: Boolean,\n      default: false\n    }\n  },\n  created() {\n    this.headers['AUTH-TOKEN'] = localStorage.getItem('ACCESS_TOKEN')\n    this.headers['companyId'] = localStorage.getItem('companyId')\n  },\n  beforeDestroy() {\n    clearTimeout(this.timer)\n  },\n  methods: {\n    moment,\n    // 一级新建列表遮罩显示\n    onClose() {\n      this.isVisible = false\n      this.$emit('isVisible', this.isVisible)\n    },\n    // 保存提交\n    onEditSave(e) {\n      e.preventDefault()\n      this.goodsInfo.validateFields((err, values) => {\n        if (!err) {\n          console.log(values)\n          // 获取表单所有字段value\n          const params = {\n            sku: {\n              ad: this.goodsInfoForm.goodsAd, // 商品广告语\n              afterSale: this.goodsInfoForm.goodsAfterSale, // 售后说明\n              catId: this.getCatId, // 所属类目\n              custDrawNum: this.goodsInfoForm.custDrawNum, // 客户产品图号\n              custDrawVersion: this.goodsInfoForm.custDrawVersion, // 客户产品图号版本号\n              custMaterialName: this.goodsInfoForm.custMaterialName, // 客户物料名\n              custMaterialNum: this.goodsInfoForm.custMaterialNum, // 客户物料号\n              customCode: this.goodsInfoForm.customCode, // 定制编码\n              customFor: this.getCustId, // 定制客户\n              customGoods: this.getCustId > 0 ? 'true' : 'false', // 是否定制商品\n              customSpec: this.goodsInfoForm.customSpec, // 定制规格\n              customVer: 0, // 定制版本\n              deliveryDesc: this.goodsInfoForm.deliveryDesc, // 发货期\n              drawNum: this.goodsInfoForm.drawNum, // 产品图号\n              drawVersion: this.goodsInfoForm.drawVersion, // 产品图号版本号\n              minSale: values.goodsStartNum, // 起售数量\n              name: values.goodsName, // 商品名称\n              netPrice: this.goodsInfoForm.netPrice, // 净价（不含税的价格）\n              originalPrice: this.goodsInfoForm.originalPrice, // 原价(页面展示，不作实际计算使用)\n              perVers: '', // 关联的历史版本\n              postage: this.goodsInfoForm.postage === '无' ? 0 : 0, // 使用邮费模板\n              price: values.goodsNnitprice, // 单价（净价加税费的合计，即销售价）\n              recommend: this.goodsInfoForm.recommend, // 是否推荐产品\n              saleAfter: this.goodsInfoForm.saleAfter, // 上架时间\n              saleBefore: this.goodsInfoForm.saleBefore, // 下架时间\n              saleStatus: this.goodsInfoForm.saleStatus === '上架' ? '0' : '1', // 上架状态（0上架 1下架）\n              skuPic: this.goodsInfoForm.skuPic, // 商品主图\n              taxRate: values.goodsTax, // 税率（百分比）\n              toleranceGrade:\n                this.goodsInfoForm.toleranceGrade === '1'\n                  ? '0'\n                  : this.goodsInfoForm.toleranceGrade === '2'\n                  ? '1'\n                  : '2', // 弹簧公差等级(根据公差等级计算允许的误差值)\n              unit: this.goodsInfoForm.unit, // 计量单位\n              weight: this.goodsInfoForm.weight // 重量\n            },\n            // 库存\n            inventory: {\n              store: values.goodsStockNum\n            },\n            // 包装方式\n            pack: {\n              maxPackCount: this.goodsInfoForm.maxPackCount,\n              maxPackName: this.goodsInfoForm.maxPackName,\n              mediumPackCount: this.goodsInfoForm.mediumPackCount,\n              mediumPackName: this.goodsInfoForm.mediumPackName,\n              minPackCount: this.goodsInfoForm.minPackCount,\n              minPackName: this.goodsInfoForm.minPackName\n            },\n            // 产品属性\n            attrs: this.newGoodsAttr,\n            detail: {\n              detail: this.editor.info,\n              standard: this.goodsInfoForm.standard\n            }\n          }\n          console.log(params)\n          addGoodsSub.call(this, params)\n        }\n      })\n    },\n    // 是否含税\n    onChangeTax(checked) {\n      console.log(checked)\n    },\n    // 是否推介产品\n    onChangePromotion(checked) {\n      this.goodsInfoForm.recommend = checked\n      console.log(this.goodsInfoForm.recommend)\n    },\n    // 发货日期\n    onChangeShipDate(date, dateString) {\n      console.log(date, dateString)\n    },\n    // 上架时间\n    onChangeShelfDate(date, dateString) {\n      console.log(date, dateString)\n      this.saleAfterDate = dateString\n      this.goodsInfoForm.saleAfter = dateString\n    },\n    // 下架时间\n    onChangeObtainedDate(date, dateString) {\n      console.log(date, dateString)\n      this.saleBeforeDate = dateString\n      this.goodsInfoForm.saleBefore = dateString\n    },\n    // 图片上传\n    handleCancel() {\n      this.previewVisible = false\n    },\n    handlePreview(file) {\n      this.previewImage = file.url || file.thumbUrl\n      this.previewVisible = true\n      // console.log(this.previewImage)\n      // console.log(this.previewVisible)\n      console.log(file)\n    },\n    handleChange({ fileList }) {\n      this.fileList = fileList\n      // 商品主图\n      this.timer = setTimeout(() => {\n        this.goodsInfoForm.skuPic = fileList[0].response.data\n      }, 500)\n    },\n    // 获取产品属性ID\n    setCatId() {\n      // 获取产品参数信息\n      addGoods.call(this, this.getCatId).then(() => {\n        this.getCatAllAttrSelect = []\n        this.getCatAllAttrInput = []\n        this.getCatAllAttrAndOptions.forEach(item => {\n          // console.log(item)\n          if (item.inputType === 'RADIO' || item.inputType === 'CHECKBOX') {\n            this.getCatAllAttrSelect.push({\n              name: item.name,\n              id: item.id,\n              required: item.required,\n              attrType: item.attrType,\n              options: item.optionList\n            })\n          }\n          if (item.inputType === 'INPUT') {\n            this.getCatAllAttrInput.push({\n              name: item.name,\n              id: item.id,\n              required: item.required,\n              attrType: item.attrType,\n              valType: item.valType\n            })\n          }\n        })\n        console.log(this.getCatAllAttrSelect)\n        console.log(this.getCatAllAttrInput)\n      })\n      // 设置默认值\n      this.timer = setTimeout(() => {\n        this.goodsInfo.setFieldsValue({\n          goodsTax: '6', // 税率\n          goodsStartNum: '1', // 起售数量\n          goodsStockNum: '0' // 库存数量\n        })\n      }, 400)\n    },\n    // 判断客户详情是否显示\n    setCustId() {\n      console.log(this.getCustId)\n      if (this.getCustId !== '0') {\n        this.ifCustId = true\n        return\n      }\n      this.ifCustId = false\n    },\n    // SELECT\n    handleChangeGoodsParam(item, index) {\n      // console.log(index)\n      // console.log(item)\n      console.log(this.setGoodsValueSelect[index])\n      this.goodsAttr.push({\n        id: item.id,\n        attrType: item.attrType,\n        realVal: this.setGoodsValueSelect[index]\n      })\n      const hash = {}\n      const newArr = this.goodsAttr.reduceRight((item, next) => {\n        hash[next.id] ? '' : (hash[next.id] = true && item.push(next))\n        return item\n      }, [])\n      console.log(newArr)\n      // console.log(this.goodsAttr)\n    },\n    // INPUT\n    onChangeInput(item, index) {\n      console.log(item)\n      // 判断浮点数\n      if (item.valType === 'DECIMAL') {\n        const reg = /^-?(0|[1-9][0-9]*)(\\.[0-9]*)?$/\n        const value = this.setGoodsValueInput[index]\n        console.log(value)\n        if (\n          (!isNaN(value) && reg.test(value)) ||\n          value === '' ||\n          value === '-'\n        ) {\n          console.log(value)\n          this.setGoodsValueInput[index] = value\n          // PUSH\n          this.goodsAttr.push({\n            id: item.id,\n            attrType: item.attrType,\n            realVal: this.setGoodsValueInput[index]\n          })\n          // 去重复\n          const hash = {}\n          const newArr = this.goodsAttr.reduceRight((item, next) => {\n            hash[next.id] ? '' : (hash[next.id] = true && item.push(next))\n            return item\n          }, [])\n          this.newGoodsAttr = newArr\n          console.log(this.newGoodsAttr)\n          return false\n        }\n        this.setGoodsValueInput[index] = ''\n      }\n      // 判断整数\n      if (item.valType === 'NUMBER') {\n        console.log('判断整数')\n        const reg = /^[0-9]*[1-9][0-9]*$/\n        const value = this.setGoodsValueInput[index]\n        console.log(value)\n        if (\n          (!isNaN(value) && reg.test(value)) ||\n          value === '' ||\n          value === '-'\n        ) {\n          console.log(value)\n          this.setGoodsValueInput[index] = value\n          // PUSH\n          this.goodsAttr.push({\n            id: item.id,\n            attrType: item.attrType,\n            realVal: this.setGoodsValueInput[index]\n          })\n          // 去重复\n          const hash = {}\n          const newArr = this.goodsAttr.reduceRight((item, next) => {\n            hash[next.id] ? '' : (hash[next.id] = true && item.push(next))\n            return item\n          }, [])\n          this.newGoodsAttr = newArr\n          console.log(this.newGoodsAttr)\n          return false\n        }\n        this.setGoodsValueInput[index] = ''\n      }\n      // 判断字符串\n      if (item.valType === 'STRING' || item.valType === null) {\n        const value = this.setGoodsValueInput[index]\n        this.setGoodsValueInput[index] = value\n        // PUSH\n        this.goodsAttr.push({\n          id: item.id,\n          attrType: item.attrType,\n          realVal: this.setGoodsValueInput[index]\n        })\n        console.log(this.goodsAttr)\n        // 去重复\n        const hash = {}\n        const newArr = this.goodsAttr.reduceRight((item, next) => {\n          hash[next.id] ? '' : (hash[next.id] = true && item.push(next))\n          return item\n        }, [])\n        this.newGoodsAttr = newArr\n        console.log(this.newGoodsAttr)\n      }\n    },\n    onBlurInput() {\n      console.log(this.setGoodsValueInput)\n    },\n    // 富文本获取HTML\n    onChangeEditor(val) {\n      this.editor.info = ''\n      this.editor.info = val\n      console.log(this.editor.info)\n    },\n    // Goods详情\n    getGoodsViews() {\n      console.log(this.getGoodsViewsVal)\n      this.isDisabled = true\n      this.goodsTaxIcon = ''\n      this.goodsWeightIcon = ''\n      this.isInfoDisplay = false\n      this.isLabelColor = true\n      this.isInfoDisplayStyle.display = 'none'\n      this.timer = setTimeout(() => {\n        this.goodsInfo.setFieldsValue({\n          goodsName: this.getGoodsViewsVal.sku.name, // 产品名称\n          goodsNnitprice: this.getGoodsViewsVal.sku.price, // 单价\n          goodsTax: this.getGoodsViewsVal.sku.taxRate, // 税率\n          goodsStartNum: this.getGoodsViewsVal.sku.minSale, // 起售数量\n          goodsStockNum: this.getGoodsViewsVal.inventory.store, // 库存数量\n        })\n        this.goodsInfoForm.drawNum = this.getGoodsViewsVal.sku.drawNum, // 产品图号\n        this.goodsInfoForm.drawVersion = this.getGoodsViewsVal.sku.drawVersion, // 产品版本号\n        this.goodsInfoForm.maxPackCount = this.getGoodsViewsVal.pack.maxPackCount, // 最大包装\n        this.goodsInfoForm.maxPackName = this.getGoodsViewsVal.pack.maxPackName, // 最大包装单位\n        this.goodsInfoForm.mediumPackCount = this.getGoodsViewsVal.pack.mediumPackCount, // 中等包装\n        this.goodsInfoForm.mediumPackName = this.getGoodsViewsVal.pack.mediumPackName, // 单位\n        this.goodsInfoForm.minPackCount = this.getGoodsViewsVal.pack.minPackCount, // 最小包装\n        this.goodsInfoForm.minPackName = this.getGoodsViewsVal.pack.minPackName, // 单位\n        this.goodsInfoForm.netPrice = this.getGoodsViewsVal.sku.netPrice, // 净价\n        this.goodsInfoForm.originalPrice = this.getGoodsViewsVal.sku.originalPrice, // 原价\n        this.goodsInfoForm.goodsAd = this.getGoodsViewsVal.sku.ad, // 广告语\n        this.goodsInfoForm.goodsAfterSale = this.getGoodsViewsVal.sku.afterSale, // 售后说明\n        this.goodsInfoForm.deliveryDesc = this.getGoodsViewsVal.sku.deliveryDesc, // 发货期\n        this.goodsInfoForm.postage =\n          this.getGoodsViewsVal.sku.postage === '0' ? '无' : '无' // 发货期\n        this.goodsInfoForm.unit = this.getGoodsViewsVal.sku.unit, // 单位\n        this.goodsInfoForm.weight = this.getGoodsViewsVal.sku.weight // 重量\n        this.goodsInfoForm.toleranceGrade = this.getGoodsViewsVal.sku.toleranceGrade, // 弹簧公差等级\n        this.goodsInfoForm.saleStatus =\n          this.getGoodsViewsVal.sku.saleStatus === 'UNSALE' ? '下架' : '上架' // 上下架\n        this.saleAfterDate = this.getGoodsViewsVal.sku.saleAfter, // 上下架时间\n        this.saleBeforeDate = this.getGoodsViewsVal.sku.saleBefore, // 上下架时间\n        this.goodsInfoForm.recommend = this.getGoodsViewsVal.sku.recommend // 是否推荐产品\n        // 客户详情\n        this.goodsInfoForm.customCode = this.getGoodsViewsVal.sku.customCode, // 客户编码\n        this.goodsInfoForm.customSpec = this.getGoodsViewsVal.sku.customSpec, // 客户规格\n        this.goodsInfoForm.custDrawNum = this.getGoodsViewsVal.sku.custDrawNum, // 客户产品图号\n        this.goodsInfoForm.custDrawVersion = this.getGoodsViewsVal.sku.custDrawVersion, // 客户产品图号版本号\n        this.goodsInfoForm.custMaterialName = this.getGoodsViewsVal.sku.custMaterialName,// 客户物料名\n        this.goodsInfoForm.custMaterialNum = this.getGoodsViewsVal.sku.custMaterialNum, // 客户物料号\n        // 产品属性\n        this.getCatAllAttrSelect = []\n        this.getCatAllAttrInput = []\n        this.getGoodsViewsVal.attrs.forEach(item => {\n          if (item.inputType === 'RADIO' || item.inputType === 'CHECKBOX') {\n            this.getCatAllAttrSelect.push({\n              name: item.name,\n              id: item.id,\n              required: item.required,\n              attrType: item.attrType,\n              options: item.optionList\n            })\n            this.setGoodsValueSelect.push(item.realVal || '无')\n            console.log(this.setGoodsValueSelect)\n          }\n          if (item.inputType === 'INPUT') {\n            this.getCatAllAttrInput.push({\n              name: item.name,\n              id: item.id,\n              required: item.required,\n              attrType: item.attrType,\n              valType: item.valType\n            })\n            this.setGoodsValueInput.push(item.realVal || '无')\n          }\n        })\n      }, 400)\n      // 富文本\n      this.editorValue = this.getGoodsViewsVal.detail.detail\n      console.log(this.editor.info)\n      // 执行标准\n      this.goodsInfoForm.standard = this.getGoodsViewsVal.detail.standard\n    },\n    // 保存编辑\n    onHandleCategoryEdit() {\n      // 上级分类隐藏域\n      if (this.categoryEdit === '点击编辑') {\n        this.isDisabled = false\n        this.categoryEdit = '取消编辑'\n        this.isInfoDisplayStyle.display = 'block'\n        this.isLabelColor = false\n        this.isInfoDisplay = true\n        return false\n      }\n      this.isDisabled = true\n      this.isInfoDisplay = false\n      this.isLabelColor = true\n      this.isInfoDisplayStyle.display = 'none'\n      this.categoryEdit = '点击编辑'\n    },\n    // 保存修改\n    onEditUpdate(e) {\n      e.preventDefault()\n      this.goodsInfo.validateFields((err, values) => {\n        if (!err) {\n          console.log(values)\n          // 获取表单所有字段value\n          const params = {\n            sku: {\n              ad: this.goodsInfoForm.goodsAd, // 商品广告语\n              afterSale: this.goodsInfoForm.goodsAfterSale, // 售后说明\n              catId: this.getCatId, // 所属类目\n              custDrawNum: this.goodsInfoForm.custDrawNum, // 客户产品图号\n              custDrawVersion: this.goodsInfoForm.custDrawVersion, // 客户产品图号版本号\n              custMaterialName: this.goodsInfoForm.custMaterialName, // 客户物料名\n              custMaterialNum: this.goodsInfoForm.custMaterialNum, // 客户物料号\n              customCode: this.goodsInfoForm.customCode, // 定制编码\n              customFor: this.getCustId, // 定制客户\n              customGoods: this.getCustId > 0 ? 'true' : 'false', // 是否定制商品\n              customSpec: this.goodsInfoForm.customSpec, // 定制规格\n              customVer: 0, // 定制版本\n              deliveryDesc: this.goodsInfoForm.deliveryDesc, // 发货期\n              drawNum: this.goodsInfoForm.drawNum, // 产品图号\n              drawVersion: this.goodsInfoForm.drawVersion, // 产品图号版本号\n              minSale: values.goodsStartNum, // 起售数量\n              name: values.goodsName, // 商品名称\n              netPrice: this.goodsInfoForm.netPrice, // 净价（不含税的价格）\n              originalPrice: this.goodsInfoForm.originalPrice, // 原价(页面展示，不作实际计算使用)\n              perVers: '', // 关联的历史版本\n              postage: this.goodsInfoForm.postage === '无' ? 0 : 0, // 使用邮费模板\n              price: values.goodsNnitprice, // 单价（净价加税费的合计，即销售价）\n              recommend: this.goodsInfoForm.recommend, // 是否推荐产品\n              saleAfter:\n                this.goodsInfoForm.saleAfter ||\n                this.getGoodsViewsVal.sku.saleAfter, // 上架时间\n              saleBefore:\n                this.goodsInfoForm.saleBefore ||\n                this.getGoodsViewsVal.sku.saleBefore, // 下架时间\n              saleStatus: this.goodsInfoForm.saleStatus === '上架' ? '0' : '1', // 上架状态（0上架 1下架）\n              skuPic: this.goodsInfoForm.skuPic, // 商品主图\n              taxRate: values.goodsTax, // 税率（百分比）\n              toleranceGrade:\n                this.goodsInfoForm.toleranceGrade === '1'\n                  ? '0'\n                  : this.goodsInfoForm.toleranceGrade === '2'\n                  ? '1'\n                  : '2', // 弹簧公差等级(根据公差等级计算允许的误差值)\n              unit: this.goodsInfoForm.unit, // 计量单位\n              weight: this.goodsInfoForm.weight // 重量\n            },\n            // 库存\n            inventory: {\n              store: values.goodsStockNum\n            },\n            // 包装方式\n            pack: {\n              maxPackCount: this.goodsInfoForm.maxPackCount,\n              maxPackName: this.goodsInfoForm.maxPackName,\n              mediumPackCount: this.goodsInfoForm.mediumPackCount,\n              mediumPackName: this.goodsInfoForm.mediumPackName,\n              minPackCount: this.goodsInfoForm.minPackCount,\n              minPackName: this.goodsInfoForm.minPackName\n            },\n            // 产品属性\n            attrs: this.newGoodsAttr,\n            detail: {\n              detail: this.editor.info || this.getGoodsViewsVal.detail.detail,\n              standard: this.goodsInfoForm.standard\n            }\n          }\n          console.log(params)\n          reGoodsUpdate.call(this, params)\n        }\n      })\n    }\n  },\n  watch: {\n    isCatId: {\n      immediate: true,\n      handler(val) {\n        console.log(val)\n        this.getCatId = val\n        this.setCatId()\n      },\n      deep: true\n    },\n    isCustId: {\n      immediate: true,\n      handler(val) {\n        this.getCustId = val\n        this.setCustId()\n      },\n      deep: true\n    },\n    setGoodsViews: {\n      handler(val) {\n        this.getGoodsViewsVal = val\n        this.getGoodsViews()\n      },\n      deep: true\n    }\n  },\n  computed: {\n    isCategoryEdit() {\n      return this.isEdit\n    }\n  },\n  components: {\n    EditorBar,\n    Title\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n@import '~styles/variable.less';\n\n.goodsInfo {\n  margin: 0 0 15px;\n  .goodsInfo-title {\n    .h3_title();\n  }\n  .ant-form-item {\n    .inputSpace();\n  }\n  /deep/ .ant-form-item-label {\n    .labelWidth_8();\n  }\n  .ant-input,\n  .inputWidth {\n    .inputWidth();\n  }\n  /deep/ .ant-input-group {\n    .inputWidth();\n  }\n  /deep/ .ant-input-number-input {\n    .inputWidth();\n  }\n  .setColor {\n    color: #333;\n  }\n  .setLabelColor {\n    /deep/ .ant-form-item-label label {\n      .labelColor();\n    }\n  }\n  .categoryEdit {\n    float: right;\n  }\n  .labelLeft {\n    width: 545px;\n  }\n  .markdown-wrapper {\n    margin: 15px 0;\n    .v-note-wrapper .v-note-op {\n      z-index: auto;\n    }\n  }\n  .ant-upload-select-picture-card i {\n    font-size: 32px;\n    color: #999;\n  }\n  .ant-upload-select-picture-card .ant-upload-text {\n    margin-top: 8px;\n    color: #666;\n  }\n}\n</style>\n"]}]}