{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/thread-loader/dist/cjs.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/pdm/goods/child_info/tabGoodsInfo/BomInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/pdm/goods/child_info/tabGoodsInfo/BomInfo.vue","mtime":1559298725190},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Object$assign from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/core-js/object/assign\";\nimport _toConsumableArray from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { bomColumns } from '../../basic_lib/column';\nexport default {\n  name: 'BomInfo',\n  data: function data() {\n    // this.cacheData = data.map(item => ({ ...item }))\n    return {\n      listData: [],\n      num: 1,\n      bomColumns: bomColumns,\n      count: 2,\n      dataSource: [{\n        key: 1,\n        code: 2,\n        name: 3,\n        specification: 4,\n        unit: 5,\n        dosage: 6,\n        way: 7,\n        issue: 8,\n        material: 9,\n        surface: 10,\n        billet: 11\n      }]\n    };\n  },\n  methods: {\n    // PUSH\n    onClickAddList: function onClickAddList() {\n      this.listData.push({\n        id: this.num,\n        select: true,\n        right: true,\n        remove: false\n      });\n      this.num++;\n    },\n    // Select\n    selectList: function selectList(key) {\n      console.log(key);\n      this.listData[key].select = !this.listData[key].select;\n      this.listData[key].right = !this.listData[key].right;\n    },\n    // remove\n    removeList: function removeList(key) {\n      this.listData.splice(key, 1);\n    },\n    selectEnter: function selectEnter(key) {\n      this.listData[key].right = !this.listData[key].right;\n      this.listData[key].remove = !this.listData[key].remove;\n    },\n    selectLeave: function selectLeave(key) {\n      this.listData[key].right = !this.listData[key].right;\n      this.listData[key].remove = !this.listData[key].remove;\n    },\n    handleChange: function handleChange(value, key, column) {\n      var newData = _toConsumableArray(this.data);\n\n      var target = newData.filter(function (item) {\n        return key === item.key;\n      })[0];\n\n      if (target) {\n        target[column] = value;\n        this.data = newData;\n      }\n    },\n    edit: function edit(key) {\n      var newData = _toConsumableArray(this.dataSource);\n\n      var target = newData.filter(function (item) {\n        return key === item.key;\n      })[0];\n\n      if (target) {\n        target.editable = true;\n        this.dataSource = newData;\n      }\n    },\n    save: function save(key) {\n      var newData = _toConsumableArray(this.dataSource);\n\n      var target = newData.filter(function (item) {\n        return key === item.key;\n      })[0];\n\n      if (target) {\n        delete target.editable;\n        this.dataSource = newData; // this.cacheData = newData.map(item => ({ ...item }))\n      }\n    },\n    onDelete: function onDelete(key) {\n      var dataSource = _toConsumableArray(this.dataSource);\n\n      this.dataSource = dataSource.filter(function (item) {\n        return item.key !== key;\n      });\n    },\n    cancel: function cancel(key) {\n      var newData = _toConsumableArray(this.dataSource);\n\n      var target = newData.filter(function (item) {\n        return key === item.key;\n      })[0];\n\n      if (target) {\n        _Object$assign(target // this.cacheData.filter(item => key === item.key)[0]\n        );\n\n        delete target.editable;\n        this.dataSource = newData;\n      }\n    },\n    handleAdd: function handleAdd() {\n      var count = this.count,\n          dataSource = this.dataSource;\n      var newData = {\n        key: count,\n        code: \"\".concat(count),\n        name: \"\".concat(count),\n        specification: \"\".concat(count),\n        unit: \"\".concat(count),\n        dosage: \"\".concat(count),\n        way: \"\".concat(count),\n        issue: \"\".concat(count),\n        material: \"\".concat(count),\n        surface: \"\".concat(count),\n        billet: \"\".concat(count)\n      };\n      this.dataSource = [].concat(_toConsumableArray(dataSource), [newData]);\n      this.count = count + 1;\n    }\n  }\n};",{"version":3,"sources":["BomInfo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"craft-info\">\n    <div class=\"list-wrapper\" v-for=\"(item, key) in listData\" :key=\"key\">\n      <div class=\"content\" :class=\"{selectList: listData[key].select}\" @click=\"selectList(key)\">\n        <h3 class=\"title\">{{ `方案${item.id}` }}</h3>\n        <a-table :columns=\"bomColumns\" :dataSource=\"dataSource\" :pagination=\"false\">\n          <template\n            v-for=\"col in ['code', 'name', 'specification', 'unit', 'dosage', 'way', 'issue', 'material', 'surface', 'billet']\"\n            :slot=\"col\"\n            slot-scope=\"text, record, index\"\n          >\n            <div :key=\"col\">\n              <a-input\n                v-if=\"record.editable\"\n                style=\"margin: -5px 0\"\n                :value=\"text\"\n                @change=\"e => handleChange(e.target.value, record.key, col)\"\n              />\n              <template v-else>{{text}}</template>\n            </div>\n          </template>\n          <template slot=\"operation\" slot-scope=\"text, record, index\">\n            <div class=\"editable-row-operations\">\n              <span v-if=\"!record.editable\">\n                <a @click=\"() => edit(record.key)\">编辑</a>\n                <a-popconfirm title=\"确定要删除吗?\" @confirm=\"() => onDelete(record.key)\">\n                  <a>删除</a>\n                </a-popconfirm>\n              </span>\n              <span v-else>\n                <a @click=\"() => save(record.key)\">保存</a>\n                <a @click=\"cancel(record.key)\">取消</a>\n              </span>\n            </div>\n          </template>\n        </a-table>\n        <a-button\n          style=\"width: 100%; margin-top: 16px; margin-bottom: 8px\"\n          type=\"dashed\"\n          icon=\"plus\"\n          @click.stop=\"handleAdd\"\n        >添加方案</a-button>\n      </div>\n      <div class=\"icon-box icon-select\" v-if=\"listData[key].right\" @mouseenter=\"selectEnter(key)\">\n        <a-icon class=\"icon-right\" type=\"check\"/>\n      </div>\n      <div class=\"icon-box icon-delete\" v-if=\"listData[key].remove\" @mouseleave=\"selectLeave(key)\">\n        <a-icon class=\"icon-remove\" @click.stop=\"removeList(key)\" type=\"close\"/>\n      </div>\n    </div>\n    <a-button\n      style=\"width: 100%; margin-top: 16px; margin-bottom: 8px\"\n      type=\"dashed\"\n      icon=\"plus\"\n      @click=\"onClickAddList\"\n    >添加方案</a-button>\n  </div>\n</template>\n<script>\nimport { bomColumns } from '../../basic_lib/column'\n\nexport default {\n  name: 'BomInfo',\n  data() {\n    // this.cacheData = data.map(item => ({ ...item }))\n    return {\n      listData: [],\n      num: 1,\n      bomColumns,\n      count: 2,\n      dataSource: [\n        {\n          key: 1,\n          code: 2,\n          name: 3,\n          specification: 4,\n          unit: 5,\n          dosage: 6,\n          way: 7,\n          issue: 8,\n          material: 9,\n          surface: 10,\n          billet: 11\n        }\n      ]\n    }\n  },\n  methods: {\n    // PUSH\n    onClickAddList() {\n      this.listData.push({\n        id: this.num,\n        select: true,\n        right: true,\n        remove: false\n      })\n      this.num++\n    },\n    // Select\n    selectList(key) {\n      console.log(key)\n      this.listData[key].select = !this.listData[key].select\n      this.listData[key].right = !this.listData[key].right\n    },\n    // remove\n    removeList(key) {\n      this.listData.splice(key, 1)\n    },\n    selectEnter(key) {\n      this.listData[key].right = !this.listData[key].right\n      this.listData[key].remove = !this.listData[key].remove\n    },\n    selectLeave(key) {\n      this.listData[key].right = !this.listData[key].right\n      this.listData[key].remove = !this.listData[key].remove\n    },\n    handleChange(value, key, column) {\n      const newData = [...this.data]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        target[column] = value\n        this.data = newData\n      }\n    },\n    edit(key) {\n      const newData = [...this.dataSource]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        target.editable = true\n        this.dataSource = newData\n      }\n    },\n    save(key) {\n      const newData = [...this.dataSource]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        delete target.editable\n        this.dataSource = newData\n        // this.cacheData = newData.map(item => ({ ...item }))\n      }\n    },\n    onDelete(key) {\n      const dataSource = [...this.dataSource]\n      this.dataSource = dataSource.filter(item => item.key !== key)\n    },\n    cancel(key) {\n      const newData = [...this.dataSource]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        Object.assign(\n          target\n          // this.cacheData.filter(item => key === item.key)[0]\n        )\n        delete target.editable\n        this.dataSource = newData\n      }\n    },\n    handleAdd() {\n      const { count, dataSource } = this\n      const newData = {\n        key: count,\n        code: `${count}`,\n        name: `${count}`,\n        specification: `${count}`,\n        unit: `${count}`,\n        dosage: `${count}`,\n        way: `${count}`,\n        issue: `${count}`,\n        material: `${count}`,\n        surface: `${count}`,\n        billet: `${count}`\n      }\n      this.dataSource = [...dataSource, newData]\n      this.count = count + 1\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.craft-info {\n  .title {\n    min-height: 35px;\n    line-height: 35px;\n    padding: 0 15px;\n  }\n  .list-wrapper {\n    margin: 10px 0;\n    min-height: 100px;\n    box-sizing: border-box;\n    border: 1px solid #d9d9d9;\n    border-radius: 4px;\n    position: relative;\n    .selectList {\n      border: 2px solid #69b412;\n    }\n    .content {\n      width: 100%;\n      border-radius: 4px;\n      min-height: 100px;\n      .editable-row-operations a {\n        margin-right: 8px;\n      }\n    }\n    .icon-box {\n      position: relative;\n      position: absolute;\n      top: 0;\n      right: 0;\n      z-index: 0;\n      border-left: 40px solid transparent;\n      .icon-remove {\n        position: absolute;\n        right: 5px;\n        top: -35px;\n        z-index: 10;\n        color: #fff;\n      }\n      .icon-right {\n        position: absolute;\n        right: 5px;\n        top: -35px;\n        z-index: 10;\n        color: #fff;\n      }\n    }\n    .icon-select {\n      border-top: 40px solid #69b412;\n    }\n    .icon-delete {\n      border-top: 40px solid #f00;\n    }\n  }\n}\n</style>"],"sourceRoot":"src/views/product/pdm/goods/child_info/tabGoodsInfo"}]}