{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/views/product/bom/bom_list/basic_lib/index.js","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/views/product/bom/bom_list/basic_lib/index.js","mtime":1565252860538},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.function.name\";\nimport api from 'api/index';\nimport { postJson, get, put, deleted } from 'api/axios';\nimport { type } from 'os';\n/**\n * @description: 成品列表商品搜索Tab列表\n * @param {Object} params [params]\n * @param {Number} currentPage [分页查询的第几页]\n * @param {Number} pageSize [分页查询每页多少条数据]\n * @param {Number} custId [搜索公司哪个客户定制的商品custId为0搜索的都是商家标准品custId>0搜索客户订制品]\n * @param {Array} keywords [关键词(产品名称，产品规格)]\n * @param {String} skuCode [产品编码]\n * @param {String} skuType [产品类别（弹簧、原材料、其他等）]\n * @param {String} catIds [商品所属分类]\n * @param {String} springType [弹簧类型]\n * @return: searchGoods\n */\n\nexport function searchGoods(_ref) {\n  var _this = this;\n\n  var _ref$pageSize = _ref.pageSize,\n      pageSize = _ref$pageSize === void 0 ? 15 : _ref$pageSize,\n      _ref$currentPage = _ref.currentPage,\n      currentPage = _ref$currentPage === void 0 ? 1 : _ref$currentPage,\n      _ref$custId = _ref.custId,\n      custId = _ref$custId === void 0 ? 0 : _ref$custId,\n      _ref$skuType = _ref.skuType,\n      skuType = _ref$skuType === void 0 ? 'MATERIAL' : _ref$skuType,\n      keywords = _ref.keywords,\n      skuCode = _ref.skuCode,\n      springType = _ref.springType,\n      _ref$companyId = _ref.companyId,\n      companyId = _ref$companyId === void 0 ? localStorage.getItem('companyId') + '' : _ref$companyId;\n  this.loading = true; // const companyId = localStorage.companyId.toString()\n  // console.log(companyId)\n\n  return postJson(api.bomearch, {\n    pageSize: pageSize,\n    currentPage: currentPage,\n    custId: custId,\n    skuType: skuType,\n    keywords: keywords,\n    skuCode: skuCode,\n    springType: springType,\n    companyId: companyId\n  }).then(function (res) {\n    if (res.data.code === 0) {\n      _this.loading = false;\n      _this.data = [];\n      _this.pagination.total = +res.data.data.total;\n      res.data.data.records.forEach(function (e) {\n        _this.data.push({\n          key: e.sku.id,\n          id: e.sku.id,\n          code: e.sku.code,\n          name: e.sku.name,\n          time: e.sku.createTime,\n          remark: e.sku.remark,\n          cz: e.sku.cz,\n          spec: e.sku.spec,\n          status: e.sku.status === 'NORMAL' ? '正常' : e.sku.status === 'STOP' ? '停用' : '禁用'\n        });\n      });\n      return;\n    }\n\n    _this.loading = false;\n  }).catch(function (err) {\n    console.log(err);\n    _this.loading = false;\n  });\n}\n/**\n * @description: 查看详情\n * @param {String} params [skuid]\n * @return: viewInfo\n */\n\nexport function getViewInfo(params) {\n  var _this2 = this;\n\n  return get(api.goodsView + \"?skuId=\".concat(params)).then(function (res) {\n    if (res.data.code === 0) {\n      console.log(res.data.data);\n      _this2.goodsViewInfo = res.data.data;\n    }\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n/**\n * @description: 产品编码模糊搜索\n * @param {String} value [监听选中的值]\n * @param {String} code [编码]\n * @param {Function} callback [回调]\n * @return: custNamefetch\n */\n\nvar timeout;\nvar currentValue;\nexport function bomCodefetch(value, callback) {\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = null;\n  }\n\n  currentValue = value;\n\n  function fake() {\n    var companyId = localStorage.companyId.toString();\n    console.log(companyId);\n    get(api.bomListCompanyGoodsCode + \"?code=\".concat(value, \"&currentPage=1&pageSize=50&companyId=\").concat(companyId)).then(function (res) {\n      if (currentValue === value) {\n        var data = [];\n        data.push.apply(data, _toConsumableArray(res.data.data.records));\n        callback(data);\n      }\n    });\n  }\n\n  timeout = setTimeout(fake, 300);\n}\n/**\n * @description: 列表商家所有商品的商品名称\n * @param {Number} currentPage [页码]\n * @param {String} name [名称]\n * @param {Number} pageSize [每页条数]\n * @return: bomNamefetch\n */\n\nexport function bomNamefetch(value, callback) {\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = null;\n  }\n\n  currentValue = value;\n\n  function fake() {\n    get(api.bomListCompanyGoodsName + \"?name=\".concat(value, \"&currentPage=1&pageSize=50&companyId=\").concat(localStorage.getItem('companyId'))).then(function (res) {\n      if (currentValue === value) {\n        var data = [];\n        data.push.apply(data, _toConsumableArray(res.data.data.records));\n        callback(data);\n      }\n    });\n  }\n\n  timeout = setTimeout(fake, 300);\n}\n/**\n * @description: 列表商家所有商品的商品名称\n * @param {Number} currentPage [页码]\n * @param {String} name [名称]\n * @param {Number} pageSize [每页条数]\n * @return: listCompanyGoodsName\n */\n// export function listCompanyGoodsCode(number) {\n//   return get(api.bomListCompanyGoodsCode + `?currentPage=${number}&pageSize=10`).then(res => {\n//     const data = this.selectCodeData\n//     if (res.data.code === 0) {\n//       this.selectCodeData = data.concat(res.data.data.records).filter(item => {\n//         return item !== null\n//       })\n//       // console.log(this.selectCodeData)\n//     }\n//   }).catch(err => {\n//     console.log(err)\n//   })\n// }\n\n/**\n * @description: 列表商家所有商品的商品名称\n * @param {Number} currentPage [页码]\n * @param {String} name [名称]\n * @param {Number} pageSize [每页条数]\n * @return: listCompanyGoodsName\n */\n// export function listCompanyGoodsName(num) {\n//   return get(api.bomListCompanyGoodsName + `?currentPage=${num}&pageSize=10`).then(res => {\n//     const data = this.selectData\n//     if (res.data.code === 0) {\n//       this.selectData = data.concat(res.data.data.records).filter(item => {\n//         return item !== null\n//       })\n//       // console.log(this.selectData)\n//     }\n//   }).catch(err => {\n//     console.log(err)\n//   })\n// }\n\n/**\n * @description: 获取成品分类\n * @param {Objecg} null\n * @return: getGoodsClass\n */\n\nexport function getGoodsClass() {\n  var _this3 = this;\n\n  return get(api.bomCategoryTree).then(function (res) {\n    if (res.data.code === 0) {\n      _this3.options = res.data.data;\n    }\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n/**\n * @description: 获取商品分类所有属性和可选项\n * @param {Object}  params [属性ID]\n * @return: getClassAttr\n */\n\nexport function getClassAttr(params) {\n  return get(api.catAllAttrAndOptions + '?catId=' + params).catch(function (err) {\n    console.log(err);\n  });\n}\n/**\n * @description: 商家添加原材料\n * @param {Object} params [产品添加Obj]\n * @return: goodsMaterialAdd\n */\n\nexport function goodsSkuAdd(params, remind) {\n  var _this4 = this;\n\n  return postJson(api.bomAdd, params).then(function (res) {\n    if (res.data.code === 0) {\n      _this4.loading = false;\n\n      _this4.$message.success(remind);\n\n      _this4.$emit('isDrawer', false);\n\n      return false;\n    }\n\n    _this4.$message.error(res.data.msg);\n\n    _this4.$emit('isDrawer', true);\n\n    _this4.loading = false;\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n/**\n * @description: 商家修改原材料\n * @param {Object} params [产品添加Obj]\n * @return: goodsMaterialAdd\n */\n\nexport function goodsSkuUpload(params, remind) {\n  var _this5 = this;\n\n  return put(api.goodsUpdate, params).then(function (res) {\n    if (res.data.code === 0) {\n      _this5.loading = false;\n\n      _this5.$message.success(remind);\n\n      _this5.$emit('isDrawer', false);\n\n      return false;\n    }\n\n    _this5.$message.error(res.data.msg);\n\n    _this5.$emit('isDrawer', true);\n\n    _this5.loading = false;\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n/**\n * @description: 渠道商商品删除\n * @param {params} 客户ID\n * @return: removeCustomer\n */\n\nexport function bomDelete(params) {\n  var _this6 = this;\n\n  return deleted(api.bomDelete + \"?skuIds=\".concat(params)).then(function (res) {\n    if (res.data.code === 0) {\n      _this6.loading = false;\n\n      _this6.$message.success('删除成功');\n\n      _this6.$emit('isDrawer', false);\n\n      return false;\n    }\n\n    _this6.loading = false;\n\n    _this6.$message.success(res.data.msg);\n\n    _this6.$emit('isDrawer', true);\n  }).catch(function (err) {\n    console.log(err);\n\n    _this6.$message.error('请求错误');\n\n    _this6.loading = false;\n  });\n}\n/**\n * @description: 产品材质信息\n * @param {string} SPRING_CZ\n * @return: custIndustry\n */\n\nexport function custIndustry() {\n  return get(api.custIndustry + 'SPRING_CZ');\n}",{"version":3,"sources":["/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/views/product/bom/bom_list/basic_lib/index.js"],"names":["api","postJson","get","put","deleted","type","searchGoods","pageSize","currentPage","custId","skuType","keywords","skuCode","springType","companyId","localStorage","getItem","loading","bomearch","then","res","data","code","pagination","total","records","forEach","e","push","key","sku","id","name","time","createTime","remark","cz","spec","status","catch","err","console","log","getViewInfo","params","goodsView","goodsViewInfo","timeout","currentValue","bomCodefetch","value","callback","clearTimeout","fake","toString","bomListCompanyGoodsCode","setTimeout","bomNamefetch","bomListCompanyGoodsName","getGoodsClass","bomCategoryTree","options","getClassAttr","catAllAttrAndOptions","goodsSkuAdd","remind","bomAdd","$message","success","$emit","error","msg","goodsSkuUpload","goodsUpdate","bomDelete","custIndustry"],"mappings":"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","sourcesContent":["import api from 'api/index'\nimport { postJson, get, put, deleted } from 'api/axios'\nimport { type } from 'os'\n\n/**\n * @description: 成品列表商品搜索Tab列表\n * @param {Object} params [params]\n * @param {Number} currentPage [分页查询的第几页]\n * @param {Number} pageSize [分页查询每页多少条数据]\n * @param {Number} custId [搜索公司哪个客户定制的商品custId为0搜索的都是商家标准品custId>0搜索客户订制品]\n * @param {Array} keywords [关键词(产品名称，产品规格)]\n * @param {String} skuCode [产品编码]\n * @param {String} skuType [产品类别（弹簧、原材料、其他等）]\n * @param {String} catIds [商品所属分类]\n * @param {String} springType [弹簧类型]\n * @return: searchGoods\n */\nexport function searchGoods({ pageSize = 15, currentPage = 1, custId = 0, skuType = 'MATERIAL', keywords, skuCode, springType, companyId = localStorage.getItem('companyId') + '' }) {\n  this.loading = true\n  // const companyId = localStorage.companyId.toString()\n  // console.log(companyId)\n  return postJson(api.bomearch, { pageSize, currentPage, custId, skuType, keywords, skuCode, springType, companyId }).then(res => {\n    if (res.data.code === 0) {\n      this.loading = false\n      this.data = []\n      this.pagination.total = +res.data.data.total\n      res.data.data.records.forEach(e => {\n        this.data.push({\n          key: e.sku.id,\n          id: e.sku.id,\n          code: e.sku.code,\n          name: e.sku.name,\n          time: e.sku.createTime,\n          remark: e.sku.remark,\n          cz: e.sku.cz,\n          spec: e.sku.spec,\n          status: e.sku.status === 'NORMAL' ? '正常' : (e.sku.status === 'STOP' ? '停用' : '禁用')\n        })\n      })\n      return\n    }\n    this.loading = false\n  }).catch(err => {\n    console.log(err)\n    this.loading = false\n  })\n}\n\n/**\n * @description: 查看详情\n * @param {String} params [skuid]\n * @return: viewInfo\n */\nexport function getViewInfo(params) {\n  return get(api.goodsView + `?skuId=${params}`).then(res => {\n    if (res.data.code === 0) {\n      console.log(res.data.data)\n      this.goodsViewInfo = res.data.data\n    }\n  }).catch(err => {\n    console.log(err)\n  })\n}\n\n/**\n * @description: 产品编码模糊搜索\n * @param {String} value [监听选中的值]\n * @param {String} code [编码]\n * @param {Function} callback [回调]\n * @return: custNamefetch\n */\nlet timeout\nlet currentValue\nexport function bomCodefetch(value, callback) {\n  if (timeout) {\n    clearTimeout(timeout)\n    timeout = null\n  }\n  currentValue = value\n  function fake() {\n    const companyId = localStorage.companyId.toString()\n    console.log(companyId)\n    get(api.bomListCompanyGoodsCode + `?code=${value}&currentPage=1&pageSize=50&companyId=${companyId}`)\n      .then((res) => {\n        if (currentValue === value) {\n          const data = []\n          data.push(...res.data.data.records)\n          callback(data)\n        }\n      })\n  }\n  timeout = setTimeout(fake, 300)\n}\n\n/**\n * @description: 列表商家所有商品的商品名称\n * @param {Number} currentPage [页码]\n * @param {String} name [名称]\n * @param {Number} pageSize [每页条数]\n * @return: bomNamefetch\n */\nexport function bomNamefetch(value, callback) {\n  if (timeout) {\n    clearTimeout(timeout)\n    timeout = null\n  }\n  currentValue = value\n  function fake() {\n    get(api.bomListCompanyGoodsName + `?name=${value}&currentPage=1&pageSize=50&companyId=${localStorage.getItem('companyId')}`)\n      .then((res) => {\n        if (currentValue === value) {\n          const data = []\n          data.push(...res.data.data.records)\n          callback(data)\n        }\n      })\n  }\n  timeout = setTimeout(fake, 300)\n}\n\n/**\n * @description: 列表商家所有商品的商品名称\n * @param {Number} currentPage [页码]\n * @param {String} name [名称]\n * @param {Number} pageSize [每页条数]\n * @return: listCompanyGoodsName\n */\n// export function listCompanyGoodsCode(number) {\n//   return get(api.bomListCompanyGoodsCode + `?currentPage=${number}&pageSize=10`).then(res => {\n//     const data = this.selectCodeData\n//     if (res.data.code === 0) {\n//       this.selectCodeData = data.concat(res.data.data.records).filter(item => {\n//         return item !== null\n//       })\n//       // console.log(this.selectCodeData)\n//     }\n//   }).catch(err => {\n//     console.log(err)\n//   })\n// }\n\n/**\n * @description: 列表商家所有商品的商品名称\n * @param {Number} currentPage [页码]\n * @param {String} name [名称]\n * @param {Number} pageSize [每页条数]\n * @return: listCompanyGoodsName\n */\n// export function listCompanyGoodsName(num) {\n//   return get(api.bomListCompanyGoodsName + `?currentPage=${num}&pageSize=10`).then(res => {\n//     const data = this.selectData\n//     if (res.data.code === 0) {\n//       this.selectData = data.concat(res.data.data.records).filter(item => {\n//         return item !== null\n//       })\n//       // console.log(this.selectData)\n//     }\n//   }).catch(err => {\n//     console.log(err)\n//   })\n// }\n\n/**\n * @description: 获取成品分类\n * @param {Objecg} null\n * @return: getGoodsClass\n */\nexport function getGoodsClass() {\n  return get(api.bomCategoryTree).then(res => {\n    if (res.data.code === 0) {\n      this.options = res.data.data\n    }\n  }).catch(err => {\n    console.log(err)\n  })\n}\n\n/**\n * @description: 获取商品分类所有属性和可选项\n * @param {Object}  params [属性ID]\n * @return: getClassAttr\n */\nexport function getClassAttr(params) {\n  return get(api.catAllAttrAndOptions + '?catId=' + params).catch(err => {\n    console.log(err)\n  })\n}\n\n/**\n * @description: 商家添加原材料\n * @param {Object} params [产品添加Obj]\n * @return: goodsMaterialAdd\n */\nexport function goodsSkuAdd(params, remind) {\n  return postJson(api.bomAdd, params).then(res => {\n    if (res.data.code === 0) {\n      this.loading = false\n      this.$message.success(remind)\n      this.$emit('isDrawer', false)\n      return false\n    }\n    this.$message.error(res.data.msg)\n    this.$emit('isDrawer', true)\n    this.loading = false\n  }).catch(err => {\n    console.log(err)\n  })\n}\n\n/**\n * @description: 商家修改原材料\n * @param {Object} params [产品添加Obj]\n * @return: goodsMaterialAdd\n */\nexport function goodsSkuUpload(params, remind) {\n  return put(api.goodsUpdate, params).then(res => {\n    if (res.data.code === 0) {\n      this.loading = false\n      this.$message.success(remind)\n      this.$emit('isDrawer', false)\n      return false\n    }\n    this.$message.error(res.data.msg)\n    this.$emit('isDrawer', true)\n    this.loading = false\n  }).catch(err => {\n    console.log(err)\n  })\n}\n\n/**\n * @description: 渠道商商品删除\n * @param {params} 客户ID\n * @return: removeCustomer\n */\nexport function bomDelete(params) {\n  return deleted(api.bomDelete + `?skuIds=${params}`).then((res) => {\n    if (res.data.code === 0) {\n      this.loading = false\n      this.$message.success('删除成功')\n      this.$emit('isDrawer', false)\n      return false\n    }\n    this.loading = false\n    this.$message.success(res.data.msg)\n    this.$emit('isDrawer', true)\n  }).catch((err) => {\n    console.log(err)\n    this.$message.error('请求错误')\n    this.loading = false\n  })\n}\n\n/**\n * @description: 产品材质信息\n * @param {string} SPRING_CZ\n * @return: custIndustry\n */\nexport function custIndustry() {\n  return get(api.custIndustry + 'SPRING_CZ')\n}\n"]}]}