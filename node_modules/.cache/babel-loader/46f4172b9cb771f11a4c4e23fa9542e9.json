{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/thread-loader/dist/cjs.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/user/Retrieve.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/user/Retrieve.vue","mtime":1557891132373},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { post } from '@/api/axios.js';\nimport api from '@/api/index.js';\nimport { factorySendCode } from 'utils/utils.js';\nexport default {\n  name: 'Retrieve',\n  data: function data() {\n    return {\n      btnType: 'primary',\n      btnText: '发送验证码',\n      remaining: 5,\n      disabled: false,\n      registerInfo: this.$form.createForm(this),\n      checkAgree: false\n    };\n  },\n  methods: {\n    // 自定义用户名验证\n    validateUsername: function validateUsername(rule, value, callback) {\n      var regex = /^1[34578]\\d{9}$/;\n\n      if (!value) {\n        callback(new Error('用户名不能为空'));\n        return false;\n      }\n\n      if (!regex.test(value)) {\n        callback(new Error('请输入正确的手机号'));\n        return false;\n      }\n\n      callback();\n    },\n    validatePassword: function validatePassword(rule, value, callback) {\n      var regex = /[^0-9a-zA-Z_]/;\n\n      if (!value) {\n        callback(new Error('密码不能为空'));\n        return false;\n      }\n\n      if (value.length < 6 || value.length > 18) {\n        callback(new Error('密码请在6～18位数之间'));\n        return false;\n      }\n\n      if (regex.test(value)) {\n        callback(new Error('密码不能有特殊字符'));\n        return false;\n      }\n\n      callback();\n    },\n    validateRePassword: function validateRePassword(rule, value, callback) {\n      var password = this.registerInfo.getFieldValue('password');\n\n      if (value === undefined) {\n        callback(new Error('请输入密码'));\n      }\n\n      if (value && password && value.trim() !== password.trim()) {\n        callback(new Error('两次密码不一致'));\n      }\n\n      callback();\n    },\n    // senCode\n    sendCode: function sendCode() {\n      var _this = this;\n\n      this.registerInfo.validateFields(['username'], function (err, value, callback) {\n        if (!err) {\n          post(api.reSendCode, {\n            phone: value.username\n          }).then(function (res) {\n            factorySendCode.call(_this, 5);\n          });\n        } else {\n          callback(new Error('手机号验证不正确'));\n        }\n      });\n    },\n    // 重置提交\n    handleRegister: function handleRegister(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      this.registerInfo.validateFields(function (err, values) {\n        if (!err) {\n          var registerObj = {\n            phone: values.username,\n            pwd: values.password,\n            yzm: values.verificationCode\n          };\n          post(api.retrieve, registerObj).then(function (res) {\n            if (res.data.code === 1) {\n              _this2.$message.error(res.data.msg);\n\n              return false;\n            }\n\n            if (res.data.code === 0) {\n              _this2.success();\n\n              return false;\n            }\n          }).catch(function (err) {\n            console.log(err);\n          });\n          return false;\n        }\n\n        _this2.$message.error('重置失败');\n      });\n    },\n    handleReset: function handleReset() {\n      this.registerInfo.resetFields();\n    },\n    // 注册成功回调\n    success: function success() {\n      var _this3 = this;\n\n      this.$message.success('重置成功', 1).then(function () {\n        _this3.$message.loading('跳转登录页面', 1.5);\n      }).then(function () {\n        _this3.$router.push('/login');\n      });\n    }\n  }\n};",{"version":3,"sources":["Retrieve.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"retrieve\">\n    <div class=\"bg-color\"></div>\n    <div class=\"retrieve-wrapper\" style=\"border: 1px solid #F5F5F5; background: #FFF; box-shadow: #666 0px 0px 10px; padding: 20px; border-radius: 4px;\">\n      <a-divider>找回密码</a-divider>\n      <a-form :form=\"registerInfo\" @submit=\"handleRegister\">\n        <a-form-item>\n          <a-row :gutter=\"14\">\n            <a-col :span=\"16\">\n              <a-input\n                placeholder=\"请输入手机号\"\n                v-decorator=\"[\n              'username',\n              {rules: [{ validator: validateUsername }], validateTrigger: ['change', 'blur']}\n            ]\"\n              >\n                <a-icon slot=\"prefix\" type=\"user\" style=\"color:rgba(0,0,0,.25)\"/>\n              </a-input>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-button\n                :type=\"btnType\"\n                :disabled=\"disabled\"\n                @click=\"sendCode\"\n                class=\"register-sendcode\"\n              >{{ btnText }}</a-button>\n            </a-col>\n          </a-row>\n        </a-form-item>\n\n        <a-form-item>\n          <a-row>\n            <a-col :span=\"24\">\n              <a-input\n                placeholder=\"请输入验证码\"\n                v-decorator=\"[\n              'verificationCode',\n              {rules: [{ required: true, message: '请输入验证码' }], validateTrigger: ['change', 'blur']}\n            ]\"\n              >\n                <a-icon slot=\"prefix\" type=\"safety-certificate\" style=\"color:rgba(0,0,0,.25)\"/>\n              </a-input>\n            </a-col>\n          </a-row>\n        </a-form-item>\n\n        <a-form-item>\n          <a-row>\n            <a-col :span=\"24\">\n              <a-input\n                placeholder=\"请输入重置密码\"\n                type=\"password\"\n                v-decorator=\"[\n              'password',\n              {rules: [{ validator: validatePassword }], validateTrigger: ['blur']}\n            ]\"\n              >\n                <a-icon slot=\"prefix\" type=\"lock\" style=\"color:rgba(0,0,0,.25)\"/>\n              </a-input>\n            </a-col>\n          </a-row>\n        </a-form-item>\n\n        <a-form-item>\n          <a-row>\n            <a-col :span=\"24\">\n              <a-input\n                placeholder=\"请确认密码\"\n                type=\"password\"\n                v-decorator=\"[\n              'rePassword',\n              {rules: [{ required: true, message: '请再次输入密码' }, { validator: validateRePassword }], validateTrigger: ['blur']}\n            ]\"\n              >\n                <a-icon slot=\"prefix\" type=\"lock\" style=\"color:rgba(0,0,0,.25)\"/>\n              </a-input>\n            </a-col>\n          </a-row>\n        </a-form-item>\n\n        <a-form-item :wrapper-col=\"{ span: 24 }\">\n          <a-row :gutter=\"16\">\n            <a-col class=\"gutter-row\" :span=\"24\">\n              <router-link to=\"/user/register\" class=\"login-form-register\">去注册</router-link>\n              <router-link to=\"/user/login\" class=\"login-form-forgot\">返回登录</router-link>\n            </a-col>\n          </a-row>\n        </a-form-item>\n\n        <a-form-item :wrapper-col=\"{ span: 12, offset: 5 }\">\n          <a-button type=\"primary\" html-type=\"submit\">重置密码</a-button>\n          <a-button :style=\"{ marginLeft: '8px' }\" @click=\"handleReset\">清除</a-button>\n        </a-form-item>\n      </a-form>\n    </div>\n  </div>\n</template>\n<script>\nimport { post } from '@/api/axios.js'\nimport api from '@/api/index.js'\nimport { factorySendCode } from 'utils/utils.js'\n\nexport default {\n  name: 'Retrieve',\n  data() {\n    return {\n      btnType: 'primary',\n      btnText: '发送验证码',\n      remaining: 5,\n      disabled: false,\n      registerInfo: this.$form.createForm(this),\n      checkAgree: false\n    }\n  },\n  methods: {\n    // 自定义用户名验证\n    validateUsername(rule, value, callback) {\n      const regex = /^1[34578]\\d{9}$/\n      if (!value) {\n        callback(new Error('用户名不能为空'))\n        return false\n      }\n      if (!regex.test(value)) {\n        callback(new Error('请输入正确的手机号'))\n        return false\n      }\n      callback()\n    },\n    validatePassword(rule, value, callback) {\n      const regex = /[^0-9a-zA-Z_]/\n      if (!value) {\n        callback(new Error('密码不能为空'))\n        return false\n      }\n      if (value.length < 6 || value.length > 18) {\n        callback(new Error('密码请在6～18位数之间'))\n        return false\n      }\n      if (regex.test(value)) {\n        callback(new Error('密码不能有特殊字符'))\n        return false\n      }\n      callback()\n    },\n    validateRePassword(rule, value, callback) {\n      const password = this.registerInfo.getFieldValue('password')\n      if (value === undefined) {\n        callback(new Error('请输入密码'))\n      }\n      if (value && password && value.trim() !== password.trim()) {\n        callback(new Error('两次密码不一致'))\n      }\n      callback()\n    },\n    // senCode\n    sendCode() {\n      this.registerInfo.validateFields(['username'], (err, value, callback) => {\n        if (!err) {\n          post(api.reSendCode, { phone: value.username }).then(res => {\n            factorySendCode.call(this, 5)\n          })\n        } else {\n          callback(new Error('手机号验证不正确'))\n        }\n      })\n    },\n    // 重置提交\n    handleRegister(e) {\n      e.preventDefault()\n      this.registerInfo.validateFields((err, values) => {\n        if (!err) {\n          const registerObj = {\n            phone: values.username,\n            pwd: values.password,\n            yzm: values.verificationCode\n          }\n          post(api.retrieve, registerObj)\n            .then(res => {\n              if (res.data.code === 1) {\n                this.$message.error(res.data.msg)\n                return false\n              }\n              if (res.data.code === 0) {\n                this.success()\n                return false\n              }\n            })\n            .catch(err => {\n              console.log(err)\n            })\n          return false\n        }\n        this.$message.error('重置失败')\n      })\n    },\n    handleReset() {\n      this.registerInfo.resetFields()\n    },\n    // 注册成功回调\n    success() {\n      this.$message\n        .success('重置成功', 1)\n        .then(() => {\n          this.$message.loading('跳转登录页面', 1.5)\n        })\n        .then(() => {\n          this.$router.push('/login')\n        })\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.retrieve {\n  position: fixed;\n  width: 400px;\n  min-height: 300px;\n  left: 50%;\n  top: 50%;\n  margin-left: 100px;\n  margin-top: -240px;\n  .bg-color {\n    position: fixed;\n    z-index: -100;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    background: url('../../assets/loginBg.png') no-repeat center;\n    background-size: cover;\n  }\n  .register-sendcode {\n    width: 100%;\n  }\n  .register-to-login {\n    float: right;\n    color: #8f939a;\n    font-size: 12px;\n  }\n  .register-to-haslogin {\n    color: #8f939a;\n    font-size: 12px;\n  }\n}\n#components-form-demo-normal-re g .login-form {\n  max-width: 300px;\n}\n.login-form-forgot {\n  float: right;\n}\n#components-form-demo-normal-login .login-form-button {\n  width: 100%;\n}\n</style>\n"],"sourceRoot":"src/views/user"}]}