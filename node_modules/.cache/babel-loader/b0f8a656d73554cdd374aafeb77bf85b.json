{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/customer/getPage.js","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/customer/getPage.js","mtime":1557819120363},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\nimport { get, deleted, postJson, put } from '@/api/axios.js';\nimport api from '@/api/index.js';\n/**\n * @description: 初始化table数据\n * @param { currentPage } 当前页\n * @param { pageSize }  每页总数\n * @return: showCustomersPage\n */\n\nexport function showCustomersPage(_ref) {\n  var _this = this;\n\n  var _ref$custDtoCode = _ref.custDtoCode,\n      custDtoCode = _ref$custDtoCode === void 0 ? '' : _ref$custDtoCode,\n      _ref$custDtoIndustry = _ref.custDtoIndustry,\n      custDtoIndustry = _ref$custDtoIndustry === void 0 ? 0 : _ref$custDtoIndustry,\n      _ref$custDtoLevel = _ref.custDtoLevel,\n      custDtoLevel = _ref$custDtoLevel === void 0 ? 0 : _ref$custDtoLevel,\n      _ref$custDtoManager = _ref.custDtoManager,\n      custDtoManager = _ref$custDtoManager === void 0 ? '' : _ref$custDtoManager,\n      _ref$custDtoName = _ref.custDtoName,\n      custDtoName = _ref$custDtoName === void 0 ? '' : _ref$custDtoName,\n      _ref$custDtoStatus = _ref.custDtoStatus,\n      custDtoStatus = _ref$custDtoStatus === void 0 ? 0 : _ref$custDtoStatus,\n      _ref$currentPage = _ref.currentPage,\n      currentPage = _ref$currentPage === void 0 ? 1 : _ref$currentPage,\n      _ref$pageSize = _ref.pageSize,\n      pageSize = _ref$pageSize === void 0 ? 15 : _ref$pageSize;\n  this.loading = true;\n  return postJson(api.showCustomersPage, {\n    custDtoCode: custDtoCode,\n    custDtoIndustry: custDtoIndustry,\n    custDtoLevel: custDtoLevel,\n    custDtoManager: custDtoManager,\n    custDtoName: custDtoName,\n    custDtoStatus: custDtoStatus,\n    currentPage: currentPage,\n    pageSize: pageSize\n  }).then(function (res) {\n    _this.loading = false;\n\n    if (res.data.code === 0) {\n      var recordsList = res.data.data; // 设置总页数\n\n      _this.pagination.total = res.data.data === null ? 0 : Number(recordsList.total); // 每次push先清空数组\n\n      _this.tabData = [];\n      recordsList.records.forEach(function (item) {\n        _this.tabData.push({\n          key: item.id,\n          clientCode: item.custCode,\n          clientShortName: item.custShortName,\n          clientAbbreviation: item.mallUserName,\n          clientName: item.mallUserName,\n          clientPhone: item.phone,\n          clientIndustryValue: item.custIndustryValue,\n          clientLevel: item.custLevel,\n          clientStatus: item.custStatus\n        });\n      }); // console.log(this.tabData)\n\n      return false;\n    }\n  }).catch(function (err) {\n    console.log(err);\n\n    _this.$message.error(\"\\u8BF7\\u6C42\\u8D85\\u65F6\");\n  });\n}\n/**\n * @description: 客户管理Table列表删除操作\n * @param {params} 客户ID\n * @return: removeCustomer\n */\n\nexport function removeCustomer() {\n  var _this2 = this;\n\n  var params = this.deleteCustomer.slice(0, this.deleteCustomer.length - 1);\n  return deleted(api.removeCustomer + \"?\".concat(params)).then(function (res) {\n    if (res.data.code === 0) {\n      _this2.loading = false;\n\n      _this2.$message.success('删除成功');\n\n      return false;\n    }\n  }).catch(function (err) {\n    console.log(err);\n\n    _this2.$message.error('请求错误');\n\n    _this2.loading = false;\n  });\n}\n/**\n * @description: 新增客户表单提交\n * @param {custFormData} 表单字段\n * @return: subAddCust\n */\n\nexport function subAddCust() {\n  var _this3 = this;\n\n  this.loading = true;\n  return postJson(api.addCustomerAndMallUser, this.custFormData).then(function (res) {\n    console.log(res);\n\n    if (res.data.code === 0) {\n      _this3.loading = false;\n      _this3.isVisible = false;\n\n      _this3.$emit('isVisible', _this3.isVisible);\n\n      return false;\n    }\n\n    _this3.loading = false;\n  }).catch(function (err) {\n    _this3.loading = false;\n    console.log(err);\n  });\n}\n/**\n * @description: 数组对象去重\n * @param {Array<Object>} Array\n * @return: reduceObj\n */\n\nexport function reduceObj(objArray) {\n  var result = []; // 去重后返回的结果数组\n\n  var temp = {}; // 临时对象\n  // 将对象数组中每一项的name值作为属性，若temp不拥有此属性时则为temp添加此属性且将其值赋为true，并将这一项push到结果数组中\n\n  for (var i = 0; i < objArray.length; i++) {\n    var rePhone = objArray[i].phone;\n\n    if (temp[rePhone]) {\n      // 如果temp中已经存在此属性名，则说明遇到重复项\n      this.$message.error('请勿重复添加');\n      continue; // 不继续执行接下来的代码，跳转至循环开头\n    }\n\n    temp[rePhone] = true; // 为temp添加此属性（myname）且将其值赋为true\n\n    result.push(objArray[i]); // 将这一项复制到结果数组result中去\n  }\n\n  return result;\n}\n/**\n * @description: 根据客户ID查看详情\n * @param {custID} 客户ID\n * @return: getCustomerAndMallUser\n */\n\nexport function getCustomerAndMallUser(custID) {\n  var _this4 = this;\n\n  return get(api.getCustomerAndMallUser, {\n    custId: custID\n  }).then(function (res) {\n    if (res.data.code === 0) {\n      console.log(res.data); // this.$store.dispatch('custDetailInfo', res.data.data)\n\n      _this4.setCustomerAndMallUser = res.data.data;\n    }\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n/**\n * @description: 获取客户行业字典表\n * @param {String} INDUSTRY\n * @return: getCustIndustry\n */\n\nexport function getCustIndustry(params) {\n  var _this5 = this;\n\n  return get(api.custIndustry + params).then(function (res) {\n    // console.log(res.data)\n    _this5.custIndustryArr = []; // 设置客户查询初始化选中\n    // this.defaultCustIndustry = res.data.data[0].id\n\n    res.data.data.forEach(function (item) {\n      _this5.custIndustryArr.push({\n        id: item.id,\n        displayValue: item.displayValue\n      });\n    }); // console.log(this.custIndustryArr)\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n/**\n * @description: 客户详情修改信息\n * @param {Object}  this.custFormData [表单]\n * @return: uploadCustomerAndMallUser\n */\n\nexport function uploadCustomerAndMallUser() {\n  var _this6 = this;\n\n  this.loading = true;\n  return put(api.updateCustomerAndMallUser, this.custFormData).then(function (res) {\n    console.log(res);\n\n    if (res.data.code === 0) {\n      _this6.loading = false;\n      _this6.isVisible = false;\n\n      _this6.$message.success('修改成功');\n\n      _this6.$emit('isVisible', _this6.isVisible);\n\n      return false;\n    }\n\n    _this6.isVisible = false;\n  }).catch(function (err) {\n    _this6.loading = false;\n    console.log(err);\n  });\n}\n/**\n * @description: 递归查询ID对应的地址\n * @param {Array} area [地址]\n * @param {String} id [地址ID]\n * @return: searchAddress\n */\n\nexport function searchAddress(arr, id) {\n  var _this7 = this;\n\n  return arr.filter(function (item) {\n    // console.log(item)\n    if (item.id === id) {\n      _this7.showAddress.push(item.name);\n\n      console.log(_this7.showAddress);\n      return item;\n    }\n\n    if (item.childrens) {\n      return searchAddress.call(_this7, item.childrens, id);\n    }\n  });\n}\n/**\n * @description: 客户管理条件模糊查询功能\n * @param {Object} params [搜索查询条件]\n * @return: showFuzzyCustomerPages\n */\n\nexport function getFuzzyCustomerPages(params) {\n  return postJson(api.showCustomersPage, params).then(function (res) {\n    console.log(res);\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n/**\n * @description: 客户名称模糊搜索\n * @param {String} value [监听选中的值]\n * @param {Function} callback [回调]\n * @return: custNamefetch\n */\n\nvar timeout;\nvar currentValue;\nexport function custNamefetch(value, callback) {\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = null;\n  }\n\n  currentValue = value;\n\n  function fake() {\n    get(api.listCustomerNames + \"?custName=\".concat(value)).then(function (res) {\n      if (currentValue === value) {\n        var data = [];\n        data.push.apply(data, _toConsumableArray(res.data));\n        callback(data);\n      }\n    });\n  }\n\n  timeout = setTimeout(fake, 300);\n}\n/**\n * @description: 客户编码模糊搜索\n * @param {String} value [监听选中的值]\n * @param {Function} callback [回调]\n * @return: custCodefetch\n */\n\nexport function custCodefetch(value, callback) {\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = null;\n  }\n\n  currentValue = value;\n\n  function fake() {\n    get(api.listCustomerCodes + \"?custCode=\".concat(value)).then(function (res) {\n      if (currentValue === value) {\n        var data = [];\n        data.push.apply(data, _toConsumableArray(res.data));\n        callback(data);\n      }\n    });\n  }\n\n  timeout = setTimeout(fake, 300);\n}\n/**\n * @description: 客户经理模糊搜索\n * @param {String} value [监听选中的值]\n * @param {Function} callback [回调]\n * @return: custCodefetch\n */\n\nexport function custManagerfetch(value, callback) {\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = null;\n  }\n\n  currentValue = value;\n\n  function fake() {\n    get(api.getUsersLike + \"?username=\".concat(value)).then(function (res) {\n      console.log(res.data.data);\n\n      if (currentValue === value) {\n        var data = [];\n        res.data.data.forEach(function (r) {\n          data.push({\n            value: r.name,\n            text: r.id\n          });\n        });\n        callback(data);\n      }\n    });\n  }\n\n  timeout = setTimeout(fake, 300);\n}",{"version":3,"sources":["/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/customer/getPage.js"],"names":["get","deleted","postJson","put","api","showCustomersPage","custDtoCode","custDtoIndustry","custDtoLevel","custDtoManager","custDtoName","custDtoStatus","currentPage","pageSize","loading","then","res","data","code","recordsList","pagination","total","Number","tabData","records","forEach","item","push","key","id","clientCode","custCode","clientShortName","custShortName","clientAbbreviation","mallUserName","clientName","clientPhone","phone","clientIndustryValue","custIndustryValue","clientLevel","custLevel","clientStatus","custStatus","catch","err","console","log","$message","error","removeCustomer","params","deleteCustomer","slice","length","success","subAddCust","addCustomerAndMallUser","custFormData","isVisible","$emit","reduceObj","objArray","result","temp","i","rePhone","getCustomerAndMallUser","custID","custId","setCustomerAndMallUser","getCustIndustry","custIndustry","custIndustryArr","displayValue","uploadCustomerAndMallUser","updateCustomerAndMallUser","searchAddress","arr","filter","showAddress","name","childrens","call","getFuzzyCustomerPages","timeout","currentValue","custNamefetch","value","callback","clearTimeout","fake","listCustomerNames","setTimeout","custCodefetch","listCustomerCodes","custManagerfetch","getUsersLike","r","text"],"mappings":"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","sourcesContent":["import { get, deleted, postJson, put } from '@/api/axios.js'\nimport api from '@/api/index.js'\n\n/**\n * @description: 初始化table数据\n * @param { currentPage } 当前页\n * @param { pageSize }  每页总数\n * @return: showCustomersPage\n */\nexport function showCustomersPage({ custDtoCode = '', custDtoIndustry = 0, custDtoLevel = 0, custDtoManager = '', custDtoName = '', custDtoStatus = 0, currentPage = 1, pageSize = 15 }) {\n  this.loading = true\n  return postJson(api.showCustomersPage, { custDtoCode, custDtoIndustry, custDtoLevel, custDtoManager, custDtoName, custDtoStatus, currentPage, pageSize })\n    .then(res => {\n      this.loading = false\n      if (res.data.code === 0) {\n        const recordsList = res.data.data\n        // 设置总页数\n        this.pagination.total = res.data.data === null ? 0 : Number(recordsList.total)\n        // 每次push先清空数组\n        this.tabData = []\n        recordsList.records.forEach((item) => {\n          this.tabData.push({\n            key: item.id,\n            clientCode: item.custCode,\n            clientShortName: item.custShortName,\n            clientAbbreviation: item.mallUserName,\n            clientName: item.mallUserName,\n            clientPhone: item.phone,\n            clientIndustryValue: item.custIndustryValue,\n            clientLevel: item.custLevel,\n            clientStatus: item.custStatus\n          })\n        })\n        // console.log(this.tabData)\n        return false\n      }\n    })\n    .catch(err => {\n      console.log(err)\n      this.$message.error(`请求超时`)\n    })\n}\n\n/**\n * @description: 客户管理Table列表删除操作\n * @param {params} 客户ID\n * @return: removeCustomer\n */\nexport function removeCustomer() {\n  const params = this.deleteCustomer.slice(0, (this.deleteCustomer.length) - 1)\n  return deleted(api.removeCustomer + `?${params}`).then((res) => {\n    if (res.data.code === 0) {\n      this.loading = false\n      this.$message.success('删除成功')\n      return false\n    }\n  }).catch((err) => {\n    console.log(err)\n    this.$message.error('请求错误')\n    this.loading = false\n  })\n}\n\n/**\n * @description: 新增客户表单提交\n * @param {custFormData} 表单字段\n * @return: subAddCust\n */\nexport function subAddCust() {\n  this.loading = true\n  return postJson(api.addCustomerAndMallUser, this.custFormData).then((res) => {\n    console.log(res)\n    if (res.data.code === 0) {\n      this.loading = false\n      this.isVisible = false\n      this.$emit('isVisible', this.isVisible)\n      return false\n    }\n    this.loading = false\n  }).catch(err => {\n    this.loading = false\n    console.log(err)\n  })\n}\n\n/**\n * @description: 数组对象去重\n * @param {Array<Object>} Array\n * @return: reduceObj\n */\nexport function reduceObj(objArray) {\n  var result = [] // 去重后返回的结果数组\n  var temp = {} // 临时对象\n  // 将对象数组中每一项的name值作为属性，若temp不拥有此属性时则为temp添加此属性且将其值赋为true，并将这一项push到结果数组中\n  for (var i = 0; i < objArray.length; i++) {\n    var rePhone = objArray[i].phone\n    if (temp[rePhone]) { // 如果temp中已经存在此属性名，则说明遇到重复项\n      this.$message.error('请勿重复添加')\n      continue // 不继续执行接下来的代码，跳转至循环开头\n    }\n    temp[rePhone] = true // 为temp添加此属性（myname）且将其值赋为true\n    result.push(objArray[i]) // 将这一项复制到结果数组result中去\n  }\n  return result\n}\n\n/**\n * @description: 根据客户ID查看详情\n * @param {custID} 客户ID\n * @return: getCustomerAndMallUser\n */\nexport function getCustomerAndMallUser(custID) {\n  return get(api.getCustomerAndMallUser, { custId: custID }).then((res) => {\n    if (res.data.code === 0) {\n      console.log(res.data)\n      // this.$store.dispatch('custDetailInfo', res.data.data)\n      this.setCustomerAndMallUser = res.data.data\n    }\n  }).catch((err) => {\n    console.log(err)\n  })\n}\n\n/**\n * @description: 获取客户行业字典表\n * @param {String} INDUSTRY\n * @return: getCustIndustry\n */\nexport function getCustIndustry(params) {\n  return get(api.custIndustry + params)\n    .then(res => {\n      // console.log(res.data)\n      this.custIndustryArr = []\n      // 设置客户查询初始化选中\n      // this.defaultCustIndustry = res.data.data[0].id\n      res.data.data.forEach(item => {\n        this.custIndustryArr.push({\n          id: item.id,\n          displayValue: item.displayValue\n        })\n      })\n      // console.log(this.custIndustryArr)\n    })\n    .catch(err => {\n      console.log(err)\n    })\n}\n\n/**\n * @description: 客户详情修改信息\n * @param {Object}  this.custFormData [表单]\n * @return: uploadCustomerAndMallUser\n */\nexport function uploadCustomerAndMallUser() {\n  this.loading = true\n  return put(api.updateCustomerAndMallUser, this.custFormData).then((res) => {\n    console.log(res)\n    if (res.data.code === 0) {\n      this.loading = false\n      this.isVisible = false\n      this.$message.success('修改成功')\n      this.$emit('isVisible', this.isVisible)\n      return false\n    }\n    this.isVisible = false\n  }).catch(err => {\n    this.loading = false\n    console.log(err)\n  })\n}\n\n/**\n * @description: 递归查询ID对应的地址\n * @param {Array} area [地址]\n * @param {String} id [地址ID]\n * @return: searchAddress\n */\nexport function searchAddress(arr, id) {\n  return arr.filter(item => {\n    // console.log(item)\n    if (item.id === id) {\n      this.showAddress.push(item.name)\n      console.log(this.showAddress)\n      return item\n    }\n    if (item.childrens) {\n      return searchAddress.call(this, item.childrens, id)\n    }\n  })\n}\n\n/**\n * @description: 客户管理条件模糊查询功能\n * @param {Object} params [搜索查询条件]\n * @return: showFuzzyCustomerPages\n */\nexport function getFuzzyCustomerPages(params) {\n  return postJson(api.showCustomersPage, params).then(res => {\n    console.log(res)\n  }).catch(err => {\n    console.log(err)\n  })\n}\n\n/**\n * @description: 客户名称模糊搜索\n * @param {String} value [监听选中的值]\n * @param {Function} callback [回调]\n * @return: custNamefetch\n */\nlet timeout\nlet currentValue\nexport function custNamefetch(value, callback) {\n  if (timeout) {\n    clearTimeout(timeout)\n    timeout = null\n  }\n  currentValue = value\n  function fake() {\n    get(api.listCustomerNames + `?custName=${value}`)\n      .then((res) => {\n        if (currentValue === value) {\n          const data = []\n          data.push(...res.data)\n          callback(data)\n        }\n      })\n  }\n  timeout = setTimeout(fake, 300)\n}\n\n/**\n * @description: 客户编码模糊搜索\n * @param {String} value [监听选中的值]\n * @param {Function} callback [回调]\n * @return: custCodefetch\n */\nexport function custCodefetch(value, callback) {\n  if (timeout) {\n    clearTimeout(timeout)\n    timeout = null\n  }\n  currentValue = value\n  function fake() {\n    get(api.listCustomerCodes + `?custCode=${value}`)\n      .then((res) => {\n        if (currentValue === value) {\n          const data = []\n          data.push(...res.data)\n          callback(data)\n        }\n      })\n  }\n  timeout = setTimeout(fake, 300)\n}\n\n/**\n * @description: 客户经理模糊搜索\n * @param {String} value [监听选中的值]\n * @param {Function} callback [回调]\n * @return: custCodefetch\n */\nexport function custManagerfetch(value, callback) {\n  if (timeout) {\n    clearTimeout(timeout)\n    timeout = null\n  }\n  currentValue = value\n  function fake() {\n    get(api.getUsersLike + `?username=${value}`)\n      .then((res) => {\n        console.log(res.data.data)\n        if (currentValue === value) {\n          const data = []\n          res.data.data.forEach(r => {\n            data.push({\n              value: r.name,\n              text: r.id\n            })\n          })\n          callback(data)\n        }\n      })\n  }\n  timeout = setTimeout(fake, 300)\n}\n"]}]}