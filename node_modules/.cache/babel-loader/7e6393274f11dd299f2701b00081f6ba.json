{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/views/sale/orderList/child_lib/address.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/views/sale/orderList/child_lib/address.vue","mtime":1564625928916},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport addAddress from '../basic_lib/addAddress';\nimport api from '@/api/index.js';\nimport { areas } from 'utils/area.js';\nimport { get } from '@/api/axios.js';\nexport default {\n  props: {\n    ocustName: String,\n    custId: String,\n    editInfo: {\n      type: Boolean,\n      required: true,\n      default: false\n    },\n    editDetial: {\n      type: Boolean,\n      required: true,\n      default: false\n    },\n    addrId: String\n  },\n  components: {\n    addAddress: addAddress\n  },\n  data: function data() {\n    return {\n      addressList: [],\n      visible: false,\n      areas: areas,\n      addressId: this.addrId\n    };\n  },\n  watch: {\n    custId: function custId(newVal) {\n      this.getAddressList(newVal);\n    },\n    deep: true\n  },\n  created: function created() {\n    this.getAddressList(this.custId);\n  },\n  methods: {\n    // 地址添加\n    addAddress: function addAddress() {\n      if (this.custId !== '') {\n        this.visible = true;\n      } else {\n        this.$message.warning('请先选择客户名称');\n      }\n    },\n    choseAddress: function choseAddress(index, id) {\n      if (this.editInfo && !this.editDetial) {\n        return;\n      }\n\n      var addressList = this.addressList;\n      addressList.forEach(function (item) {\n        item.defaultGoodsAddr = 0;\n      });\n      addressList[index].defaultGoodsAddr = 1;\n      this.addressId = id;\n      this.$emit('setAddressId', id);\n    },\n    // 关闭地址新增\n    addressCancel: function addressCancel(data) {\n      if (data) {\n        this.getAddressList(this.custId);\n      }\n\n      this.visible = false;\n    },\n    // 通过客户Id查询地址列表\n    getAddressList: function getAddressList(id) {\n      var _this = this;\n\n      get(api.getAddressList + \"/\".concat(id)).then(function (res) {\n        var data = res.data.data;\n\n        if (data.length > 0) {\n          data.forEach(function (item) {\n            if (item.city !== null && item.province !== null && item.area !== null) {\n              item['cityAddress'] = _this.getCPA(_this.areas, [item.province, item.city, item.area], 0, []);\n            }\n          });\n        }\n\n        _this.addressList = data;\n      });\n    },\n    getCPA: function getCPA(data, code, i, cityAddress) {\n      var _this2 = this;\n\n      data.forEach(function (item) {\n        if (item.id === code[i]) {\n          cityAddress.push(item.name);\n\n          if (item.childrens) {\n            _this2.getCPA(item.childrens, code, i + 1, cityAddress);\n          }\n        }\n      });\n      return cityAddress.join('');\n    }\n  }\n};",{"version":3,"sources":["address.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA,OAAA,UAAA,MAAA,yBAAA;AACA,OAAA,GAAA,MAAA,gBAAA;AACA,SAAA,KAAA,QAAA,eAAA;AACA,SAAA,GAAA,QAAA,gBAAA;AACA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,SAAA,EAAA,MADA;AAEA,IAAA,MAAA,EAAA,MAFA;AAGA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,QAAA,EAAA,IAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KAHA;AAQA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,QAAA,EAAA,IAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KARA;AAaA,IAAA,MAAA,EAAA;AAbA,GADA;AAgBA,EAAA,UAAA,EAAA;AACA,IAAA,UAAA,EAAA;AADA,GAhBA;AAmBA,EAAA,IAnBA,kBAmBA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,KAFA;AAGA,MAAA,KAAA,EAAA,KAHA;AAIA,MAAA,SAAA,EAAA,KAAA;AAJA,KAAA;AAMA,GA1BA;AA2BA,EAAA,KAAA,EAAA;AACA,IAAA,MADA,kBACA,MADA,EACA;AACA,WAAA,cAAA,CAAA,MAAA;AACA,KAHA;AAIA,IAAA,IAAA,EAAA;AAJA,GA3BA;AAiCA,EAAA,OAjCA,qBAiCA;AACA,SAAA,cAAA,CAAA,KAAA,MAAA;AACA,GAnCA;AAoCA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,UAFA,wBAEA;AACA,UAAA,KAAA,MAAA,KAAA,EAAA,EAAA;AACA,aAAA,OAAA,GAAA,IAAA;AACA,OAFA,MAEA;AACA,aAAA,QAAA,CAAA,OAAA,CAAA,UAAA;AACA;AACA,KARA;AASA,IAAA,YATA,wBASA,KATA,EASA,EATA,EASA;AACA,UAAA,KAAA,QAAA,IAAA,CAAA,KAAA,UAAA,EAAA;AACA;AACA;;AACA,UAAA,WAAA,GAAA,KAAA,WAAA;AACA,MAAA,WAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,IAAA,CAAA,gBAAA,GAAA,CAAA;AACA,OAFA;AAGA,MAAA,WAAA,CAAA,KAAA,CAAA,CAAA,gBAAA,GAAA,CAAA;AACA,WAAA,SAAA,GAAA,EAAA;AACA,WAAA,KAAA,CAAA,cAAA,EAAA,EAAA;AACA,KApBA;AAqBA;AACA,IAAA,aAtBA,yBAsBA,IAtBA,EAsBA;AACA,UAAA,IAAA,EAAA;AACA,aAAA,cAAA,CAAA,KAAA,MAAA;AACA;;AACA,WAAA,OAAA,GAAA,KAAA;AACA,KA3BA;AA4BA;AACA,IAAA,cA7BA,0BA6BA,EA7BA,EA6BA;AAAA;;AACA,MAAA,GAAA,CAAA,GAAA,CAAA,cAAA,cAAA,EAAA,CAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;;AACA,YAAA,IAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,UAAA,IAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,gBAAA,IAAA,CAAA,IAAA,KAAA,IAAA,IAAA,IAAA,CAAA,QAAA,KAAA,IAAA,IAAA,IAAA,CAAA,IAAA,KAAA,IAAA,EAAA;AACA,cAAA,IAAA,CAAA,aAAA,CAAA,GAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,KAAA,EAAA,CAAA,IAAA,CAAA,QAAA,EAAA,IAAA,CAAA,IAAA,EAAA,IAAA,CAAA,IAAA,CAAA,EAAA,CAAA,EAAA,EAAA,CAAA;AACA;AACA,WAJA;AAKA;;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,IAAA;AACA,OAVA;AAWA,KAzCA;AA0CA,IAAA,MA1CA,kBA0CA,IA1CA,EA0CA,IA1CA,EA0CA,CA1CA,EA0CA,WA1CA,EA0CA;AAAA;;AACA,MAAA,IAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,EAAA,KAAA,IAAA,CAAA,CAAA,CAAA,EAAA;AACA,UAAA,WAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA;;AACA,cAAA,IAAA,CAAA,SAAA,EAAA;AACA,YAAA,MAAA,CAAA,MAAA,CAAA,IAAA,CAAA,SAAA,EAAA,IAAA,EAAA,CAAA,GAAA,CAAA,EAAA,WAAA;AACA;AACA;AACA,OAPA;AAQA,aAAA,WAAA,CAAA,IAAA,CAAA,EAAA,CAAA;AACA;AApDA;AApCA,CAAA","sourcesContent":["<template>\n  <a-row>\n    <div\n      class=\"address-list\"\n      v-for=\"(item,index) in addressList\"\n      :key=\"item.id\"\n      @click=\"choseAddress(index,item.id)\"\n    >\n      <div\n        class=\"address-list-item\"\n        :class=\"{'item-active':item.id ==addressId}\"\n        v-if=\"editInfo && item.id ==addressId && !editDetial\"\n      >\n        <div class=\"address-list-item-desc\">\n          {{ocustName}}\n          <ul>\n            <li>收件人：{{item.receiver}}</li>\n            <li>联系方式：{{item.phone}}</li>\n            <li>地址：{{item.cityAddress?item.cityAddress:''}}{{item.detailAddr}}</li>\n          </ul>\n        </div>\n      </div>\n      <div\n        class=\"address-list-item\"\n        :class=\"{'item-active':item.id ==addressId}\"\n        v-else-if=\"!editInfo || editDetial\"\n      >\n        <div class=\"address-list-item-desc\">\n          {{ocustName}}\n          <ul>\n            <li>收件人：{{item.receiver}}</li>\n            <li>联系方式：{{item.phone}}</li>\n            <li>地址：{{item.cityAddress?item.cityAddress:''}}{{item.detailAddr}}</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    <span class=\"editable-add-btn\" @click=\"addAddress\" v-show=\"!editInfo || editDetial\">+添加地址</span>\n    <a-modal v-model=\"visible\" title=\"添加地址\" :footer=\"null\">\n      <addAddress :custId=\"custId\" @addressCancel=\"addressCancel\"></addAddress>\n    </a-modal>\n  </a-row>\n</template>\n\n<script>\nimport addAddress from '../basic_lib/addAddress'\nimport api from '@/api/index.js'\nimport { areas } from 'utils/area.js'\nimport { get } from '@/api/axios.js'\nexport default {\n  props: {\n    ocustName: String,\n    custId: String,\n    editInfo: {\n      type: Boolean,\n      required: true,\n      default: false\n    },\n    editDetial: {\n      type: Boolean,\n      required: true,\n      default: false\n    },\n    addrId: String\n  },\n  components: {\n    addAddress\n  },\n  data() {\n    return {\n      addressList: [],\n      visible: false,\n      areas,\n      addressId: this.addrId\n    }\n  },\n  watch: {\n    custId(newVal) {\n      this.getAddressList(newVal)\n    },\n    deep: true\n  },\n  created() {\n    this.getAddressList(this.custId)\n  },\n  methods: {\n    // 地址添加\n    addAddress() {\n      if (this.custId !== '') {\n        this.visible = true\n      } else {\n        this.$message.warning('请先选择客户名称')\n      }\n    },\n    choseAddress(index, id) {\n      if (this.editInfo && !this.editDetial) {\n        return\n      }\n      const addressList = this.addressList\n      addressList.forEach(item => {\n        item.defaultGoodsAddr = 0\n      })\n      addressList[index].defaultGoodsAddr = 1\n      this.addressId = id\n      this.$emit('setAddressId', id)\n    },\n    // 关闭地址新增\n    addressCancel(data) {\n      if (data) {\n        this.getAddressList(this.custId)\n      }\n      this.visible = false\n    },\n    // 通过客户Id查询地址列表\n    getAddressList(id) {\n      get(api.getAddressList + `/${id}`).then(res => {\n        const data = res.data.data\n        if (data.length > 0) {\n          data.forEach(item => {\n            if (item.city !== null && item.province !== null && item.area !== null) {\n              item['cityAddress'] = this.getCPA(this.areas, [item.province, item.city, item.area], 0, [])\n            }\n          })\n        }\n        this.addressList = data\n      })\n    },\n    getCPA(data, code, i, cityAddress) {\n      data.forEach(item => {\n        if (item.id === code[i]) {\n          cityAddress.push(item.name)\n          if (item.childrens) {\n            this.getCPA(item.childrens, code, i + 1, cityAddress)\n          }\n        }\n      })\n      return cityAddress.join('')\n    }\n  }\n}\n</script>\n\n<style lang='less' scoped>\n.editable-add-btn {\n  cursor: pointer;\n  margin: 10px;\n  display: block;\n  line-height: 30px;\n  text-align: center;\n  border: 1px dashed #ccc;\n}\n.address-list-item {\n  cursor: pointer;\n  margin-bottom: 10px;\n  &-desc {\n    font-size: 14px;\n    color: #333333;\n    padding: 15px 20px;\n    border-radius: 4px;\n    background: #fafafa;\n    border: 1px solid #d8d8d8;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    ul {\n      display: flex;\n      margin-bottom: 0;\n    }\n    li {\n      &:not(:last-child)::after {\n        content: \"/\";\n        margin: 0 10px;\n      }\n    }\n  }\n}\n.item-active {\n  .address-list-item-desc {\n    position: relative;\n    background-color: #fdfffa;\n    border: 1px solid #69b412;\n    &::after {\n      content: \"\";\n      border-top-right-radius: 3px;\n      border-width: 15px;\n      border-style: solid;\n      border-color: #69b412 #69b412 transparent transparent;\n      position: absolute;\n      right: 0px;\n      top: 0px;\n    }\n    &::before {\n      content: \"\";\n      position: absolute;\n      width: 7px;\n      height: 14px;\n      border-right: 2px solid #fff;\n      border-bottom: 2px solid #fff;\n      transform: rotate(40deg);\n      top: 0px;\n      right: 5px;\n      color: #fff;\n      font-size: 10px;\n      z-index: 999;\n      font-size: 16px;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/views/sale/orderList/child_lib"}]}