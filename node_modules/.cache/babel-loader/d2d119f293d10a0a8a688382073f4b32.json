{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/sale/orderList/Order.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/sale/orderList/Order.vue","mtime":1557971448749},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _parseFloat from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/core-js/parse-float\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Animation from \"@/assets/common/Animation\";\nimport { postJson, get, deleted } from \"@/api/axios.js\";\nimport api from \"@/api/index.js\";\nimport AddOrderList from \"./addOrderList.vue\";\nimport OrderDetial from \"./orderDetial\";\nimport { getListCompanyGoods, getCompanyAllUsers, getListCompanyCusts } from \"./menu.js\";\nimport { columns } from './orderColumns';\nvar formItemLayout = {\n  labelCol: {\n    span: 6\n  },\n  wrapperCol: {\n    span: 18\n  }\n};\nexport default {\n  components: {\n    Animation: Animation,\n    AddOrderList: AddOrderList,\n    OrderDetial: OrderDetial\n  },\n  data: function data() {\n    return {\n      formItemLayout: formItemLayout,\n      advanced: false,\n      showList: false,\n      // 列表显示和搜索\n      showAdd: false,\n      // 新建显示\n      showDelete: false,\n      // 批量删除显示\n      pagination: {\n        total: 0,\n        defaultPageSize: 15,\n        defaultCurrent: 1,\n        showQuickJumper: true,\n        hideOnSinglePage: true\n      },\n      columns: columns,\n      tabData: [],\n      selectedRowKeys: [],\n      selectedRows: [],\n      loading: true,\n      orderEncapsulation: {\n        ocustAmaldar: \"\",\n        // 客户经理\n        ocustCode: \"\",\n        // 客户编码\n        ocustName: \"\",\n        // 客户名称\n        odPromiseDueDate: \"\",\n        // 承诺时间\n        odSkuCode: \"\",\n        // 商品编号\n        odSpec: \"\",\n        // 商品规格\n        oorderNumber: \"\",\n        // 订单编号\n        oproductionBase: \"\",\n        // 生产基地\n        odPurchaseOrderno: \"\",\n        // 采购单号\n        osource: 0,\n        // 订单来源\n        ostatus: 0 // 订单状态\n\n      },\n      visible: false,\n      detial: false,\n      detialList: \"\",\n      customerPage: 1,\n      // 客户名称&&客户编码 搜索分页\n      companyGoods: 1,\n      // 产品编码&&产品规格 搜索分页\n      ocustNameList: [],\n      // 客户名称\n      ocustCodeList: [],\n      // 客户编码\n      ocustAmaldarList: [],\n      //客户经理\n      odSkuCodeList: [],\n      // 产品编码\n      odSpecList: [],\n      // 产品规格\n      buttons: [] // 页面显示的按钮\n\n    };\n  },\n  created: function created() {\n    this.getFunctionPage();\n    getListCompanyGoods.call(this, this.companyGoods);\n    getCompanyAllUsers.call(this);\n    getListCompanyCusts.call(this, this.customerPage);\n  },\n  computed: {\n    rowSelection: function rowSelection() {\n      var selectedRowKeys = this.selectedRowKeys;\n      return {\n        selectedRowKeys: selectedRowKeys,\n        onChange: this.onChangeTab,\n        hideDefaultSelections: false\n      };\n    },\n    funcIdArray: function funcIdArray() {\n      return this.$store.state.funcIdArray;\n    }\n  },\n  watch: {\n    visible: function visible(newVal, oldVal) {\n      if (!newVal) {\n        this.getOrderList();\n      }\n    },\n    funcIdArray: function funcIdArray(newVal, oldVal) {\n      this.getFunctionPage(newVal);\n    }\n  },\n  methods: {\n    toggleAdvanced: function toggleAdvanced() {\n      this.advanced = !this.advanced;\n    },\n    // 翻页时触发\n    onChangePage: function onChangePage(pagination, filters, sorter) {\n      this.getOrderList(pagination.current);\n    },\n    // 获取列表数据\n    getOrderList: function getOrderList() {\n      var currentPage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var pageSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 15;\n      var timeout;\n\n      var _this = this;\n\n      this.loading = true;\n\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      } else {\n        timeout = setTimeout(function () {\n          postJson(api.getOrderList + \"\".concat(currentPage, \"/\").concat(pageSize), _this.orderEncapsulation).then(function (res) {\n            if (res.data.code === 0) {\n              if (res.data.data.records) {\n                _this.tabData = res.data.data.records;\n\n                _this.tabData.forEach(function (item, index) {\n                  item.key = index;\n                });\n              } else {\n                _this.tabData = [];\n              }\n\n              _this.pagination.total = res.data.data.total;\n            }\n\n            _this.loading = false;\n            _this.selectedRowKeys = [];\n          });\n        }, 500);\n      }\n    },\n    // 关闭新建订单抽屉\n    isVisible: function isVisible(_isVisible) {\n      this.visible = _isVisible;\n      this.getOrderList();\n    },\n    // 关闭订单详情抽屉\n    orderDetialInfo: function orderDetialInfo(status) {\n      this.detial = status;\n      this.getOrderList();\n    },\n    // 关闭新建订单抽屉\n    onCustomerInfo: function onCustomerInfo() {\n      this.visible = false;\n    },\n    // 关闭订单详情抽屉\n    onDetial: function onDetial() {\n      this.detial = false;\n    },\n    // 打开新建订单抽屉\n    addOrderList: function addOrderList() {\n      this.visible = true;\n    },\n    // 打开订单详情抽屉\n    goOrderDetail: function goOrderDetail(id) {\n      this.detialList = id;\n      this.detial = true;\n    },\n    // 搜索\n    inputChange: function inputChange(val, type) {\n      switch (type) {\n        case \"oorderNumber\":\n          this.orderEncapsulation.oorderNumber = val;\n          this.getOrderList();\n          break;\n\n        case \"opurchaseOrderno\":\n          this.orderEncapsulation.opurchaseOrderno = val;\n          this.getOrderList();\n          break;\n\n        case \"ocustName\":\n          this.orderEncapsulation.ocustName = val;\n          this.getOrderList();\n          break;\n\n        case \"ocustCode\":\n          this.orderEncapsulation.ocustCode = val;\n          this.getOrderList();\n          break;\n\n        case \"ocustAmaldar\":\n          this.orderEncapsulation.ocustAmaldar = val;\n          this.getOrderList();\n          break;\n\n        case \"odSkuCode\":\n          this.orderEncapsulation.odSkuCode = val;\n          this.getOrderList();\n          break;\n\n        case \"odSpec\":\n          this.orderEncapsulation.odSpec = val;\n          this.getOrderList();\n          break;\n\n        case \"osource\":\n          this.onChangePage.osource = val;\n          this.getOrderList();\n          break;\n\n        case \"ostatus\":\n          this.orderEncapsulation.ostatus = val;\n          this.getOrderList();\n          break;\n\n        case \"odPromiseDueDate\":\n          this.orderEncapsulation.odPromiseDueDate = val;\n          this.getOrderList();\n          break;\n\n        case \"oproductionBase\":\n          this.orderEncapsulation.oproductionBase = val;\n          this.getOrderList();\n          break;\n\n        default:\n          this.getOrderList();\n          break;\n      }\n    },\n    onChangeTab: function onChangeTab(selectedRowKeys, selectedRows) {\n      this.selectedRowKeys = selectedRowKeys;\n      this.selectedRows = selectedRows;\n    },\n    // 订单的批量删除\n    deleteOrder: function deleteOrder() {\n      var selectedRowKeys = this.selectedRowKeys;\n      var selectedRows = this.selectedRows;\n      var idStr = [];\n\n      var _this = this;\n\n      if (selectedRowKeys.length === 0) {\n        this.$message.error('请选择要删除的订单');\n        return;\n      } else {\n        selectedRows.forEach(function (item, index) {\n          idStr.push(item.id);\n        });\n        this.$confirm({\n          title: \"您确定要删除订单信息吗？\",\n          content: \"当您点击确定过后将删除选中的订单信息\",\n          cancelText: \"取消\",\n          okText: \"确定\",\n          onOk: function onOk() {\n            deleted(api.deletedBatch + \"?idStr=\".concat(idStr.join(','))).then(function (res) {\n              if (res.data.code === 0) {\n                _this.$message.success('删除成功');\n\n                _this.getOrderList();\n              }\n            });\n          },\n          onCancel: function onCancel() {}\n        });\n      }\n    },\n    // 获取允许的操作和页面自定义的布局\n    getFunctionPage: function getFunctionPage(val) {\n      var _this2 = this;\n\n      var data = {};\n      data.funcId = val || this.funcIdArray;\n      data.pageType = 'LIST';\n      get(api.functionPage, data).then(function (res) {\n        if (res.data.code === 0) {\n          var buttons = res.data.data.buttons;\n          buttons.forEach(function (item, index) {\n            _this2.loading = false;\n\n            if (item.btnOptType === 'LIST') {\n              _this2.getOrderList();\n\n              _this2.showList = true;\n            }\n\n            if (item.btnOptType === 'ADD') {\n              _this2.showAdd = true;\n            }\n\n            if (item.btnOptType === 'DELETES') {\n              _this2.showDelete = true;\n            }\n          });\n          _this2.buttons = buttons;\n        } else {\n          _this2.$message.error(res.data.msg);\n        }\n      });\n    },\n    // 选择框下来状态\n    currentPageChange: function currentPageChange(e, type) {\n      var boxHeigth = e.target.scrollHeight - 1;\n      var box = {\n        scrollTop: e.target.scrollTop\n      };\n\n      if (_parseFloat(getComputedStyle(document.querySelector('.ant-select-dropdown-content')).height) + box.scrollTop > boxHeigth) {\n        switch (type) {\n          case 'customer':\n            getListCompanyCusts.call(this, this.customerPage);\n            break;\n\n          case 'companyGoods':\n            getListCompanyGoods.call(this, this.companyGoods);\n            break;\n        }\n      }\n    }\n  }\n};",{"version":3,"sources":["Order.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"order\">\n    <!-- 头部选择区 -->\n    <div class=\"order-add\">\n      <a-button type=\"primary\" @click=\"addOrderList\" v-if=\"showAdd\">\n        <a-icon type=\"plus\"/>新建\n      </a-button>\n      <!-- 弹出层 -->\n      <a-drawer\n        destroyOnClose\n        placement=\"right\"\n        :closable=\"false\"\n        :width=\"1080\"\n        @close=\"onCustomerInfo\"\n        :visible=\"visible\"\n        :wrapStyle=\"{height: 'calc(100% - 108px)',overflow: 'auto',paddingBottom: '108px'}\"\n      >\n        <AddOrderList @isVisible=\"isVisible\" :ocustAmaldarList=\"ocustAmaldarList\"></AddOrderList>\n      </a-drawer>\n      <span v-show=\"showDelete\" class=\"delete-btn\" @click=\"deleteOrder\">\n        <a-icon class=\"delete-icon\" type=\"delete\"/>\n        <span>删除</span>\n      </span>\n      <!-- <a-dropdown>\n        <span>\n          <a-icon class=\"order-derive\" type=\"check-circle\"/>\n          <span>更多</span>\n        </span>\n        <a-menu slot=\"overlay\">\n          <a-menu-item key=\"0\">\n            <span>导入</span>\n          </a-menu-item>\n          <a-menu-item key=\"1\">\n            <span>导出</span>\n          </a-menu-item>\n        </a-menu>\n      </a-dropdown>-->\n    </div>\n    <div class=\"order-select\" v-if=\"showList\">\n      <a-form layout=\"horizontal\">\n        <a-row>\n          <a-col :span=\"22\">\n            <a-row>\n              <a-col :span=\"6\">\n                <a-form-item\n                  :label-col=\"formItemLayout.labelCol\"\n                  :wrapper-col=\"formItemLayout.wrapperCol\"\n                  label=\"订单编号\"\n                >\n                  <a-input\n                    class=\"inputWidth\"\n                    placeholder=\"请输入订单编号\"\n                    @change=\"(e)=>{inputChange(e.target.value,'oorderNumber')}\"\n                  />\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"6\">\n                <a-form-item\n                  :label-col=\"formItemLayout.labelCol\"\n                  :wrapper-col=\"formItemLayout.wrapperCol\"\n                  label=\"采购单号\"\n                >\n                  <a-input\n                    class=\"inputWidth\"\n                    placeholder=\"请输入客户采购单号\"\n                    @change=\"(e)=>{inputChange(e.target.value,'opurchaseOrderno')}\"\n                  />\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"6\">\n                <a-form-item\n                  :label-col=\"formItemLayout.labelCol\"\n                  :wrapper-col=\"formItemLayout.wrapperCol\"\n                  label=\"客户名称\"\n                >\n                  <a-select\n                    class=\"inputWidth\"\n                    showSearch\n                    :allowClear=\"true\"\n                    @change=\"(val)=>{inputChange(val,'ocustName')}\"\n                    placeholder=\"请输入客户名称\"\n                    @popupScroll=\"e=>currentPageChange(e,'customer')\"\n                    :getPopupContainer=\"triggerNode => triggerNode.parentNode\"\n                  >\n                    <a-select-option v-for=\"item in ocustNameList\" :key=\"item\">{{item}}</a-select-option>\n                  </a-select>\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"6\">\n                <a-form-item\n                  :label-col=\"formItemLayout.labelCol\"\n                  :wrapper-col=\"formItemLayout.wrapperCol\"\n                  label=\"客户编码\"\n                >\n                  <a-select\n                    class=\"inputWidth\"\n                    showSearch\n                    :allowClear=\"true\"\n                    @change=\"(val)=>{inputChange(val,'ocustCode')}\"\n                    placeholder=\"请输入客户编码\"\n                    @popupScroll=\"e=>currentPageChange(e,'customer')\"\n                    :getPopupContainer=\"triggerNode => triggerNode.parentNode\"\n                  >\n                    <a-select-option v-for=\"item in ocustCodeList\" :key=\"item\">{{item}}</a-select-option>\n                  </a-select>\n                </a-form-item>\n              </a-col>\n            </a-row>\n            <Animation name=\"fadeIn\">\n              <a-row v-if=\"advanced\">\n                <a-col :span=\"6\">\n                  <a-form-item\n                    :label-col=\"formItemLayout.labelCol\"\n                    :wrapper-col=\"formItemLayout.wrapperCol\"\n                    label=\"客户经理\"\n                  >\n                    <a-select\n                      class=\"inputWidth\"\n                      showSearch\n                      :allowClear=\"true\"\n                      @change=\"(val)=>{inputChange(val,'ocustAmaldar')}\"\n                      placeholder=\"请输入客户经理\"\n                      :getPopupContainer=\"triggerNode => triggerNode.parentNode\"\n                    >\n                      <a-select-option v-for=\"item in ocustAmaldarList\" :key=\"item\">{{item}}</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                </a-col>\n                <a-col :span=\"6\">\n                  <a-form-item\n                    :label-col=\"formItemLayout.labelCol\"\n                    :wrapper-col=\"formItemLayout.wrapperCol\"\n                    label=\"产品编码\"\n                  >\n                    <a-select\n                      class=\"inputWidth\"\n                      showSearch\n                      :allowClear=\"true\"\n                      @change=\"(val)=>{inputChange(val,'odSkuCode')}\"\n                      placeholder=\"请输入产品编码\"\n                      @popupScroll=\"e=>currentPageChange(e,'companyGoods')\"\n                      :getPopupContainer=\"triggerNode => triggerNode.parentNode\"\n                    >\n                      <a-select-option v-for=\"item in odSkuCodeList\" :key=\"item\">{{item}}</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                </a-col>\n                <a-col :span=\"6\">\n                  <a-form-item\n                    :label-col=\"formItemLayout.labelCol\"\n                    :wrapper-col=\"formItemLayout.wrapperCol\"\n                    label=\"产品规格\"\n                  >\n                    <a-select\n                      class=\"inputWidth\"\n                      showSearch\n                      :allowClear=\"true\"\n                      @change=\"(val)=>{inputChange(val,'odSpec')}\"\n                      placeholder=\"请输入产品规格\"\n                      @popupScroll=\"e=>currentPageChange(e,'companyGoods')\"\n                      :getPopupContainer=\"triggerNode => triggerNode.parentNode\"\n                    >\n                      <a-select-option v-for=\"item in odSpecList\" :key=\"item\">{{item}}</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                </a-col>\n                <a-col :span=\"6\">\n                  <a-form-item\n                    :label-col=\"formItemLayout.labelCol\"\n                    :wrapper-col=\"formItemLayout.wrapperCol\"\n                    label=\"订单来源\"\n                  >\n                    <a-select\n                      class=\"inputWidth\"\n                      placeholder=\"请选择订单来源\"\n                      @change=\"(val)=>{inputChange(val,'osource')}\"\n                      :getPopupContainer=\"triggerNode => triggerNode.parentNode\"\n                    >\n                      <a-select-option value=\"0\">线上商城</a-select-option>\n                      <a-select-option value=\"1\">线上定制</a-select-option>\n                      <a-select-option value=\"2\">线下定制</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                </a-col>\n                <a-col :span=\"6\">\n                  <a-form-item\n                    :label-col=\"formItemLayout.labelCol\"\n                    :wrapper-col=\"formItemLayout.wrapperCol\"\n                    label=\"订单状态\"\n                  >\n                    <a-select\n                      class=\"inputWidth\"\n                      placeholder=\"请选择订单状态\"\n                      @change=\"(val)=>{inputChange(val,'ostatus')}\"\n                      :getPopupContainer=\"triggerNode => triggerNode.parentNode\"\n                    >\n                      <a-select-option value=\"0\">预订单</a-select-option>\n                      <a-select-option value=\"1\">已提交</a-select-option>\n                      <a-select-option value=\"2\">已接单</a-select-option>\n                      <a-select-option value=\"3\">已拒单</a-select-option>\n                      <a-select-option value=\"4\">已完成</a-select-option>\n                      <a-select-option value=\"5\">已取消</a-select-option>\n                      <a-select-option value=\"6\">已经发货</a-select-option>\n                      <a-select-option value=\"7\">部分发货</a-select-option>\n                      <a-select-option value=\"8\">未发货</a-select-option>\n                      <a-select-option value=\"9\">已签收</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                </a-col>\n                <a-col :span=\"6\">\n                  <a-form-item\n                    :label-col=\"formItemLayout.labelCol\"\n                    :wrapper-col=\"formItemLayout.wrapperCol\"\n                    label=\"承诺交期\"\n                  >\n                    <a-date-picker\n                      class=\"inputWidth\"\n                      format=\"YYYY/MM/DD\"\n                      placeholder=\"请选择承诺交期\"\n                      @change=\"(date, dateString)=>{inputChange(dateString,'odPromiseDueDate')}\"\n                    />\n                  </a-form-item>\n                </a-col>\n                <!-- <a-form-item label=\"生产中心\">\n                    <a-select\n                      showSearch\n\n                      @change=\"(val)=>{inputChange(val,'oproductionBase')}\"\n                      placeholder=\"请输入生产中心\"\n                    >\n                      <a-select-option\n                        v-for=\"i in 25\"\n                        :key=\"(i + 9).toString(36) + i\"\n                      >{{(i + 9).toString(36) + i}}</a-select-option>\n                    </a-select>\n                </a-form-item>-->\n              </a-row>\n            </Animation>\n          </a-col>\n          <a-col :span=\"2\">\n            <a-form-item style=\"text-align:center\">\n              <span @click=\"toggleAdvanced\" style=\"cursor: pointer;\">\n                {{ advanced ? '收起' : '展开' }}\n                <a-icon :type=\"advanced ? 'caret-up' : 'caret-down'\"/>\n              </span>\n            </a-form-item>\n          </a-col>\n        </a-row>\n      </a-form>\n    </div>\n    <div class=\"order-table\">\n      <a-table\n        :columns=\"columns\"\n        @change=\"onChangePage\"\n        :dataSource=\"tabData\"\n        :pagination=\"pagination\"\n        :rowSelection=\"rowSelection\"\n        :loading=\"loading\"\n        :scroll=\"{ x: '190%',y:'' }\"\n      >\n        <template slot=\"oorderNumber\" slot-scope=\"text,record\">\n          <a href=\"javascript:;\" @click=\"goOrderDetail(record.id)\">{{text}}</a>\n        </template>\n        <template slot=\"osource\" slot-scope=\"text\">\n          <span v-if=\"text === 'MALLONLINE'\">线上商城</span>\n          <span v-if=\"text === 'CUSTOMIZEDONLINE'\">线上定制</span>\n          <span v-if=\"text === 'CUSTOMIZEDUNDERLINE'\">线下定制</span>\n        </template>\n        <template slot=\"ostatus\" slot-scope=\"text\">\n          <a\n            href=\"javascript:;\"\n            title=\"已接单\"\n            v-if=\"text === 'ACCEPTORDER'\"\n            class=\"status-color status-green\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"预订单\"\n            v-if=\"text === 'PREORDER'\"\n            class=\"status-color status-gray\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"已提交\"\n            v-if=\"text === 'SUBMISSIONORDER'\"\n            class=\"status-color status-gray\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"已拒单\"\n            v-if=\"text === 'REJECTORDER'\"\n            class=\"status-color status-red\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"已完成\"\n            v-if=\"text === 'FINISH'\"\n            class=\"status-color status-green\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"已取消\"\n            v-if=\"text === 'CANCEL'\"\n            class=\"status-color status-green\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"已经发货\"\n            v-if=\"text === 'HAVEDELLIVERY'\"\n            class=\"status-color status-green\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"部分发货\"\n            v-if=\"text === 'PARTDELLIVERY'\"\n            class=\"status-color status-green\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"未发货\"\n            v-if=\"text === 'UNDELLIVERY'\"\n            class=\"status-color status-green\"\n          ></a>\n          <a\n            href=\"javascript:;\"\n            title=\"已签收\"\n            v-if=\"text === 'ALREADYLIVERY'\"\n            class=\"status-color status-green\"\n          ></a>\n        </template>\n        <template\n          v-for=\"col in ['odSkuCode', 'odSkuName', 'odSpec','taxRate','price', 'odNumber', 'odAmount', 'odRequireDueDate','odPromiseDueDate','ofigureNumber','orderplacingTime']\"\n          :slot=\"col\"\n          slot-scope=\"text, record\"\n        >\n          <template v-if=\"col === 'odSkuCode'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span>{{record.skuList[index].odSkuCode}}</span>\n            </div>\n          </template>\n          <template v-if=\"col === 'odSkuName'\">\n            <div\n              v-for=\"(item,index) in record.skuList\"\n              :key=\"index\"\n            >{{record.skuList[index].odSkuName}}</div>\n          </template>\n          <template v-if=\"col === 'odSpec'\">\n            <div\n              v-for=\"(item,index) in record.skuList\"\n              :key=\"index\"\n            >{{record.skuList[index].odSpec}}</div>\n          </template>\n          <template v-if=\"col === 'taxRate'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span v-if=\"record.skuList[index].sku\">{{record.skuList[index].sku.taxRate}}</span>\n            </div>\n          </template>\n          <template v-if=\"col === 'price'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span v-if=\"record.skuList[index].sku\">{{record.skuList[index].sku.price}}</span>\n            </div>\n          </template>\n          <template v-if=\"col === 'odNumber'\">\n            <div\n              v-for=\"(item,index) in record.skuList\"\n              :key=\"index\"\n            >{{record.skuList[index].odNumber}}</div>\n          </template>\n          <template v-if=\"col === 'odAmount'\">\n            <div\n              v-for=\"(item,index) in record.skuList\"\n              :key=\"index\"\n            >{{record.skuList[index].odAmount}}</div>\n          </template>\n          <template v-if=\"col === 'odRequireDueDate'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span\n                v-if=\"record.skuList[index].odRequireDueDate\"\n              >{{record.skuList[index].odRequireDueDate | formatDate}}</span>\n              <span v-else></span>\n            </div>\n          </template>\n          <template v-if=\"col === 'odPromiseDueDate'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span\n                v-if=\"record.skuList[index].odPromiseDueDate\"\n              >{{record.skuList[index].odPromiseDueDate | formatDate}}</span>\n              <span v-else></span>\n            </div>\n          </template>\n          <!-- <template v-if=\"col === 'ofigureNumber'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">{{record.skuList[index].odOrderplacingTime}}</div>\n          </template>-->\n          <template v-if=\"col === 'orderplacingTime'\">\n            <div v-for=\"(item,index) in record.skuList\" :key=\"index\">\n              <span\n                v-if=\"record.skuList[index].odOrderplacingTime\"\n              >{{record.skuList[index].odOrderplacingTime | formatDate}}</span>\n              <span v-else></span>\n            </div>\n          </template>\n        </template>\n      </a-table>\n    </div>\n\n    <a-drawer\n      destroyOnClose\n      placement=\"right\"\n      :closable=\"false\"\n      :width=\"1080\"\n      @close=\"onDetial\"\n      :visible=\"detial\"\n      :wrapStyle=\"{overflow: 'auto',paddingBottom: '108px'}\"\n    >\n      <OrderDetial\n        @orderDetialInfo=\"orderDetialInfo\"\n        :detialList=\"detialList\"\n        :ocustAmaldarList=\"ocustAmaldarList\"\n      ></OrderDetial>\n    </a-drawer>\n  </div>\n</template>\n\n<script>\nimport Animation from \"@/assets/common/Animation\";\nimport { postJson, get, deleted } from \"@/api/axios.js\";\nimport api from \"@/api/index.js\";\nimport AddOrderList from \"./addOrderList.vue\";\nimport OrderDetial from \"./orderDetial\";\nimport {\n  getListCompanyGoods,\n  getCompanyAllUsers,\n  getListCompanyCusts\n} from \"./menu.js\";\nimport { columns } from './orderColumns';\nconst formItemLayout = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 18 }\n}\nexport default {\n  components: {\n    Animation,\n    AddOrderList,\n    OrderDetial\n  },\n  data() {\n    return {\n      formItemLayout,\n      advanced: false,\n      showList: false, // 列表显示和搜索\n      showAdd: false, // 新建显示\n      showDelete: false, // 批量删除显示\n      pagination: {\n        total: 0,\n        defaultPageSize: 15,\n        defaultCurrent: 1,\n        showQuickJumper: true,\n        hideOnSinglePage: true\n      },\n      columns,\n      tabData: [],\n      selectedRowKeys: [],\n      selectedRows: [],\n      loading: true,\n      orderEncapsulation: {\n        ocustAmaldar: \"\", // 客户经理\n        ocustCode: \"\", // 客户编码\n        ocustName: \"\", // 客户名称\n        odPromiseDueDate: \"\", // 承诺时间\n        odSkuCode: \"\", // 商品编号\n        odSpec: \"\", // 商品规格\n        oorderNumber: \"\", // 订单编号\n        oproductionBase: \"\", // 生产基地\n        odPurchaseOrderno: \"\", // 采购单号\n        osource: 0, // 订单来源\n        ostatus: 0 // 订单状态\n      },\n      visible: false,\n      detial: false,\n      detialList: \"\",\n      customerPage: 1, // 客户名称&&客户编码 搜索分页\n      companyGoods: 1, // 产品编码&&产品规格 搜索分页\n      ocustNameList: [], // 客户名称\n      ocustCodeList: [], // 客户编码\n      ocustAmaldarList: [], //客户经理\n      odSkuCodeList: [], // 产品编码\n      odSpecList: [], // 产品规格\n      buttons: [] // 页面显示的按钮\n    };\n  },\n  created() {\n    this.getFunctionPage()\n    getListCompanyGoods.call(this, this.companyGoods)\n    getCompanyAllUsers.call(this)\n    getListCompanyCusts.call(this, this.customerPage)\n  },\n  computed: {\n    rowSelection() {\n      const { selectedRowKeys } = this;\n      return {\n        selectedRowKeys,\n        onChange: this.onChangeTab,\n        hideDefaultSelections: false\n      };\n    },\n    funcIdArray() {\n      return this.$store.state.funcIdArray\n    }\n  },\n  watch: {\n    visible(newVal, oldVal) {\n      if (!newVal) {\n        this.getOrderList();\n      }\n    },\n    funcIdArray(newVal, oldVal) {\n      this.getFunctionPage(newVal);\n    }\n  },\n  methods: {\n    toggleAdvanced() {\n      this.advanced = !this.advanced;\n    },\n    // 翻页时触发\n    onChangePage(pagination, filters, sorter) {\n      this.getOrderList(pagination.current);\n    },\n    // 获取列表数据\n    getOrderList(currentPage = 1, pageSize = 15) {\n      let timeout\n      let _this = this\n      this.loading = true;\n      if (timeout) {\n        clearTimeout(timeout)\n        timeout = null\n      } else {\n        timeout = setTimeout(() => {\n          postJson(\n            api.getOrderList + `${currentPage}/${pageSize}`,\n            _this.orderEncapsulation\n          ).then(res => {\n            if (res.data.code === 0) {\n              if (res.data.data.records) {\n                _this.tabData = res.data.data.records;\n                _this.tabData.forEach((item, index) => {\n                  item.key = index;\n                });\n              } else {\n                _this.tabData = []\n              }\n              _this.pagination.total = res.data.data.total;\n            }\n            _this.loading = false;\n            _this.selectedRowKeys = [];\n          });\n        }, 500)\n      }\n    },\n    // 关闭新建订单抽屉\n    isVisible(isVisible) {\n      this.visible = isVisible;\n      this.getOrderList()\n    },\n    // 关闭订单详情抽屉\n    orderDetialInfo(status) {\n      this.detial = status\n      this.getOrderList()\n    },\n    // 关闭新建订单抽屉\n    onCustomerInfo() {\n      this.visible = false;\n    },\n    // 关闭订单详情抽屉\n    onDetial() {\n      this.detial = false;\n    },\n    // 打开新建订单抽屉\n    addOrderList() {\n      this.visible = true;\n    },\n    // 打开订单详情抽屉\n    goOrderDetail(id) {\n      this.detialList = id;\n      this.detial = true;\n    },\n    // 搜索\n    inputChange(val, type) {\n      switch (type) {\n        case \"oorderNumber\":\n          this.orderEncapsulation.oorderNumber = val;\n          this.getOrderList();\n          break;\n        case \"opurchaseOrderno\":\n          this.orderEncapsulation.opurchaseOrderno = val;\n          this.getOrderList();\n          break;\n        case \"ocustName\":\n          this.orderEncapsulation.ocustName = val;\n          this.getOrderList();\n          break;\n        case \"ocustCode\":\n          this.orderEncapsulation.ocustCode = val;\n          this.getOrderList();\n          break;\n        case \"ocustAmaldar\":\n          this.orderEncapsulation.ocustAmaldar = val;\n          this.getOrderList();\n          break;\n        case \"odSkuCode\":\n          this.orderEncapsulation.odSkuCode = val;\n          this.getOrderList();\n          break;\n        case \"odSpec\":\n          this.orderEncapsulation.odSpec = val;\n          this.getOrderList();\n          break;\n        case \"osource\":\n          this.onChangePage.osource = val;\n          this.getOrderList();\n          break;\n        case \"ostatus\":\n          this.orderEncapsulation.ostatus = val;\n          this.getOrderList();\n          break;\n        case \"odPromiseDueDate\":\n          this.orderEncapsulation.odPromiseDueDate = val;\n          this.getOrderList();\n          break;\n        case \"oproductionBase\":\n          this.orderEncapsulation.oproductionBase = val;\n          this.getOrderList();\n          break;\n        default:\n          this.getOrderList();\n          break;\n      }\n    },\n    onChangeTab(selectedRowKeys, selectedRows) {\n      this.selectedRowKeys = selectedRowKeys;\n      this.selectedRows = selectedRows\n    },\n    // 订单的批量删除\n    deleteOrder() {\n      var selectedRowKeys = this.selectedRowKeys\n      var selectedRows = this.selectedRows\n      var idStr = []\n      var _this = this\n      if (selectedRowKeys.length === 0) {\n        this.$message.error('请选择要删除的订单')\n        return\n      } else {\n        selectedRows.forEach((item, index) => {\n          idStr.push(item.id)\n        })\n        this.$confirm({\n          title: \"您确定要删除订单信息吗？\",\n          content: \"当您点击确定过后将删除选中的订单信息\",\n          cancelText: \"取消\",\n          okText: \"确定\",\n          onOk() {\n            deleted(api.deletedBatch + `?idStr=${idStr.join(',')}`).then(res => {\n              if (res.data.code === 0) {\n                _this.$message.success('删除成功')\n                _this.getOrderList()\n              }\n            })\n          },\n          onCancel() { }\n        });\n      }\n    },\n    // 获取允许的操作和页面自定义的布局\n    getFunctionPage(val) {\n      var data = {}\n      data.funcId = val || this.funcIdArray\n      data.pageType = 'LIST'\n      get(api.functionPage, data).then(res => {\n        if (res.data.code === 0) {\n          var buttons = res.data.data.buttons\n          buttons.forEach((item, index) => {\n            this.loading = false;\n            if (item.btnOptType === 'LIST') {\n              this.getOrderList()\n              this.showList = true\n            }\n            if (item.btnOptType === 'ADD') {\n              this.showAdd = true\n            }\n            if (item.btnOptType === 'DELETES') {\n              this.showDelete = true\n            }\n          })\n          this.buttons = buttons\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      })\n    },\n    // 选择框下来状态\n    currentPageChange(e, type) {\n      const boxHeigth = e.target.scrollHeight - 1\n      const box = {\n        scrollTop: e.target.scrollTop,\n      }\n      if (parseFloat(getComputedStyle(document.querySelector('.ant-select-dropdown-content')).height) + box.scrollTop > boxHeigth) {\n        switch (type) {\n          case 'customer':\n            getListCompanyCusts.call(this, this.customerPage)\n            break;\n          case 'companyGoods':\n            getListCompanyGoods.call(this, this.companyGoods)\n            break\n        }\n      }\n    }\n  }\n};\n</script>\n\n<style lang='less' scoped>\n@import \"~styles/variable.less\";\n\n.inputWidth {\n  .inputWidth();\n}\n\n.order {\n  .order-add {\n    .order-remove {\n      margin: 0 20px;\n    }\n    .order-derive {\n      color: #6bc67b;\n      margin-right: 5px;\n    }\n    .delete-btn {\n      margin: 0 20px;\n      cursor: pointer;\n      .delete-icon {\n        color: #f00;\n        margin-right: 3px;\n      }\n    }\n  }\n  .order-select {\n    margin: 20px 0 0;\n    .order-select-reset {\n      margin: 0 8px;\n    }\n  }\n}\n.status-color {\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  // text-align: center\n}\n.status-green {\n  background-color: #6bc67b;\n}\n.status-gray {\n  background-color: #d8d8d8;\n}\n.status-red {\n  background-color: #f5222d;\n}\n.status-yellow {\n  background-color: yellow;\n}\n</style>\n\n<style>\n.ant-form-item {\n  margin-bottom: 8px;\n}\n</style>\n"],"sourceRoot":"src/views/sale/orderList"}]}