{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/views/sale/dispatchOrder/child_lib/companyList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/views/sale/dispatchOrder/child_lib/companyList.vue","mtime":1564478521220},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport infiniteScroll from 'vue-infinite-scroll';\nimport api from '@/api/index';\nimport { get } from '@/api/axios';\nexport default {\n  props: ['factoryId'],\n  directives: {\n    infiniteScroll: infiniteScroll\n  },\n  data: function data() {\n    return {\n      companyNameListSize: 0,\n      dataCompany: [],\n      busy: false,\n      loadingCompony: false,\n      currentPage: 1,\n      pageSize: 50,\n      name: ''\n    };\n  },\n  methods: {\n    setFactoryId: function setFactoryId(id, name) {\n      this.$emit('selectCompany', {\n        id: id,\n        name: name\n      });\n    },\n    handleCompanyNameList: function handleCompanyNameList() {\n      var data = this.dataCompany;\n      this.loadingCompony = true;\n\n      if (data.length >= this.companyNameListSize && this.companyNameListSize !== 0) {\n        this.$message.warning('暂时没有更多数据');\n        this.busy = true;\n        this.loadingCompony = false;\n        return false;\n      } else {\n        this.getCompanyList();\n        this.loadingCompony = false;\n      }\n    },\n    getCompanyList: function getCompanyList() {\n      var _this = this;\n\n      var data = {};\n      data.currentPage = this.currentPage;\n      data.pageSize = this.pageSize;\n      data.type = 'FACTORY';\n      get(api.companyList, data).then(function (res) {\n        if (res.data.code === 0) {\n          _this.companyNameListSize = Number(res.data.data.total);\n\n          if (_this.dataCompany) {\n            _this.dataCompany = _this.dataCompany.concat(res.data.data.records);\n          } else {\n            _this.dataCompany = res.data.data.records;\n          }\n\n          _this.currentPage += 1;\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["companyList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,OAAA,cAAA,MAAA,qBAAA;AACA,OAAA,GAAA,MAAA,aAAA;AACA,SAAA,GAAA,QAAA,aAAA;AACA,eAAA;AACA,EAAA,KAAA,EAAA,CAAA,WAAA,CADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,cAAA,EAAA;AAAA,GAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,mBAAA,EAAA,CADA;AAEA,MAAA,WAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA,KAHA;AAIA,MAAA,cAAA,EAAA,KAJA;AAKA,MAAA,WAAA,EAAA,CALA;AAMA,MAAA,QAAA,EAAA,EANA;AAOA,MAAA,IAAA,EAAA;AAPA,KAAA;AASA,GAbA;AAcA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,EADA,EACA,IADA,EACA;AACA,WAAA,KAAA,CAAA,eAAA,EAAA;AAAA,QAAA,EAAA,EAAA,EAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA;AACA,KAHA;AAIA,IAAA,qBAJA,mCAIA;AACA,UAAA,IAAA,GAAA,KAAA,WAAA;AACA,WAAA,cAAA,GAAA,IAAA;;AACA,UAAA,IAAA,CAAA,MAAA,IAAA,KAAA,mBAAA,IAAA,KAAA,mBAAA,KAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,OAAA,CAAA,UAAA;AACA,aAAA,IAAA,GAAA,IAAA;AACA,aAAA,cAAA,GAAA,KAAA;AACA,eAAA,KAAA;AACA,OALA,MAKA;AACA,aAAA,cAAA;AACA,aAAA,cAAA,GAAA,KAAA;AACA;AACA,KAhBA;AAiBA,IAAA,cAjBA,4BAiBA;AAAA;;AACA,UAAA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,CAAA,WAAA,GAAA,KAAA,WAAA;AACA,MAAA,IAAA,CAAA,QAAA,GAAA,KAAA,QAAA;AACA,MAAA,IAAA,CAAA,IAAA,GAAA,SAAA;AACA,MAAA,GAAA,CAAA,GAAA,CAAA,WAAA,EAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,mBAAA,GAAA,MAAA,CAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,CAAA;;AACA,cAAA,KAAA,CAAA,WAAA,EAAA;AACA,YAAA,KAAA,CAAA,WAAA,GAAA,KAAA,CAAA,WAAA,CAAA,MAAA,CAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,OAAA,CAAA;AACA,WAFA,MAEA;AACA,YAAA,KAAA,CAAA,WAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,OAAA;AACA;;AACA,UAAA,KAAA,CAAA,WAAA,IAAA,CAAA;AACA;AACA,OAVA;AAWA;AAjCA;AAdA,CAAA","sourcesContent":["<template>\n  <div>\n    <div\n      class=\"company-name-list\"\n      v-infinite-scroll=\"handleCompanyNameList\"\n      :infinite-scroll-disabled=\"busy\"\n      :infinite-scroll-distance=\"10\"\n    >\n      <a-list :dataSource=\"dataCompany\">\n        <a-list-item slot=\"renderItem\" slot-scope=\"item\">\n          <p\n            class=\"company-list-item\"\n            :class=\"{active:factoryId===item.id}\"\n            @click=\"setFactoryId(item.id,item.companyName)\"\n          >{{item.companyName}}</p>\n        </a-list-item>\n        <div v-if=\"loadingCompony\" class=\"demo-loading-container\">\n          <a-spin />\n        </div>\n      </a-list>\n    </div>\n  </div>\n</template>\n\n<script>\nimport infiniteScroll from 'vue-infinite-scroll'\nimport api from '@/api/index'\nimport { get } from '@/api/axios'\nexport default {\n  props: ['factoryId'],\n  directives: { infiniteScroll },\n  data() {\n    return {\n      companyNameListSize: 0,\n      dataCompany: [],\n      busy: false,\n      loadingCompony: false,\n      currentPage: 1,\n      pageSize: 50,\n      name: ''\n    }\n  },\n  methods: {\n    setFactoryId(id, name) {\n      this.$emit('selectCompany', { id, name })\n    },\n    handleCompanyNameList() {\n      const data = this.dataCompany\n      this.loadingCompony = true\n      if (data.length >= this.companyNameListSize && this.companyNameListSize !== 0) {\n        this.$message.warning('暂时没有更多数据')\n        this.busy = true\n        this.loadingCompony = false\n        return false\n      } else {\n        this.getCompanyList()\n        this.loadingCompony = false\n      }\n    },\n    getCompanyList() {\n      const data = {}\n      data.currentPage = this.currentPage\n      data.pageSize = this.pageSize\n      data.type = 'FACTORY'\n      get(api.companyList, data).then(res => {\n        if (res.data.code === 0) {\n          this.companyNameListSize = Number(res.data.data.total)\n          if (this.dataCompany) {\n            this.dataCompany = this.dataCompany.concat(res.data.data.records)\n          } else {\n            this.dataCompany = res.data.data.records\n          }\n          this.currentPage += 1\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.company-list-item {\n  margin: 10px;\n  cursor: pointer;\n  &.active {\n    color: #007aff;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/sale/dispatchOrder/child_lib"}]}