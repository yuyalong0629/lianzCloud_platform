{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/sale/orderList/basic_lib/EditableCell.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/sale/orderList/basic_lib/EditableCell.vue","mtime":1560327748418},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport _objectSpread from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { get } from '@/api/axios.js';\nimport api from '@/api/index.js';\nimport { mixinCurrentPage } from '@/views/sale/mixin/minxinSale';\nimport moment from 'moment';\nexport default {\n  mixins: [mixinCurrentPage],\n  props: {\n    custId: {\n      type: String\n    }\n  },\n  data: function data() {\n    return {\n      form: this.$form.createForm(this),\n      customerGoods: 1,\n      // 列表商家对客户的定制商品基本信息\n      labelCol: {\n        span: 6,\n        offset: 0\n      },\n      wrapperCol: {\n        span: 16\n      },\n      sku: {\n        skuId: '',\n        code: '',\n        odSkuName: '',\n        odSpec: '',\n        taxRate: 0,\n        odSkuCustPrice: 0,\n        odAmount: '',\n        odSkuCustCode: '' // 客户产品编码\n\n      },\n      listCustomerGoods: [] // 商品信息\n\n    };\n  },\n  created: function created() {\n    this.getListCustomerGoods(this.customerGoods);\n  },\n  methods: {\n    moment: moment,\n    inputChange: function inputChange(val) {\n      var _this = this;\n\n      var listCustomerGoods = this.listCustomerGoods[val];\n      this.form.resetFields('sku.odNumber');\n      this.sku.odAmount = '';\n      get(api.getSkuPrice + \"/\".concat(listCustomerGoods.id, \"/\").concat(this.custId)).then(function (res) {\n        if (res.data.code === 0) {\n          var data = res.data.data;\n          _this.sku.odSkuName = data.name;\n          _this.sku.odSpec = data.spec;\n          _this.sku.taxRate = data.taxRate;\n          _this.sku.odSkuCustPrice = data.price;\n          _this.sku.code = data.code;\n          _this.sku.odSkuCustCode = data.skuCustInfo ? data.skuCustInfo.custSkuCode : '';\n          _this.sku.skuId = data.id;\n        }\n      });\n    },\n    inputnumChange: function inputnumChange(val) {\n      var price = this.sku.odSkuCustPrice;\n      var total = 0;\n      total = (price * val).toFixed(3);\n      this.sku.odAmount = total;\n    },\n    handleEditableInfo: function handleEditableInfo(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      this.form.validateFields(function (err, values) {\n        if (!err) {\n          var val = {\n            'odRequireDueDate': values.sku.odRequireDueDate ? values.sku.odRequireDueDate.format('YYYY-MM-DD') : '',\n            'odPromiseDueDate': values.sku.odPromiseDueDate ? values.sku.odPromiseDueDate.format('YYYY-MM-DD') : '',\n            'odAmount': values.sku.odAmount,\n            'odNumber': values.sku.odNumber,\n            'odPurchaseOrderno': values.sku.odPurchaseOrderno\n          };\n          var data = {};\n\n          var backData = _objectSpread({}, val, _this2.sku);\n\n          data.isAddContactInfo = false;\n          data.sku = backData;\n\n          _this2.$emit('showAddContactInfo', data);\n\n          for (var i in _this2.sku) {\n            _this2.sku[i] = '';\n          }\n\n          _this2.form.resetFields();\n        }\n      });\n    },\n    handleReset: function handleReset() {\n      var data = {};\n      data.isAddContactInfo = false;\n\n      for (var i in this.sku) {\n        this.sku[i] = '';\n      }\n\n      this.form.resetFields();\n      this.$emit('showAddContactInfo', data);\n    },\n    currentPageChange: function currentPageChange(e) {\n      var resut = this.getCurrentPageChange(e);\n\n      if (resut) {\n        this.getListCustomerGoods(this.customerGoods);\n      }\n    },\n    // 列表商家商品基本信息\n    getListCustomerGoods: function getListCustomerGoods() {\n      var _this3 = this;\n\n      var currentPage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var pageSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;\n      get(api.getListCompanyGoods, {\n        currentPage: currentPage,\n        pageSize: pageSize\n      }).then(function (res) {\n        var listCustomerGoods = res.data.data.records;\n        _this3.listCustomerGoods = _this3.listCustomerGoods.concat(listCustomerGoods);\n\n        if (_this3.customerGoods < Number(res.data.data.pages)) {\n          _this3.customerGoods += 1;\n        }\n      });\n    },\n    odNumberRegx: function odNumberRegx(rule, value, callback) {\n      if (value && value <= 0) {\n        callback('购买数量不能为0');\n      } else {\n        callback();\n      }\n    }\n  }\n};",{"version":3,"sources":["EditableCell.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <a-form :form=\"form\">\n    <a-form-item label=\"产品编码\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\n      <a-select\n        style=\"width:280px\"\n        showSearch\n        v-decorator=\"['sku.code',{rules: [{ required: true, message: '请选择产品编码' }],initialValue:sku.code}]\"\n        @change=\"(val)=>{inputChange(val)}\"\n        @popupScroll=\"e=>currentPageChange(e)\"\n        :getPopupContainer=\"triggerNode => triggerNode.parentNode\"\n      >\n        <a-select-option v-for=\"(item,index) in listCustomerGoods\" :key=\"index\">{{item.code}}</a-select-option>\n      </a-select>\n    </a-form-item>\n    <a-form-item label=\"订单数量\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\n      <a-input\n        style=\"width:280px\"\n        placeholder=\"请输入订单数量\"\n        v-decorator=\"['sku.odNumber',{rules: [{ required: true, message: '请输入订单数量' }, {validator: odNumberRegx}],initialValue:sku.odNumber}]\"\n        @change=\"(e)=>{inputnumChange(e.target.value)}\"\n      />\n    </a-form-item>\n    <a-form-item label=\"订单总计\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\n      <a-input\n        style=\"width:280px\"\n        v-decorator=\"['sku.odAmount',{initialValue:sku.odAmount}]\"\n        placeholder=\"请输入订单总计\"\n      />\n    </a-form-item>\n    <a-form-item label=\"采购单号：\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\n      <a-input style=\"width:280px\" v-decorator=\"['sku.odPurchaseOrderno']\" placeholder=\"请输入采购单号\"/>\n    </a-form-item>\n    <a-form-item label=\"要求交期\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\n      <a-date-picker\n        style=\"width:280px\"\n        placeholder=\"请选择要求交期\"\n        v-decorator=\"['sku.odRequireDueDate']\"\n      />\n    </a-form-item>\n    <a-form-item label=\"承诺交期\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\n      <a-date-picker\n        style=\"width:280px\"\n        placeholder=\"请选择承诺交期\"\n        v-decorator=\"['sku.odPromiseDueDate']\"\n      />\n    </a-form-item>\n    <a-form-item :style=\"{ textAlign: 'center' }\">\n      <a-button :style=\"{ marginRight: '8px' }\" @click=\"handleReset\">取消</a-button>\n      <a-button type=\"primary\" @click=\"handleEditableInfo\">确认添加</a-button>\n    </a-form-item>\n  </a-form>\n</template>\n<script>\nimport { get } from '@/api/axios.js'\nimport api from '@/api/index.js'\nimport { mixinCurrentPage } from '@/views/sale/mixin/minxinSale'\nimport moment from 'moment'\nexport default {\n  mixins: [mixinCurrentPage],\n  props: {\n    custId: {\n      type: String\n    }\n  },\n  data() {\n    return {\n      form: this.$form.createForm(this),\n      customerGoods: 1, // 列表商家对客户的定制商品基本信息\n      labelCol: { span: 6, offset: 0 },\n      wrapperCol: { span: 16 },\n      sku: {\n        skuId: '',\n        code: '',\n        odSkuName: '',\n        odSpec: '',\n        taxRate: 0,\n        odSkuCustPrice: 0,\n        odAmount: '',\n        odSkuCustCode: '' // 客户产品编码\n      },\n      listCustomerGoods: [] // 商品信息\n    }\n  },\n  created() {\n    this.getListCustomerGoods(this.customerGoods)\n  },\n  methods: {\n    moment,\n    inputChange(val) {\n      const listCustomerGoods = this.listCustomerGoods[val]\n      this.form.resetFields('sku.odNumber')\n      this.sku.odAmount = ''\n      get(api.getSkuPrice + `/${listCustomerGoods.id}/${this.custId}`).then(res => {\n        if (res.data.code === 0) {\n          const data = res.data.data\n          this.sku.odSkuName = data.name\n          this.sku.odSpec = data.spec\n          this.sku.taxRate = data.taxRate\n          this.sku.odSkuCustPrice = data.price\n          this.sku.code = data.code\n          this.sku.odSkuCustCode = data.skuCustInfo ? data.skuCustInfo.custSkuCode : ''\n          this.sku.skuId = data.id\n        }\n      })\n    },\n    inputnumChange(val) {\n      const price = this.sku.odSkuCustPrice\n      let total = 0\n      total = (price * val).toFixed(3)\n      this.sku.odAmount = total\n    },\n    handleEditableInfo(e) {\n      e.preventDefault()\n      this.form.validateFields((err, values) => {\n        if (!err) {\n          const val = {\n            'odRequireDueDate': values.sku.odRequireDueDate ? values.sku.odRequireDueDate.format('YYYY-MM-DD') : '',\n            'odPromiseDueDate': values.sku.odPromiseDueDate ? values.sku.odPromiseDueDate.format('YYYY-MM-DD') : '',\n            'odAmount': values.sku.odAmount,\n            'odNumber': values.sku.odNumber,\n            'odPurchaseOrderno': values.sku.odPurchaseOrderno\n          }\n          const data = {}\n          const backData = { ...val, ...this.sku }\n          data.isAddContactInfo = false\n          data.sku = backData\n          this.$emit('showAddContactInfo', data)\n          for (const i in this.sku) {\n            this.sku[i] = ''\n          }\n          this.form.resetFields()\n        }\n      })\n    },\n    handleReset() {\n      var data = {}\n      data.isAddContactInfo = false\n      for (const i in this.sku) {\n        this.sku[i] = ''\n      }\n      this.form.resetFields()\n      this.$emit('showAddContactInfo', data)\n    },\n    currentPageChange(e) {\n      const resut = this.getCurrentPageChange(e)\n      if (resut) {\n        this.getListCustomerGoods(this.customerGoods)\n      }\n    },\n    // 列表商家商品基本信息\n    getListCustomerGoods(currentPage = 1, pageSize = 20) {\n      get(api.getListCompanyGoods, { currentPage, pageSize }).then(res => {\n        var listCustomerGoods = res.data.data.records\n        this.listCustomerGoods = this.listCustomerGoods.concat(listCustomerGoods)\n        if (this.customerGoods < Number(res.data.data.pages)) {\n          this.customerGoods += 1\n        }\n      })\n    },\n    odNumberRegx(rule, value, callback) {\n      if (value && value <= 0) {\n        callback('购买数量不能为0')\n      } else {\n        callback()\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/sale/orderList/basic_lib"}]}