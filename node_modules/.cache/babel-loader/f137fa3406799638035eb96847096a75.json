{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/platformtmp/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/platformtmp/node_modules/eslint-loader/index.js??ref--13-0!/Users/yuyalong/myProjects/lianzhiyun/projects/platformtmp/src/views/product/goods/goods.js","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/platformtmp/src/views/product/goods/goods.js","mtime":1556420575744},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/platformtmp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/platformtmp/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/platformtmp/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/yuyalong/myProjects/lianzhiyun/projects/platformtmp/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.function.name\";\nimport _Array$from from \"/Users/yuyalong/myProjects/lianzhiyun/projects/platformtmp/node_modules/@babel/runtime-corejs2/core-js/array/from\";\nimport _JSON$stringify from \"/Users/yuyalong/myProjects/lianzhiyun/projects/platformtmp/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.number.constructor\";\nimport { get, deleted, postJson, uploadPost } from '@/api/axios.js';\nimport api from '@/api/index.js';\n/**\n * @description: 初始化table数据\n * @param { currentPage } 当前页\n * @param { pageSize }  每页总数\n * @return: showCustomersPage\n */\n\nexport function showCustomersPage() {\n  var _this = this;\n\n  var currentPage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n  var pageSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n  this.loading = true;\n  get(api.showCustomersPage, {\n    currentPage: currentPage,\n    pageSize: pageSize\n  }).then(function (res) {\n    if (res.data.code === 0) {\n      _this.loading = false;\n      var recordsList = res.data.data; // 设置总页数\n\n      _this.pagination.total = res.data.data === null ? 0 : Number(recordsList.total); // 每次push先清空数组\n\n      _this.tabData = [];\n      recordsList.records.forEach(function (item) {\n        _this.tabData.push({\n          key: item.id,\n          clientCode: item.custCode,\n          clientShortName: item.custShortName,\n          clientAbbreviation: item.mallUserName,\n          clientName: item.mallUserName,\n          clientPhone: item.phone,\n          clientIndustryValue: item.custIndustryValue,\n          clientLevel: item.custLevel,\n          clientStatus: item.custStatus\n        });\n      });\n      return false;\n    }\n  }).catch(function (err) {\n    console.log(err);\n\n    _this.$message.error(\"\\u8BF7\\u6C42\\u8D85\\u65F6\");\n\n    _this.loading = false;\n  });\n}\n/**\n * @description: 客户管理Table列表删除操作\n * @param {params} 客户ID\n * @return: removeCustomer\n */\n\nexport function removeCustomer() {\n  var _this2 = this;\n\n  var params = this.deleteCustomer.slice(0, this.deleteCustomer.length - 1);\n  deleted(api.removeCustomer + \"?\".concat(params)).then(function (res) {\n    if (res.data.code === 0) {\n      _this2.loading = false;\n\n      _this2.$message.success('删除成功');\n\n      return false;\n    }\n  }).catch(function (err) {\n    console.log(err);\n\n    _this2.$message.error('请求错误');\n\n    _this2.loading = false;\n  });\n}\n/**\n * @description: 获取商品类目树形列表\n * @param {type} default\n * @return: getGoodsTree\n */\n\nexport function getGoodsTree() {\n  var _this3 = this;\n\n  return get(api.goodsTree + '1/999').then(function (res) {\n    var mapObj = {\n      name: 'title',\n      id: 'key',\n      childrens: 'children'\n    };\n    console.log(res.data.data.records); // 全局替换字段名\n\n    var conversion = JSON.parse(_JSON$stringify(res.data.data.records).replace(/name|id|childrens/gi, function (matched) {\n      return mapObj[matched];\n    }));\n    _this3.treeData = _Array$from(conversion);\n    console.log(_this3.treeData);\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n/**\n * @description: 保存\n * @param {type}\n * @return: addGoodsSub\n */\n\nexport function addGoodsSub(params) {\n  return postJson(api.addGoods, params).then(function (res) {\n    console.log(res);\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n/**\n * @description: 后台搜索商家商品\n * @param {Object} params 客户ID\n * @return: searchGoods\n */\n\nexport function searchGoods(params) {\n  var _this4 = this;\n\n  return postJson(api.searchGoods, params).then(function (res) {\n    if (res.data.code === 0) {\n      var _this4$columns;\n\n      // console.log(res.data.data)\n      _this4.tabData = [];\n      _this4.addCloumn = []; // 初始化\n\n      _this4.columns = [{\n        title: '产品编码',\n        dataIndex: 'code',\n        key: 'code',\n        width: 106,\n        fixed: 'left'\n      }, {\n        title: '上下架',\n        dataIndex: 'saleStatus',\n        key: 'saleStatus',\n        width: 106,\n        fixed: 'left'\n      }, {\n        title: '产品名称',\n        dataIndex: 'name',\n        key: 'name',\n        scopedSlots: {\n          customRender: 'name'\n        },\n        width: 106,\n        fixed: 'left'\n      }, {\n        title: '规格',\n        dataIndex: 'spec',\n        key: 'spec',\n        width: 106,\n        fixed: 'left'\n      }, {\n        title: '单位',\n        dataIndex: 'nuit',\n        key: 'nuit',\n        width: 106,\n        fixed: 'left'\n      }, {\n        title: '客户编码',\n        dataIndex: 'customCode',\n        key: 'customCode',\n        width: 106\n      }, {\n        title: '价格',\n        dataIndex: 'price',\n        key: 'price',\n        width: 106\n      }, {\n        title: '时间',\n        key: 'creatTime',\n        dataIndex: 'creatTime',\n        width: 106,\n        fixed: 'right'\n      }];\n      res.data.data.forEach(function (item, index) {\n        // data\n        _this4.tabData.push({\n          key: item.sku.id,\n          code: item.sku.code,\n          saleStatus: item.sku.saleStatus === 'SALE' ? '上架' : '下架',\n          name: item.sku.name,\n          spec: item.sku.spec,\n          nuit: item.sku.unit,\n          customCode: item.sku.customCode,\n          price: item.sku.price,\n          creatTime: '2019/04/22'\n        });\n\n        item.attrs.forEach(function (cItem) {\n          // console.log(cItem.listProp)\n          if (cItem.listProp) {\n            _this4.tabData[index][cItem.attrType] = cItem.realVal; // TabHeader\n\n            _this4.addCloumn.push({\n              title: cItem.name,\n              dataIndex: cItem.attrType,\n              key: cItem.id\n            }); // console.log(this.addCloumn)\n\n          }\n        });\n      });\n\n      (_this4$columns = _this4.columns).splice.apply(_this4$columns, [7, 0].concat(_toConsumableArray(_this4.addCloumn)));\n\n      _this4.scrollLen.x = _this4.addCloumn.length * 160; // console.log(this.scrollLen)\n      // console.log(this.columns)\n      // console.log(this.tabData)\n    }\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n/**\n * @description: 获取商品分类所有属性和可选项\n * @param {Object}  params [属性ID]\n * @return: addGoods\n */\n\nexport function addGoods(params) {\n  var _this5 = this;\n\n  return get(api.catAllAttrAndOptions + '?catId=' + params).then(function (res) {\n    if (res.data.code === 0) {\n      console.log(res.data.data);\n      _this5.getCatAllAttrAndOptions = res.data.data;\n    }\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n/**\n * @description: 根据客户ID查看详情\n * @param {custID} 客户ID\n * @return: getCustomerAndMallUser\n */\n\nexport function getCustomerAndMallUser(custID) {\n  var _this6 = this;\n\n  get(api.getCustomerAndMallUser, {\n    custId: custID\n  }).then(function (res) {\n    if (res.data.code === 0) {\n      console.log(res.data);\n\n      _this6.$store.dispatch('custDetailInfo', res.data.data);\n    }\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n/**\n * @description: 图片上传\n * @param {String}  params [图片地址]\n * @return: imgUpload\n */\n\nexport function imgUpload(params) {\n  return uploadPost(api.uploadFile, params).then(function (res) {\n    console.log(res);\n  }).catch(function (err) {\n    console.log(err);\n  });\n}",{"version":3,"sources":["/Users/yuyalong/myProjects/lianzhiyun/projects/platformtmp/src/views/product/goods/goods.js"],"names":["get","deleted","postJson","uploadPost","api","showCustomersPage","currentPage","pageSize","loading","then","res","data","code","recordsList","pagination","total","Number","tabData","records","forEach","item","push","key","id","clientCode","custCode","clientShortName","custShortName","clientAbbreviation","mallUserName","clientName","clientPhone","phone","clientIndustryValue","custIndustryValue","clientLevel","custLevel","clientStatus","custStatus","catch","err","console","log","$message","error","removeCustomer","params","deleteCustomer","slice","length","success","getGoodsTree","goodsTree","mapObj","name","childrens","conversion","JSON","parse","replace","matched","treeData","addGoodsSub","addGoods","searchGoods","addCloumn","columns","title","dataIndex","width","fixed","scopedSlots","customRender","index","sku","saleStatus","spec","nuit","unit","customCode","price","creatTime","attrs","cItem","listProp","attrType","realVal","splice","scrollLen","x","catAllAttrAndOptions","getCatAllAttrAndOptions","getCustomerAndMallUser","custID","custId","$store","dispatch","imgUpload","uploadFile"],"mappings":"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","sourcesContent":["import { get, deleted, postJson, uploadPost } from '@/api/axios.js'\nimport api from '@/api/index.js'\n\n/**\n * @description: 初始化table数据\n * @param { currentPage } 当前页\n * @param { pageSize }  每页总数\n * @return: showCustomersPage\n */\n\nexport function showCustomersPage(currentPage = 1, pageSize = 5) {\n  this.loading = true\n  get(api.showCustomersPage, { currentPage, pageSize })\n    .then(res => {\n      if (res.data.code === 0) {\n        this.loading = false\n        const recordsList = res.data.data\n        // 设置总页数\n        this.pagination.total = res.data.data === null ? 0 : Number(recordsList.total)\n        // 每次push先清空数组\n        this.tabData = []\n        recordsList.records.forEach((item) => {\n          this.tabData.push({\n            key: item.id,\n            clientCode: item.custCode,\n            clientShortName: item.custShortName,\n            clientAbbreviation: item.mallUserName,\n            clientName: item.mallUserName,\n            clientPhone: item.phone,\n            clientIndustryValue: item.custIndustryValue,\n            clientLevel: item.custLevel,\n            clientStatus: item.custStatus\n          })\n        })\n        return false\n      }\n    })\n    .catch(err => {\n      console.log(err)\n      this.$message.error(`请求超时`)\n      this.loading = false\n    })\n}\n\n/**\n * @description: 客户管理Table列表删除操作\n * @param {params} 客户ID\n * @return: removeCustomer\n */\n\nexport function removeCustomer() {\n  const params = this.deleteCustomer.slice(0, (this.deleteCustomer.length) - 1)\n  deleted(api.removeCustomer + `?${params}`).then((res) => {\n    if (res.data.code === 0) {\n      this.loading = false\n      this.$message.success('删除成功')\n      return false\n    }\n  }).catch((err) => {\n    console.log(err)\n    this.$message.error('请求错误')\n    this.loading = false\n  })\n}\n\n/**\n * @description: 获取商品类目树形列表\n * @param {type} default\n * @return: getGoodsTree\n */\nexport function getGoodsTree() {\n  return get(api.goodsTree + '1/999').then(res => {\n    const mapObj = {\n      name: 'title',\n      id: 'key',\n      childrens: 'children'\n    }\n    console.log(res.data.data.records)\n    // 全局替换字段名\n    const conversion = JSON.parse(JSON.stringify(res.data.data.records).replace(/name|id|childrens/gi, function (matched) {\n      return mapObj[matched]\n    }))\n    this.treeData = Array.from(conversion)\n    console.log(this.treeData)\n  }).catch(err => {\n    console.log(err)\n  })\n}\n/**\n * @description: 保存\n * @param {type}\n * @return: addGoodsSub\n */\nexport function addGoodsSub(params) {\n  return postJson(api.addGoods, params).then((res) => {\n    console.log(res)\n  }).catch(err => {\n    console.log(err)\n  })\n}\n\n/**\n * @description: 后台搜索商家商品\n * @param {Object} params 客户ID\n * @return: searchGoods\n */\nexport function searchGoods(params) {\n  return postJson(api.searchGoods, params).then(res => {\n    if (res.data.code === 0) {\n      // console.log(res.data.data)\n      this.tabData = []\n      this.addCloumn = []\n      // 初始化\n      this.columns = [\n        {\n          title: '产品编码',\n          dataIndex: 'code',\n          key: 'code',\n          width: 106,\n          fixed: 'left'\n        },\n        {\n          title: '上下架',\n          dataIndex: 'saleStatus',\n          key: 'saleStatus',\n          width: 106,\n          fixed: 'left'\n        },\n        {\n          title: '产品名称',\n          dataIndex: 'name',\n          key: 'name',\n          scopedSlots: { customRender: 'name' },\n          width: 106,\n          fixed: 'left'\n        },\n        {\n          title: '规格',\n          dataIndex: 'spec',\n          key: 'spec',\n          width: 106,\n          fixed: 'left'\n        },\n        {\n          title: '单位',\n          dataIndex: 'nuit',\n          key: 'nuit',\n          width: 106,\n          fixed: 'left'\n        },\n        {\n          title: '客户编码',\n          dataIndex: 'customCode',\n          key: 'customCode',\n          width: 106\n        },\n        {\n          title: '价格',\n          dataIndex: 'price',\n          key: 'price',\n          width: 106\n        },\n        {\n          title: '时间',\n          key: 'creatTime',\n          dataIndex: 'creatTime',\n          width: 106,\n          fixed: 'right'\n        }\n      ]\n      res.data.data.forEach((item, index) => {\n        // data\n        this.tabData.push({\n          key: item.sku.id,\n          code: item.sku.code,\n          saleStatus: item.sku.saleStatus === 'SALE' ? '上架' : '下架',\n          name: item.sku.name,\n          spec: item.sku.spec,\n          nuit: item.sku.unit,\n          customCode: item.sku.customCode,\n          price: item.sku.price,\n          creatTime: '2019/04/22'\n        })\n        item.attrs.forEach(cItem => {\n          // console.log(cItem.listProp)\n          if (cItem.listProp) {\n            this.tabData[index][cItem.attrType] = cItem.realVal\n            // TabHeader\n            this.addCloumn.push({\n              title: cItem.name,\n              dataIndex: cItem.attrType,\n              key: cItem.id\n            })\n            // console.log(this.addCloumn)\n          }\n        })\n      })\n      this.columns.splice(7, 0, ...this.addCloumn)\n      this.scrollLen.x = this.addCloumn.length * 160\n      // console.log(this.scrollLen)\n      // console.log(this.columns)\n      // console.log(this.tabData)\n    }\n  }).catch(err => {\n    console.log(err)\n  })\n}\n\n/**\n * @description: 获取商品分类所有属性和可选项\n * @param {Object}  params [属性ID]\n * @return: addGoods\n */\nexport function addGoods(params) {\n  return get(api.catAllAttrAndOptions + '?catId=' + params).then(res => {\n    if (res.data.code === 0) {\n      console.log(res.data.data)\n      this.getCatAllAttrAndOptions = res.data.data\n    }\n  }).catch(err => {\n    console.log(err)\n  })\n}\n\n/**\n * @description: 根据客户ID查看详情\n * @param {custID} 客户ID\n * @return: getCustomerAndMallUser\n */\nexport function getCustomerAndMallUser(custID) {\n  get(api.getCustomerAndMallUser, { custId: custID }).then((res) => {\n    if (res.data.code === 0) {\n      console.log(res.data)\n      this.$store.dispatch('custDetailInfo', res.data.data)\n    }\n  }).catch((err) => {\n    console.log(err)\n  })\n}\n\n/**\n * @description: 图片上传\n * @param {String}  params [图片地址]\n * @return: imgUpload\n */\nexport function imgUpload(params) {\n  return uploadPost(api.uploadFile, params).then(res => {\n    console.log(res)\n  }).catch(err => {\n    console.log(err)\n  })\n}\n"]}]}