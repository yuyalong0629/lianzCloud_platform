{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/views/product/bom/bom_list/child_info/tab_goodsInfo/ClassAttrForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/views/product/bom/bom_list/child_info/tab_goodsInfo/ClassAttrForm.vue","mtime":1560757736819},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mixinBasic, mixinIsEdit } from '@/components/tools/mixin/mixin';\nimport SelectComponent from './extends/SelectComponent';\nimport InputComponent from './extends/InputComponent';\nimport { getClassAttr } from 'goods/basic_lib/index';\nimport { setTimeout } from 'timers';\nexport default {\n  name: 'ClassAttr',\n  mixins: [mixinBasic, mixinIsEdit],\n  data: function data() {\n    return {\n      classAttrInfoForm: this.$form.createForm(this),\n      componentData: [],\n      clssData: []\n    };\n  },\n  methods: {\n    // 接受子组件 $emit\n    categoryData: function categoryData(val) {\n      console.log(val);\n      this.clssData.push(val); // 去重复\n\n      var hash = {};\n      var newData = this.clssData.reduceRight(function (item, next) {\n        hash[next.catAttrId] ? '' : hash[next.catAttrId] = true && item.push(next);\n        return item;\n      }, []);\n      console.log(newData);\n      this.$emit('classData', newData);\n    }\n  },\n  props: {\n    classAttrVal: {\n      type: Array,\n      default: []\n    },\n    classAttrInfoData: {\n      type: Array,\n      default: []\n    },\n    classCatId: {\n      type: String,\n      default: ''\n    },\n    childDisabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  watch: {\n    classAttrVal: {\n      handler: function handler(val) {\n        var _this = this;\n\n        if (val.length) {\n          console.log(val);\n          this.componentData = [];\n          val.forEach(function (item) {\n            if (item.inputType === 'INPUT') {\n              _this.componentData.push({\n                name: item.name,\n                id: item.id,\n                required: item.required,\n                attrType: item.attrType,\n                valType: item.valType,\n                component: 'inputComponent'\n              });\n            }\n\n            if (item.inputType === 'RADIO' || item.inputType === 'CHECKBOX') {\n              _this.componentData.push({\n                name: item.name,\n                id: item.id,\n                required: item.required,\n                attrType: item.attrType,\n                options: item.optionList,\n                component: 'selectComponent'\n              });\n            }\n          });\n          console.log(this.componentData);\n        }\n      },\n      deep: true,\n      immediate: true\n    },\n    classAttrInfoData: {\n      handler: function handler(val) {\n        var _this2 = this;\n\n        if (val.length) {\n          // console.log(val)\n          getClassAttr(this.classCatId).then(function (res) {\n            if (res.data.code === 0) {\n              _this2.componentData = [];\n              res.data.data.forEach(function (item, index) {\n                var newData = val.filter(function (cItem, index) {\n                  return item.id === cItem.catAttrId;\n                });\n\n                if (item.inputType === 'INPUT') {\n                  _this2.componentData[index] = {\n                    name: item.name,\n                    id: item.id,\n                    required: item.required,\n                    attrType: item.attrType,\n                    valType: item.valType,\n                    component: 'inputComponent',\n                    val: newData[0].val,\n                    catAttrId: newData[0].catAttrId\n                  };\n                }\n\n                if (item.inputType === 'RADIO' || item.inputType === 'CHECKBOX') {\n                  _this2.componentData[index] = {\n                    name: item.name,\n                    id: item.id,\n                    required: item.required,\n                    attrType: item.attrType,\n                    options: item.optionList,\n                    component: 'selectComponent',\n                    val: newData[0].val,\n                    catAttrId: newData[0].catAttrId\n                  };\n                }\n              });\n            }\n          }); // console.log(this.componentData)\n        }\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  components: {\n    SelectComponent: SelectComponent,\n    InputComponent: InputComponent\n  }\n};",{"version":3,"sources":["ClassAttrForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <a-form :form=\"classAttrInfoForm\" layout=\"horizontal\" hideRequiredMark>\n    <a-row>\n      <component\n        v-if=\"componentData.length\"\n        :is=\"item.component\"\n        v-for=\"(item, index) in componentData\"\n        :key=\"item.id\"\n        :data=\"{ data: item, index: index }\"\n        @categoryData=\"categoryData\"\n        :childDisabled=\"childDisabled\"\n      ></component>\n    </a-row>\n  </a-form>\n</template>\n<script>\nimport { mixinBasic, mixinIsEdit } from '@/components/tools/mixin/mixin'\nimport SelectComponent from './extends/SelectComponent'\nimport InputComponent from './extends/InputComponent'\nimport { getClassAttr } from 'goods/basic_lib/index'\nimport { setTimeout } from 'timers'\n\nexport default {\n  name: 'ClassAttr',\n  mixins: [mixinBasic, mixinIsEdit],\n  data() {\n    return {\n      classAttrInfoForm: this.$form.createForm(this),\n      componentData: [],\n      clssData: []\n    }\n  },\n  methods: {\n    // 接受子组件 $emit\n    categoryData(val) {\n      console.log(val)\n      this.clssData.push(val)\n      // 去重复\n      const hash = {}\n      const newData = this.clssData.reduceRight((item, next) => {\n        hash[next.catAttrId]\n          ? ''\n          : (hash[next.catAttrId] = true && item.push(next))\n        return item\n      }, [])\n      console.log(newData)\n      this.$emit('classData', newData)\n    }\n  },\n  props: {\n    classAttrVal: {\n      type: Array,\n      default: []\n    },\n    classAttrInfoData: {\n      type: Array,\n      default: []\n    },\n    classCatId: {\n      type: String,\n      default: ''\n    },\n    childDisabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  watch: {\n    classAttrVal: {\n      handler(val) {\n        if (val.length) {\n          console.log(val)\n          this.componentData = []\n          val.forEach(item => {\n            if (item.inputType === 'INPUT') {\n              this.componentData.push({\n                name: item.name,\n                id: item.id,\n                required: item.required,\n                attrType: item.attrType,\n                valType: item.valType,\n                component: 'inputComponent'\n              })\n            }\n            if (item.inputType === 'RADIO' || item.inputType === 'CHECKBOX') {\n              this.componentData.push({\n                name: item.name,\n                id: item.id,\n                required: item.required,\n                attrType: item.attrType,\n                options: item.optionList,\n                component: 'selectComponent'\n              })\n            }\n          })\n          console.log(this.componentData)\n        }\n      },\n      deep: true,\n      immediate: true\n    },\n    classAttrInfoData: {\n      handler(val) {\n        if (val.length) {\n          // console.log(val)\n          getClassAttr(this.classCatId).then(res => {\n            if (res.data.code === 0) {\n              this.componentData = []\n              res.data.data.forEach((item, index) => {\n                const newData = val.filter((cItem, index) => {\n                  return item.id === cItem.catAttrId\n                })\n                if (item.inputType === 'INPUT') {\n                  this.componentData[index] = {\n                    name: item.name,\n                    id: item.id,\n                    required: item.required,\n                    attrType: item.attrType,\n                    valType: item.valType,\n                    component: 'inputComponent',\n                    val: newData[0].val,\n                    catAttrId: newData[0].catAttrId\n                  }\n                }\n                if (\n                  item.inputType === 'RADIO' ||\n                  item.inputType === 'CHECKBOX'\n                ) {\n                  this.componentData[index] = {\n                    name: item.name,\n                    id: item.id,\n                    required: item.required,\n                    attrType: item.attrType,\n                    options: item.optionList,\n                    component: 'selectComponent',\n                    val: newData[0].val,\n                    catAttrId: newData[0].catAttrId\n                  }\n                }\n              })\n            }\n          })\n          // console.log(this.componentData)\n        }\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  components: {\n    SelectComponent,\n    InputComponent\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n</style>\n"],"sourceRoot":"src/views/product/pdm/goods/child_info/tab_goodsInfo"}]}