{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/api/axios.js","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/api/axios.js","mtime":1565252860531},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _JSON$stringify from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport _Promise from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport axios from 'axios';\nimport qs from 'qs';\nimport notification from 'ant-design-vue/es/notification';\nimport router from '@/router/router';\naxios.defaults.timeout = 30000; // 请求拦截器\n\naxios.interceptors.request.use(function (config) {\n  var token = localStorage.getItem('ACCESS_TOKEN');\n  var companyId = localStorage.getItem('companyId');\n\n  if (token) {\n    config.headers['AUTH-TOKEN'] = token;\n  }\n\n  if (companyId) {\n    config.headers['companyId'] = companyId;\n  }\n\n  return config;\n}, function (error) {\n  return _Promise.error(error);\n}); // response 拦截器\n\naxios.interceptors.response.use(function (response) {\n  if (response.data.code === 101) {\n    localStorage.clear();\n    router.replace('/login');\n  }\n\n  if (response.data.code === 102) {\n    notification.error({\n      message: response.data.msg\n    });\n  }\n\n  return response;\n}, function (error) {\n  if (error.response) {\n    var data = error.response.data;\n    var token = localStorage.getItem('ACCESS_TOKEN');\n    console.log(data);\n\n    if (error.response.status === 403) {\n      notification.error({\n        message: '登录超时',\n        description: data.msg\n      });\n      router.replace('/exception/403');\n      return;\n    }\n\n    if (error.response.status === 404) {\n      notification.error({\n        message: '客户端错误',\n        description: data.msg\n      });\n      router.replace('/exception/404');\n      return;\n    }\n\n    if (error.response.status === 500) {\n      notification.error({\n        message: '服务器请求超时',\n        description: '请返回重新登录'\n      });\n\n      if (token) {\n        // localStorage.removeItem('ACCESS_TOKEN')\n        setTimeout(function () {\n          router.replace('/exception/500');\n        }, 500);\n      }\n\n      return;\n    }\n  }\n\n  return _Promise.reject(error);\n});\n/**\n * get方法，对应get请求\n * @param {String} url [请求的url地址]\n * @param {Object} params [请求时携带的参数]\n */\n\nexport function get(url, parameter) {\n  return axios({\n    url: url,\n    method: 'get',\n    params: parameter,\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  });\n}\n/**\n * post方法，对应post请求 form-data\n * @param {String} url [请求的url地址]\n * @param {Object} params [请求时携带的参数]\n */\n\nexport function post(url, parameter) {\n  return axios({\n    url: url,\n    method: 'post',\n    data: qs.stringify(parameter),\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  });\n}\n/**\n * delete方法，对应deleted请求\n * @param {String} url [请求的url地址]\n * @param {Object} params [请求时携带的参数]\n */\n\nexport function deleted(url, parameter) {\n  return axios({\n    url: url,\n    method: 'delete',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  });\n}\n/**\n * delete方法，对应deleted Json请求\n * @param {String} url [请求的url地址]\n * @param {Object} params [请求时携带的参数]\n */\n\nexport function deletedJson(url, parameter) {\n  return axios({\n    url: url,\n    method: 'delete',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=utf-8'\n    }\n  });\n}\n/**\n * post方法\n * @param {String} url [请求的url地址]\n * @param {Object} params [请求时携带的参数]\n */\n\nexport function postJson(url, parameter) {\n  return axios({\n    url: url,\n    method: 'post',\n    data: _JSON$stringify(parameter),\n    headers: {\n      'Content-Type': 'application/json;charset=utf-8'\n    }\n  });\n}\n/**\n * @description: put方法\n * @param {String} url [请求url地址]\n * @param {Object} parameter [请求时携带的参数]\n * @return: put\n */\n\nexport function put(url, parameter) {\n  return axios({\n    url: url,\n    method: 'put',\n    data: _JSON$stringify(parameter),\n    headers: {\n      'Content-Type': 'application/json;charset=utf-8 '\n    }\n  });\n}\n/**\n * @description: POST\n * @param {String} url [请求url地址]\n * @param {Object} parameter [请求时携带的参数]\n * @return: uploadPost\n */\n\nexport function uploadPost(url, parameter) {\n  return axios({\n    url: url,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  });\n}",{"version":3,"sources":["/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/api/axios.js"],"names":["axios","qs","notification","router","defaults","timeout","interceptors","request","use","config","token","localStorage","getItem","companyId","headers","error","response","data","code","clear","replace","message","msg","console","log","status","description","setTimeout","reject","get","url","parameter","method","params","post","stringify","deleted","deletedJson","postJson","put","uploadPost"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport qs from 'qs'\nimport notification from 'ant-design-vue/es/notification'\nimport router from '@/router/router'\n\naxios.defaults.timeout = 30000\n\n// 请求拦截器\naxios.interceptors.request.use(\n  config => {\n    const token = localStorage.getItem('ACCESS_TOKEN')\n    const companyId = localStorage.getItem('companyId')\n    if (token) {\n      config.headers['AUTH-TOKEN'] = token\n    }\n    if (companyId) {\n      config.headers['companyId'] = companyId\n    }\n    return config\n  },\n  error => {\n    return Promise.error(error)\n  })\n\n// response 拦截器\naxios.interceptors.response.use(\n  response => {\n    if (response.data.code === 101) {\n      localStorage.clear()\n      router.replace('/login')\n    }\n    if (response.data.code === 102) {\n      notification.error({\n        message: response.data.msg\n      })\n    }\n    return response\n  },\n  error => {\n    if (error.response) {\n      const data = error.response.data\n      const token = localStorage.getItem('ACCESS_TOKEN')\n      console.log(data)\n      if (error.response.status === 403) {\n        notification.error({\n          message: '登录超时',\n          description: data.msg\n        })\n        router.replace('/exception/403')\n        return\n      }\n      if (error.response.status === 404) {\n        notification.error({\n          message: '客户端错误',\n          description: data.msg\n        })\n        router.replace('/exception/404')\n        return\n      }\n      if (error.response.status === 500) {\n        notification.error({\n          message: '服务器请求超时',\n          description: '请返回重新登录'\n        })\n        if (token) {\n          // localStorage.removeItem('ACCESS_TOKEN')\n          setTimeout(() => {\n            router.replace('/exception/500')\n          }, 500)\n        }\n        return\n      }\n    }\n    return Promise.reject(error)\n  }\n)\n\n/**\n * get方法，对应get请求\n * @param {String} url [请求的url地址]\n * @param {Object} params [请求时携带的参数]\n */\nexport function get(url, parameter) {\n  return axios({\n    url: url,\n    method: 'get',\n    params: parameter,\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  })\n}\n\n/**\n * post方法，对应post请求 form-data\n * @param {String} url [请求的url地址]\n * @param {Object} params [请求时携带的参数]\n */\nexport function post(url, parameter) {\n  return axios({\n    url: url,\n    method: 'post',\n    data: qs.stringify(parameter),\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  })\n}\n\n/**\n * delete方法，对应deleted请求\n * @param {String} url [请求的url地址]\n * @param {Object} params [请求时携带的参数]\n */\nexport function deleted(url, parameter) {\n  return axios({\n    url: url,\n    method: 'delete',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  })\n}\n\n/**\n * delete方法，对应deleted Json请求\n * @param {String} url [请求的url地址]\n * @param {Object} params [请求时携带的参数]\n */\nexport function deletedJson(url, parameter) {\n  return axios({\n    url: url,\n    method: 'delete',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=utf-8'\n    }\n  })\n}\n\n/**\n * post方法\n * @param {String} url [请求的url地址]\n * @param {Object} params [请求时携带的参数]\n */\nexport function postJson(url, parameter) {\n  return axios({\n    url: url,\n    method: 'post',\n    data: JSON.stringify(parameter),\n    headers: {\n      'Content-Type': 'application/json;charset=utf-8'\n    }\n  })\n}\n\n/**\n * @description: put方法\n * @param {String} url [请求url地址]\n * @param {Object} parameter [请求时携带的参数]\n * @return: put\n */\nexport function put(url, parameter) {\n  return axios({\n    url: url,\n    method: 'put',\n    data: JSON.stringify(parameter),\n    headers: {\n      'Content-Type': 'application/json;charset=utf-8 '\n    }\n  })\n}\n\n/**\n * @description: POST\n * @param {String} url [请求url地址]\n * @param {Object} parameter [请求时携带的参数]\n * @return: uploadPost\n */\nexport function uploadPost(url, parameter) {\n  return axios({\n    url: url,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  })\n}\n"]}]}