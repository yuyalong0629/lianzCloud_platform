{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/eslint-loader/index.js??ref--13-0!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/customer/getPage.js","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/customer/getPage.js","mtime":1556540711863},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport { get, deleted, postJson, put } from '@/api/axios.js';\nimport api from '@/api/index.js';\n/**\n * @description: 初始化table数据\n * @param { currentPage } 当前页\n * @param { pageSize }  每页总数\n * @return: showCustomersPage\n */\n\nexport function showCustomersPage() {\n  var _this = this;\n\n  var currentPage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n  var pageSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n  this.loading = true;\n  return get(api.showCustomersPage, {\n    currentPage: currentPage,\n    pageSize: pageSize\n  }).then(function (res) {\n    _this.loading = false;\n\n    if (res.data.code === 0) {\n      var recordsList = res.data.data; // 设置总页数\n\n      _this.pagination.total = res.data.data === null ? 0 : Number(recordsList.total); // 每次push先清空数组\n\n      _this.tabData = [];\n      recordsList.records.forEach(function (item) {\n        _this.tabData.push({\n          key: item.id,\n          clientCode: item.custCode,\n          clientShortName: item.custShortName,\n          clientAbbreviation: item.mallUserName,\n          clientName: item.mallUserName,\n          clientPhone: item.phone,\n          clientIndustryValue: item.custIndustryValue,\n          clientLevel: item.custLevel,\n          clientStatus: item.custStatus\n        });\n      });\n      return false;\n    }\n  }).catch(function (err) {\n    console.log(err);\n\n    _this.$message.error(\"\\u8BF7\\u6C42\\u8D85\\u65F6\");\n  });\n}\n/**\n * @description: 客户管理Table列表删除操作\n * @param {params} 客户ID\n * @return: removeCustomer\n */\n\nexport function removeCustomer() {\n  var _this2 = this;\n\n  var params = this.deleteCustomer.slice(0, this.deleteCustomer.length - 1);\n  return deleted(api.removeCustomer + \"?\".concat(params)).then(function (res) {\n    if (res.data.code === 0) {\n      _this2.loading = false;\n\n      _this2.$message.success('删除成功');\n\n      return false;\n    }\n  }).catch(function (err) {\n    console.log(err);\n\n    _this2.$message.error('请求错误');\n\n    _this2.loading = false;\n  });\n}\n/**\n * @description: 新增客户表单提交\n * @param {custFormData} 表单字段\n * @return: subAddCust\n */\n\nexport function subAddCust() {\n  var _this3 = this;\n\n  this.loading = true;\n  return postJson(api.addCustomerAndMallUser, this.custFormData).then(function (res) {\n    console.log(res);\n\n    if (res.data.code === 0) {\n      _this3.loading = false;\n      _this3.isVisible = false;\n\n      _this3.$emit('isVisible', _this3.isVisible);\n    }\n  }).catch(function (err) {\n    _this3.loading = false;\n    console.log(err);\n  });\n}\n/**\n * @description: reduceObj\n * @param {objArray} Array\n * @return: reduceObj\n */\n\nexport function reduceObj(objArray) {\n  var result = []; // 去重后返回的结果数组\n\n  var temp = {}; // 临时对象\n  // 将对象数组中每一项的name值作为属性，若temp不拥有此属性时则为temp添加此属性且将其值赋为true，并将这一项push到结果数组中\n\n  for (var i = 0; i < objArray.length; i++) {\n    var rePhone = objArray[i].phone;\n\n    if (temp[rePhone]) {\n      // 如果temp中已经存在此属性名，则说明遇到重复项\n      this.$message.error('请勿重复添加');\n      continue; // 不继续执行接下来的代码，跳转至循环开头\n    }\n\n    temp[rePhone] = true; // 为temp添加此属性（myname）且将其值赋为true\n\n    result.push(objArray[i]); // 将这一项复制到结果数组result中去\n  }\n\n  return result;\n}\n/**\n * @description: 根据客户ID查看详情\n * @param {custID} 客户ID\n * @return: getCustomerAndMallUser\n */\n\nexport function getCustomerAndMallUser(custID) {\n  var _this4 = this;\n\n  return get(api.getCustomerAndMallUser, {\n    custId: custID\n  }).then(function (res) {\n    if (res.data.code === 0) {\n      console.log(res.data); // this.$store.dispatch('custDetailInfo', res.data.data)\n\n      _this4.setCustomerAndMallUser = res.data.data;\n    }\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n/**\n * @description: 客户详情修改信息\n * @param {Object}  this.custFormData [表单]\n * @return: uploadCustomerAndMallUser\n */\n\nexport function uploadCustomerAndMallUser() {\n  var _this5 = this;\n\n  // this.loading = true\n  return put(api.updateCustomerAndMallUser, this.custFormData).then(function (res) {\n    console.log(res);\n\n    if (res.data.code === 0) {\n      _this5.loading = false;\n      _this5.isVisible = false;\n\n      _this5.$emit('isVisible', _this5.isVisible);\n    }\n  }).catch(function (err) {\n    _this5.loading = false;\n    console.log(err);\n  });\n}",{"version":3,"sources":["/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/customer/getPage.js"],"names":["get","deleted","postJson","put","api","showCustomersPage","currentPage","pageSize","loading","then","res","data","code","recordsList","pagination","total","Number","tabData","records","forEach","item","push","key","id","clientCode","custCode","clientShortName","custShortName","clientAbbreviation","mallUserName","clientName","clientPhone","phone","clientIndustryValue","custIndustryValue","clientLevel","custLevel","clientStatus","custStatus","catch","err","console","log","$message","error","removeCustomer","params","deleteCustomer","slice","length","success","subAddCust","addCustomerAndMallUser","custFormData","isVisible","$emit","reduceObj","objArray","result","temp","i","rePhone","getCustomerAndMallUser","custID","custId","setCustomerAndMallUser","uploadCustomerAndMallUser","updateCustomerAndMallUser"],"mappings":"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","sourcesContent":["import { get, deleted, postJson, put } from '@/api/axios.js'\nimport api from '@/api/index.js'\n\n/**\n * @description: 初始化table数据\n * @param { currentPage } 当前页\n * @param { pageSize }  每页总数\n * @return: showCustomersPage\n */\n\nexport function showCustomersPage(currentPage = 1, pageSize = 5) {\n  this.loading = true\n  return get(api.showCustomersPage, { currentPage, pageSize })\n    .then(res => {\n      this.loading = false\n      if (res.data.code === 0) {\n        const recordsList = res.data.data\n        // 设置总页数\n        this.pagination.total = res.data.data === null ? 0 : Number(recordsList.total)\n        // 每次push先清空数组\n        this.tabData = []\n        recordsList.records.forEach((item) => {\n          this.tabData.push({\n            key: item.id,\n            clientCode: item.custCode,\n            clientShortName: item.custShortName,\n            clientAbbreviation: item.mallUserName,\n            clientName: item.mallUserName,\n            clientPhone: item.phone,\n            clientIndustryValue: item.custIndustryValue,\n            clientLevel: item.custLevel,\n            clientStatus: item.custStatus\n          })\n        })\n        return false\n      }\n    })\n    .catch(err => {\n      console.log(err)\n      this.$message.error(`请求超时`)\n    })\n}\n\n/**\n * @description: 客户管理Table列表删除操作\n * @param {params} 客户ID\n * @return: removeCustomer\n */\nexport function removeCustomer() {\n  const params = this.deleteCustomer.slice(0, (this.deleteCustomer.length) - 1)\n  return deleted(api.removeCustomer + `?${params}`).then((res) => {\n    if (res.data.code === 0) {\n      this.loading = false\n      this.$message.success('删除成功')\n      return false\n    }\n  }).catch((err) => {\n    console.log(err)\n    this.$message.error('请求错误')\n    this.loading = false\n  })\n}\n\n/**\n * @description: 新增客户表单提交\n * @param {custFormData} 表单字段\n * @return: subAddCust\n */\nexport function subAddCust() {\n  this.loading = true\n  return postJson(api.addCustomerAndMallUser, this.custFormData).then((res) => {\n    console.log(res)\n    if (res.data.code === 0) {\n      this.loading = false\n      this.isVisible = false\n      this.$emit('isVisible', this.isVisible)\n    }\n  }).catch(err => {\n    this.loading = false\n    console.log(err)\n  })\n}\n\n/**\n * @description: reduceObj\n * @param {objArray} Array\n * @return: reduceObj\n */\nexport function reduceObj(objArray) {\n  var result = [] // 去重后返回的结果数组\n  var temp = {} // 临时对象\n  // 将对象数组中每一项的name值作为属性，若temp不拥有此属性时则为temp添加此属性且将其值赋为true，并将这一项push到结果数组中\n  for (var i = 0; i < objArray.length; i++) {\n    var rePhone = objArray[i].phone\n    if (temp[rePhone]) { // 如果temp中已经存在此属性名，则说明遇到重复项\n      this.$message.error('请勿重复添加')\n      continue // 不继续执行接下来的代码，跳转至循环开头\n    }\n    temp[rePhone] = true // 为temp添加此属性（myname）且将其值赋为true\n    result.push(objArray[i]) // 将这一项复制到结果数组result中去\n  }\n  return result\n}\n\n/**\n * @description: 根据客户ID查看详情\n * @param {custID} 客户ID\n * @return: getCustomerAndMallUser\n */\nexport function getCustomerAndMallUser(custID) {\n  return get(api.getCustomerAndMallUser, { custId: custID }).then((res) => {\n    if (res.data.code === 0) {\n      console.log(res.data)\n      // this.$store.dispatch('custDetailInfo', res.data.data)\n      this.setCustomerAndMallUser = res.data.data\n    }\n  }).catch((err) => {\n    console.log(err)\n  })\n}\n\n/**\n * @description: 客户详情修改信息\n * @param {Object}  this.custFormData [表单]\n * @return: uploadCustomerAndMallUser\n */\nexport function uploadCustomerAndMallUser() {\n  // this.loading = true\n  return put(api.updateCustomerAndMallUser, this.custFormData).then((res) => {\n    console.log(res)\n    if (res.data.code === 0) {\n      this.loading = false\n      this.isVisible = false\n      this.$emit('isVisible', this.isVisible)\n    }\n  }).catch(err => {\n    this.loading = false\n    console.log(err)\n  })\n}\n"]}]}