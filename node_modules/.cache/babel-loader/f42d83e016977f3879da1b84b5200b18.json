{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/pdm/goods/child_info/tab_goodsInfo/craftInfo/CraftInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/pdm/goods/child_info/tab_goodsInfo/craftInfo/CraftInfo.vue","mtime":1561378113505},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport LineDrawer from './drawer/LineDrawer';\nimport Bus from '@/Bus.js';\nimport { craftLineInfo } from './drawer/index';\nexport default {\n  name: 'CraftInfo',\n  data: function data() {\n    return {\n      listData: [],\n      activeIndex: 0,\n      count: 1,\n      getList: [],\n      newData: []\n    };\n  },\n  props: {\n    craftsInfoData: {\n      type: Array,\n      default: []\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    // 接收孙组件data\n    Bus.$on('setCraftList', function (val) {\n      console.log(val);\n      _this.listData[val.index].list = val.data;\n      _this.listData[val.index].code = val.code;\n      _this.listData[val.index].productCraftId = val.id;\n      console.log(_this.listData);\n\n      _this.$emit('lineData', _this.listData);\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    Bus.$off('setCraftList');\n  },\n  methods: {\n    // PUSH\n    onClickAddList: function onClickAddList() {\n      var count = this.count;\n      this.listData.splice(count, 0, {\n        id: count,\n        select: true,\n        code: '',\n        inputShow: true,\n        defaultCraft: false,\n        inputVal: \"\\u5DE5\\u827A\".concat(count),\n        list: []\n      });\n      this.count = count + 1;\n      console.log(this.listData);\n      this.listData[0].defaultCraft = true;\n      this.$emit('lineData', this.listData);\n    },\n    // Select\n    selectList: function selectList(key) {\n      // this.listData[key].select = !this.listData[key].select\n      console.log(this.listData[key].select);\n    },\n    // default\n    onClickDefault: function onClickDefault(key) {\n      console.log(key);\n\n      if (this.activeIndex === key) {\n        this.activeIndex = -1;\n      } else {\n        this.activeIndex = key;\n      }\n\n      this.listData.forEach(function (item) {\n        item.defaultCraft = false;\n      });\n      this.listData[key].defaultCraft = true;\n      this.$emit('lineData', this.listData);\n    },\n    // remove\n    onClickDelete: function onClickDelete(key) {\n      console.log(key);\n      this.listData.splice(key, 1);\n      console.log(this.listData);\n      this.$emit('lineData', this.listData);\n    },\n    // Input\n    onClickInput: function onClickInput(key) {\n      this.listData[key].inputShow = false;\n    },\n    onClickSave: function onClickSave(key) {\n      this.listData[key].inputShow = true;\n      this.listData[key].inputVal = this.listData[key].inputVal;\n      console.log(this.listData[key].inputVal);\n      this.$emit('lineData', this.listData);\n    },\n    // $emit\n    lineDataChild: function lineDataChild(val) {\n      console.log(val);\n      this.listData[val.index] = val.data;\n      console.log(this.listData);\n      this.$emit('lineData', this.listData);\n    }\n  },\n  watch: {\n    craftsInfoData: {\n      handler: function handler(val) {\n        var _this2 = this;\n\n        if (val.length) {\n          // console.log(val)\n          var count = this.count;\n          val.forEach(function (item, index) {\n            craftLineInfo.call(_this2, item.productCraftId).then(function () {\n              // console.log(this.getList)\n              _this2.listData.splice(count, 0, {\n                id: index + 1,\n                select: true,\n                code: item.productCraftCode,\n                inputShow: true,\n                defaultCraft: item.defaultCraft,\n                inputVal: item.productCraftName || 'NAN',\n                list: _this2.getList\n              });\n            });\n            _this2.count = index + 2;\n          });\n          console.log(this.listData);\n          this.$emit('lineData', this.listData);\n        }\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  components: {\n    LineDrawer: LineDrawer\n  }\n};",{"version":3,"sources":["CraftInfo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"craft-info\">\n    <div class=\"list-wrapper\" v-for=\"(item, key) in listData\" :key=\"key\">\n      <div class=\"content\" :class=\"{selectList: listData[key].select}\" @click=\"selectList(key)\">\n        <div class=\"icon-input\">\n          <h3 v-if=\"listData[key].inputShow\" class=\"title\">{{ listData[key].inputVal }}</h3>\n          <a-icon v-if=\"listData[key].inputShow\" type=\"form\" @click.stop=\"onClickInput(key)\"/>\n          <a-input\n            v-if=\"!listData[key].inputShow\"\n            v-model=\"listData[key].inputVal\"\n            size=\"small\"\n            placeholder=\"请输入\"\n            style=\"width: 160px; margin-right: 5px;\"\n          />\n          <a-icon v-if=\"!listData[key].inputShow\" type=\"file-add\" @click.stop=\"onClickSave(key)\"/>\n        </div>\n        <LineDrawer\n          :setName=\"{data: listData[key], index: key}\"\n          :setKey=\"key\"\n          @lineDataChild=\"lineDataChild\"\n        />\n      </div>\n      <div class=\"icon-default\">\n        <a-button\n          size=\"small\"\n          v-if=\"activeIndex !== key\"\n          @click.stop=\"onClickDefault(key)\"\n          style=\"margin-right: 5px;\"\n        >设为默认</a-button>\n        <a-button size=\"small\" type=\"danger\" @click.stop=\"onClickDelete(key)\">删除</a-button>\n      </div>\n      <div class=\"icon-box\">\n        <div class=\"icon-select\" v-if=\"activeIndex === key\">\n          <a-icon class=\"icon-right\" type=\"check\"/>\n        </div>\n      </div>\n    </div>\n    <a-button\n      style=\"width: 100%; margin-top: 16px; margin-bottom: 8px\"\n      type=\"dashed\"\n      icon=\"plus\"\n      @click=\"onClickAddList\"\n    >添加工艺</a-button>\n  </div>\n</template>\n<script>\nimport LineDrawer from './drawer/LineDrawer'\nimport Bus from '@/Bus.js'\nimport { craftLineInfo } from './drawer/index'\n\nexport default {\n  name: 'CraftInfo',\n  data() {\n    return {\n      listData: [],\n      activeIndex: 0,\n      count: 1,\n      getList: [],\n      newData: []\n    }\n  },\n  props: {\n    craftsInfoData: {\n      type: Array,\n      default: []\n    }\n  },\n  created() {\n    // 接收孙组件data\n    Bus.$on('setCraftList', val => {\n      console.log(val)\n      this.listData[val.index].list = val.data\n      this.listData[val.index].code = val.code\n      this.listData[val.index].productCraftId = val.id\n      console.log(this.listData)\n      this.$emit('lineData', this.listData)\n    })\n  },\n  beforeDestroy() {\n    Bus.$off('setCraftList')\n  },\n  methods: {\n    // PUSH\n    onClickAddList() {\n      const { count } = this\n      this.listData.splice(count, 0, {\n        id: count,\n        select: true,\n        code: '',\n        inputShow: true,\n        defaultCraft: false,\n        inputVal: `工艺${count}`,\n        list: []\n      })\n      this.count = count + 1\n      console.log(this.listData)\n      this.listData[0].defaultCraft = true\n      this.$emit('lineData', this.listData)\n    },\n    // Select\n    selectList(key) {\n      // this.listData[key].select = !this.listData[key].select\n      console.log(this.listData[key].select)\n    },\n    // default\n    onClickDefault(key) {\n      console.log(key)\n      if (this.activeIndex === key) {\n        this.activeIndex = -1\n      } else {\n        this.activeIndex = key\n      }\n      this.listData.forEach(item => {\n        item.defaultCraft = false\n      })\n      this.listData[key].defaultCraft = true\n      this.$emit('lineData', this.listData)\n    },\n    // remove\n    onClickDelete(key) {\n      console.log(key)\n      this.listData.splice(key, 1)\n      console.log(this.listData)\n      this.$emit('lineData', this.listData)\n    },\n    // Input\n    onClickInput(key) {\n      this.listData[key].inputShow = false\n    },\n    onClickSave(key) {\n      this.listData[key].inputShow = true\n      this.listData[key].inputVal = this.listData[key].inputVal\n      console.log(this.listData[key].inputVal)\n      this.$emit('lineData', this.listData)\n    },\n    // $emit\n    lineDataChild(val) {\n      console.log(val)\n      this.listData[val.index] = val.data\n      console.log(this.listData)\n      this.$emit('lineData', this.listData)\n    }\n  },\n  watch: {\n    craftsInfoData: {\n      handler(val) {\n        if (val.length) {\n          // console.log(val)\n          const { count } = this\n          val.forEach((item, index) => {\n            craftLineInfo.call(this, item.productCraftId).then(() => {\n              // console.log(this.getList)\n              this.listData.splice(count, 0, {\n                id: index + 1,\n                select: true,\n                code: item.productCraftCode,\n                inputShow: true,\n                defaultCraft: item.defaultCraft,\n                inputVal: item.productCraftName || 'NAN',\n                list: this.getList\n              })\n            })\n            this.count = index + 2\n          })\n          console.log(this.listData)\n          this.$emit('lineData', this.listData)\n        }\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  components: {\n    LineDrawer\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.craft-info {\n  .title {\n    height: 35px;\n    line-height: 35px;\n    padding: 0 15px;\n    display: inline-block;\n  }\n  .list-wrapper {\n    margin: 10px 0;\n    // min-height: 100px;\n    box-sizing: border-box;\n    border: 1px solid #d9d9d9;\n    border-radius: 4px;\n    position: relative;\n    .selectList {\n      border: 1px solid #69b412;\n    }\n    .content {\n      width: 100%;\n      border-radius: 4px;\n      // min-height: 100px;\n      .icon-input {\n        height: 40px;\n        line-height: 40px;\n        padding: 0 5px;\n      }\n    }\n    .icon-default {\n      position: absolute;\n      top: 8px;\n      right: 40px;\n    }\n    .icon-box {\n      position: absolute;\n      top: 0;\n      right: 0;\n      z-index: 0;\n      height: 40px;\n      width: 40px;\n      .icon-select {\n        border-left: 40px solid transparent;\n        border-top: 40px solid #69b412;\n        position: relative;\n        .icon-right {\n          position: absolute;\n          right: 5px;\n          top: -35px;\n          z-index: 10;\n          color: #fff;\n        }\n      }\n      .icon-delete {\n        border-left: 40px solid transparent;\n        border-top: 40px solid #f00;\n        position: relative;\n        .icon-remove {\n          position: absolute;\n          right: 5px;\n          top: -35px;\n          z-index: 10;\n          color: #fff;\n        }\n      }\n    }\n  }\n}\n</style>"],"sourceRoot":"src/views/product/pdm/goods/child_info/tab_goodsInfo/craftInfo"}]}