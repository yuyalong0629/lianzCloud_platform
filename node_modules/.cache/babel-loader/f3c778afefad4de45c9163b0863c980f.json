{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/pdm/goods/child_info/tabGoodsInfo/bomInfo/drawer/BomDrawer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/pdm/goods/child_info/tabGoodsInfo/bomInfo/drawer/BomDrawer.vue","mtime":1559558122143},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport infiniteScroll from 'vue-infinite-scroll';\nimport { bomSearch } from './index';\nexport default {\n  name: 'BomDrawer',\n  directives: {\n    infiniteScroll: infiniteScroll\n  },\n  data: function data() {\n    return {\n      data: [],\n      loading: false,\n      busy: false,\n      num: 1,\n      // 滚动加载数据\n      page: 1 // 初始化总页数\n\n    };\n  },\n  props: {\n    keepKey: {\n      type: Number,\n      default: 0\n    }\n  },\n  beforeMount: function beforeMount() {\n    var _this = this;\n\n    bomSearch(1).then(function (res) {\n      if (res.data.code === 0) {\n        // console.log(res.data.data.records)\n        _this.data = res.data.data.records.map(function (item, index) {\n          return _objectSpread({}, item.sku, {\n            index: index\n          });\n        }); // console.log(this.data)\n\n        _this.page = res.data.data.pages;\n      }\n    });\n  },\n  methods: {\n    handleInfiniteOnLoad: function handleInfiniteOnLoad() {\n      var _this2 = this;\n\n      var data = this.data;\n      this.loading = true;\n\n      if (this.num > this.page) {\n        this.$message.warning('没有更多数据了');\n        this.busy = true;\n        this.loading = false;\n        return;\n      }\n\n      bomSearch(this.num).then(function (res) {\n        if (res.data.code === 0) {\n          _this2.loading = false;\n          _this2.data = data.concat(res.data.data.records.map(function (item, index) {\n            return _objectSpread({}, item.sku, {\n              index: index\n            });\n          })); // console.log(this.data)\n\n          _this2.num++;\n        }\n      });\n    },\n    onChangeSearch: function onChangeSearch(item) {\n      this.$emit('bomInfo', {\n        key: this.keepKey,\n        bomInfo: item\n      });\n    },\n    // 关闭列表抽屉\n    onChildrenDrawerClose: function onChildrenDrawerClose() {\n      this.$emit('isChildrenDrawer', false);\n    },\n    // 提交\n    onChildrenDrawerSubmit: function onChildrenDrawerSubmit() {\n      // console.log(this.data)\n      // this.$emit('setCraftList', this.data)\n      this.$emit('isChildrenDrawer', false);\n    }\n  }\n};",{"version":3,"sources":["BomDrawer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA,OAAA,cAAA,MAAA,qBAAA;AACA,SAAA,SAAA,QAAA,SAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,cAAA,EAAA;AAAA,GAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,KAFA;AAGA,MAAA,IAAA,EAAA,KAHA;AAIA,MAAA,GAAA,EAAA,CAJA;AAIA;AACA,MAAA,IAAA,EAAA,CALA,CAKA;;AALA,KAAA;AAOA,GAXA;AAYA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AADA,GAZA;AAkBA,EAAA,WAlBA,yBAkBA;AAAA;;AACA,IAAA,SAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,GAAA,CAAA,IAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,OAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA,KAAA;AAAA,mCACA,IAAA,CAAA,GADA;AAEA,YAAA,KAAA,EAAA;AAFA;AAAA,SAAA,CAAA,CAFA,CAMA;;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA;AACA,KAVA;AAWA,GA9BA;AA+BA,EAAA,OAAA,EAAA;AACA,IAAA,oBADA,kCACA;AAAA;;AACA,UAAA,IAAA,GAAA,KAAA,IAAA;AACA,WAAA,OAAA,GAAA,IAAA;;AACA,UAAA,KAAA,GAAA,GAAA,KAAA,IAAA,EAAA;AACA,aAAA,QAAA,CAAA,OAAA,CAAA,SAAA;AACA,aAAA,IAAA,GAAA,IAAA;AACA,aAAA,OAAA,GAAA,KAAA;AACA;AACA;;AACA,MAAA,SAAA,CAAA,KAAA,GAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA,UAAA,MAAA,CAAA,IAAA,GAAA,IAAA,CAAA,MAAA,CACA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,OAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA,KAAA;AAAA,qCACA,IAAA,CAAA,GADA;AAEA,cAAA,KAAA,EAAA;AAFA;AAAA,WAAA,CADA,CAAA,CAFA,CAQA;;AACA,UAAA,MAAA,CAAA,GAAA;AACA;AACA,OAZA;AAaA,KAvBA;AAwBA,IAAA,cAxBA,0BAwBA,IAxBA,EAwBA;AACA,WAAA,KAAA,CAAA,SAAA,EAAA;AAAA,QAAA,GAAA,EAAA,KAAA,OAAA;AAAA,QAAA,OAAA,EAAA;AAAA,OAAA;AACA,KA1BA;AA2BA;AACA,IAAA,qBA5BA,mCA4BA;AACA,WAAA,KAAA,CAAA,kBAAA,EAAA,KAAA;AACA,KA9BA;AA+BA;AACA,IAAA,sBAhCA,oCAgCA;AACA;AACA;AACA,WAAA,KAAA,CAAA,kBAAA,EAAA,KAAA;AACA;AApCA;AA/BA,CAAA","sourcesContent":["<template>\n  <div class=\"craft-diagram\">\n    <div\n      class=\"demo-infinite-container\"\n      v-infinite-scroll=\"handleInfiniteOnLoad\"\n      :infinite-scroll-disabled=\"busy\"\n      :infinite-scroll-distance=\"10\"\n    >\n      <a-list :dataSource=\"data\">\n        <a-list-item style=\"cursor: pointer;\" slot=\"renderItem\" slot-scope=\"item, index\">\n          <a-list-item-meta :description=\"item.name\" @click=\"onChangeSearch(item)\"></a-list-item-meta>\n        </a-list-item>\n        <div v-if=\"loading && !busy\" class=\"demo-loading-container\">\n          <a-spin/>\n        </div>\n      </a-list>\n    </div>\n    <div\n      :style=\"{\n          position: 'absolute',\n          left: 0,\n          bottom: 0,\n          width: '100%',\n          borderTop: '1px solid #E9E9E9',\n          padding: '10px 16px',\n          background: '#FFF',\n          textAlign: 'right'\n        }\"\n    >\n      <a-button :style=\"{marginRight: '8px'}\" @click=\"onChildrenDrawerClose\">取消</a-button>\n      <a-button type=\"primary\" :style=\"{marginRight: '8px'}\" @click=\"onChildrenDrawerSubmit\">确定</a-button>\n    </div>\n  </div>\n</template>\n<script>\nimport infiniteScroll from 'vue-infinite-scroll'\nimport { bomSearch } from './index'\n\nexport default {\n  name: 'BomDrawer',\n  directives: { infiniteScroll },\n  data() {\n    return {\n      data: [],\n      loading: false,\n      busy: false,\n      num: 1, // 滚动加载数据\n      page: 1 // 初始化总页数\n    }\n  },\n  props: {\n    keepKey: {\n      type: Number,\n      default: 0\n    }\n  },\n  beforeMount() {\n    bomSearch(1).then(res => {\n      if (res.data.code === 0) {\n        // console.log(res.data.data.records)\n        this.data = res.data.data.records.map((item, index) => ({\n          ...item.sku,\n          index\n        }))\n        // console.log(this.data)\n        this.page = res.data.data.pages\n      }\n    })\n  },\n  methods: {\n    handleInfiniteOnLoad() {\n      const data = this.data\n      this.loading = true\n      if (this.num > this.page) {\n        this.$message.warning('没有更多数据了')\n        this.busy = true\n        this.loading = false\n        return\n      }\n      bomSearch(this.num).then(res => {\n        if (res.data.code === 0) {\n          this.loading = false\n          this.data = data.concat(\n            res.data.data.records.map((item, index) => ({\n              ...item.sku,\n              index\n            }))\n          )\n          // console.log(this.data)\n          this.num++\n        }\n      })\n    },\n    onChangeSearch(item) {\n      this.$emit('bomInfo', { key: this.keepKey, bomInfo: item })\n    },\n    // 关闭列表抽屉\n    onChildrenDrawerClose() {\n      this.$emit('isChildrenDrawer', false)\n    },\n    // 提交\n    onChildrenDrawerSubmit() {\n      // console.log(this.data)\n      // this.$emit('setCraftList', this.data)\n      this.$emit('isChildrenDrawer', false)\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.demo-infinite-container {\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n  overflow: auto;\n  padding: 8px 24px 8px 10px;\n  height: 90vh;\n}\n.demo-loading-container {\n  position: absolute;\n  bottom: 40px;\n  width: 100%;\n  text-align: center;\n}\n</style>\n"],"sourceRoot":"src/views/product/pdm/goods/child_info/tabGoodsInfo/bomInfo/drawer"}]}