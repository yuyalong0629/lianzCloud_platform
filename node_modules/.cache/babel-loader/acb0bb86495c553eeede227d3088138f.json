{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/components/headerMenu/HeaderMenu.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/components/headerMenu/HeaderMenu.vue","mtime":1563524989347},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { post, get } from '@/api/axios.js';\nimport api from '@/api/index.js';\nimport HeaderNotice from './HeaderNotice';\nexport default {\n  name: 'HeaderMenu',\n  data: function data() {\n    return {\n      visible: false,\n      password: '',\n      url: ''\n    };\n  },\n  created: function created() {\n    this.getHref();\n  },\n  methods: {\n    handleLogout: function handleLogout() {\n      var that = this;\n      this.$confirm({\n        title: '提示',\n        okText: '退出',\n        cancelText: '取消',\n        content: '真的要退出登录吗 ?',\n        onOk: function onOk() {\n          that.$router.replace('/user/login');\n          localStorage.removeItem('ACCESS_TOKEN');\n        },\n        onCancel: function onCancel() {}\n      });\n    },\n    showModal: function showModal() {\n      this.visible = true;\n    },\n    handleOk: function handleOk(e) {\n      var _this = this;\n\n      e.preventDefault();\n\n      if (!this.password) {\n        this.$message.warning('请输入管理员密码');\n        return;\n      }\n\n      var newPage = window.open();\n      var url = this.url;\n      post(api.companyValidate, {\n        password: this.password\n      }).then(function (res) {\n        if (res.data.code === 0) {\n          _this.password = '';\n          _this.visible = false; // const orgmanageUrl = `http://192.168.1.121:8082/#/getInfo?key=${res.data.data.key}`\n\n          var orgmanageUrl = \"\".concat(url, \"/#/getInfo?key=\").concat(res.data.data.key);\n          newPage.location.href = orgmanageUrl;\n        } else {\n          _this.password = '';\n          _this.visible = false;\n          var confirm = newPage.confirm(res.data.msg);\n\n          if (confirm) {\n            newPage.close();\n          } else {\n            newPage.location.href = location.href;\n          } // this.$message.error(res.data.msg)\n\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    // 获取组织架构链接地址\n    getHref: function getHref() {\n      var _this2 = this;\n\n      get(api.getBackStageUrl).then(function (res) {\n        if (res.data.code === 0) {\n          _this2.url = res.data.data;\n        }\n      });\n    },\n    handleCancel: function handleCancel(e) {\n      this.visible = false;\n      this.password = '';\n    },\n    // 审批\n    getApproval: function getApproval() {\n      this.$router.push({\n        path: '/approval/backlog',\n        query: {\n          key: 1\n        }\n      });\n    }\n  },\n  computed: {\n    getNick: function getNick() {\n      return localStorage.getItem('NICK');\n    }\n  },\n  components: {\n    HeaderNotice: HeaderNotice\n  }\n};",{"version":3,"sources":["HeaderMenu.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"headerMenu\">\n    <a href=\"javascript:;\" class=\"approve\" @click=\"getApproval\">\n      <a-icon type=\"audit\" style=\"font-size:16px;\" />\n    </a>\n    <!-- 外链 -->\n    <a href=\"javascript:;\" @click=\"showModal\">\n      <a-icon type=\"home\" style=\"font-size:16px;margin:0 10px;\" />\n    </a>\n    <HeaderNotice class=\"action\" />\n    <a-dropdown>\n      <span class=\"action ant-dropdown-link user-dropdown-menu\">\n        <a-avatar style=\"backgroundColor:#87D068\" icon=\"user\" />\n        <span class=\"username\">{{ this.getNick }}</span>\n      </span>\n      <a-menu slot=\"overlay\" class=\"user-dropdown-menu-wrapper\" style=\"marginTop: 24px;\">\n        <a-menu-item key=\"0\">\n          <router-link to=\"/\">\n            <a-icon type=\"user\" style=\"marginRight: 4px;\" />\n            <span>个人中心</span>\n          </router-link>\n        </a-menu-item>\n        <a-menu-item key=\"1\">\n          <router-link to=\"/\">\n            <a-icon type=\"setting\" style=\"marginRight: 4px;\" />\n            <span>账户设置</span>\n          </router-link>\n        </a-menu-item>\n        <a-menu-divider />\n        <a-menu-item key=\"3\">\n          <a href=\"javascript:;\" @click=\"handleLogout\">\n            <a-icon type=\"logout\" style=\"marginRight: 4px;\" />\n            <span>退出登录</span>\n          </a>\n        </a-menu-item>\n      </a-menu>\n    </a-dropdown>\n    <a-modal title=\"请输入管理员密码\" :visible=\"visible\" @cancel=\"handleCancel\" :footer=\"null\">\n      <a-form @submit=\"handleOk\">\n        <a-form-item>\n          <a-input type=\"password\" placeholder=\"请输入管理员密码\" v-model=\"password\" />\n        </a-form-item>\n        <a-row>\n          <a-col :span=\"24\" :style=\"{ textAlign: 'right' }\">\n            <a-button @click=\"handleCancel\" style=\"margin-right:10px;\">取消</a-button>\n            <a-button type=\"primary\" html-type=\"submit\">确定</a-button>\n          </a-col>\n        </a-row>\n      </a-form>\n    </a-modal>\n  </div>\n</template>\n<script>\nimport { post, get } from '@/api/axios.js'\nimport api from '@/api/index.js'\nimport HeaderNotice from './HeaderNotice'\n\nexport default {\n  name: 'HeaderMenu',\n  data() {\n    return {\n      visible: false,\n      password: '',\n      url: ''\n    }\n  },\n  created() {\n    this.getHref()\n  },\n  methods: {\n    handleLogout() {\n      const that = this\n      this.$confirm({\n        title: '提示',\n        okText: '退出',\n        cancelText: '取消',\n        content: '真的要退出登录吗 ?',\n        onOk() {\n          that.$router.replace('/user/login')\n          localStorage.removeItem('ACCESS_TOKEN')\n        },\n        onCancel() { }\n      })\n    },\n    showModal() {\n      this.visible = true\n    },\n    handleOk(e) {\n      e.preventDefault()\n      if (!this.password) {\n        this.$message.warning('请输入管理员密码')\n        return\n      }\n      var newPage = window.open()\n      const url = this.url\n      post(api.companyValidate, { password: this.password }).then(res => {\n        if (res.data.code === 0) {\n          this.password = ''\n          this.visible = false\n          // const orgmanageUrl = `http://192.168.1.121:8082/#/getInfo?key=${res.data.data.key}`\n          const orgmanageUrl = `${url}/#/getInfo?key=${res.data.data.key}`\n          newPage.location.href = orgmanageUrl\n        } else {\n          this.password = ''\n          this.visible = false\n          const confirm = newPage.confirm(res.data.msg)\n          if (confirm) {\n            newPage.close()\n          } else {\n            newPage.location.href = location.href\n          }\n          // this.$message.error(res.data.msg)\n        }\n      }).catch(err => {\n        console.log(err)\n      })\n    },\n    // 获取组织架构链接地址\n    getHref() {\n      get(api.getBackStageUrl).then(res => {\n        if (res.data.code === 0) {\n          this.url = res.data.data\n        }\n      })\n    },\n    handleCancel(e) {\n      this.visible = false\n      this.password = ''\n    },\n    // 审批\n    getApproval() {\n      this.$router.push({ path: '/approval/backlog', query: { key: 1 } })\n    }\n  },\n  computed: {\n    getNick() {\n      return localStorage.getItem('NICK')\n    }\n  },\n  components: {\n    HeaderNotice\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.headerMenu {\n  float: right;\n  margin-right: 24px;\n  .action {\n    margin-right: 20px;\n    .username {\n      font-size: 14px;\n      cursor: pointer;\n      margin-left: 5px;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/components/headerMenu"}]}