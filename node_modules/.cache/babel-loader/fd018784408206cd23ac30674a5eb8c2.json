{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/thread-loader/dist/cjs.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/views/supplierSale/price_list/basic_lib/index.js","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/views/supplierSale/price_list/basic_lib/index.js","mtime":1563847504405},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _toConsumableArray from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport api from 'api/index';\nimport { get } from 'api/axios';\n/**\n * @description: 渠道商查看所有客户列表\n * @param {String} currentPage [页码]\n * @param {String} pageSize [每页条数]\n * @return: getListCompanyCusts\n */\n\nexport function getListCompanyCusts(number) {\n  var custName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var orderNum = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n  return get(api.getTransactionCust + \"?currentPage=\".concat(number, \"&custName=\").concat(custName, \"&orderNum=\").concat(orderNum, \"&pageSize=20\")).catch(function (err) {\n    console.log(err);\n  });\n}\n/**\n * @description: 客户名称模糊搜索\n * @param {String} value [监听选中的值]\n * @param {Function} callback [回调]\n * @return: custNamefetch\n */\n\nvar timeout;\nvar currentValue;\nexport function custNamefetch(value, callback) {\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = null;\n  }\n\n  currentValue = value;\n\n  function fake() {\n    get(api.getTransactionCust + \"?currentPage=1&custName=\".concat(value, \"&orderNum=''&pageSize=20\")).then(function (res) {\n      if (currentValue === value) {\n        var data = [];\n        data.push.apply(data, _toConsumableArray(res.data.data.records));\n        callback(data);\n      }\n    });\n  }\n\n  timeout = setTimeout(fake, 300);\n}\n/**\n * @description: 列表商家所有商品基本信息 getListCompanyBasicPage\n * @param {Object} params [params]\n * @param {Number} currentPage [分页查询的第几页]\n * @param {Number} pageSize [分页查询每页多少条数据]\n * @param {Number} custId [搜索公司哪个客户定制的商品custId为0搜索的都是商家标准品custId>0搜索客户订制品]\n * @param {String} name [undefined]\n * @return: searchGoods\n */\n\nexport function searchGoods(currentPage, pageSize, custId) {\n  var _this = this;\n\n  this.loading = true;\n  return get(api.getListHitoryChanelInfo + \"?currentPage=\".concat(currentPage, \"&pageSize=\").concat(pageSize, \"&custId=\").concat(custId, \"&name=\")).then(function (res) {\n    if (res.data.code === 0) {\n      _this.loading = false;\n      _this.data = [];\n      _this.pagination.total = +res.data.data.total;\n\n      if (res.data.data.records.length) {\n        var factoryName = [];\n        var modifyTime = [];\n        res.data.data.records.forEach(function (e) {\n          if (e.sfpMap) {\n            for (var key in e.sfpMap) {\n              factoryName.push(e.sfpMap[key][0].sellerName);\n              modifyTime.push(e.sfpMap[key][0].createTime);\n            }\n          }\n\n          _this.data.push({\n            key: e.id,\n            name: e.name,\n            versionCode: e.versionCode,\n            price: e.price,\n            creatorTime: e.scplist && e.scplist[0].createTime,\n            factoryName: factoryName,\n            modifyTime: modifyTime\n          });\n        });\n      }\n\n      return;\n    }\n\n    _this.loading = false;\n  }).catch(function (err) {\n    console.log(err);\n    _this.loading = false;\n  });\n}",{"version":3,"sources":["/Users/yuyalong/myProjects/lianzhiyun/projects/web-projects/platform/src/views/supplierSale/price_list/basic_lib/index.js"],"names":["api","get","getListCompanyCusts","number","custName","orderNum","getTransactionCust","catch","err","console","log","timeout","currentValue","custNamefetch","value","callback","clearTimeout","fake","then","res","data","push","records","setTimeout","searchGoods","currentPage","pageSize","custId","loading","getListHitoryChanelInfo","code","pagination","total","length","factoryName","modifyTime","forEach","e","sfpMap","key","sellerName","createTime","id","name","versionCode","price","creatorTime","scplist"],"mappings":"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","sourcesContent":["import api from 'api/index'\nimport { get } from 'api/axios'\n\n/**\n * @description: 渠道商查看所有客户列表\n * @param {String} currentPage [页码]\n * @param {String} pageSize [每页条数]\n * @return: getListCompanyCusts\n */\nexport function getListCompanyCusts(number, custName = '', orderNum = '') {\n  return get(api.getTransactionCust + `?currentPage=${number}&custName=${custName}&orderNum=${orderNum}&pageSize=20`).catch(err => {\n    console.log(err)\n  })\n}\n\n/**\n * @description: 客户名称模糊搜索\n * @param {String} value [监听选中的值]\n * @param {Function} callback [回调]\n * @return: custNamefetch\n */\nlet timeout\nlet currentValue\nexport function custNamefetch(value, callback) {\n  if (timeout) {\n    clearTimeout(timeout)\n    timeout = null\n  }\n  currentValue = value\n  function fake() {\n    get(api.getTransactionCust + `?currentPage=1&custName=${value}&orderNum=''&pageSize=20`)\n      .then((res) => {\n        if (currentValue === value) {\n          const data = []\n          data.push(...res.data.data.records)\n          callback(data)\n        }\n      })\n  }\n  timeout = setTimeout(fake, 300)\n}\n\n/**\n * @description: 列表商家所有商品基本信息 getListCompanyBasicPage\n * @param {Object} params [params]\n * @param {Number} currentPage [分页查询的第几页]\n * @param {Number} pageSize [分页查询每页多少条数据]\n * @param {Number} custId [搜索公司哪个客户定制的商品custId为0搜索的都是商家标准品custId>0搜索客户订制品]\n * @param {String} name [undefined]\n * @return: searchGoods\n */\nexport function searchGoods(currentPage, pageSize, custId) {\n  this.loading = true\n  return get(api.getListHitoryChanelInfo + `?currentPage=${currentPage}&pageSize=${pageSize}&custId=${custId}&name=`).then(res => {\n    if (res.data.code === 0) {\n      this.loading = false\n      this.data = []\n      this.pagination.total = +res.data.data.total\n      if (res.data.data.records.length) {\n        const factoryName = []\n        const modifyTime = []\n        res.data.data.records.forEach(e => {\n          if (e.sfpMap) {\n            for (const key in e.sfpMap) {\n              factoryName.push(e.sfpMap[key][0].sellerName)\n              modifyTime.push(e.sfpMap[key][0].createTime)\n            }\n          }\n          this.data.push({\n            key: e.id,\n            name: e.name,\n            versionCode: e.versionCode,\n            price: e.price,\n            creatorTime: e.scplist && e.scplist[0].createTime,\n            factoryName: factoryName,\n            modifyTime: modifyTime\n          })\n        })\n      }\n      return\n    }\n    this.loading = false\n  }).catch(err => {\n    console.log(err)\n    this.loading = false\n  })\n}\n"]}]}