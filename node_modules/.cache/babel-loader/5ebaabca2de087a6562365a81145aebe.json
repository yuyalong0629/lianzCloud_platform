{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/pdm/goods/child_info/tab_goodsInfo/craft_info/CraftInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/pdm/goods/child_info/tab_goodsInfo/craft_info/CraftInfo.vue","mtime":1561691354437},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { bomColumns } from 'goods/basic_lib/column';\nimport Steps from './Steps';\nexport default {\n  name: 'CraftInfo',\n  data: function data() {\n    return {\n      count: 0,\n      bomColumns: bomColumns,\n      data: [],\n      childrenDrawer: false,\n      current: 6,\n      steps: [{\n        title: '1',\n        content: 'First-content'\n      }, {\n        title: '2',\n        content: 'Second-content'\n      }, {\n        title: '3',\n        content: 'Last-content'\n      }, {\n        title: '4',\n        content: 'First-content'\n      }, {\n        title: '5',\n        content: 'Second-content'\n      }, {\n        title: '6',\n        content: 'Last-content'\n      }]\n    };\n  },\n  methods: {\n    // Modal\n    handleAdd: function handleAdd() {\n      var count = this.count,\n          data = this.data;\n      var newData = {\n        key: count,\n        inputVal: \"\\u5DE5\\u827A\".concat(count + 1),\n        inputShow: true,\n        defaultCraft: count === 0 ? true : false,\n        dataSource: []\n      };\n      this.data = [].concat(_toConsumableArray(data), [newData]);\n      this.count = count + 1;\n      console.log(this.data);\n    },\n    // 设为默认\n    onDefault: function onDefault(key) {\n      var count = this.count,\n          data = this.data;\n      var target = data.map(function (item) {\n        return _objectSpread({}, item, {\n          defaultCraft: item.key === key ? true : false\n        });\n      });\n      this.data = _toConsumableArray(target);\n      console.log(this.data);\n    },\n    // 删除\n    onDelete: function onDelete(key) {\n      var newData = _toConsumableArray(this.data);\n\n      this.data = newData.filter(function (item) {\n        return item.key !== key;\n      });\n\n      if (!this.data.length) {\n        this.count = 0;\n      }\n\n      console.log(this.data);\n    },\n    // Input\n    onInput: function onInput(key) {\n      var newData = _toConsumableArray(this.data);\n\n      var target = newData.filter(function (item) {\n        return item.key === key;\n      })[0];\n      console.log(target);\n\n      if (target) {\n        target.inputShow = false;\n        this.data = _toConsumableArray(newData);\n        console.log(this.data);\n      }\n    },\n    onChange: function onChange(value, key) {\n      var newData = _toConsumableArray(this.data);\n\n      var target = newData.filter(function (item) {\n        return item.key === key;\n      })[0];\n\n      if (target) {\n        target.inputVal = value;\n        this.data = _toConsumableArray(newData);\n      }\n    },\n    // Save\n    onSave: function onSave(key) {\n      var newData = _toConsumableArray(this.data);\n\n      var target = newData.filter(function (item) {\n        return item.key === key;\n      })[0];\n      console.log(target);\n\n      if (target) {\n        target.inputShow = true;\n        this.data = _toConsumableArray(newData);\n        console.log(this.data);\n      }\n    },\n    // Table\n    onTabAdd: function () {\n      var _onTabAdd = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(key) {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.$router.push({\n                  query: _objectSpread({}, this.$route.query, {\n                    bomIndex: key\n                  })\n                });\n                _context.next = 3;\n                return true;\n\n              case 3:\n                this.childrenDrawer = _context.sent;\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onTabAdd(_x) {\n        return _onTabAdd.apply(this, arguments);\n      }\n\n      return onTabAdd;\n    }(),\n    // 关闭抽屉\n    onChildrenDrawerClose: function onChildrenDrawerClose() {\n      this.childrenDrawer = false;\n    },\n    // 抽屉关闭回调\n    acceptChildDrawer: function acceptChildDrawer(val) {\n      this.childrenDrawer = val;\n    }\n  },\n  components: {\n    'craft-steps': Steps\n  }\n};",{"version":3,"sources":["CraftInfo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"craft-info\">\n    <div class=\"craft-table\" v-for=\"item of data\" :key=\"item.key\">\n      <!-- checked -->\n      <div class=\"craft-icon-checked\" v-if=\"item.defaultCraft\">\n        <a-icon class=\"icon-right\" type=\"check\"/>\n      </div>\n      <!-- default -->\n      <div class=\"craft-icon-default\">\n        <a-button\n          size=\"small\"\n          v-if=\"!item.defaultCraft\"\n          @click.stop=\"onDefault(item.key)\"\n          style=\"margin-right: 5px;\"\n        >设为默认</a-button>\n        <a-button size=\"small\" type=\"danger\" @click.stop=\"onDelete(item.key)\">删除</a-button>\n      </div>\n      <!-- Input -->\n      <div class=\"craft-input\">\n        <h3 v-if=\"item.inputShow\" class=\"craft-title\">{{ item.inputVal }}</h3>\n        <a-icon v-if=\"item.inputShow\" type=\"form\" @click.stop=\"onInput(item.key)\"/>\n        <a-input\n          v-if=\"!item.inputShow\"\n          :value=\"item.inputVal\"\n          size=\"small\"\n          :placeholder=\"`请输入${item.inputVal}`\"\n          style=\"width: 160px; margin-right: 5px;\"\n          @change=\"e => onChange(e.target.value, item.key)\"\n        />\n        <a-icon v-if=\"!item.inputShow\" type=\"file-add\" @click.stop=\"onSave(item.key)\"/>\n      </div>\n      <craft-steps/>\n      <a-button\n        style=\"width: 100%; margin-top: 16px; margin-bottom: 8px\"\n        type=\"dashed\"\n        icon=\"plus\"\n        @click.stop=\"onTabAdd(item.key)\"\n      >添加工艺流程</a-button>\n    </div>\n    <!-- 抽屉 -->\n    <a-drawer\n      :destroyOnClose=\"true\"\n      :title=\"false\"\n      width=\"300\"\n      :closable=\"false\"\n      @close=\"onChildrenDrawerClose\"\n      :visible=\"childrenDrawer\"\n    >\n      <!-- <BomDrawer @acceptChildDrawer=\"acceptChildDrawer\" @bomData=\"bomData\"/> -->\n    </a-drawer>\n    <a-button\n      style=\"width: 100%; margin-top: 16px; margin-bottom: 8px\"\n      type=\"dashed\"\n      icon=\"plus\"\n      @click=\"handleAdd\"\n    >添加工艺</a-button>\n  </div>\n</template>\n<script>\nimport { bomColumns } from 'goods/basic_lib/column'\nimport Steps from './Steps'\n\nexport default {\n  name: 'CraftInfo',\n  data() {\n    return {\n      count: 0,\n      bomColumns,\n      data: [],\n      childrenDrawer: false,\n      current: 6,\n      steps: [\n        {\n          title: '1',\n          content: 'First-content'\n        },\n        {\n          title: '2',\n          content: 'Second-content'\n        },\n        {\n          title: '3',\n          content: 'Last-content'\n        },\n        {\n          title: '4',\n          content: 'First-content'\n        },\n        {\n          title: '5',\n          content: 'Second-content'\n        },\n        {\n          title: '6',\n          content: 'Last-content'\n        }\n      ]\n    }\n  },\n  methods: {\n    // Modal\n    handleAdd() {\n      const { count, data } = this\n      const newData = {\n        key: count,\n        inputVal: `工艺${count + 1}`,\n        inputShow: true,\n        defaultCraft: count === 0 ? true : false,\n        dataSource: []\n      }\n      this.data = [...data, newData]\n      this.count = count + 1\n      console.log(this.data)\n    },\n    // 设为默认\n    onDefault(key) {\n      const { count, data } = this\n      const target = data.map(item => {\n        return {\n          ...item,\n          defaultCraft: item.key === key ? true : false\n        }\n      })\n      this.data = [...target]\n      console.log(this.data)\n    },\n    // 删除\n    onDelete(key) {\n      const newData = [...this.data]\n      this.data = newData.filter(item => item.key !== key)\n      if (!this.data.length) {\n        this.count = 0\n      }\n      console.log(this.data)\n    },\n    // Input\n    onInput(key) {\n      const newData = [...this.data]\n      const target = newData.filter(item => item.key === key)[0]\n      console.log(target)\n      if (target) {\n        target.inputShow = false\n        this.data = [...newData]\n        console.log(this.data)\n      }\n    },\n    onChange(value, key) {\n      const newData = [...this.data]\n      const target = newData.filter(item => item.key === key)[0]\n      if (target) {\n        target.inputVal = value\n        this.data = [...newData]\n      }\n    },\n    // Save\n    onSave(key) {\n      const newData = [...this.data]\n      const target = newData.filter(item => item.key === key)[0]\n      console.log(target)\n      if (target) {\n        target.inputShow = true\n        this.data = [...newData]\n        console.log(this.data)\n      }\n    },\n    // Table\n    async onTabAdd(key) {\n      this.$router.push({\n        query: {\n          ...this.$route.query,\n          bomIndex: key\n        }\n      })\n      this.childrenDrawer = await true\n    },\n    // 关闭抽屉\n    onChildrenDrawerClose() {\n      this.childrenDrawer = false\n    },\n    // 抽屉关闭回调\n    acceptChildDrawer(val) {\n      this.childrenDrawer = val\n    }\n  },\n  components: {\n    'craft-steps': Steps\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.craft-info {\n  .craft-table {\n    border: 1px solid #69b412;\n    border-radius: 4px;\n    box-sizing: border-box;\n    padding: 5px;\n    margin: 10px 0;\n    min-height: 50px;\n    position: relative;\n    .craft-icon-checked {\n      position: absolute;\n      top: 0;\n      right: 0;\n      z-index: 0;\n      height: 30px;\n      width: 30px;\n      border-left: 30px solid transparent;\n      border-top: 30px solid #69b412;\n      .icon-right {\n        color: #fff;\n        position: absolute;\n        right: 2px;\n        top: -28px;\n        z-index: 10;\n      }\n    }\n    .craft-icon-default {\n      position: absolute;\n      top: 8px;\n      right: 40px;\n      button {\n        font-size: 12px;\n      }\n    }\n    .craft-input {\n      margin-bottom: 10px;\n      .craft-title {\n        display: inline-block;\n        margin: 0 5px;\n      }\n    }\n    .editable-row-operations a {\n      margin-right: 8px;\n    }\n  }\n}\n.craft-modal-list {\n  text-align: center;\n  li {\n    display: inline-block;\n    width: 100px;\n    height: 60px;\n    margin: 0 10px;\n    border: 1px solid #d9d9d9;\n    line-height: 60px;\n    text-align: center;\n    border-radius: 4px;\n    box-sizing: border-box;\n    cursor: pointer;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/product/pdm/goods/child_info/tab_goodsInfo/craft_info"}]}