{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/thread-loader/dist/cjs.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/bom/bom_list/child_info/GoodsInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/bom/bom_list/child_info/GoodsInfo.vue","mtime":1560916311593},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Object$keys from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/core-js/object/keys\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _typeof from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/helpers/esm/typeof\";\nimport _defineProperty from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _Promise from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/core-js/promise\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Bus from '@/Bus.js';\nimport { mixinBasic, mixinIsEdit } from '@/components/tools/mixin/mixin';\nimport TabTitle from '../other/TabTitle';\nimport TabMallInfo from './tab_mallInfo/TabMallInfo'; // 产品信息\n\nimport ProductInfoForm from './tab_goodsInfo/ProductInfoForm';\nimport ClassAttrForm from './tab_goodsInfo/ClassAttrForm';\nimport SpringAttrForm from './tab_goodsInfo/SpringAttrForm';\nimport ProductUpload from '@/components/upload/Upload'; // index\n\nimport { goodsSkuAdd } from '../basic_lib/index';\nexport default {\n  name: 'GoodsInfo',\n  mixins: [mixinBasic, mixinIsEdit],\n  data: function data() {\n    return {\n      isLabelColor: false,\n      getSpringType: false,\n      getClassType: false,\n      springVal: undefined,\n      classAttrVal: [],\n      // 产品详情data\n      skuData: {},\n      // Pic\n      pics: [],\n      // 客户详情\n      custInfo: {},\n      springInfo: {},\n      // 分类属性\n      attrVals: [],\n      // 产品详情回显\n      skuInfoData: {},\n      classCatObjId: [],\n      // 弹簧属性回显\n      springInfoData: {},\n      // 产品图片回显\n      picInfoData: [],\n      // 分类属性回显\n      classAttrInfoData: [],\n      classCatId: ''\n    };\n  },\n  props: {\n    goodsViewInfo: {\n      type: Object,\n      default: {}\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    // 编辑 || 取消\n    Bus.$on('isDisabled', function (val) {\n      // Input选中\n      console.log(val);\n      var edit = new _Promise(function (resolved) {\n        _this.disabled = !val;\n        _this.isLabelColor = !_this.isLabelColor;\n        resolved();\n      });\n      edit.then(function () {\n        if (_this.disabled) {\n          _this.setFormData();\n        }\n      });\n    });\n  },\n  destroyed: function destroyed() {\n    Bus.$off('isDisabled');\n  },\n  methods: {\n    // 公司上级分类\n    onChangeCategoryName: function onChangeCategoryName(value) {// console.log(value)\n    },\n    // 提交\n    onSubmit: function onSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      this.getFormData().then(function () {\n        var params = {\n          sku: _objectSpread({}, _this2.skuData, {\n            catId: _this2.skuData.catId ? _this2.skuData.catId.slice(-1).join('') : ''\n          }, _this2.price),\n          pics: _toConsumableArray(_this2.pics),\n          custInfo: _objectSpread({}, _this2.custInfo),\n          springInfo: _objectSpread({\n            springType: _this2.springVal\n          }, _this2.springInfo),\n          attrVals: _toConsumableArray(_this2.attrVals) // console.log(params)\n          // 添加商品列表\n\n        };\n        goodsSkuAdd.call(_this2, params, '添加成功');\n      });\n    },\n    // 保存修改\n    onSave: function onSave(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n      this.getFormData().then(function () {\n        var params = {\n          sku: _objectSpread({}, _this3.skuData, {\n            catId: _this3.skuData.catId ? _this3.skuData.catId.slice(-1).join('') : ''\n          }, _this3.price),\n          pics: _toConsumableArray(_this3.pics),\n          custInfo: _objectSpread({}, _this3.custInfo),\n          springInfo: _objectSpread({\n            springType: _this3.springVal\n          }, _this3.springInfo),\n          attrVals: _toConsumableArray(_this3.attrVals) // console.log(params)\n          // 添加商品列表\n\n        };\n        goodsSkuAdd.call(_this3, params, '更新成功');\n      });\n    },\n    // 删除\n    isDelete: function isDelete(val) {},\n    // 子组件分类属性 $emit\n    classAttrInfo: function classAttrInfo(val) {\n      if (val.length) {\n        this.getClassType = true;\n        this.classAttrVal = val;\n        return;\n      }\n\n      this.getClassType = false;\n    },\n    // 子组件分类属性 接受data $emit\n    classData: function classData(val) {\n      // console.log(val)\n      this.attrVals = val;\n    },\n    // 弹簧种类 $emit\n    springType: function springType(val) {\n      // console.log(val)\n      if (val === undefined) {\n        this.getSpringType = false;\n        this.springVal = undefined;\n        return;\n      }\n\n      this.springVal = val;\n      this.getSpringType = true;\n    },\n    // Upload\n    propsFileList: function propsFileList(val) {\n      this.pics = val;\n    },\n    // 产品类别非0选中\n    changeSpringType: function changeSpringType(val) {\n      this.getSpringType = false; // console.log(val)\n    },\n    // 产品详情子组件接受分类属性ID数组\n    classCatObj: function classCatObj(val) {\n      this.classCatObjId = val.id;\n    },\n    // FormData\n    getFormData: function () {\n      var _getFormData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this4 = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // 产品详情FormData\n                this.$refs.goodsInfoForm.goodsInfoForm.validateFields(function (err, values) {\n                  if (!err) {\n                    // console.log(values)\n                    _this4.skuData = values;\n                  }\n                }); // 分类属性FormData\n\n                if (this.$refs.classAttrForm) {\n                  this.$refs.classAttrForm.classAttrInfoForm.validateFields(function (err, values) {\n                    if (!err) {// console.log(values)\n                    }\n                  });\n                } // 弹簧属性FormData\n\n\n                if (this.$refs.productAttrForm) {\n                  this.$refs.productAttrForm.productAttrForm.validateFields(function (err, values) {\n                    if (!err) {\n                      // console.log(values)\n                      _this4.springInfo = values;\n                    }\n                  });\n                }\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getFormData() {\n        return _getFormData.apply(this, arguments);\n      }\n\n      return getFormData;\n    }(),\n    // Form详情\n    setFormData: function () {\n      var _setFormData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var _this$$refs$goodsInfo;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                // 产品详情FormData\n                this.$refs.goodsInfoForm.goodsInfoForm.setFieldsValue((_this$$refs$goodsInfo = {\n                  catId: this.classCatObjId,\n                  name: this.skuInfoData.name,\n                  drawNum: this.skuInfoData.drawNum,\n                  drawVersion: this.skuInfoData.drawVersion,\n                  spec: this.skuInfoData.spec,\n                  unit: this.skuInfoData.unit\n                }, _defineProperty(_this$$refs$goodsInfo, \"unit\", this.skuInfoData.unit), _defineProperty(_this$$refs$goodsInfo, \"gateway\", this.skuInfoData.gateway), _defineProperty(_this$$refs$goodsInfo, \"standard\", this.skuInfoData.standard), _defineProperty(_this$$refs$goodsInfo, \"weight\", this.skuInfoData.weight + ''), _defineProperty(_this$$refs$goodsInfo, \"remark\", this.skuInfoData.remark), _defineProperty(_this$$refs$goodsInfo, \"price\", this.skuInfoData.price), _defineProperty(_this$$refs$goodsInfo, \"productSpringType\", this.springInfoData.springType), _this$$refs$goodsInfo)); // 弹簧属性FormData\n\n                if (this.$refs.productAttrForm) {\n                  console.log(_typeof(this.springInfoData.xrb.toString()));\n                  this.$refs.productAttrForm.productAttrForm.setFieldsValue({\n                    gcdj: this.springInfoData.gcdj,\n                    xj: this.springInfoData.xj + '',\n                    wj: this.springInfoData.wj + '',\n                    zygd: this.springInfoData.zygd + '',\n                    zqs: this.springInfoData.zqs + '',\n                    cz: this.springInfoData.cz,\n                    bmcl: this.springInfoData.bmcl,\n                    ybgd: this.springInfoData.ybgd + '',\n                    gzgd: this.springInfoData.gzgd + '',\n                    yxqs: this.springInfoData.yxqs + '',\n                    lz: this.springInfoData.lz + '',\n                    xx: this.springInfoData.xx,\n                    lxj: this.springInfoData.lxj + '',\n                    zkcd: this.springInfoData.zkcd + '',\n                    nj: this.springInfoData.nj + '',\n                    hd: this.springInfoData.hd + '',\n                    bs: this.springInfoData.bs + '',\n                    cs: this.springInfoData.cs + '',\n                    yl: this.springInfoData.yl + '',\n                    gd: this.springInfoData.gd.toString(),\n                    zdbxl: this.springInfoData.zdbxl + '',\n                    xrb: this.springInfoData.xrb.toString()\n                  });\n                }\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function setFormData() {\n        return _setFormData.apply(this, arguments);\n      }\n\n      return setFormData;\n    }()\n  },\n  watch: {\n    goodsViewInfo: {\n      handler: function handler(val) {\n        console.log(val);\n\n        if (_Object$keys(val).length) {\n          // sku\n          this.skuInfoData = val.sku; // spring\n\n          this.springInfoData = val.springInfo; // springType\n\n          this.springVal = val.springInfo.springType; // PIC\n\n          this.picInfoData = val.pics; // 分类属性\n\n          this.classAttrInfoData = val.attrVals;\n          this.classCatId = val.sku.catId;\n        }\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  components: {\n    'tab-title': TabTitle,\n    'tabMall-info': TabMallInfo,\n    'product-info': ProductInfoForm,\n    'class-attr': ClassAttrForm,\n    'spring-attr': SpringAttrForm,\n    'product-upload': ProductUpload\n  }\n};",{"version":3,"sources":["GoodsInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA,OAAA,GAAA,MAAA,UAAA;AACA,SAAA,UAAA,EAAA,WAAA,QAAA,gCAAA;AACA,OAAA,QAAA,MAAA,mBAAA;AACA,OAAA,WAAA,MAAA,4BAAA,C,CACA;;AACA,OAAA,eAAA,MAAA,iCAAA;AACA,OAAA,aAAA,MAAA,+BAAA;AACA,OAAA,cAAA,MAAA,gCAAA;AACA,OAAA,aAAA,MAAA,4BAAA,C,CACA;;AACA,SAAA,WAAA,QAAA,oBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,MAAA,EAAA,CAAA,UAAA,EAAA,WAAA,CAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,KADA;AAEA,MAAA,aAAA,EAAA,KAFA;AAGA,MAAA,YAAA,EAAA,KAHA;AAIA,MAAA,SAAA,EAAA,SAJA;AAKA,MAAA,YAAA,EAAA,EALA;AAMA;AACA,MAAA,OAAA,EAAA,EAPA;AAQA;AACA,MAAA,IAAA,EAAA,EATA;AAUA;AACA,MAAA,QAAA,EAAA,EAXA;AAYA,MAAA,UAAA,EAAA,EAZA;AAaA;AACA,MAAA,QAAA,EAAA,EAdA;AAeA;AACA,MAAA,WAAA,EAAA,EAhBA;AAiBA,MAAA,aAAA,EAAA,EAjBA;AAkBA;AACA,MAAA,cAAA,EAAA,EAnBA;AAoBA;AACA,MAAA,WAAA,EAAA,EArBA;AAsBA;AACA,MAAA,iBAAA,EAAA,EAvBA;AAwBA,MAAA,UAAA,EAAA;AAxBA,KAAA;AA0BA,GA9BA;AA+BA,EAAA,KAAA,EAAA;AACA,IAAA,aAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AADA,GA/BA;AAqCA,EAAA,OArCA,qBAqCA;AAAA;;AACA;AACA,IAAA,GAAA,CAAA,GAAA,CAAA,YAAA,EAAA,UAAA,GAAA,EAAA;AACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,UAAA,IAAA,GAAA,aAAA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,GAAA,CAAA,GAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,CAAA,KAAA,CAAA,YAAA;AACA,QAAA,QAAA;AACA,OAJA,CAAA;AAKA,MAAA,IAAA,CAAA,IAAA,CAAA,YAAA;AACA,YAAA,KAAA,CAAA,QAAA,EAAA;AACA,UAAA,KAAA,CAAA,WAAA;AACA;AACA,OAJA;AAKA,KAbA;AAcA,GArDA;AAsDA,EAAA,SAtDA,uBAsDA;AACA,IAAA,GAAA,CAAA,IAAA,CAAA,YAAA;AACA,GAxDA;AAyDA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,oBAFA,gCAEA,KAFA,EAEA,CACA;AACA,KAJA;AAKA;AACA,IAAA,QANA,oBAMA,CANA,EAMA;AAAA;;AACA,MAAA,CAAA,CAAA,cAAA;AACA,WAAA,WAAA,GAAA,IAAA,CAAA,YAAA;AACA,YAAA,MAAA,GAAA;AACA,UAAA,GAAA,oBACA,MAAA,CAAA,OADA;AAEA,YAAA,KAAA,EAAA,MAAA,CAAA,OAAA,CAAA,KAAA,GACA,MAAA,CAAA,OAAA,CAAA,KAAA,CAAA,KAAA,CAAA,CAAA,CAAA,EAAA,IAAA,CAAA,EAAA,CADA,GAEA;AAJA,aAKA,MAAA,CAAA,KALA,CADA;AAQA,UAAA,IAAA,qBAAA,MAAA,CAAA,IAAA,CARA;AASA,UAAA,QAAA,oBACA,MAAA,CAAA,QADA,CATA;AAYA,UAAA,UAAA;AACA,YAAA,UAAA,EAAA,MAAA,CAAA;AADA,aAEA,MAAA,CAAA,UAFA,CAZA;AAgBA,UAAA,QAAA,qBAAA,MAAA,CAAA,QAAA,CAhBA,CAkBA;AACA;;AAnBA,SAAA;AAoBA,QAAA,WAAA,CAAA,IAAA,CAAA,MAAA,EAAA,MAAA,EAAA,MAAA;AACA,OAtBA;AAuBA,KA/BA;AAgCA;AACA,IAAA,MAjCA,kBAiCA,CAjCA,EAiCA;AAAA;;AACA,MAAA,CAAA,CAAA,cAAA;AACA,WAAA,WAAA,GAAA,IAAA,CAAA,YAAA;AACA,YAAA,MAAA,GAAA;AACA,UAAA,GAAA,oBACA,MAAA,CAAA,OADA;AAEA,YAAA,KAAA,EAAA,MAAA,CAAA,OAAA,CAAA,KAAA,GACA,MAAA,CAAA,OAAA,CAAA,KAAA,CAAA,KAAA,CAAA,CAAA,CAAA,EAAA,IAAA,CAAA,EAAA,CADA,GAEA;AAJA,aAKA,MAAA,CAAA,KALA,CADA;AAQA,UAAA,IAAA,qBAAA,MAAA,CAAA,IAAA,CARA;AASA,UAAA,QAAA,oBACA,MAAA,CAAA,QADA,CATA;AAYA,UAAA,UAAA;AACA,YAAA,UAAA,EAAA,MAAA,CAAA;AADA,aAEA,MAAA,CAAA,UAFA,CAZA;AAgBA,UAAA,QAAA,qBAAA,MAAA,CAAA,QAAA,CAhBA,CAkBA;AACA;;AAnBA,SAAA;AAoBA,QAAA,WAAA,CAAA,IAAA,CAAA,MAAA,EAAA,MAAA,EAAA,MAAA;AACA,OAtBA;AAuBA,KA1DA;AA2DA;AACA,IAAA,QA5DA,oBA4DA,GA5DA,EA4DA,CAAA,CA5DA;AA6DA;AACA,IAAA,aA9DA,yBA8DA,GA9DA,EA8DA;AACA,UAAA,GAAA,CAAA,MAAA,EAAA;AACA,aAAA,YAAA,GAAA,IAAA;AACA,aAAA,YAAA,GAAA,GAAA;AACA;AACA;;AACA,WAAA,YAAA,GAAA,KAAA;AACA,KArEA;AAsEA;AACA,IAAA,SAvEA,qBAuEA,GAvEA,EAuEA;AACA;AACA,WAAA,QAAA,GAAA,GAAA;AACA,KA1EA;AA2EA;AACA,IAAA,UA5EA,sBA4EA,GA5EA,EA4EA;AACA;AACA,UAAA,GAAA,KAAA,SAAA,EAAA;AACA,aAAA,aAAA,GAAA,KAAA;AACA,aAAA,SAAA,GAAA,SAAA;AACA;AACA;;AACA,WAAA,SAAA,GAAA,GAAA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,KArFA;AAsFA;AACA,IAAA,aAvFA,yBAuFA,GAvFA,EAuFA;AACA,WAAA,IAAA,GAAA,GAAA;AACA,KAzFA;AA0FA;AACA,IAAA,gBA3FA,4BA2FA,GA3FA,EA2FA;AACA,WAAA,aAAA,GAAA,KAAA,CADA,CAEA;AACA,KA9FA;AA+FA;AACA,IAAA,WAhGA,uBAgGA,GAhGA,EAgGA;AACA,WAAA,aAAA,GAAA,GAAA,CAAA,EAAA;AACA,KAlGA;AAmGA;AACA,IAAA,WApGA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAqGA;AACA,qBAAA,KAAA,CAAA,aAAA,CAAA,aAAA,CAAA,cAAA,CAAA,UAAA,GAAA,EAAA,MAAA,EAAA;AACA,sBAAA,CAAA,GAAA,EAAA;AACA;AACA,oBAAA,MAAA,CAAA,OAAA,GAAA,MAAA;AACA;AACA,iBALA,EAtGA,CA4GA;;AACA,oBAAA,KAAA,KAAA,CAAA,aAAA,EAAA;AACA,uBAAA,KAAA,CAAA,aAAA,CAAA,iBAAA,CAAA,cAAA,CACA,UAAA,GAAA,EAAA,MAAA,EAAA;AACA,wBAAA,CAAA,GAAA,EAAA,CACA;AACA;AACA,mBALA;AAOA,iBArHA,CAsHA;;;AACA,oBAAA,KAAA,KAAA,CAAA,eAAA,EAAA;AACA,uBAAA,KAAA,CAAA,eAAA,CAAA,eAAA,CAAA,cAAA,CACA,UAAA,GAAA,EAAA,MAAA,EAAA;AACA,wBAAA,CAAA,GAAA,EAAA;AACA;AACA,sBAAA,MAAA,CAAA,UAAA,GAAA,MAAA;AACA;AACA,mBANA;AAQA;;AAhIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAkIA;AACA,IAAA,WAnIA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAoIA;AACA,qBAAA,KAAA,CAAA,aAAA,CAAA,aAAA,CAAA,cAAA;AACA,kBAAA,KAAA,EAAA,KAAA,aADA;AAEA,kBAAA,IAAA,EAAA,KAAA,WAAA,CAAA,IAFA;AAGA,kBAAA,OAAA,EAAA,KAAA,WAAA,CAAA,OAHA;AAIA,kBAAA,WAAA,EAAA,KAAA,WAAA,CAAA,WAJA;AAKA,kBAAA,IAAA,EAAA,KAAA,WAAA,CAAA,IALA;AAMA,kBAAA,IAAA,EAAA,KAAA,WAAA,CAAA;AANA,kEAOA,KAAA,WAAA,CAAA,IAPA,qDAQA,KAAA,WAAA,CAAA,OARA,sDASA,KAAA,WAAA,CAAA,QATA,oDAUA,KAAA,WAAA,CAAA,MAAA,GAAA,EAVA,oDAWA,KAAA,WAAA,CAAA,MAXA,mDAYA,KAAA,WAAA,CAAA,KAZA,+DAaA,KAAA,cAAA,CAAA,UAbA,2BArIA,CAoJA;;AACA,oBAAA,KAAA,KAAA,CAAA,eAAA,EAAA;AACA,kBAAA,OAAA,CAAA,GAAA,SAAA,KAAA,cAAA,CAAA,GAAA,CAAA,QAAA,EAAA;AACA,uBAAA,KAAA,CAAA,eAAA,CAAA,eAAA,CAAA,cAAA,CAAA;AACA,oBAAA,IAAA,EAAA,KAAA,cAAA,CAAA,IADA;AAEA,oBAAA,EAAA,EAAA,KAAA,cAAA,CAAA,EAAA,GAAA,EAFA;AAGA,oBAAA,EAAA,EAAA,KAAA,cAAA,CAAA,EAAA,GAAA,EAHA;AAIA,oBAAA,IAAA,EAAA,KAAA,cAAA,CAAA,IAAA,GAAA,EAJA;AAKA,oBAAA,GAAA,EAAA,KAAA,cAAA,CAAA,GAAA,GAAA,EALA;AAMA,oBAAA,EAAA,EAAA,KAAA,cAAA,CAAA,EANA;AAOA,oBAAA,IAAA,EAAA,KAAA,cAAA,CAAA,IAPA;AAQA,oBAAA,IAAA,EAAA,KAAA,cAAA,CAAA,IAAA,GAAA,EARA;AASA,oBAAA,IAAA,EAAA,KAAA,cAAA,CAAA,IAAA,GAAA,EATA;AAUA,oBAAA,IAAA,EAAA,KAAA,cAAA,CAAA,IAAA,GAAA,EAVA;AAWA,oBAAA,EAAA,EAAA,KAAA,cAAA,CAAA,EAAA,GAAA,EAXA;AAYA,oBAAA,EAAA,EAAA,KAAA,cAAA,CAAA,EAZA;AAaA,oBAAA,GAAA,EAAA,KAAA,cAAA,CAAA,GAAA,GAAA,EAbA;AAcA,oBAAA,IAAA,EAAA,KAAA,cAAA,CAAA,IAAA,GAAA,EAdA;AAeA,oBAAA,EAAA,EAAA,KAAA,cAAA,CAAA,EAAA,GAAA,EAfA;AAgBA,oBAAA,EAAA,EAAA,KAAA,cAAA,CAAA,EAAA,GAAA,EAhBA;AAiBA,oBAAA,EAAA,EAAA,KAAA,cAAA,CAAA,EAAA,GAAA,EAjBA;AAkBA,oBAAA,EAAA,EAAA,KAAA,cAAA,CAAA,EAAA,GAAA,EAlBA;AAmBA,oBAAA,EAAA,EAAA,KAAA,cAAA,CAAA,EAAA,GAAA,EAnBA;AAoBA,oBAAA,EAAA,EAAA,KAAA,cAAA,CAAA,EAAA,CAAA,QAAA,EApBA;AAqBA,oBAAA,KAAA,EAAA,KAAA,cAAA,CAAA,KAAA,GAAA,EArBA;AAsBA,oBAAA,GAAA,EAAA,KAAA,cAAA,CAAA,GAAA,CAAA,QAAA;AAtBA,mBAAA;AAwBA;;AA/KA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,GAzDA;AA2OA,EAAA,KAAA,EAAA;AACA,IAAA,aAAA,EAAA;AACA,MAAA,OADA,mBACA,GADA,EACA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,YAAA,aAAA,GAAA,EAAA,MAAA,EAAA;AACA;AACA,eAAA,WAAA,GAAA,GAAA,CAAA,GAAA,CAFA,CAGA;;AACA,eAAA,cAAA,GAAA,GAAA,CAAA,UAAA,CAJA,CAKA;;AACA,eAAA,SAAA,GAAA,GAAA,CAAA,UAAA,CAAA,UAAA,CANA,CAOA;;AACA,eAAA,WAAA,GAAA,GAAA,CAAA,IAAA,CARA,CASA;;AACA,eAAA,iBAAA,GAAA,GAAA,CAAA,QAAA;AACA,eAAA,UAAA,GAAA,GAAA,CAAA,GAAA,CAAA,KAAA;AACA;AACA,OAhBA;AAiBA,MAAA,IAAA,EAAA,IAjBA;AAkBA,MAAA,SAAA,EAAA;AAlBA;AADA,GA3OA;AAiQA,EAAA,UAAA,EAAA;AACA,iBAAA,QADA;AAEA,oBAAA,WAFA;AAGA,oBAAA,eAHA;AAIA,kBAAA,aAJA;AAKA,mBAAA,cALA;AAMA,sBAAA;AANA;AAjQA,CAAA","sourcesContent":["<template>\n  <div class=\"goods-info\">\n    <tab-title @isDelete=\"isDelete\">\n      <template v-slot:tabGoodsInfo>\n        <!-- 产品信息 -->\n        <a-row>\n          <a-col :span=\"24\">\n            <h3 class=\"categoryInfo-title\">产品详情</h3>\n          </a-col>\n          <a-col :span=\"24\">\n            <product-info\n              ref=\"goodsInfoForm\"\n              @springType=\"springType\"\n              @changeSpringType=\"changeSpringType\"\n              @classAttrInfo=\"classAttrInfo\"\n              @classCatObj=\"classCatObj\"\n              :skuInfoData=\"skuInfoData\"\n              :childDisabled=\"disabled\"\n              :springInfoType=\"springInfoData.springType\"\n            />\n          </a-col>\n          <a-col :span=\"24\" v-if=\"getClassType || classAttrInfoData.length\">\n            <a-col :span=\"24\">\n              <h3 class=\"categoryInfo-title\">分类属性</h3>\n            </a-col>\n            <a-col :span=\"24\">\n              <class-attr\n                ref=\"classAttrForm\"\n                @classData=\"classData\"\n                :classAttrVal=\"classAttrVal\"\n                :childDisabled=\"disabled\"\n                :classAttrInfoData=\"classAttrInfoData\"\n                :classCatId=\"classCatId\"\n              />\n            </a-col>\n          </a-col>\n          <a-col :span=\"24\" v-if=\"getSpringType || springVal !== undefined\">\n            <a-col :span=\"24\">\n              <h3 class=\"categoryInfo-title\">弹簧属性</h3>\n            </a-col>\n            <a-col :span=\"24\">\n              <spring-attr\n                ref=\"productAttrForm\"\n                :springVal=\"springVal\"\n                :childDisabled=\"disabled\"\n                :springInfoData=\"springInfoData\"\n              />\n            </a-col>\n          </a-col>\n          <a-col :span=\"24\">\n            <a-col :span=\"24\">\n              <h3 class=\"categoryInfo-title\">产品图片</h3>\n            </a-col>\n            <a-col :span=\"24\">\n              <product-upload @propsFileList=\"propsFileList\" :picInfoData=\"picInfoData\"/>\n            </a-col>\n          </a-col>\n        </a-row>\n      </template>\n      <template v-slot:tabMallAttr>\n        <tabMall-info/>\n      </template>\n    </tab-title>\n    <div\n      :style=\"{\n          position: 'absolute',\n          left: 0,\n          bottom: 0,\n          width: '100%',\n          borderTop: '1px solid #E9E9E9',\n          padding: '10px 16px',\n          background: '#FFF',\n          textAlign: 'right',\n        }\"\n    >\n      <a-button :style=\"{marginRight: '8px'}\" @click=\"onClose\">取消</a-button>\n      <a-button @click=\"onSubmit\" type=\"primary\" :loading=\"loading\" v-if=\"isEdit\">提交</a-button>\n      <a-button\n        @click=\"onSave\"\n        type=\"primary\"\n        :disabled=\"!disabled\"\n        :loading=\"loading\"\n        v-else=\"!isEdit\"\n      >保存</a-button>\n    </div>\n  </div>\n</template>\n<script>\nimport Bus from '@/Bus.js'\nimport { mixinBasic, mixinIsEdit } from '@/components/tools/mixin/mixin'\nimport TabTitle from '../other/TabTitle'\nimport TabMallInfo from './tab_mallInfo/TabMallInfo'\n// 产品信息\nimport ProductInfoForm from './tab_goodsInfo/ProductInfoForm'\nimport ClassAttrForm from './tab_goodsInfo/ClassAttrForm'\nimport SpringAttrForm from './tab_goodsInfo/SpringAttrForm'\nimport ProductUpload from '@/components/upload/Upload'\n// index\nimport { goodsSkuAdd } from '../basic_lib/index'\n\nexport default {\n  name: 'GoodsInfo',\n  mixins: [mixinBasic, mixinIsEdit],\n  data() {\n    return {\n      isLabelColor: false,\n      getSpringType: false,\n      getClassType: false,\n      springVal: undefined,\n      classAttrVal: [],\n      // 产品详情data\n      skuData: {},\n      // Pic\n      pics: [],\n      // 客户详情\n      custInfo: {},\n      springInfo: {},\n      // 分类属性\n      attrVals: [],\n      // 产品详情回显\n      skuInfoData: {},\n      classCatObjId: [],\n      // 弹簧属性回显\n      springInfoData: {},\n      // 产品图片回显\n      picInfoData: [],\n      // 分类属性回显\n      classAttrInfoData: [],\n      classCatId: ''\n    }\n  },\n  props: {\n    goodsViewInfo: {\n      type: Object,\n      default: {}\n    }\n  },\n  created() {\n    // 编辑 || 取消\n    Bus.$on('isDisabled', val => {\n      // Input选中\n      console.log(val)\n      const edit = new Promise(resolved => {\n        this.disabled = !val\n        this.isLabelColor = !this.isLabelColor\n        resolved()\n      })\n      edit.then(() => {\n        if (this.disabled) {\n          this.setFormData()\n        }\n      })\n    })\n  },\n  destroyed() {\n    Bus.$off('isDisabled')\n  },\n  methods: {\n    // 公司上级分类\n    onChangeCategoryName(value) {\n      // console.log(value)\n    },\n    // 提交\n    onSubmit(e) {\n      e.preventDefault()\n      this.getFormData().then(() => {\n        const params = {\n          sku: {\n            ...this.skuData,\n            catId: this.skuData.catId\n              ? this.skuData.catId.slice(-1).join('')\n              : '',\n            ...this.price\n          },\n          pics: [...this.pics],\n          custInfo: {\n            ...this.custInfo\n          },\n          springInfo: {\n            springType: this.springVal,\n            ...this.springInfo\n          },\n          attrVals: [...this.attrVals]\n        }\n        // console.log(params)\n        // 添加商品列表\n        goodsSkuAdd.call(this, params, '添加成功')\n      })\n    },\n    // 保存修改\n    onSave(e) {\n      e.preventDefault()\n      this.getFormData().then(() => {\n        const params = {\n          sku: {\n            ...this.skuData,\n            catId: this.skuData.catId\n              ? this.skuData.catId.slice(-1).join('')\n              : '',\n            ...this.price\n          },\n          pics: [...this.pics],\n          custInfo: {\n            ...this.custInfo\n          },\n          springInfo: {\n            springType: this.springVal,\n            ...this.springInfo\n          },\n          attrVals: [...this.attrVals]\n        }\n        // console.log(params)\n        // 添加商品列表\n        goodsSkuAdd.call(this, params, '更新成功')\n      })\n    },\n    // 删除\n    isDelete(val) {},\n    // 子组件分类属性 $emit\n    classAttrInfo(val) {\n      if (val.length) {\n        this.getClassType = true\n        this.classAttrVal = val\n        return\n      }\n      this.getClassType = false\n    },\n    // 子组件分类属性 接受data $emit\n    classData(val) {\n      // console.log(val)\n      this.attrVals = val\n    },\n    // 弹簧种类 $emit\n    springType(val) {\n      // console.log(val)\n      if (val === undefined) {\n        this.getSpringType = false\n        this.springVal = undefined\n        return\n      }\n      this.springVal = val\n      this.getSpringType = true\n    },\n    // Upload\n    propsFileList(val) {\n      this.pics = val\n    },\n    // 产品类别非0选中\n    changeSpringType(val) {\n      this.getSpringType = false\n      // console.log(val)\n    },\n    // 产品详情子组件接受分类属性ID数组\n    classCatObj(val) {\n      this.classCatObjId = val.id\n    },\n    // FormData\n    async getFormData() {\n      // 产品详情FormData\n      this.$refs.goodsInfoForm.goodsInfoForm.validateFields((err, values) => {\n        if (!err) {\n          // console.log(values)\n          this.skuData = values\n        }\n      })\n      // 分类属性FormData\n      if (this.$refs.classAttrForm) {\n        this.$refs.classAttrForm.classAttrInfoForm.validateFields(\n          (err, values) => {\n            if (!err) {\n              // console.log(values)\n            }\n          }\n        )\n      }\n      // 弹簧属性FormData\n      if (this.$refs.productAttrForm) {\n        this.$refs.productAttrForm.productAttrForm.validateFields(\n          (err, values) => {\n            if (!err) {\n              // console.log(values)\n              this.springInfo = values\n            }\n          }\n        )\n      }\n    },\n    // Form详情\n    async setFormData() {\n      // 产品详情FormData\n      this.$refs.goodsInfoForm.goodsInfoForm.setFieldsValue({\n        catId: this.classCatObjId,\n        name: this.skuInfoData.name,\n        drawNum: this.skuInfoData.drawNum,\n        drawVersion: this.skuInfoData.drawVersion,\n        spec: this.skuInfoData.spec,\n        unit: this.skuInfoData.unit,\n        unit: this.skuInfoData.unit,\n        gateway: this.skuInfoData.gateway,\n        standard: this.skuInfoData.standard,\n        weight: this.skuInfoData.weight + '',\n        remark: this.skuInfoData.remark,\n        price: this.skuInfoData.price,\n        productSpringType: this.springInfoData.springType\n      })\n      // 弹簧属性FormData\n      if (this.$refs.productAttrForm) {\n        console.log(typeof this.springInfoData.xrb.toString())\n        this.$refs.productAttrForm.productAttrForm.setFieldsValue({\n          gcdj: this.springInfoData.gcdj,\n          xj: this.springInfoData.xj + '',\n          wj: this.springInfoData.wj + '',\n          zygd: this.springInfoData.zygd + '',\n          zqs: this.springInfoData.zqs + '',\n          cz: this.springInfoData.cz,\n          bmcl: this.springInfoData.bmcl,\n          ybgd: this.springInfoData.ybgd + '',\n          gzgd: this.springInfoData.gzgd + '',\n          yxqs: this.springInfoData.yxqs + '',\n          lz: this.springInfoData.lz + '',\n          xx: this.springInfoData.xx,\n          lxj: this.springInfoData.lxj + '',\n          zkcd: this.springInfoData.zkcd + '',\n          nj: this.springInfoData.nj + '',\n          hd: this.springInfoData.hd + '',\n          bs: this.springInfoData.bs + '',\n          cs: this.springInfoData.cs + '',\n          yl: this.springInfoData.yl + '',\n          gd: this.springInfoData.gd.toString(),\n          zdbxl: this.springInfoData.zdbxl + '',\n          xrb: this.springInfoData.xrb.toString()\n        })\n      }\n    }\n  },\n  watch: {\n    goodsViewInfo: {\n      handler(val) {\n        console.log(val)\n        if (Object.keys(val).length) {\n          // sku\n          this.skuInfoData = val.sku\n          // spring\n          this.springInfoData = val.springInfo\n          // springType\n          this.springVal = val.springInfo.springType\n          // PIC\n          this.picInfoData = val.pics\n          // 分类属性\n          this.classAttrInfoData = val.attrVals\n          this.classCatId = val.sku.catId\n        }\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  components: {\n    'tab-title': TabTitle,\n    'tabMall-info': TabMallInfo,\n    'product-info': ProductInfoForm,\n    'class-attr': ClassAttrForm,\n    'spring-attr': SpringAttrForm,\n    'product-upload': ProductUpload\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n@import '~styles/variable.less';\n\n.goods-info {\n  .categoryInfo-title {\n    margin: 15px 0;\n    .h3_title();\n  }\n  .labelColor {\n    /deep/ .ant-form-item-label label {\n      .labelColor();\n    }\n  }\n}\n</style>"],"sourceRoot":"src/views/product/bom/bom_list/child_info"}]}