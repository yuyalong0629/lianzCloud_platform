{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/customer/Customer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/customer/Customer.vue","mtime":1556609704674},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Animation from '@/assets/utils/Animation';\nimport { showCustomersPage, removeCustomer, getCustomerAndMallUser } from './getPage.js';\nimport AddCustomerInfo from './AddCustomerInfo';\nvar columns = [{\n  title: '客户编码',\n  dataIndex: 'clientCode',\n  scopedSlots: {\n    customRender: 'clientCode'\n  }\n}, {\n  title: '客户简称',\n  dataIndex: 'clientShortName'\n}, {\n  title: '客户经理',\n  dataIndex: 'clientAbbreviation'\n}, {\n  title: '联系人',\n  dataIndex: 'clientName'\n}, {\n  title: '联系方式',\n  dataIndex: 'clientPhone'\n}, {\n  title: '所属行业',\n  dataIndex: 'clientIndustryValue'\n}, {\n  title: '客户等级',\n  dataIndex: 'clientLevel'\n}, {\n  title: '状态',\n  dataIndex: 'clientStatus',\n  scopedSlots: {\n    customRender: 'clientStatus'\n  }\n}];\nexport default {\n  name: 'Customer',\n  data: function data() {\n    return {\n      // 高级搜索 展开/关闭\n      advanced: false,\n      // 地域data\n      options: [{\n        value: 'zhejiang',\n        label: 'Zhejiang',\n        children: [{\n          value: 'hangzhou',\n          label: 'Hangzhou',\n          children: [{\n            value: 'xihu',\n            label: 'West Lake'\n          }]\n        }]\n      }, {\n        value: 'jiangsu',\n        label: 'Jiangsu',\n        children: [{\n          value: 'nanjing',\n          label: 'Nanjing',\n          children: [{\n            value: 'zhonghuamen',\n            label: 'Zhong Hua Men'\n          }]\n        }]\n      }],\n      // table\n      tabData: [],\n      columns: columns,\n      pagination: {\n        total: 0,\n        defaultPageSize: 5,\n        defaultCurrent: 1\n      },\n      loading: false,\n      selectedRowKeys: [],\n      // Check here to configure the default column,\n      deleteCustomer: '',\n      visible: false,\n      setCustomerAndMallUser: {},\n      isEdit: false,\n      title: '新建客户信息'\n    };\n  },\n  mounted: function mounted() {\n    // 初始化客户信息\n    showCustomersPage.call(this);\n  },\n  beforeRouteEnter: function beforeRouteEnter(to, from, next) {\n    // 在渲染该组件的对应路由被 confirm 前调用\n    // 不！能！获取组件实例 `this`\n    // 因为当守卫执行前，组件实例还没被创建\n    console.log(to);\n    next(function (vm) {\n      console.log(vm.$store.getters.getNavPermission);\n      console.log(vm.$store.getters);\n    });\n    console.log(from);\n  },\n  methods: {\n    // 地域选择\n    onChangeArea: function onChangeArea(value) {\n      console.log(value);\n    },\n    // 客户等级\n    onleChangeRank: function onleChangeRank(value) {\n      console.log(value);\n    },\n    // 行业\n    onleChangeindustry: function onleChangeindustry(value) {\n      console.log(value);\n    },\n    toggleAdvanced: function toggleAdvanced() {\n      this.advanced = !this.advanced;\n    },\n    // table 选择操作\n    onChangeTab: function onChangeTab(selectedRowKeys, selectedRows) {\n      var _this = this;\n\n      console.log(selectedRowKeys);\n      console.log(selectedRows);\n      this.selectedRowKeys = selectedRowKeys; // 选中删除供应商数\n\n      this.deleteCustomer = '';\n      selectedRowKeys.forEach(function (item, index) {\n        console.log(item);\n        _this.deleteCustomer += \"customerIds=\".concat(item, \"&\");\n      });\n      console.log(this.deleteCustomer);\n    },\n    // 删除tab列表项\n    onDeleteCustomer: function onDeleteCustomer() {\n      var that = this;\n      this.$confirm({\n        title: '删除',\n        content: '您确认要删除？',\n        okText: '删除',\n        okType: 'danger',\n        cancelText: '取消',\n        onOk: function onOk() {\n          if (that.selectedRowKeys.length === 0) {\n            that.$message.error('请先选择要删除的项');\n            return false;\n          }\n\n          that.loading = true;\n          removeCustomer.call(that);\n          setTimeout(function () {\n            showCustomersPage.call(that);\n          }, 200);\n        },\n        onCancel: function onCancel() {\n          console.log('Cancel');\n        }\n      });\n    },\n    // 分页管理\n    onChangePage: function onChangePage(pagination, filters, sorter) {\n      console.log(pagination.current + '分页下标');\n      showCustomersPage.call(this, pagination.current); // 切换分页先清空选中状态\n\n      this.selectedRowKeys = [];\n    },\n    // 新增客户信息\n    addCustomerInfo: function addCustomerInfo() {\n      this.visible = true;\n      this.isEdit = false;\n    },\n    // 取消客户信息\n    onCustomerInfo: function onCustomerInfo() {\n      this.visible = false;\n    },\n    // 客户信息详情\n    onChangeCode: function onChangeCode(record) {\n      this.visible = true;\n      this.title = '客户信息详情'; // 编辑按钮显示\n\n      this.isEdit = true;\n      getCustomerAndMallUser.call(this, record.key);\n    },\n    // 客户状态\n    onChangeStatus: function onChangeStatus(record) {\n      console.log(record);\n    },\n    // $emit改变isvisible\n    isVisible: function isVisible(_isVisible) {\n      this.visible = _isVisible;\n    }\n  },\n  computed: {\n    rowSelection: function rowSelection() {\n      var selectedRowKeys = this.selectedRowKeys;\n      return {\n        selectedRowKeys: selectedRowKeys,\n        onChange: this.onChangeTab,\n        hideDefaultSelections: false\n      };\n    }\n  },\n  components: {\n    Animation: Animation,\n    AddCustomerInfo: AddCustomerInfo\n  }\n};",{"version":3,"sources":["Customer.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"client\">\n    <!-- 头部选择区 -->\n    <div class=\"client-add\">\n      <a-button type=\"primary\" @click=\"addCustomerInfo\">\n        <a-icon type=\"plus\"/>新建\n      </a-button>\n      <!-- 弹出层 -->\n      <a-drawer\n        destroyOnClose\n        :title=\"title\"\n        placement=\"right\"\n        :closable=\"false\"\n        :width=\"1080\"\n        @close=\"onCustomerInfo\"\n        :visible=\"visible\"\n        :wrapStyle=\"{height: 'calc(100% - 108px)',overflow: 'auto',paddingBottom: '108px'}\"\n      >\n        <AddCustomerInfo\n          @isVisible=\"isVisible\"\n          :isEdit=\"isEdit\"\n          :setCustomerAndMallUser=\"setCustomerAndMallUser\"\n        ></AddCustomerInfo>\n      </a-drawer>\n      <a-button type=\"danger\" class=\"client-remove\" @click=\"onDeleteCustomer\">\n        <a-icon type=\"delete\"/>删除\n      </a-button>\n      <a-dropdown>\n        <span>\n          <a-icon class=\"client-derive\" type=\"check-circle\"/>\n          <span>更多</span>\n        </span>\n        <a-menu slot=\"overlay\">\n          <a-menu-item key=\"0\">\n            <span>导入</span>\n          </a-menu-item>\n          <a-menu-item key=\"1\">\n            <span>导出</span>\n          </a-menu-item>\n        </a-menu>\n      </a-dropdown>\n    </div>\n    <!-- 客户选择 -->\n    <div class=\"client-select\">\n      <a-form layout=\"inline\">\n        <a-row>\n          <a-col :span=\"18\">\n            <a-row>\n              <a-col :span=\"24\">\n                <a-form-item label=\"客户名称\">\n                  <a-input placeholder=\"请输入客户名称\"/>\n                </a-form-item>\n                <a-form-item label=\"客户经理\">\n                  <a-cascader\n                    :options=\"options\"\n                    style=\"width: 280px\"\n                    @change=\"onChangeArea\"\n                    placeholder=\"请输入客户经理\"\n                  />\n                </a-form-item>\n                <a-form-item label=\"客户等级\">\n                  <a-select defaultValue=\"普通\" style=\"width: 120px\" @change=\"onleChangeRank\">\n                    <a-select-option value=\"普通\">普通</a-select-option>\n                    <a-select-option value=\"一般\">一般</a-select-option>\n                    <a-select-option value=\"重点\">重点</a-select-option>\n                    <a-select-option value=\"VIP\">VIP</a-select-option>\n                  </a-select>\n                </a-form-item>\n              </a-col>\n            </a-row>\n            <Animation name=\"fadeIn\">\n              <a-row v-if=\"advanced\">\n                <a-col :span=\"24\">\n                  <a-form-item label=\"客户编码\">\n                    <a-input placeholder=\"请输入客户编码\"/>\n                  </a-form-item>\n                  <a-form-item label=\"行业\">\n                    <a-select defaultValue=\"汽油\" style=\"width: 120px\" @change=\"onleChangeindustry\">\n                      <a-select-option value=\"汽油\">汽油</a-select-option>\n                      <a-select-option value=\"石头\">一石头般</a-select-option>\n                      <a-select-option value=\"电子电器\">电子电器</a-select-option>\n                      <a-select-option value=\"五金\">五金</a-select-option>\n                      <a-select-option value=\"轨道交通\">轨道交通</a-select-option>\n                      <a-select-option value=\"其他\">其他</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                </a-col>\n              </a-row>\n            </Animation>\n          </a-col>\n          <a-col :span=\"6\">\n            <a-form-item>\n              <a-button type=\"primary\">查询</a-button>\n              <a-button class=\"client-select-reset\">重置</a-button>\n              <a-button size=\"small\" @click=\"toggleAdvanced\">\n                <a-icon :type=\"advanced ? 'up' : 'down'\"/>\n                {{ advanced ? '收起' : '展开' }}\n              </a-button>\n            </a-form-item>\n          </a-col>\n        </a-row>\n      </a-form>\n    </div>\n    <!-- table -->\n    <div class=\"client-table\">\n      <a-table\n        :columns=\"columns\"\n        @change=\"onChangePage\"\n        :dataSource=\"tabData\"\n        :pagination=\"pagination\"\n        :rowSelection=\"rowSelection\"\n        :loading=\"loading\"\n      >\n        <template slot=\"clientCode\" slot-scope=\"text, record\">\n          <a @click=\"onChangeCode(record)\" href=\"javascript:;\">{{text}}</a>\n        </template>\n        <template slot=\"clientStatus\" slot-scope=\"text, record\">\n          <a\n            @click=\"onChangeStatus(record)\"\n            href=\"javascript:;\"\n            class=\"client-status\"\n            :class=\"[`${text}` === '0' ? 'statusOk' : 'statusNo']\"\n            :title=\"[`${text}` === '0' ? '使用中' : '']\"\n          ></a>\n        </template>\n      </a-table>\n    </div>\n  </div>\n</template>\n<script>\nimport Animation from '@/assets/utils/Animation'\nimport {\n  showCustomersPage,\n  removeCustomer,\n  getCustomerAndMallUser\n} from './getPage.js'\nimport AddCustomerInfo from './AddCustomerInfo'\n\nconst columns = [\n  {\n    title: '客户编码',\n    dataIndex: 'clientCode',\n    scopedSlots: { customRender: 'clientCode' }\n  },\n  {\n    title: '客户简称',\n    dataIndex: 'clientShortName'\n  },\n  {\n    title: '客户经理',\n    dataIndex: 'clientAbbreviation'\n  },\n  {\n    title: '联系人',\n    dataIndex: 'clientName'\n  },\n  {\n    title: '联系方式',\n    dataIndex: 'clientPhone'\n  },\n  {\n    title: '所属行业',\n    dataIndex: 'clientIndustryValue'\n  },\n  {\n    title: '客户等级',\n    dataIndex: 'clientLevel'\n  },\n  {\n    title: '状态',\n    dataIndex: 'clientStatus',\n    scopedSlots: { customRender: 'clientStatus' }\n  }\n]\n\nexport default {\n  name: 'Customer',\n  data() {\n    return {\n      // 高级搜索 展开/关闭\n      advanced: false,\n      // 地域data\n      options: [\n        {\n          value: 'zhejiang',\n          label: 'Zhejiang',\n          children: [\n            {\n              value: 'hangzhou',\n              label: 'Hangzhou',\n              children: [\n                {\n                  value: 'xihu',\n                  label: 'West Lake'\n                }\n              ]\n            }\n          ]\n        },\n        {\n          value: 'jiangsu',\n          label: 'Jiangsu',\n          children: [\n            {\n              value: 'nanjing',\n              label: 'Nanjing',\n              children: [\n                {\n                  value: 'zhonghuamen',\n                  label: 'Zhong Hua Men'\n                }\n              ]\n            }\n          ]\n        }\n      ],\n      // table\n      tabData: [],\n      columns,\n      pagination: {\n        total: 0,\n        defaultPageSize: 5,\n        defaultCurrent: 1\n      },\n      loading: false,\n      selectedRowKeys: [], // Check here to configure the default column,\n      deleteCustomer: '',\n      visible: false,\n      setCustomerAndMallUser: {},\n      isEdit: false,\n      title: '新建客户信息'\n    }\n  },\n  mounted() {\n    // 初始化客户信息\n    showCustomersPage.call(this)\n  },\n  beforeRouteEnter(to, from, next) {\n    // 在渲染该组件的对应路由被 confirm 前调用\n    // 不！能！获取组件实例 `this`\n    // 因为当守卫执行前，组件实例还没被创建\n    console.log(to)\n    next(vm => {\n      console.log(vm.$store.getters.getNavPermission)\n      console.log(vm.$store.getters)\n    })\n    console.log(from)\n  },\n  methods: {\n    // 地域选择\n    onChangeArea(value) {\n      console.log(value)\n    },\n    // 客户等级\n    onleChangeRank(value) {\n      console.log(value)\n    },\n    // 行业\n    onleChangeindustry(value) {\n      console.log(value)\n    },\n    toggleAdvanced() {\n      this.advanced = !this.advanced\n    },\n    // table 选择操作\n    onChangeTab(selectedRowKeys, selectedRows) {\n      console.log(selectedRowKeys)\n      console.log(selectedRows)\n      this.selectedRowKeys = selectedRowKeys\n      // 选中删除供应商数\n      this.deleteCustomer = ''\n      selectedRowKeys.forEach((item, index) => {\n        console.log(item)\n        this.deleteCustomer += `customerIds=${item}&`\n      })\n      console.log(this.deleteCustomer)\n    },\n    // 删除tab列表项\n    onDeleteCustomer() {\n      const that = this\n      this.$confirm({\n        title: '删除',\n        content: '您确认要删除？',\n        okText: '删除',\n        okType: 'danger',\n        cancelText: '取消',\n        onOk() {\n          if (that.selectedRowKeys.length === 0) {\n            that.$message.error('请先选择要删除的项')\n            return false\n          }\n          that.loading = true\n          removeCustomer.call(that)\n          setTimeout(() => {\n            showCustomersPage.call(that)\n          }, 200)\n        },\n        onCancel() {\n          console.log('Cancel')\n        }\n      })\n    },\n    // 分页管理\n    onChangePage(pagination, filters, sorter) {\n      console.log(pagination.current + '分页下标')\n      showCustomersPage.call(this, pagination.current)\n      // 切换分页先清空选中状态\n      this.selectedRowKeys = []\n    },\n    // 新增客户信息\n    addCustomerInfo() {\n      this.visible = true\n      this.isEdit = false\n    },\n    // 取消客户信息\n    onCustomerInfo() {\n      this.visible = false\n    },\n    // 客户信息详情\n    onChangeCode(record) {\n      this.visible = true\n      this.title = '客户信息详情'\n      // 编辑按钮显示\n      this.isEdit = true\n      getCustomerAndMallUser.call(this, record.key)\n    },\n    // 客户状态\n    onChangeStatus(record) {\n      console.log(record)\n    },\n    // $emit改变isvisible\n    isVisible(isVisible) {\n      this.visible = isVisible\n    }\n  },\n  computed: {\n    rowSelection() {\n      const { selectedRowKeys } = this\n      return {\n        selectedRowKeys,\n        onChange: this.onChangeTab,\n        hideDefaultSelections: false\n      }\n    }\n  },\n  components: {\n    Animation,\n    AddCustomerInfo\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.client {\n  .client-add {\n    .client-remove {\n      margin: 0 20px;\n    }\n    .client-derive {\n      color: #6bc67b;\n      margin-right: 5px;\n    }\n  }\n  .client-select {\n    margin: 20px 0;\n    .client-select-reset {\n      margin: 0 8px;\n    }\n  }\n  .client-table {\n    .client-status {\n      width: 12px;\n      height: 12px;\n      border-radius: 50%;\n      display: inline-block;\n    }\n    .statusOk {\n      background: #6bc67b;\n    }\n    .statusNo {\n      background: #d8d8d8;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/views/customer"}]}