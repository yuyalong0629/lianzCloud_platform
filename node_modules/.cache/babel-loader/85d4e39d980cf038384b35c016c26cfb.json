{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/category/categoryInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/product/category/categoryInfo.vue","mtime":1556539006305},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getGoodsList, getListCompanyCusts, getCustList, postCategoryAdd, detailInfoShow, deleteCategory, onSave } from './getCategory.js';\nimport { setTimeout } from 'timers';\nimport { recursive } from 'utils/utils.js';\nexport default {\n  name: 'CateGoryInfo',\n  data: function data() {\n    return {\n      loading: false,\n      cateGoryInfo: this.$form.createForm(this),\n      value: 1,\n      categoryName: true,\n      isCategorySuperior: false,\n      isDisabled: false,\n      selectOptions: [],\n      options: [],\n      timer: null,\n      // categoryEdit: this.isEdit,\n      getViewCategoryInfo: null,\n      categorySuperiorContent: '',\n      categoryEdit: '点击编辑'\n    };\n  },\n  props: {\n    isEdit: {\n      type: Boolean,\n      default: false\n    },\n    viewCategoryInfo: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  created: function created() {\n    // 公司分类获取所有上级分类\n    getGoodsList.call(this);\n    getListCompanyCusts.call(this);\n  },\n  mounted: function mounted() {// 设置默认值\n  },\n  beforeDestroy: function beforeDestroy() {\n    // 清空定时器\n    clearTimeout(this.timer);\n  },\n  watch: {\n    viewCategoryInfo: {\n      handler: function handler(val) {\n        this.getViewCategoryInfo = val;\n        this.showViewCategory();\n      },\n      deep: true\n    }\n  },\n  computed: {\n    isCategoryEdit: function isCategoryEdit() {\n      return this.isEdit;\n    }\n  },\n  methods: {\n    // 产品分类详情信息展示watch\n    showViewCategory: function showViewCategory() {\n      var _this = this;\n\n      // 上级分类隐藏域\n      this.isCategorySuperior = true;\n      this.isDisabled = true; // 清空数组\n\n      this.options = [];\n      console.log(this.getViewCategoryInfo.custId); // // 判断是否编辑状态\n\n      if (this.isCategoryEdit) {\n        // 显示客户分类\n        if (Number(this.getViewCategoryInfo.custId) !== 0) {\n          // 获取客户上级分类\n          getCustList.call(this, this.getViewCategoryInfo.custId); // radio\n\n          this.value = 2; // 公司|客户分类\n\n          this.categoryName = false; // 查找客户所属名称\n\n          this.timer = setTimeout(function () {\n            var customerFrom = _this.selectOptions.filter(function (item) {\n              return item.custId === _this.getViewCategoryInfo.custId;\n            });\n\n            console.log(customerFrom[0].name);\n            console.log(_this.getViewCategoryInfo.pid); // // 根据pid查找上级分类所在的对象\n            // recursive.call(this, this.options, this.getViewCategoryInfo.pid)\n            // console.log(this.categorySuperiorContent)\n            // 客户分类详情回填\n\n            detailInfoShow.call(_this, _this.getViewCategoryInfo.remark === null ? '' : _this.getViewCategoryInfo.remark, _this.getViewCategoryInfo.name, customerFrom[0].name, _this.getViewCategoryInfo.parentClassname);\n          }, 200);\n        } // 显示公司分类\n\n\n        if (Number(this.getViewCategoryInfo.custId) === 0) {\n          this.value = 1; // 获取上级分类总列表\n\n          getGoodsList.call(this);\n          this.timer = setTimeout(function () {\n            // 根据pid查找上级分类所在的对象\n            console.log(_this.options);\n            console.log(_this.getViewCategoryInfo.pid); // recursive.call(this, this.options, this.getViewCategoryInfo.pid)\n            // console.log(this.categorySuperiorContent)\n            // 公司分类详情回填\n\n            detailInfoShow.call(_this, _this.getViewCategoryInfo.remark === null ? '无备注' : _this.getViewCategoryInfo.remark, _this.getViewCategoryInfo.name, null, _this.getViewCategoryInfo.parentClassname);\n          }, 200);\n        }\n      }\n    },\n    // 公司客户分类radio\n    onChangeCategoryRadio: function onChangeCategoryRadio(e) {\n      console.log(e.target.value);\n\n      if (e.target.value === 1) {\n        this.categoryName = true;\n        getGoodsList.call(this);\n        return false;\n      }\n\n      this.categoryName = false;\n      getListCompanyCusts.call(this);\n    },\n    // 一级新建列表遮罩显示\n    onClose: function onClose() {\n      this.isVisible = false;\n      this.$emit('isVisible', this.isVisible);\n    },\n    // 新增信息提交\n    onSubmit: function onSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      this.loading = true;\n      this.cateGoryInfo.validateFields(function (err, values) {\n        if (!err) {\n          console.log(values);\n          var params = {\n            catType: 0,\n            name: values.categoryClassName || '',\n            pid: values.categorySuperiorOK ? values.categorySuperiorOK.slice(-1).join('') : 0,\n            custId: values.categoryCustomer || 0,\n            remark: values.categoryRemarks || ''\n          };\n          console.log(params);\n          postCategoryAdd.call(_this2, params);\n          _this2.loading = false;\n          return false;\n        }\n\n        _this2.loading = false;\n      });\n    },\n    // 上级分类\n    onChangeCategoryName: function onChangeCategoryName(value) {\n      console.log(value);\n    },\n    // 所属客户\n    onSelectCategoryName: function onSelectCategoryName(value) {\n      console.log(value);\n      getCustList.call(this, value);\n    },\n    // 详情页编辑\n    onHandleCategoryEdit: function onHandleCategoryEdit() {\n      // 上级分类隐藏域\n      if (this.categoryEdit === '点击编辑') {\n        this.isCategorySuperior = false;\n        this.isDisabled = false;\n        this.categoryEdit = '取消编辑';\n        return false;\n      }\n\n      this.isCategorySuperior = true;\n      this.isDisabled = true;\n      this.categoryEdit = '点击编辑';\n    },\n    // 删除\n    onhandleDeleteCategoty: function onhandleDeleteCategoty() {\n      var that = this;\n      this.$confirm({\n        title: '删除',\n        content: '您确认要删除？',\n        okText: '删除',\n        okType: 'danger',\n        cancelText: '取消',\n        onOk: function onOk() {\n          deleteCategory.call(that, that.getViewCategoryInfo.id);\n        },\n        onCancel: function onCancel() {\n          console.log('Cancel');\n        }\n      });\n    },\n    // 保存修改\n    onEditSave: function onEditSave(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n      this.loading = true;\n      this.cateGoryInfo.validateFields(function (err, values) {\n        if (!err) {\n          console.log(values);\n          var params = {\n            name: values.categoryClassName || '',\n            pid: values.categorySuperiorOK ? values.categorySuperiorOK.slice(-1).join('') : 0,\n            custId: _this3.getViewCategoryInfo.custId || 0,\n            remark: values.categoryRemarks || '',\n            id: _this3.getViewCategoryInfo.id\n          };\n          console.log(params);\n          onSave.call(_this3, params);\n          _this3.loading = false;\n          return false;\n        }\n\n        _this3.loading = false;\n      });\n    }\n  }\n};",{"version":3,"sources":["categoryInfo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"cateGoryInfo\">\n    <a-form :form=\"cateGoryInfo\" layout=\"horizontal\">\n      <a-row :gutter=\"16\">\n        <a-col :span=\"24\" class=\"categoryEdit-wrapper\" v-if=\"isCategoryEdit\">\n          <a-button\n            type=\"danger\"\n            size=\"small\"\n            @click=\"onhandleDeleteCategoty\"\n            class=\"categoryDetele\"\n          >删除</a-button>\n          <a-button\n            type=\"primary\"\n            size=\"small\"\n            @click=\"onHandleCategoryEdit\"\n            class=\"categoryEdit\"\n          >{{ categoryEdit }}</a-button>\n        </a-col>\n        <a-col :span=\"24\">\n          <h3 class=\"cateGoryInfo-title\">客户信息</h3>\n        </a-col>\n        <a-col :span=\"24\">\n          <a-row>\n            <a-col :span=\"24\">\n              <a-form-item :wrapper-col=\"{ span: 16, offset: 2 }\">\n                <a-radio-group @change=\"onChangeCategoryRadio\" v-model=\"value\">\n                  <a-radio :value=\"1\">公司分类</a-radio>\n                  <a-radio :value=\"2\">客户分类</a-radio>\n                </a-radio-group>\n              </a-form-item>\n            </a-col>\n            <!-- 客户分类 -->\n            <a-col :span=\"24\" v-show=\"!categoryName\">\n              <a-row :gutter=\"20\">\n                <a-col :span=\"12\">\n                  <a-form-item\n                    label=\"所属客户\"\n                    :label-col=\"{ span: 4, offset: 4 }\"\n                    :wrapper-col=\"{ span: 14 }\"\n                  >\n                    <a-select\n                      v-decorator=\"['categoryCustomer']\"\n                      placeholder=\"请输入所属客户\"\n                      style=\"width: 200px\"\n                      @change=\"onSelectCategoryName\"\n                      :disabled=\"isDisabled\"\n                    >\n                      <a-select-option\n                        v-for=\"(item, index) in selectOptions\"\n                        :key=\"index\"\n                        :value=\"item.custId\"\n                      >{{ item.name }}</a-select-option>\n                    </a-select>\n                  </a-form-item>\n                </a-col>\n              </a-row>\n            </a-col>\n            <!-- 公司分类 -->\n            <a-col :span=\"24\">\n              <a-form-item label=\"分类名称\" :label-col=\"{ span: 4 }\" :wrapper-col=\"{ span: 16 }\">\n                <a-input\n                  :disabled=\"isDisabled\"\n                  v-decorator=\"[\n                    'categoryClassName',\n                    {rules: [{ required: true, message: '请输入分类名称' }]}\n                  ]\"\n                  placeholder=\"请输入分类名称\"\n                />\n              </a-form-item>\n            </a-col>\n          </a-row>\n        </a-col>\n        <a-col :span=\"24\">\n          <a-form-item\n            v-show=\"isCategorySuperior\"\n            label=\"上级分类\"\n            :label-col=\"{ span: 4 }\"\n            :wrapper-col=\"{ span: 16 }\"\n          >\n            <a-input\n              v-decorator=\"['categorySuperiorNO']\"\n              placeholder=\"请输入分类名称\"\n              :disabled=\"isDisabled\"\n            />\n          </a-form-item>\n          <a-form-item\n            v-show=\"!isCategorySuperior\"\n            label=\"上级分类\"\n            :label-col=\"{ span: 4 }\"\n            :wrapper-col=\"{ span: 16 }\"\n          >\n            <a-cascader\n              v-decorator=\"['categorySuperiorOK']\"\n              :options=\"options\"\n              :fieldNames=\"{ label: 'name', value: 'id', children: 'childrens' }\"\n              @change=\"onChangeCategoryName\"\n              placeholder=\"请输入分类名称\"\n              class=\"addInput\"\n              changeOnSelect\n            />\n          </a-form-item>\n        </a-col>\n        <a-col :span=\"24\">\n          <a-row>\n            <a-col :span=\"24\">\n              <a-form-item label=\"备注\" :label-col=\"{ span: 4 }\" :wrapper-col=\"{ span: 16 }\">\n                <a-input\n                  :disabled=\"isDisabled\"\n                  v-decorator=\"['categoryRemarks']\"\n                  placeholder=\"请输入备注\"\n                />\n              </a-form-item>\n            </a-col>\n          </a-row>\n        </a-col>\n      </a-row>\n    </a-form>\n    <div\n      :style=\"{\n          position: 'absolute',\n          left: 0,\n          bottom: 0,\n          width: '100%',\n          borderTop: '1px solid #e9e9e9',\n          padding: '10px 16px',\n          background: '#fff',\n          textAlign: 'right',\n        }\"\n    >\n      <a-button :style=\"{marginRight: '8px'}\" @click=\"onClose\">取消</a-button>\n      <a-button @click=\"onSubmit\" type=\"primary\" v-if=\"!isCategoryEdit\" :loading=\"loading\">提交</a-button>\n      <a-button\n        @click=\"onEditSave\"\n        type=\"primary\"\n        v-if=\"isCategoryEdit\"\n        :disabled=\"isDisabled\"\n        :loading=\"loading\"\n      >保存</a-button>\n    </div>\n  </div>\n</template>\n<script>\nimport {\n  getGoodsList,\n  getListCompanyCusts,\n  getCustList,\n  postCategoryAdd,\n  detailInfoShow,\n  deleteCategory,\n  onSave\n} from './getCategory.js'\nimport { setTimeout } from 'timers'\nimport { recursive } from 'utils/utils.js'\n\nexport default {\n  name: 'CateGoryInfo',\n  data() {\n    return {\n      loading: false,\n      cateGoryInfo: this.$form.createForm(this),\n      value: 1,\n      categoryName: true,\n      isCategorySuperior: false,\n      isDisabled: false,\n      selectOptions: [],\n      options: [],\n      timer: null,\n      // categoryEdit: this.isEdit,\n      getViewCategoryInfo: null,\n      categorySuperiorContent: '',\n      categoryEdit: '点击编辑'\n    }\n  },\n  props: {\n    isEdit: {\n      type: Boolean,\n      default: false\n    },\n    viewCategoryInfo: {\n      type: Object,\n      default: function() {\n        return {}\n      }\n    }\n  },\n  created() {\n    // 公司分类获取所有上级分类\n    getGoodsList.call(this)\n    getListCompanyCusts.call(this)\n  },\n  mounted() {\n    // 设置默认值\n  },\n  beforeDestroy() {\n    // 清空定时器\n    clearTimeout(this.timer)\n  },\n  watch: {\n    viewCategoryInfo: {\n      handler: function(val) {\n        this.getViewCategoryInfo = val\n        this.showViewCategory()\n      },\n      deep: true\n    }\n  },\n  computed: {\n    isCategoryEdit() {\n      return this.isEdit\n    }\n  },\n  methods: {\n    // 产品分类详情信息展示watch\n    showViewCategory() {\n      // 上级分类隐藏域\n      this.isCategorySuperior = true\n      this.isDisabled = true\n      // 清空数组\n      this.options = []\n      console.log(this.getViewCategoryInfo.custId)\n      // // 判断是否编辑状态\n      if (this.isCategoryEdit) {\n        // 显示客户分类\n        if (Number(this.getViewCategoryInfo.custId) !== 0) {\n          // 获取客户上级分类\n          getCustList.call(this, this.getViewCategoryInfo.custId)\n          // radio\n          this.value = 2\n          // 公司|客户分类\n          this.categoryName = false\n          // 查找客户所属名称\n          this.timer = setTimeout(() => {\n            const customerFrom = this.selectOptions.filter(item => {\n              return item.custId === this.getViewCategoryInfo.custId\n            })\n            console.log(customerFrom[0].name)\n            console.log(this.getViewCategoryInfo.pid)\n            // // 根据pid查找上级分类所在的对象\n            // recursive.call(this, this.options, this.getViewCategoryInfo.pid)\n            // console.log(this.categorySuperiorContent)\n            // 客户分类详情回填\n            detailInfoShow.call(\n              this,\n              this.getViewCategoryInfo.remark === null\n                ? ''\n                : this.getViewCategoryInfo.remark,\n              this.getViewCategoryInfo.name,\n              customerFrom[0].name,\n              this.getViewCategoryInfo.parentClassname\n            )\n          }, 200)\n        }\n        // 显示公司分类\n        if (Number(this.getViewCategoryInfo.custId) === 0) {\n          this.value = 1\n          // 获取上级分类总列表\n          getGoodsList.call(this)\n          this.timer = setTimeout(() => {\n            // 根据pid查找上级分类所在的对象\n            console.log(this.options)\n            console.log(this.getViewCategoryInfo.pid)\n            // recursive.call(this, this.options, this.getViewCategoryInfo.pid)\n            // console.log(this.categorySuperiorContent)\n            // 公司分类详情回填\n            detailInfoShow.call(\n              this,\n              this.getViewCategoryInfo.remark === null\n                ? '无备注'\n                : this.getViewCategoryInfo.remark,\n              this.getViewCategoryInfo.name,\n              null,\n              this.getViewCategoryInfo.parentClassname\n            )\n          }, 200)\n        }\n      }\n    },\n    // 公司客户分类radio\n    onChangeCategoryRadio(e) {\n      console.log(e.target.value)\n      if (e.target.value === 1) {\n        this.categoryName = true\n        getGoodsList.call(this)\n        return false\n      }\n      this.categoryName = false\n      getListCompanyCusts.call(this)\n    },\n    // 一级新建列表遮罩显示\n    onClose() {\n      this.isVisible = false\n      this.$emit('isVisible', this.isVisible)\n    },\n    // 新增信息提交\n    onSubmit(e) {\n      e.preventDefault()\n      this.loading = true\n      this.cateGoryInfo.validateFields((err, values) => {\n        if (!err) {\n          console.log(values)\n          const params = {\n            catType: 0,\n            name: values.categoryClassName || '',\n            pid: values.categorySuperiorOK\n              ? values.categorySuperiorOK.slice(-1).join('')\n              : 0,\n            custId: values.categoryCustomer || 0,\n            remark: values.categoryRemarks || ''\n          }\n          console.log(params)\n          postCategoryAdd.call(this, params)\n          this.loading = false\n          return false\n        }\n        this.loading = false\n      })\n    },\n    // 上级分类\n    onChangeCategoryName(value) {\n      console.log(value)\n    },\n    // 所属客户\n    onSelectCategoryName(value) {\n      console.log(value)\n      getCustList.call(this, value)\n    },\n    // 详情页编辑\n    onHandleCategoryEdit() {\n      // 上级分类隐藏域\n      if (this.categoryEdit === '点击编辑') {\n        this.isCategorySuperior = false\n        this.isDisabled = false\n        this.categoryEdit = '取消编辑'\n        return false\n      }\n      this.isCategorySuperior = true\n      this.isDisabled = true\n      this.categoryEdit = '点击编辑'\n    },\n    // 删除\n    onhandleDeleteCategoty() {\n      const that = this\n      this.$confirm({\n        title: '删除',\n        content: '您确认要删除？',\n        okText: '删除',\n        okType: 'danger',\n        cancelText: '取消',\n        onOk() {\n          deleteCategory.call(that, that.getViewCategoryInfo.id)\n        },\n        onCancel() {\n          console.log('Cancel')\n        }\n      })\n    },\n    // 保存修改\n    onEditSave(e) {\n      e.preventDefault()\n      this.loading = true\n      this.cateGoryInfo.validateFields((err, values) => {\n        if (!err) {\n          console.log(values)\n          const params = {\n            name: values.categoryClassName || '',\n            pid: values.categorySuperiorOK\n              ? values.categorySuperiorOK.slice(-1).join('')\n              : 0,\n            custId: this.getViewCategoryInfo.custId || 0,\n            remark: values.categoryRemarks || '',\n            id: this.getViewCategoryInfo.id\n          }\n          console.log(params)\n          onSave.call(this, params)\n          this.loading = false\n          return false\n        }\n        this.loading = false\n      })\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n@import '~styles/variable.less';\n\n.cateGoryInfo {\n  .cateGoryInfo-title {\n    .h3_title();\n  }\n  .categoryEdit-wrapper {\n    margin: 10px 0;\n    .categoryEdit {\n      float: right;\n    }\n    .categoryDetele {\n      float: right;\n      margin: 0 10px;\n    }\n  }\n  .category-detail {\n    margin-left: 30px;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/product/category"}]}