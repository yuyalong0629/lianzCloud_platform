{"remainingRequest":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/sale/orderList/orderDetial.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/src/views/sale/orderList/orderDetial.vue","mtime":1559179259597},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.regexp.split\";\nimport _parseFloat from \"/Users/yuyalong/myProjects/lianzhiyun/projects/web-project/platform/node_modules/@babel/runtime-corejs2/core-js/parse-float\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport addAddress from './addAddress'; // import GoodsInfo from '../../product/goods/GoodsInfo'\n\nimport { areas } from 'utils/area.js';\nimport { postJson, get, put, deleted } from '@/api/axios.js';\nimport api from '@/api/index.js';\nimport GoodsInfo from '../../product/pdm/goods2/GoodsInfo';\nimport moment from 'moment';\nimport { getListCompanyGoods, getListCompanyCusts, getListCustomerGoods } from './menu.js';\nimport baseURL from '@/api/config';\nvar url = baseURL + '/ic/user/file/uploadFile';\nvar columns = [{\n  title: '产品名称',\n  dataIndex: 'odSkuName',\n  scopedSlots: {\n    customRender: 'name'\n  },\n  width: 120\n}, {\n  title: '产品规格',\n  dataIndex: 'odSpec',\n  width: 120\n}, {\n  title: '单价',\n  dataIndex: 'odSkuCustPrice',\n  scopedSlots: {\n    customRender: 'odSkuCustPrice'\n  }\n}, {\n  title: '数量',\n  dataIndex: 'odNumber',\n  scopedSlots: {\n    customRender: 'odNumber'\n  }\n}, {\n  title: '总计',\n  dataIndex: 'odAmount',\n  scopedSlots: {\n    customRender: 'odAmount'\n  }\n}, {\n  title: '客户编码',\n  dataIndex: 'odSkuCustCode'\n}, {\n  title: '采购单号',\n  dataIndex: 'odPurchaseOrderno',\n  scopedSlots: {\n    customRender: 'odPurchaseOrderno'\n  }\n}, {\n  title: '要求交期',\n  dataIndex: 'odRequireDueDate',\n  scopedSlots: {\n    customRender: 'odRequireDueDate'\n  }\n}, {\n  title: '承诺交期',\n  dataIndex: 'odPromiseDueDate',\n  scopedSlots: {\n    customRender: 'odPromiseDueDate'\n  }\n}, {\n  title: '',\n  scopedSlots: {\n    customRender: 'operation'\n  },\n  width: 80\n}];\nvar formItemLayout = {\n  labelCol: {\n    span: 6\n  },\n  wrapperCol: {\n    span: 18\n  }\n};\nexport default {\n  props: ['detialList', 'ocustAmaldarList'],\n  components: {\n    GoodsInfo: GoodsInfo,\n    addAddress: addAddress\n  },\n  data: function data() {\n    return {\n      dateFormat: 'YYYY/MM/DD',\n      towVisible: false,\n      customerPage: 1,\n      formItemLayout: formItemLayout,\n      columns: columns,\n      mallOrderIntactDto: {\n        addrId: '',\n        // 地址ID\n        opurchaseOrderno: '',\n        //客户单号\n        custId: '',\n        // 商城客户id\n        ocustShortName: '',\n        //客户简称\n        ototalSum: '',\n        // 总金额，订单总计（销售总计）\n        oattachment: '',\n        //上传附件 1\n        oprePayment: '',\n        //预收款\n        oremarks: '' //备注\n\n      },\n      dataSource: [],\n      isAddContactInfo: false,\n      headers: {\n        'AUTH-TOKEN': localStorage.getItem('ACCESS_TOKEN'),\n        companyId: localStorage.getItem('companyId')\n      },\n      editDetial: false,\n      fileList: [],\n      // 附件列表\n      uploadFile: [],\n      ocustName: '',\n      listCompanyCusts: [],\n      ocustNameList: [],\n      // 客户名称\n      ocustCodeList: [],\n      // 客户编码\n      listCustomerGoods: [],\n      //商品信息\n      odSkuCodeList: [],\n      // 产品编码\n      odSpecList: [],\n      // 产品规格\n      buttons: [],\n      isInfoDisplay: {\n        display: 'none'\n      },\n      submitLoading: false,\n      url: url,\n      previewVisible: false,\n      previewImage: '',\n      setGoodsViews: {},\n      isCatId: '',\n      isCustId: '',\n      isEdit: true,\n      addressList: [],\n      visible: false\n    };\n  },\n  created: function created() {\n    this.getOrderDetail(this.detialList);\n    getListCompanyGoods.call(this);\n    getListCompanyCusts.call(this);\n  },\n  methods: {\n    moment: moment,\n    callback: function callback(key) {\n      console.log(key);\n    },\n    // 订单总价计算\n    setOtotalSum: function setOtotalSum(data) {\n      var ototalSum = 0;\n\n      for (var i in data) {\n        ototalSum += _parseFloat(data[i].odAmount);\n      }\n\n      this.mallOrderIntactDto.ototalSum = ototalSum;\n    },\n    handleCancel: function handleCancel() {\n      this.previewVisible = false;\n    },\n    handlePreview: function handlePreview(file) {\n      this.previewImage = file.url || file.thumbUrl;\n      this.previewVisible = true;\n    },\n    // 图片上传/修改时的操作\n    handleChange: function handleChange(_ref) {\n      var fileList = _ref.fileList;\n      this.fileList = fileList;\n      var uploadFile = [];\n\n      for (var i in fileList) {\n        if (fileList[i].response) {\n          uploadFile.push(fileList[i].response.data);\n        } else {\n          uploadFile.push(fileList[i].url);\n        }\n      }\n\n      this.uploadFile = uploadFile;\n    },\n    // 取消订单详情的修改/查看\n    cancelHandle: function cancelHandle() {\n      this.editDetial = false;\n      this.$emit('orderDetialInfo', false);\n    },\n    // 订单修改 提交并退出\n    orderSubmit: function orderSubmit() {\n      var _this2 = this;\n\n      this.submitLoading = true;\n      this.dataSource.forEach(function (item) {\n        delete item.sku;\n      });\n\n      if (this.dataSource.length == 0) {\n        this.$message.warning('请添加购买商品');\n        return;\n      }\n\n      this.mallOrderIntactDto.orderDetails = this.dataSource;\n      this.mallOrderIntactDto.oattachment = this.uploadFile.join(',');\n      delete this.mallOrderIntactDto.skuList;\n      put(api.updateOrder, this.mallOrderIntactDto).then(function (res) {\n        if (res.data.code === 0) {\n          _this2.$message.success('修改成功');\n\n          _this2.$emit('orderDetialInfo', false);\n        } else {\n          _this2.$message.error(res.data.msg);\n        }\n\n        _this2.submitLoading = false;\n      });\n    },\n    // 获取订单详情\n    getOrderDetail: function getOrderDetail(id) {\n      var _this3 = this;\n\n      get(api.getOrderDetail + \"\".concat(id)).then(function (res) {\n        _this3.mallOrderIntactDto = res.data.data;\n        var skuList = res.data.data.skuList;\n        var oattachment = res.data.data.oattachment;\n\n        for (var i in skuList) {\n          skuList[i].key = i;\n          skuList[i].opurchaseOrderno = _this3.detialList.opurchaseOrderno;\n          skuList[i].ocustCode = _this3.detialList.ocustCode;\n        }\n\n        _this3.dataSource = skuList;\n\n        if (oattachment) {\n          var oattachmentObj = [];\n          var oattachmentList = oattachment.split(',');\n\n          for (var _i in oattachmentList) {\n            oattachmentObj.push({\n              uid: _i,\n              name: \"\".concat(_i),\n              status: 'done',\n              url: oattachmentList[_i]\n            });\n          }\n\n          _this3.fileList = oattachmentObj;\n        }\n\n        _this3.getAddressList(res.data.data.custId); // this.detial = true;\n\n      });\n    },\n    // 是否进行订单修改\n    orderDetialEdit: function orderDetialEdit() {\n      var newData = _toConsumableArray(this.dataSource);\n\n      if (!this.editDetial) {\n        this.isInfoDisplay.display = 'block';\n        this.editDetial = true;\n      } else {\n        newData.forEach(function (item) {\n          delete item.editable;\n        });\n        this.isInfoDisplay.display = 'none';\n        this.editDetial = false;\n      }\n    },\n    // 选择框下来状态\n    currentPageChange: function currentPageChange(e) {\n      var boxHeigth = e.target.scrollHeight - 1;\n      var box = {\n        scrollTop: e.target.scrollTop\n      };\n\n      if (_parseFloat(getComputedStyle(document.querySelector('.ant-select-dropdown-content')).height) + box.scrollTop > boxHeigth) {\n        getListCompanyCusts.call(this, this.customerPage);\n      }\n    },\n    // 删除订单\n    orderDetele: function orderDetele() {\n      var _this = this;\n\n      var idStr = this.mallOrderIntactDto.id;\n      this.$confirm({\n        title: '您确定要删除订单信息吗？',\n        content: '当您点击确定过后将删除选中的订单信息',\n        cancelText: '取消',\n        okText: '确定',\n        onOk: function onOk() {\n          deleted(api.deletedBatch + \"?idStr=\".concat(idStr)).then(function (res) {\n            if (res.data.code === 0) {\n              _this.$emit('orderDetialInfo', false);\n\n              _this.$message.success('删除成功');\n            }\n          });\n        },\n        onCancel: function onCancel() {}\n      });\n    },\n    onClose: function onClose() {\n      this.towVisible = false;\n    },\n    isVisible: function isVisible(_isVisible) {\n      this.towVisible = _isVisible;\n    },\n    getGoodsViews: function getGoodsViews(skuId, catId) {\n      var _this4 = this;\n\n      this.isCatId = catId ? '`${catId}`' : '';\n      get(api.goodsView, {\n        skuId: skuId\n      }).then(function (res) {\n        if (res.data.code === 0) {\n          _this4.setGoodsViews = res.data.data;\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n      this.towVisible = true;\n    },\n    // 地址添加\n    addAddress: function addAddress() {\n      this.visible = true;\n    },\n    // 关闭地址新增\n    addressCancel: function addressCancel(data) {\n      if (data) {\n        this.getAddressList(this.mallOrderIntactDto.custId);\n      }\n\n      this.visible = false;\n    },\n    // 通过客户Id查询地址列表\n    getAddressList: function getAddressList(id) {\n      var _this5 = this;\n\n      get(api.getAddressList + \"/\".concat(id)).then(function (res) {\n        var data = res.data.data;\n        _this5.addressList = data;\n      });\n    },\n    // 选择地址\n    choseAddress: function choseAddress(index, id) {\n      if (!this.editDetial) {\n        return;\n      }\n\n      this.mallOrderIntactDto.addrId = id;\n    },\n    // 编辑产品详情\n    edit: function edit(key) {\n      var newData = _toConsumableArray(this.dataSource);\n\n      var target = newData.filter(function (item) {\n        return key === item.key;\n      })[0];\n\n      if (target) {\n        target.editable = true;\n        this.dataSource = newData;\n      }\n    },\n    // 产品列表数据修改\n    editCell: function editCell(value, key, column) {\n      var newData = _toConsumableArray(this.dataSource);\n\n      var target = newData.filter(function (item) {\n        return key === item.key;\n      })[0];\n\n      if (target) {\n        target[column] = value;\n\n        if (column === 'odNumber' || column === 'odSkuCustPrice') {\n          target['odAmount'] = target['odNumber'] * target['odSkuCustPrice'];\n        }\n\n        this.dataSource = newData;\n        this.setOtotalSum(newData);\n      }\n    },\n    // 保存修改\n    save: function save(key) {\n      var newData = _toConsumableArray(this.dataSource);\n\n      var target = newData.filter(function (item) {\n        return key === item.key;\n      })[0];\n\n      if (target) {\n        delete target.editable;\n        this.dataSource = newData;\n        this.setOtotalSum(newData);\n      }\n    },\n    // 删除当前行\n    cancel: function cancel(key) {\n      var newData = _toConsumableArray(this.dataSource);\n\n      var target = newData.filter(function (item) {\n        return key !== item.key;\n      });\n      this.dataSource = target;\n      this.setOtotalSum(newData);\n    }\n  }\n};",{"version":3,"sources":["orderDetial.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"order-list\">\n    <div class=\"add-order-list\">\n      <a-tabs defaultActiveKey=\"1\" @change=\"callback\">\n        <a-tab-pane key=\"0\" disabled>\n          <span slot=\"tab\" style=\"color:#666;font-size:16px;\">订单信息</span>\n        </a-tab-pane>\n        <a-tab-pane tab=\"销售订单信息\" key=\"1\">\n          <a-form layout=\"horizontal\">\n            <a-row :gutter=\"24\">\n              <a-col :span=\"24\">\n                <h3 class=\"addCustomer-title\">订单详情</h3>\n              </a-col>\n              <a-col :span=\"8\">\n                <a-form-item\n                  label=\"订单编码\"\n                  :label-col=\"formItemLayout.labelCol\"\n                  :wrapper-col=\"formItemLayout.wrapperCol\"\n                >\n                  <a-input disabled :value=\"mallOrderIntactDto.oorderNumber\"/>\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"8\">\n                <a-form-item\n                  label=\"客户名称\"\n                  :label-col=\"formItemLayout.labelCol\"\n                  :wrapper-col=\"formItemLayout.wrapperCol\"\n                >\n                  <a-input disabled :value=\"mallOrderIntactDto.ocustName\"/>\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"8\">\n                <a-form-item\n                  label=\"客户单号\"\n                  :label-col=\"formItemLayout.labelCol\"\n                  :wrapper-col=\"formItemLayout.wrapperCol\"\n                >\n                  <a-input\n                    v-model=\"mallOrderIntactDto.opurchaseOrderno\"\n                    placeholder=\"请输入客户单号\"\n                    :disabled=\"editDetial === false\"\n                  />\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"8\">\n                <a-form-item\n                  label=\"订单类型\"\n                  :label-col=\"formItemLayout.labelCol\"\n                  :wrapper-col=\"formItemLayout.wrapperCol\"\n                >\n                  <a-select disabled :value=\"mallOrderIntactDto.otype\">\n                    <a-icon slot=\"suffixIcon\" type=\"down\" style=\"display:none\"/>\n                    <a-select-option value=\"0\">正式</a-select-option>\n                    <a-select-option value=\"1\">样品</a-select-option>\n                    <a-select-option value=\"2\">季度返点</a-select-option>\n                  </a-select>\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"8\">\n                <a-form-item\n                  label=\"总计\"\n                  :label-col=\"formItemLayout.labelCol\"\n                  :wrapper-col=\"formItemLayout.wrapperCol\"\n                >\n                  <a-input\n                    placeholder=\"请输入订单总计\"\n                    v-model=\"mallOrderIntactDto.ototalSum\"\n                    :disabled=\"editDetial === false\"\n                  />\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"8\">\n                <a-form-item\n                  label=\"预收款\"\n                  :label-col=\"formItemLayout.labelCol\"\n                  :wrapper-col=\"formItemLayout.wrapperCol\"\n                >\n                  <a-input\n                    placeholder=\"请输入预收款\"\n                    v-model=\"mallOrderIntactDto.oprePayment\"\n                    :disabled=\"editDetial === false\"\n                  />\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"8\">\n                <a-form-item\n                  label=\"状态\"\n                  :label-col=\"formItemLayout.labelCol\"\n                  :wrapper-col=\"formItemLayout.wrapperCol\"\n                >\n                  <a-select disabled :value=\"mallOrderIntactDto.ostatus\">\n                    <a-icon slot=\"suffixIcon\" type=\"down\" style=\"display:none\"/>\n                    <a-select-option value=\"PREORDER\">预订单</a-select-option>\n                    <a-select-option value=\"SUBMISSIONORDER\">已提交</a-select-option>\n                    <a-select-option value=\"ACCEPTORDER\">已接单</a-select-option>\n                    <a-select-option value=\"REJECTORDE\">已拒单</a-select-option>\n                    <a-select-option value=\"FINISH\">已完成</a-select-option>\n                    <a-select-option value=\"CANCEL\">已取消</a-select-option>\n                    <a-select-option value=\"HAVEDELLIVERY\">已经发货</a-select-option>\n                    <a-select-option value=\"PARTDELLIVERY\">部分发货</a-select-option>\n                    <a-select-option value=\"UNDELLIVERY\">未发货</a-select-option>\n                    <a-select-option value=\"ALREADYLIVERY\">已签收</a-select-option>\n                  </a-select>\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"8\">\n                <a-form-item\n                  label=\"备注\"\n                  :label-col=\"formItemLayout.labelCol\"\n                  :wrapper-col=\"formItemLayout.wrapperCol\"\n                >\n                  <a-input v-model=\"mallOrderIntactDto.oremarks\" :disabled=\"editDetial === false\"/>\n                </a-form-item>\n              </a-col>\n            </a-row>\n            <!-- <a-row :gutter=\"24\" style=\"margin-top:10px\">\n            <a-col :span=\"24\">\n              <h3 class=\"addCustomer-title\">订单分配</h3>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"计划员：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input placeholder=\"请输入订单编号\" />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"工厂厂长：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-input placeholder=\"请输入净价总价\" />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"8\">\n              <a-form-item\n                label=\"生产基地：\"\n                :label-col=\"formItemLayout.labelCol\"\n                :wrapper-col=\"formItemLayout.wrapperCol\"\n              >\n                <a-cascader\n                  :options=\"areas\"\n                  placeholder=\"请选择生产基地\"\n                  :fieldNames=\"{label:'name',value:'id',children:'childrens'}\"\n                  style=\"width:240px\"\n                />\n              </a-form-item>\n            </a-col>\n            </a-row>-->\n          </a-form>\n          <a-row :gutter=\"24\" style=\"margin-top:10px\">\n            <a-col :span=\"24\">\n              <h3 class=\"addCustomer-title\">产品详情</h3>\n            </a-col>\n            <a-table :columns=\"columns\" :dataSource=\"dataSource\" :pagination=\"false\">\n              <template slot=\"name\" slot-scope=\"text,record\">\n                <a href=\"javascript:;\">{{record.odSkuName}}-{{record.odSkuCode}}</a>\n              </template>\n              <template\n                v-for=\"col in ['odSkuCustPrice', 'odNumber', 'odAmount','odPurchaseOrderno','odRequireDueDate','odPromiseDueDate']\"\n                :slot=\"col\"\n                slot-scope=\"text, record\"\n              >\n                <div :key=\"col\">\n                  <a-input\n                    v-if=\"record.editable && col!=='odRequireDueDate' && col !== 'odPromiseDueDate'\"\n                    style=\"width:60px;\"\n                    :value=\"text\"\n                    @change=\"e => editCell(e.target.value, record.key, col)\"\n                  />\n                  <a-date-picker\n                    v-else-if=\"record.editable && (col ==='odRequireDueDate' || col === 'odPromiseDueDate')\"\n                    style=\"width:100px;\"\n                    :defaultValue=\"moment(text)\"\n                    @change=\"(value,dateString) => editCell(dateString, record.key, col)\"\n                  />\n\n                  <template v-else>\n                    <span\n                      v-if=\"col ==='odRequireDueDate' || col === 'odPromiseDueDate'\"\n                    >{{moment(text).format('YYYY-MM-DD')}}</span>\n                    <span v-else>{{text}}</span>\n                  </template>\n                </div>\n              </template>\n              <template slot=\"operation\" slot-scope=\"text, record\" v-if=\"editDetial !== false\">\n                <div class=\"editable-row-operations\">\n                  <span v-if=\"record.editable\">\n                    <a @click=\"() => save(record.key)\">\n                      <a-button type=\"primary\" shape=\"circle\" icon=\"edit\" class=\"edit-btn\"></a-button>\n                    </a>\n                    <a-popconfirm title=\"确认删除吗?\" @confirm=\"() => cancel(record.key)\">\n                      <a-button type=\"danger\" shape=\"circle\" icon=\"delete\" class=\"edit-btn\"></a-button>\n                    </a-popconfirm>\n                  </span>\n                  <span v-else>\n                    <a @click=\"() => edit(record.key)\">编辑</a>\n                  </span>\n                </div>\n              </template>\n            </a-table>\n          </a-row>\n          <a-row :gutter=\"24\" style=\"margin-top:20px;margin-bottom:40px;\">\n            <a-col :span=\"24\">\n              <h3 class=\"addCustomer-title\">收货地址</h3>\n            </a-col>\n            <a-col :span=\"24\">\n              <div\n                class=\"address-list\"\n                v-for=\"(item,index) in addressList\"\n                :key=\"item.id\"\n                @click=\"choseAddress(index,item.id)\"\n              >\n                <div\n                  class=\"address-list-item\"\n                  :class=\"{'item-active':item.id === mallOrderIntactDto.addrId}\"\n                  v-if=\"item.id === mallOrderIntactDto.addrId||editDetial !== false\"\n                >\n                  <div class=\"address-list-item-desc\">\n                    {{mallOrderIntactDto.ocustName}}\n                    <ul>\n                      <li>收件人：{{item.receiver}}</li>\n                      <li>联系方式：{{item.phone}}</li>\n                      <li>地址：{{item.cityStr}}{{item.provinceStr}}{{item.areaStr}}{{item.detailAddr}}</li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n              <span\n                class=\"editable-add-btn\"\n                style=\"margin:10px;\"\n                @click=\"addAddress\"\n                v-if=\"editDetial !== false\"\n              >+添加地址</span>\n            </a-col>\n          </a-row>\n          <a-row :gutter=\"24\" style=\"margin-top:10px;margin-bottom:40px\">\n            <a-col :span=\"24\">\n              <h3 class=\"addCustomer-title\">附件</h3>\n              <a-upload\n                :disabled=\"!editDetial\"\n                :action=\"url\"\n                :data=\"{'bizType': 'ORDER'}\"\n                :headers=\"headers\"\n                listType=\"picture-card\"\n                :fileList=\"fileList\"\n                @preview=\"handlePreview\"\n                @change=\"handleChange\"\n              >\n                <div>\n                  <a-icon type=\"plus\"/>\n                  <div class=\"ant-upload-text\">Upload</div>\n                </div>\n                <a-modal :visible=\"previewVisible\" :footer=\"null\" @cancel=\"handleCancel\">\n                  <img alt=\"example\" style=\"width: 100%\" :src=\"previewImage\">\n                </a-modal>\n              </a-upload>\n            </a-col>\n          </a-row>\n          <a-drawer\n            placement=\"right\"\n            :closable=\"false\"\n            @close=\"onClose\"\n            :visible=\"towVisible\"\n            :wrapStyle=\"{overflow: 'auto',paddingBottom: '108px'}\"\n            :width=\"1080\"\n          >\n            <GoodsInfo\n              @isVisible=\"isVisible\"\n              :setGoodsViews=\"setGoodsViews\"\n              :isCatId=\"isCatId\"\n              :isEdit=\"isEdit\"\n              :isCustId=\"isCustId\"\n            ></GoodsInfo>\n          </a-drawer>\n        </a-tab-pane>\n        <a-tab-pane tab=\"生产信息\" key=\"2\">生产信息</a-tab-pane>\n        <a-tab-pane tab=\"质检信息\" key=\"3\">质检信息</a-tab-pane>\n        <a-tab-pane tab=\"仓储信息\" key=\"4\">仓储信息</a-tab-pane>\n        <a-tab-pane tab=\"发货信息\" key=\"5\">发货信息</a-tab-pane>\n      </a-tabs>\n      <div class=\"edit\">\n        <span @click=\"orderDetialEdit\">{{!editDetial?'编辑':'取消编辑'}}</span>\n        <span @click=\"orderDetele\">删除</span>\n        <!-- <a-button>打印</a-button> -->\n        <!-- <a-button>更多</a-button> -->\n      </div>\n    </div>\n    <div\n      :style=\"{\n          position: 'absolute',\n          left: 0,\n          bottom: 0,\n          width: '100%',\n          borderTop: '1px solid #e9e9e9',\n          padding: '10px 16px',\n          background: '#fff',\n          textAlign: 'right',\n          zIndex:'999'\n          }\"\n    >\n      <a-button :style=\"{marginRight: '8px'}\" @click=\"cancelHandle\">取消</a-button>\n      <a-button\n        type=\"primary\"\n        @click=\"orderSubmit\"\n        :disabled=\"editDetial === false\"\n        :loading=\"submitLoading\"\n      >提交</a-button>\n    </div>\n    <!-- 添加地址 -->\n    <a-modal v-model=\"visible\" title=\"添加地址\" :footer=\"null\">\n      <addAddress :custId=\"mallOrderIntactDto.custId\" @addressCancel=\"addressCancel\"></addAddress>\n    </a-modal>\n  </div>\n</template>\n\n<script>\nimport addAddress from './addAddress'\n// import GoodsInfo from '../../product/goods/GoodsInfo'\nimport { areas } from 'utils/area.js'\nimport { postJson, get, put, deleted } from '@/api/axios.js'\nimport api from '@/api/index.js'\nimport GoodsInfo from '../../product/pdm/goods2/GoodsInfo'\nimport moment from 'moment'\nimport {\n  getListCompanyGoods,\n  getListCompanyCusts,\n  getListCustomerGoods\n} from './menu.js'\nimport baseURL from '@/api/config'\nlet url = baseURL + '/ic/user/file/uploadFile'\nconst columns = [\n  {\n    title: '产品名称',\n    dataIndex: 'odSkuName',\n    scopedSlots: { customRender: 'name' },\n    width: 120\n  },\n  {\n    title: '产品规格',\n    dataIndex: 'odSpec',\n    width: 120\n  },\n  {\n    title: '单价',\n    dataIndex: 'odSkuCustPrice',\n    scopedSlots: { customRender: 'odSkuCustPrice' }\n  },\n  {\n    title: '数量',\n    dataIndex: 'odNumber',\n    scopedSlots: { customRender: 'odNumber' }\n  },\n  {\n    title: '总计',\n    dataIndex: 'odAmount',\n    scopedSlots: { customRender: 'odAmount' }\n  },\n  {\n    title: '客户编码',\n    dataIndex: 'odSkuCustCode'\n  },\n  {\n    title: '采购单号',\n    dataIndex: 'odPurchaseOrderno',\n    scopedSlots: { customRender: 'odPurchaseOrderno' }\n  },\n  {\n    title: '要求交期',\n    dataIndex: 'odRequireDueDate',\n    scopedSlots: { customRender: 'odRequireDueDate' }\n  },\n  {\n    title: '承诺交期',\n    dataIndex: 'odPromiseDueDate',\n    scopedSlots: { customRender: 'odPromiseDueDate' }\n  },\n  {\n    title: '',\n    scopedSlots: { customRender: 'operation' },\n    width: 80\n  }\n]\nconst formItemLayout = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 18 }\n}\nexport default {\n  props: ['detialList', 'ocustAmaldarList'],\n  components: {\n    GoodsInfo,\n    addAddress\n  },\n  data() {\n    return {\n      dateFormat: 'YYYY/MM/DD',\n      towVisible: false,\n      customerPage: 1,\n      formItemLayout,\n      columns,\n      mallOrderIntactDto: {\n        addrId: '', // 地址ID\n        opurchaseOrderno: '', //客户单号\n        custId: '', // 商城客户id\n        ocustShortName: '', //客户简称\n        ototalSum: '', // 总金额，订单总计（销售总计）\n        oattachment: '', //上传附件 1\n        oprePayment: '', //预收款\n        oremarks: '' //备注\n      },\n      dataSource: [],\n      isAddContactInfo: false,\n      headers: {\n        'AUTH-TOKEN': localStorage.getItem('ACCESS_TOKEN'),\n        companyId: localStorage.getItem('companyId')\n      },\n      editDetial: false,\n      fileList: [], // 附件列表\n      uploadFile: [],\n      ocustName: '',\n      listCompanyCusts: [],\n      ocustNameList: [], // 客户名称\n      ocustCodeList: [], // 客户编码\n      listCustomerGoods: [], //商品信息\n      odSkuCodeList: [], // 产品编码\n      odSpecList: [], // 产品规格\n      buttons: [],\n      isInfoDisplay: {\n        display: 'none'\n      },\n      submitLoading: false,\n      url,\n      previewVisible: false,\n      previewImage: '',\n      setGoodsViews: {},\n      isCatId: '',\n      isCustId: '',\n      isEdit: true,\n      addressList: [],\n      visible: false\n    }\n  },\n  created() {\n    this.getOrderDetail(this.detialList)\n    getListCompanyGoods.call(this)\n    getListCompanyCusts.call(this)\n  },\n  methods: {\n    moment,\n    callback(key) {\n      console.log(key)\n    },\n    // 订单总价计算\n    setOtotalSum(data) {\n      var ototalSum = 0\n      for (const i in data) {\n        ototalSum += parseFloat(data[i].odAmount)\n      }\n      this.mallOrderIntactDto.ototalSum = ototalSum\n    },\n    handleCancel() {\n      this.previewVisible = false\n    },\n    handlePreview(file) {\n      this.previewImage = file.url || file.thumbUrl\n      this.previewVisible = true\n    },\n    // 图片上传/修改时的操作\n    handleChange({ fileList }) {\n      this.fileList = fileList\n      let uploadFile = []\n      for (const i in fileList) {\n        if (fileList[i].response) {\n          uploadFile.push(fileList[i].response.data)\n        } else {\n          uploadFile.push(fileList[i].url)\n        }\n      }\n      this.uploadFile = uploadFile\n    },\n    // 取消订单详情的修改/查看\n    cancelHandle() {\n      this.editDetial = false\n      this.$emit('orderDetialInfo', false)\n    },\n    // 订单修改 提交并退出\n    orderSubmit() {\n      this.submitLoading = true\n      this.dataSource.forEach(item => {\n        delete item.sku\n      })\n      if (this.dataSource.length == 0) {\n        this.$message.warning('请添加购买商品')\n        return\n      }\n      this.mallOrderIntactDto.orderDetails = this.dataSource\n      this.mallOrderIntactDto.oattachment = this.uploadFile.join(',')\n      delete this.mallOrderIntactDto.skuList\n      put(api.updateOrder, this.mallOrderIntactDto).then(res => {\n        if (res.data.code === 0) {\n          this.$message.success('修改成功')\n          this.$emit('orderDetialInfo', false)\n        } else {\n          this.$message.error(res.data.msg)\n        }\n        this.submitLoading = false\n      })\n    },\n    // 获取订单详情\n    getOrderDetail(id) {\n      get(api.getOrderDetail + `${id}`).then(res => {\n        this.mallOrderIntactDto = res.data.data\n        const skuList = res.data.data.skuList\n        const oattachment = res.data.data.oattachment\n        for (const i in skuList) {\n          skuList[i].key = i\n          skuList[i].opurchaseOrderno = this.detialList.opurchaseOrderno\n          skuList[i].ocustCode = this.detialList.ocustCode\n        }\n        this.dataSource = skuList\n        if (oattachment) {\n          const oattachmentObj = []\n          const oattachmentList = oattachment.split(',')\n          for (const i in oattachmentList) {\n            oattachmentObj.push({\n              uid: i,\n              name: `${i}`,\n              status: 'done',\n              url: oattachmentList[i]\n            })\n          }\n          this.fileList = oattachmentObj\n        }\n        this.getAddressList(res.data.data.custId)\n        // this.detial = true;\n      })\n    },\n    // 是否进行订单修改\n    orderDetialEdit() {\n      const newData = [...this.dataSource]\n      if (!this.editDetial) {\n        this.isInfoDisplay.display = 'block'\n        this.editDetial = true\n      } else {\n        newData.forEach(item => {\n          delete item.editable\n        })\n        this.isInfoDisplay.display = 'none'\n        this.editDetial = false\n      }\n    },\n    // 选择框下来状态\n    currentPageChange(e) {\n      const boxHeigth = e.target.scrollHeight - 1\n      const box = {\n        scrollTop: e.target.scrollTop\n      }\n      if (\n        parseFloat(\n          getComputedStyle(\n            document.querySelector('.ant-select-dropdown-content')\n          ).height\n        ) +\n        box.scrollTop >\n        boxHeigth\n      ) {\n        getListCompanyCusts.call(this, this.customerPage)\n      }\n    },\n    // 删除订单\n    orderDetele() {\n      let _this = this\n      let idStr = this.mallOrderIntactDto.id\n      this.$confirm({\n        title: '您确定要删除订单信息吗？',\n        content: '当您点击确定过后将删除选中的订单信息',\n        cancelText: '取消',\n        okText: '确定',\n        onOk() {\n          deleted(api.deletedBatch + `?idStr=${idStr}`).then(res => {\n            if (res.data.code === 0) {\n              _this.$emit('orderDetialInfo', false)\n              _this.$message.success('删除成功')\n            }\n          })\n        },\n        onCancel() { }\n      })\n    },\n    onClose() {\n      this.towVisible = false\n    },\n    isVisible(isVisible) {\n      this.towVisible = isVisible\n    },\n    getGoodsViews(skuId, catId) {\n      this.isCatId = catId ? '`${catId}`' : ''\n      get(api.goodsView, { skuId: skuId })\n        .then(res => {\n          if (res.data.code === 0) {\n            this.setGoodsViews = res.data.data\n          }\n        })\n        .catch(err => {\n          console.log(err)\n        })\n      this.towVisible = true\n    },\n    // 地址添加\n    addAddress() {\n      this.visible = true\n    },\n    // 关闭地址新增\n    addressCancel(data) {\n      if (data) {\n        this.getAddressList(this.mallOrderIntactDto.custId)\n      }\n      this.visible = false\n    },\n    // 通过客户Id查询地址列表\n    getAddressList(id) {\n      get(api.getAddressList + `/${id}`).then(res => {\n        var data = res.data.data\n        this.addressList = data\n      })\n    },\n    // 选择地址\n    choseAddress(index, id) {\n      if (!this.editDetial) {\n        return\n      }\n      this.mallOrderIntactDto.addrId = id\n    },\n    // 编辑产品详情\n    edit(key) {\n      const newData = [...this.dataSource]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        target.editable = true\n        this.dataSource = newData\n      }\n    },\n    // 产品列表数据修改\n    editCell(value, key, column) {\n      const newData = [...this.dataSource]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        target[column] = value\n        if (column === 'odNumber' || column === 'odSkuCustPrice') {\n          target['odAmount'] = target['odNumber'] * target['odSkuCustPrice']\n        }\n        this.dataSource = newData\n        this.setOtotalSum(newData)\n      }\n    },\n    // 保存修改\n    save(key) {\n      const newData = [...this.dataSource]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        delete target.editable\n        this.dataSource = newData\n        this.setOtotalSum(newData)\n      }\n    },\n    // 删除当前行\n    cancel(key) {\n      const newData = [...this.dataSource]\n      const target = newData.filter(item => key !== item.key)\n      this.dataSource = target\n      this.setOtotalSum(newData)\n    }\n  }\n}\n</script>\n\n<style lang='less' scoped>\n@import \"~styles/variable.less\";\n.addCustomer-title {\n  border-left: 4px solid #1890ff;\n  padding-left: 6px;\n}\n.add-order-list {\n  position: relative;\n  .edit {\n    position: absolute;\n    top: 10px;\n    right: 20px;\n    & > span {\n      margin-right: 5px;\n      cursor: pointer;\n    }\n  }\n}\n.editable-add-btn {\n  cursor: pointer;\n  margin: 10px 20px;\n  display: block;\n  line-height: 30px;\n  text-align: center;\n  border: 1px dashed #ccc;\n}\n.ant-upload-select-picture-card i {\n  font-size: 32px;\n  color: #999;\n}\n.ant-upload-select-picture-card .ant-upload-text {\n  margin-top: 8px;\n  color: #666;\n}\n</style>\n\n"],"sourceRoot":"src/views/sale/orderList"}]}