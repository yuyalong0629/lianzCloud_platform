{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-07c7c371\"],{1073:function(t,e,n){\"use strict\";var i=n(\"5000\"),a=n.n(i);a.a},4526:function(t,e,n){\"use strict\";n.r(e);var i,a,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"price-list\"},[n(\"a-row\",{attrs:{gutter:20}},[n(\"a-col\",{attrs:{span:5}},[n(\"scroll-list\",{on:{custId:t.custId}})],1),n(\"a-col\",{attrs:{span:19}},[n(\"a-row\",[n(\"a-col\",{attrs:{span:24}}),n(\"a-col\",{attrs:{span:24}},[n(\"a-table\",{attrs:{columns:t.columns,dataSource:t.data,loading:t.loading,pagination:t.pagination,scroll:{y:\"66vh\"},rowKey:function(t){return Math.random(t.key)}},on:{change:t.onChangePage},scopedSlots:t._u([{key:\"creatorTime\",fn:function(e,i){return[n(\"span\",[t._v(t._s(t._f(\"formatDate\")(e)))])]}},{key:\"factoryName\",fn:function(e,i){return t._l(e,function(e){return n(\"ul\",[n(\"li\",[t._v(t._s(e))])])})}},{key:\"modifyTime\",fn:function(e,i){return t._l(e,function(e){return n(\"ul\",[n(\"li\",[t._v(t._s(t._f(\"formatDate\")(e)))])])})}}])})],1)],1)],1)],1)],1)},r=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"scroll-list\"},[n(\"div\",{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:t.handleInfiniteOnLoad,expression:\"handleInfiniteOnLoad\"}],staticClass:\"demo-infinite-container\",attrs:{\"infinite-scroll-disabled\":t.busy,\"infinite-scroll-distance\":10}},[n(\"div\",{staticClass:\"search-list\"},[n(\"a-select\",{staticStyle:{width:\"200px\"},attrs:{showSearch:\"\",allowClear:\"\",value:t.searchValue,placeholder:\"请输入客户名称\",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,notFoundContent:null},on:{search:t.handleSearch,change:t.handleChange}},t._l(t.searchData,function(e,i){return n(\"a-select-option\",{key:e.cust_id},[t._v(t._s(e.o_cust_name))])}),1)],1),n(\"a-list\",{attrs:{dataSource:t.data},scopedSlots:t._u([{key:\"renderItem\",fn:function(e,i){return n(\"a-list-item\",{staticStyle:{cursor:\"pointer\"}},[n(\"a-list-item-meta\",{attrs:{description:e.o_cust_name},on:{click:function(n){return t.onChangeSearch(e.cust_id)}}})],1)}}])},[t.loading&&!t.busy?n(\"div\",{staticClass:\"demo-loading-container\"},[n(\"a-spin\")],1):t._e()])],1)])},s=[],l=n(\"cebc\"),u=n(\"487a\"),d=n.n(u),f=(n(\"7f7f\"),n(\"75fc\")),h=n(\"365c\"),m=n(\"0d5e\");function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"\";return Object(m[\"c\"])(h[\"a\"].getTransactionCust+\"?currentPage=\".concat(t,\"&custName=\").concat(e,\"&orderNum=\").concat(n,\"&pageSize=20\")).catch(function(t){console.log(t)})}function g(t,e){function n(){Object(m[\"c\"])(h[\"a\"].getTransactionCust+\"?currentPage=1&custName=\".concat(t,\"&orderNum=''&pageSize=20\")).then(function(n){if(a===t){var i=[];i.push.apply(i,Object(f[\"a\"])(n.data.data.records)),e(i)}})}i&&(clearTimeout(i),i=null),a=t,i=setTimeout(n,300)}function v(t,e,n){var i=this;return this.loading=!0,Object(m[\"c\"])(h[\"a\"].getListHitoryChanelInfo+\"?currentPage=\".concat(t,\"&pageSize=\").concat(e,\"&custId=\").concat(n,\"&name=\")).then(function(t){if(0!==t.data.code)i.loading=!1;else if(i.loading=!1,i.data=[],i.pagination.total=+t.data.data.total,t.data.data.records.length){var e=[],n=[];t.data.data.records.forEach(function(t){if(t.sfpMap)for(var a in t.sfpMap)e.push(t.sfpMap[a][0].sellerName),n.push(t.sfpMap[a][0].createTime);i.data.push({key:t.id,name:t.name,versionCode:t.versionCode,price:t.price,creatorTime:t.scplist&&t.scplist[0].createTime,factoryName:e,modifyTime:n})})}}).catch(function(t){console.log(t),i.loading=!1})}var w={name:\"ScrollList\",directives:{infiniteScroll:d.a},data:function(){return{data:[],loading:!1,busy:!1,num:1,page:1,searchData:[],searchValue:void 0}},beforeMount:function(){var t=this;p(1).then(function(e){0===e.data.code&&(console.log(e.data),t.data=e.data.data.records.map(function(t){return Object(l[\"a\"])({},t)}),t.page=e.data.data.pages)})},methods:{onSearch:function(t){console.log(t)},handleInfiniteOnLoad:function(){var t=this,e=this.data;if(this.loading=!0,this.num>this.page)return this.$message.warning(\"没有更多数据了\"),this.busy=!0,void(this.loading=!1);p(this.num).then(function(n){0===n.data.code&&(t.loading=!1,t.data=e.concat(n.data.data.records).map(function(t){return Object(l[\"a\"])({},t)}),t.num++)})},onChangeSearch:function(t){this.$emit(\"custId\",t)},handleSearch:function(t){var e=this;g.call(this,t,function(t){return e.searchData=t}),console.log(this.searchData)},handleChange:function(t){console.log(t),this.searchValue=t}},components:{}},b=w,y=(n(\"1073\"),n(\"2877\")),C=Object(y[\"a\"])(b,c,s,!1,null,null,null),T=C.exports,S=n(\"cd34\"),_=[{title:\"产品名称\",dataIndex:\"name\",width:\"16%\",scopedSlots:{customRender:\"name\"}},{title:\"版本\",dataIndex:\"versionCode\",width:\"16%\"},{title:\"现价\",dataIndex:\"price\",width:\"16%\"},{title:\"报价时间\",dataIndex:\"creatorTime\",width:\"16%\",scopedSlots:{customRender:\"creatorTime\"}},{title:\"工厂名称\",dataIndex:\"factoryName\",width:\"16%\",scopedSlots:{customRender:\"factoryName\"}},{title:\"更改时间\",dataIndex:\"modifyTime\",width:\"16%\",scopedSlots:{customRender:\"modifyTime\"}}],N={name:\"Pricelist\",mixins:[S[\"a\"],S[\"b\"]],data:function(){return{data:[],columns:_,selectedRowKeys:[],setCustId:\"\",pagination:{total:0,defaultPageSize:15,defaultCurrent:1,showQuickJumper:!0,hideOnSinglePage:!0,showSizeChanger:!0,pageSizeOptions:[\"10\",\"15\",\"30\",\"50\",\"100\"]}}},created:function(){},methods:{custId:function(t){console.log(t),this.setCustId=t,v.apply(this,[1,15,1])},onChangePage:function(t,e,n){console.log(t.current+\"分页下标\"),console.log(t.pageSize),v.call(this,t.current,t.pageSize,this.setCustId),this.selectedRowKeys=[]}},computed:{},components:{\"scroll-list\":T}},I=N,k=Object(y[\"a\"])(I,o,r,!1,null,\"16e9034f\",null);e[\"default\"]=k.exports},\"487a\":function(t,e,n){(function(e,n){t.exports=n()})(0,function(){\"use strict\";var t=\"@@InfiniteScroll\",e=function(t,e){var n,i,a,o,r,c=function(){t.apply(o,r),i=n};return function(){if(o=this,r=arguments,n=Date.now(),a&&(clearTimeout(a),a=null),i){var t=e-(n-i);t<0?c():a=setTimeout(function(){c()},t)}else c()}},n=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},i=document.defaultView.getComputedStyle,a=function(t){var e=t;while(e&&\"HTML\"!==e.tagName&&\"BODY\"!==e.tagName&&1===e.nodeType){var n=i(e).overflowY;if(\"scroll\"===n||\"auto\"===n)return e;e=e.parentNode}return window},o=function(t){return t===window?document.documentElement.clientHeight:t.clientHeight},r=function(t){return t===window?n(window):t.getBoundingClientRect().top+n(window)},c=function(t){var e=t.parentNode;while(e){if(\"HTML\"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},s=function(){if(!this.binded){this.binded=!0;var t=this,n=t.el,i=n.getAttribute(\"infinite-scroll-throttle-delay\"),o=200;i&&(o=Number(t.vm[i]||i),(isNaN(o)||o<0)&&(o=200)),t.throttleDelay=o,t.scrollEventTarget=a(n),t.scrollListener=e(l.bind(t),t.throttleDelay),t.scrollEventTarget.addEventListener(\"scroll\",t.scrollListener),this.vm.$on(\"hook:beforeDestroy\",function(){t.scrollEventTarget.removeEventListener(\"scroll\",t.scrollListener)});var r=n.getAttribute(\"infinite-scroll-disabled\"),c=!1;r&&(this.vm.$watch(r,function(e){t.disabled=e,!e&&t.immediateCheck&&l.call(t)}),c=Boolean(t.vm[r])),t.disabled=c;var s=n.getAttribute(\"infinite-scroll-distance\"),u=0;s&&(u=Number(t.vm[s]||s),isNaN(u)&&(u=0)),t.distance=u;var d=n.getAttribute(\"infinite-scroll-immediate-check\"),f=!0;d&&(f=Boolean(t.vm[d])),t.immediateCheck=f,f&&l.call(t);var h=n.getAttribute(\"infinite-scroll-listen-for-event\");h&&t.vm.$on(h,function(){l.call(t)})}},l=function(t){var e=this.scrollEventTarget,i=this.el,a=this.distance;if(!0===t||!this.disabled){var c=n(e),s=c+o(e),l=!1;if(e===i)l=e.scrollHeight-s<=a;else{var u=r(i)-r(e)+i.offsetHeight+c;l=s+a>=u}l&&this.expression&&this.expression()}},u={bind:function(e,n,i){e[t]={el:e,vm:i.context,expression:n.value};var a=arguments;e[t].vm.$on(\"hook:mounted\",function(){e[t].vm.$nextTick(function(){c(e)&&s.call(e[t],a),e[t].bindTryCount=0;var n=function n(){e[t].bindTryCount>10||(e[t].bindTryCount++,c(e)?s.call(e[t],a):setTimeout(n,50))};n()})})},unbind:function(e){e&&e[t]&&e[t].scrollEventTarget&&e[t].scrollEventTarget.removeEventListener(\"scroll\",e[t].scrollListener)}},d=function(t){t.directive(\"InfiniteScroll\",u)};return window.Vue&&(window.infiniteScroll=u,Vue.use(d)),u.install=d,u})},5000:function(t,e,n){},\"7f7f\":function(t,e,n){var i=n(\"86cc\").f,a=Function.prototype,o=/^\\s*function ([^ (]*)/,r=\"name\";r in a||n(\"9e1e\")&&i(a,r,{configurable:!0,get:function(){try{return(\"\"+this).match(o)[1]}catch(t){return\"\"}}})},cd34:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return i}),n.d(e,\"b\",function(){return a}),n.d(e,\"c\",function(){return o});var i={data:function(){return{loading:!1,visible:!1,labelCol:{span:6},wrapperCol:{span:14},isEdit:!0,disabled:!0,isLabelColor:!1,timer:null}},beforeDestroy:function(){clearTimeout(this.timer)},methods:{onClose:function(){this.$emit(\"isDrawer\",!1)}}},a={methods:{closeDrawer:function(){this.visible=!1}}},o={watch:{\"$store.state.promptTitle.isEdit\":{handler:function(t){this.isEdit=!t,this.disabled=!t,this.isEdit?this.isLabelColor=!1:this.isLabelColor=!0},deep:!0,immediate:!0}}};Boolean}}]);","extractedComments":[]}