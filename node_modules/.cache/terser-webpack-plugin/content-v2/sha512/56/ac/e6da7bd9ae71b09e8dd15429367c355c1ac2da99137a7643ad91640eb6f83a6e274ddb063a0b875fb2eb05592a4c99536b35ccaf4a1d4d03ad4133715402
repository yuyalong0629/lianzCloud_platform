{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-291debb5\"],{\"1e0f\":function(t,e,a){\"use strict\";var s=a(\"4138\"),o=a.n(s);o.a},\"2f30\":function(t,e,a){\"use strict\";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"order-detail\"},[a(\"TabTitle\",{scopedSlots:t._u([{key:\"orderInfo\",fn:function(){return[a(\"order-info\",{attrs:{editInfo:t.editInfo,detialList:t.detialList,selectAddress:t.selectAddress},on:{isVisible:t.isVisible,subLoading:t.subLoading}})]},proxy:!0}])}),a(\"div\",{style:{position:\"absolute\",left:0,bottom:0,width:\"100%\",borderTop:\"1px solid #e9e9e9\",padding:\"10px 16px\",background:\"#fff\",textAlign:\"right\",zIndex:\"999\"}},[a(\"a-button\",{style:{marginRight:\"8px\"},on:{click:t.cancelHandle}},[t._v(\"取消\")]),t.editInfo?a(\"a-button\",{attrs:{type:\"primary\",disabled:t.editInfo&&!t.editDetial,loading:t.loading},on:{click:t.orderSubmit}},[t._v(\"保存\")]):a(\"a-button\",{attrs:{type:\"primary\",loading:t.loading},on:{click:t.orderSubmit}},[t._v(\"提交\")])],1)],1)},o=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"prompt-title\"},[a(\"a-row\",[a(\"a-col\",{attrs:{span:24}},[a(\"a-tabs\",{attrs:{defaultActiveKey:\"1\",tabBarGutter:10,tabBarStyle:{height:\"45px\"}},on:{change:t.callback}},[a(\"a-tab-pane\",{key:\"1\",attrs:{tab:t.getPromptTitle.title}},[t._t(\"orderInfo\")],2),t.getPromptTitle.isEdit?a(\"a-list\",{staticClass:\"prompt-wrapper\",attrs:{slot:\"tabBarExtraContent\"},slot:\"tabBarExtraContent\"},[a(\"span\",{staticClass:\"prompt-edit\",on:{click:t.onHandlePromptEdit}},[a(\"a-icon\",{staticClass:\"eidt-icon\",attrs:{type:\"edit\"}}),a(\"span\",[t._v(t._s(t.editTitle))])],1),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.getDetailPermission.includes(\"DELETE\"),expression:\"getDetailPermission.includes('DELETE')\"}],staticClass:\"prompt-delete\",on:{click:t.onHandlePromptDelete}},[a(\"a-icon\",{staticClass:\"delete-icon\",attrs:{type:\"delete\"}}),a(\"span\",[t._v(\"删除\")])],1)]):t._e()],1)],1)],1)],1)},r=[],n=a(\"cba0\"),l={data:function(){return{editTitle:\"编辑\"}},methods:{callback:function(t){},onHandlePromptEdit:function(){if(\"编辑\"===this.editTitle)return this.editTitle=\"取消\",void n[\"a\"].$emit(\"isDisabled\",!1);n[\"a\"].$emit(\"isDisabled\",!0),this.editTitle=\"编辑\"},onHandlePromptDelete:function(){this.$confirm({title:\"删除\",content:\"您确认要删除？\",okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){n[\"a\"].$emit(\"isDelete\",!1)}})}},computed:{getPromptTitle:function(){return this.$store.state.promptTitle},getDetailPermission:function(){return this.$store.state.detailPermission}}},d=l,c=(a(\"1e0f\"),a(\"2877\")),u=Object(c[\"a\"])(d,i,r,!1,null,\"7170517f\",null),p=u.exports,m=a(\"5dbe\"),f={components:{TabTitle:p,\"order-info\":m[\"a\"]},props:[\"editInfo\",\"detialList\",\"selectAddress\"],data:function(){return{editDetial:!1,loading:!1}},computed:{getDetailPermission:function(){return this.$store.state.detailPermission}},created:function(){var t=this;n[\"a\"].$on(\"isDisabled\",function(e){t.editDetial=!e})},methods:{orderSubmit:function(){n[\"a\"].$emit(\"submitOrder\",this.editInfo)},subLoading:function(t){this.loading=t},cancelHandle:function(){this.$emit(\"isVisible\",!1)},isVisible:function(t){this.$emit(\"isVisible\",t),this.loading=!1}}},h=f,b=Object(c[\"a\"])(h,s,o,!1,null,null,null);e[\"a\"]=b.exports},\"2fdb\":function(t,e,a){\"use strict\";var s=a(\"5ca1\"),o=a(\"d2c8\"),i=\"includes\";s(s.P+s.F*a(\"5147\")(i),\"String\",{includes:function(t){return!!~o(this,t,i).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},\"3b29\":function(t,e,a){},4138:function(t,e,a){},4372:function(t,e,a){},\"45a7\":function(t,e,a){\"use strict\";var s=a(\"b0bd\"),o=a.n(s);o.a},4917:function(t,e,a){\"use strict\";var s=a(\"cb7c\"),o=a(\"9def\"),i=a(\"0390\"),r=a(\"5f1b\");a(\"214f\")(\"match\",1,function(t,e,a,n){return[function(a){var s=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,s):new RegExp(a)[e](String(s))},function(t){var e=n(a,t,this);if(e.done)return e.value;var l=s(t),d=String(this);if(!l.global)return r(l,d);var c=l.unicode;l.lastIndex=0;var u,p=[],m=0;while(null!==(u=r(l,d))){var f=String(u[0]);p[m]=f,\"\"===f&&(l.lastIndex=i(d,o(l.lastIndex),c)),m++}return 0===m?null:p}]})},5147:function(t,e,a){var s=a(\"2b4c\")(\"match\");t.exports=function(t){var e=/./;try{\"/./\"[t](e)}catch(a){try{return e[s]=!1,!\"/./\"[t](e)}catch(o){}}return!0}},\"52af\":function(t,e,a){\"use strict\";var s=a(\"6f6b\"),o=a.n(s);o.a},\"5c3a\":function(t,e,a){(function(t,e){e(a(\"c1df\"))})(0,function(t){\"use strict\";var e=t.defineLocale(\"zh-cn\",{months:\"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月\".split(\"_\"),monthsShort:\"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月\".split(\"_\"),weekdays:\"星期日_星期一_星期二_星期三_星期四_星期五_星期六\".split(\"_\"),weekdaysShort:\"周日_周一_周二_周三_周四_周五_周六\".split(\"_\"),weekdaysMin:\"日_一_二_三_四_五_六\".split(\"_\"),longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"YYYY/MM/DD\",LL:\"YYYY年M月D日\",LLL:\"YYYY年M月D日Ah点mm分\",LLLL:\"YYYY年M月D日ddddAh点mm分\",l:\"YYYY/M/D\",ll:\"YYYY年M月D日\",lll:\"YYYY年M月D日 HH:mm\",llll:\"YYYY年M月D日dddd HH:mm\"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),\"凌晨\"===e||\"早上\"===e||\"上午\"===e?t:\"下午\"===e||\"晚上\"===e?t+12:t>=11?t:t+12},meridiem:function(t,e,a){var s=100*t+e;return s<600?\"凌晨\":s<900?\"早上\":s<1130?\"上午\":s<1230?\"中午\":s<1800?\"下午\":\"晚上\"},calendar:{sameDay:\"[今天]LT\",nextDay:\"[明天]LT\",nextWeek:\"[下]ddddLT\",lastDay:\"[昨天]LT\",lastWeek:\"[上]ddddLT\",sameElse:\"L\"},dayOfMonthOrdinalParse:/\\d{1,2}(日|月|周)/,ordinal:function(t,e){switch(e){case\"d\":case\"D\":case\"DDD\":return t+\"日\";case\"M\":return t+\"月\";case\"w\":case\"W\":return t+\"周\";default:return t}},relativeTime:{future:\"%s内\",past:\"%s前\",s:\"几秒\",ss:\"%d 秒\",m:\"1 分钟\",mm:\"%d 分钟\",h:\"1 小时\",hh:\"%d 小时\",d:\"1 天\",dd:\"%d 天\",M:\"1 个月\",MM:\"%d 个月\",y:\"1 年\",yy:\"%d 年\"},week:{dow:1,doy:4}});return e})},\"5ca6\":function(t,e,a){},\"5d91\":function(t,e,a){\"use strict\";var s=a(\"fe75\"),o=a.n(s);o.a},\"5dbe\":function(t,e,a){\"use strict\";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"div\",{staticClass:\"add-order-list\"},[a(\"a-row\",[a(\"a-col\",{attrs:{span:24}},[a(\"h3\",{staticClass:\"addCustomer-title\"},[t._v(\"订单详情\")])]),a(\"a-col\",{attrs:{span:24}},[a(\"Detail\",{ref:\"detail\",attrs:{mallOrderIntactDto:t.mallOrderIntactDto,editInfo:t.editInfo,editDetial:t.editDetial,selectAddress:t.selectAddress},on:{setCustId:t.setCustId}})],1)],1),a(\"a-row\",[a(\"a-col\",{staticClass:\"mt\",attrs:{span:24}},[a(\"h3\",{staticClass:\"addCustomer-title\"},[t._v(\"产品详情\")])]),t.custId?a(\"a-col\",{attrs:{span:24}},[a(\"Product\",{ref:\"product\",attrs:{custId:t.custId,dataSource:t.dataSource,editInfo:t.editInfo,editDetial:t.editDetial,approval:t.approval,selectAddress:t.selectAddress}})],1):t._e()],1),a(\"a-row\",[a(\"a-col\",{staticClass:\"mt\",attrs:{span:24}},[a(\"h3\",{staticClass:\"addCustomer-title\"},[t._v(\"收货地址\")])]),t.custId?a(\"a-col\",{attrs:{span:24}},[a(\"Address\",{attrs:{ocustName:t.ocustName,custId:t.custId,addrId:t.addrId,editInfo:t.editInfo,editDetial:t.editDetial},on:{setAddressId:t.setAddressId}})],1):t._e()],1),a(\"a-row\",[a(\"a-col\",{staticClass:\"mt\",attrs:{span:24}},[a(\"h3\",{staticClass:\"addCustomer-title\"},[t._v(\"附件\")])]),t.custId?a(\"a-col\",{attrs:{span:24}},[a(\"Upload\",{ref:\"upload\",attrs:{editInfo:t.editInfo,editDetial:t.editDetial,file:t.fileList,selectAddress:t.selectAddress}})],1):t._e()],1)],1)])},o=[],i=a(\"75fc\"),r=(a(\"28a5\"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-row\",[a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"订单编码\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{staticClass:\"inputWidth\",attrs:{value:t.mallOrderIntactDto.oorderNumber,disabled:\"\"}})],1)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"客户名称\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-select\",{staticClass:\"inputWidth\",attrs:{disabled:t.editInfo,showSearch:\"\",showArrow:!1,filterOption:!1,defaultActiveFirstOption:!1,dropdownMatchSelectWidth:!1},on:{search:t.handleSelect,change:function(e){t.inputChange(e)},popupScroll:function(e){return t.currentPageChange(e)}},model:{value:t.mallOrderIntactDto.ocustShortName,callback:function(e){t.$set(t.mallOrderIntactDto,\"ocustShortName\",e)},expression:\"mallOrderIntactDto.ocustShortName\"}},t._l(t.listCompanyCusts,function(e,s){return a(\"a-select-option\",{key:s},[t._v(t._s(e.custCode)+\" - \"+t._s(e.custShortName))])}),1)],1)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"客户单号\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[t.selectAddress?a(\"a-input\",{staticClass:\"inputWidth\",attrs:{disabled:\"\"},model:{value:t.mallOrderIntactDto.opurchaseOrderno,callback:function(e){t.$set(t.mallOrderIntactDto,\"opurchaseOrderno\",e)},expression:\"mallOrderIntactDto.opurchaseOrderno\"}}):a(\"a-input\",{staticClass:\"inputWidth\",attrs:{disabled:t.editInfo&&!t.editDetial},model:{value:t.mallOrderIntactDto.opurchaseOrderno,callback:function(e){t.$set(t.mallOrderIntactDto,\"opurchaseOrderno\",e)},expression:\"mallOrderIntactDto.opurchaseOrderno\"}})],1)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"订单类型\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-select\",{staticClass:\"inputWidth\",attrs:{disabled:t.editInfo},model:{value:t.mallOrderIntactDto.otype,callback:function(e){t.$set(t.mallOrderIntactDto,\"otype\",e)},expression:\"mallOrderIntactDto.otype\"}},[t.editInfo?a(\"a-icon\",{staticStyle:{display:\"none\"},attrs:{slot:\"suffixIcon\",type:\"down\"},slot:\"suffixIcon\"}):t._e(),a(\"a-select-option\",{attrs:{value:\"FORMAL\"}},[t._v(\"正式\")]),a(\"a-select-option\",{attrs:{value:\"SAMPLE\"}},[t._v(\"样品\")]),a(\"a-select-option\",{attrs:{value:\"QUARTERLYRETURN\"}},[t._v(\"季度返点\")])],1)],1)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"总价\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[t.editInfo&&!t.editDetial||t.selectAddress?[t._v(t._s(t.mallOrderIntactDto.ototalSum)+\" 元\")]:a(\"a-input\",{staticClass:\"inputWidth\",model:{value:t.mallOrderIntactDto.ototalSum,callback:function(e){t.$set(t.mallOrderIntactDto,\"ototalSum\",e)},expression:\"mallOrderIntactDto.ototalSum\"}},[a(\"span\",{attrs:{slot:\"addonAfter\"},slot:\"addonAfter\"},[t._v(\"元\")])])],2)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"预收款\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[t.editInfo&&!t.editDetial||t.selectAddress?[t._v(t._s(t.mallOrderIntactDto.oprePayment||0)+\" 元\")]:a(\"a-input\",{staticClass:\"inputWidth\",model:{value:t.mallOrderIntactDto.oprePayment,callback:function(e){t.$set(t.mallOrderIntactDto,\"oprePayment\",e)},expression:\"mallOrderIntactDto.oprePayment\"}},[a(\"span\",{attrs:{slot:\"addonAfter\"},slot:\"addonAfter\"},[t._v(\"元\")])])],2)],1),t.editInfo?a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"状态\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-select\",{attrs:{disabled:\"\",value:t.mallOrderIntactDto.ostatus}},[a(\"a-icon\",{staticStyle:{display:\"none\"},attrs:{slot:\"suffixIcon\",type:\"down\"},slot:\"suffixIcon\"}),t._l(t.orderStatus,function(e,s){return[a(\"a-select-option\",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))])]})],2)],1)],1):t._e(),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"备注\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[t.selectAddress?a(\"a-input\",{staticClass:\"inputWidth\",attrs:{disabled:\"\"},model:{value:t.mallOrderIntactDto.oremarks,callback:function(e){t.$set(t.mallOrderIntactDto,\"oremarks\",e)},expression:\"mallOrderIntactDto.oremarks\"}}):a(\"a-input\",{staticClass:\"inputWidth\",attrs:{disabled:t.editInfo&&!t.editDetial},model:{value:t.mallOrderIntactDto.oremarks,callback:function(e){t.$set(t.mallOrderIntactDto,\"oremarks\",e)},expression:\"mallOrderIntactDto.oremarks\"}})],1)],1)],1)}),n=[],l=a(\"75cd\"),d=a(\"c4ce\"),c=a(\"cba0\"),u={props:{mallOrderIntactDto:{type:Object,required:!0},editInfo:{type:Boolean,required:!0,default:!1},editDetial:{type:Boolean,required:!0,default:!1},selectAddress:{type:Boolean,required:!1,default:!1}},mixins:[l[\"a\"],l[\"b\"]],data:function(){return{labelCol:{span:6},wrapperCol:{span:18},timer:\"\",orderStatus:d[\"c\"]}},methods:{inputChange:function(t){this.mallOrderIntactDto.ocustShortName=this.listCompanyCusts[t].custShortName,this.mallOrderIntactDto.ocustName=this.listCompanyCusts[t].custName;var e=this.listCompanyCusts[t].id;this.mallOrderIntactDto.custId=e,this.$emit(\"setCustId\",{custId:e,ocustName:this.listCompanyCusts[t].custName})},currentPageChange:function(t){var e=this.getCurrentPageChange(t);e&&this.getListCompanyCusts(this.customerPage)},handleSelect:function(t){var e=this;\"\"!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.listCompanyCusts=[],e.condition=t,e.getListCompanyCusts()},500)}},created:function(){var t=this;this.getListCompanyCusts(),c[\"a\"].$on(\"setOtotalSum\",function(e){t.mallOrderIntactDto.ototalSum=e})},beforeDestroy:function(){c[\"a\"].$off(\"setOtotalSum\")}},p=u,m=(a(\"d607\"),a(\"2877\")),f=Object(m[\"a\"])(p,r,n,!1,null,\"565fed76\",null),h=f.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-row\",[a(\"a-table\",{attrs:{columns:t.columns,dataSource:t.data,pagination:!1,scroll:{x:1250}},scopedSlots:t._u([{key:\"name\",fn:function(e,s){return[a(\"a-tooltip\",{attrs:{placement:\"top\"}},[a(\"template\",{slot:\"title\"},[a(\"span\",[t._v(t._s(s.odSkuName)+\"-\"+t._s(s.code||s.odSkuCode))])]),a(\"a\",{staticClass:\"text-hidden\",attrs:{href:\"javascript:;\"},on:{click:function(e){return t.getGoodsViews(s.skuId)}}},[t._v(t._s(s.odSkuName)+\"-\"+t._s(s.code||s.odSkuCode))])],2)]}},t._l([\"odSkuCustPrice\",\"odNumber\",\"odAmount\",\"odPurchaseOrderno\",\"odRequireDueDate\",\"odPromiseDueDate\"],function(e){return{key:e,fn:function(s,o){return[a(\"div\",{key:e},[o.editable&&\"odRequireDueDate\"!==e&&\"odPromiseDueDate\"!==e?a(\"a-input\",{staticStyle:{width:\"80px\"},attrs:{value:s,size:\"small\"},on:{change:function(a){return t.editCell(a.target.value,o.key,e)}}}):!o.editable||\"odRequireDueDate\"!==e&&\"odPromiseDueDate\"!==e?[a(\"span\",\"odRequireDueDate\"===e||\"odPromiseDueDate\"===e?[t._v(t._s(s?t.moment(s).format(\"YYYY-MM-DD\"):\"\"))]:[t._v(t._s(s))])]:[a(\"a-date-picker\",s?{staticStyle:{width:\"100px\"},attrs:{size:\"small\",defaultValue:t.moment(t.moment(s).format(\"YYYY-MM-DD\"),\"YYYY-MM-DD\"),format:\"YYYY-MM-DD\"},on:{change:function(a,s){return t.editCell(s,o.key,e)}}}:{staticStyle:{width:\"100px\"},attrs:{size:\"small\",format:\"YYYY-MM-DD\"},on:{change:function(a,s){return t.editCell(s,o.key,e)}}},[a(\"span\",{staticStyle:{display:\"none\"},attrs:{slot:\"suffixIcon\"},slot:\"suffixIcon\"})])]],2)]}}}),{key:\"operation\",fn:function(e,s){return[a(\"div\",{staticClass:\"editable-row-operations\"},[s.editable?a(\"span\",[a(\"a\",{staticStyle:{\"margin-right\":\"10px\"},on:{click:function(){return t.save(s.key)}}},[t._v(\"保存\")]),a(\"a-popconfirm\",{attrs:{title:\"确认删除吗?\"},on:{confirm:function(){return t.cancel(s.key)}}},[a(\"a\",{attrs:{href:\"javascript:;\"}},[t._v(\"删除\")])])],1):a(\"span\",[t.selectAddress?a(\"span\"):!t.approval&&t.editDetial||!t.editInfo?a(\"a\",{on:{click:function(){return t.edit(s.key)}}},[t._v(\"编辑\")]):a(\"span\")])])]}}],null,!0)}),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.editInfo,expression:\"!editInfo\"}],staticClass:\"editable-add-btn\",on:{click:t.onAddContact}},[t._v(\"+添加产品\")]),a(\"a-modal\",{attrs:{title:\"添加\",maskClosable:!1,closable:!1,footer:null,visible:t.isAddContactInfo},on:{ok:t.handleOkContact,cancel:t.handleOkContact}},[a(\"EditableCell\",{attrs:{custId:t.custId},on:{showAddContactInfo:t.showAddContactInfo}})],1),a(\"a-drawer\",{attrs:{placement:\"right\",closable:!1,visible:t.towVisible,wrapStyle:{height:\"100%\",overflow:\"auto\",paddingBottom:\"108px\"},width:1040},on:{close:t.isDrawer}},[a(\"GoodsInfo\",{attrs:{goodsViewInfo:t.goodsViewInfo},on:{isDrawer:t.isDrawer}})],1)],1)},v=[],g=(a(\"c5f6\"),a(\"59ad\")),C=a.n(g),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-form\",{attrs:{form:t.form}},[a(\"a-form-item\",{attrs:{label:\"产品编码\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sku.code\",{rules:[{required:!0,message:\"请选择产品编码\"}],initialValue:t.sku.code}],expression:\"['sku.code',{rules: [{ required: true, message: '请选择产品编码' }],initialValue:sku.code}]\"}],staticStyle:{width:\"280px\"},attrs:{showSearch:\"\",showArrow:!1,filterOption:!1,defaultActiveFirstOption:!1},on:{search:t.handleSelect,change:function(e){t.inputChange(e)},popupScroll:function(e){return t.currentPageChange(e)}}},t._l(t.listCustomerGoods,function(e,s){return a(\"a-select-option\",{key:s},[t._v(t._s(e.code)+\" - \"+t._s(e.name))])}),1)],1),a(\"a-form-item\",{attrs:{label:\"订单数量\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sku.odNumber\",{rules:[{required:!0,message:\"请输入订单数量\"},{validator:t.odNumberRegx}],initialValue:t.sku.odNumber}],expression:\"['sku.odNumber',{rules: [{ required: true, message: '请输入订单数量' }, {validator: odNumberRegx}],initialValue:sku.odNumber}]\"}],staticStyle:{width:\"280px\"},on:{change:function(e){t.inputnumChange(e.target.value)}}},[a(\"span\",{attrs:{slot:\"addonAfter\"},slot:\"addonAfter\"},[t._v(t._s(t.sku.unit))])])],1),a(\"a-form-item\",{attrs:{label:\"产品单价\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sku.odSkuCustPrice\",{initialValue:t.sku.odSkuCustPrice}],expression:\"['sku.odSkuCustPrice',{initialValue:sku.odSkuCustPrice}]\"}],staticStyle:{width:\"280px\"},on:{change:function(e){t.inputPriceChange(e.target.value)}}},[a(\"span\",{attrs:{slot:\"addonAfter\"},slot:\"addonAfter\"},[t._v(\"元\")])])],1),a(\"a-form-item\",{attrs:{label:\"订单总计\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sku.odAmount\",{initialValue:t.sku.odAmount}],expression:\"['sku.odAmount',{initialValue:sku.odAmount}]\"}],staticStyle:{width:\"280px\"}},[a(\"span\",{attrs:{slot:\"addonAfter\"},slot:\"addonAfter\"},[t._v(\"元\")])])],1),a(\"a-form-item\",{attrs:{label:\"采购单号：\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sku.odPurchaseOrderno\"],expression:\"['sku.odPurchaseOrderno']\"}],staticStyle:{width:\"280px\"}})],1),a(\"a-form-item\",{attrs:{label:\"要求交期\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sku.odRequireDueDate\"],expression:\"['sku.odRequireDueDate']\"}],staticStyle:{width:\"280px\"}})],1),a(\"a-form-item\",{attrs:{label:\"承诺交期\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sku.odPromiseDueDate\"],expression:\"['sku.odPromiseDueDate']\"}],staticStyle:{width:\"280px\"}})],1),a(\"a-form-item\",{style:{textAlign:\"center\"}},[a(\"a-button\",{style:{marginRight:\"8px\"},on:{click:t.handleReset}},[t._v(\"取消\")]),a(\"a-button\",{attrs:{type:\"primary\"},on:{click:t.handleEditableInfo}},[t._v(\"确认添加\")])],1)],1)},I=[],k=a(\"cebc\"),y=(a(\"6b54\"),a(\"06db\"),a(\"4917\"),a(\"7f7f\"),a(\"0d5e\")),S=a(\"365c\"),D=a(\"c1df\"),_=a.n(D),O={mixins:[l[\"b\"]],props:{custId:{type:String}},data:function(){return{form:this.$form.createForm(this),customerGoods:1,customerGoodsPages:0,currentPage:1,currentTotal:null,labelCol:{span:6,offset:0},wrapperCol:{span:16},sku:{skuId:\"\",code:void 0,odSkuName:\"\",odSpec:\"\",taxRate:0,odSkuCustPrice:\"\",odAmount:\"\",odSkuCustCode:\"\",unit:\"\"},codeKey:\"\",timer:\"\",listCustomerGoods:[]}},created:function(){this.getListCompanyCustomGoods()},methods:{moment:_.a,inputChange:function(t){var e=this,a=this.listCustomerGoods[t];this.form.resetFields(\"sku.odNumber\"),this.sku.odAmount=\"\",this.sku.odSkuCustPrice=\"\",Object(y[\"c\"])(S[\"a\"].getSkuPrice+\"/\".concat(a.id,\"/\").concat(this.custId)).then(function(t){if(0===t.data.code){var a=t.data.data,s=a.skuCustPrice;e.sku.odSkuName=a.name,e.sku.odSpec=a.spec,e.sku.taxRate=a.taxRate,e.sku.odSkuCustPrice=s.length?s[0].price:a.price,e.sku.code=a.code,e.sku.odSkuCustCode=a.skuCustInfo?a.skuCustInfo.custSkuCode:\"\",e.sku.skuId=a.id,e.sku.unit=a.unit}})},inputnumChange:function(t){var e=this.form.getFieldValue(\"sku.odSkuCustPrice\"),a=0;a=Number((Number(e)*Number(t)).toString().match(/^\\d+(?:\\.\\d{0,2})?/)),this.sku.odAmount=a},inputPriceChange:function(t){var e=this.form.getFieldValue(\"sku.odNumber\"),a=0;a=Number((Number(e)*Number(t)).toString().match(/^\\d+(?:\\.\\d{0,2})?/)),this.sku.odAmount=a},handleEditableInfo:function(t){var e=this;t.preventDefault(),this.form.validateFields(function(t,a){if(!t){var s={odRequireDueDate:a.sku.odRequireDueDate?a.sku.odRequireDueDate.format(\"YYYY-MM-DD\"):\"\",odPromiseDueDate:a.sku.odPromiseDueDate?a.sku.odPromiseDueDate.format(\"YYYY-MM-DD\"):\"\",odAmount:a.sku.odAmount,odNumber:a.sku.odNumber,odSkuCustPrice:a.sku.odSkuCustPrice,odPurchaseOrderno:a.sku.odPurchaseOrderno},o={},i=Object(k[\"a\"])({},e.sku,s);for(var r in o.isAddContactInfo=!1,o.sku=i,e.$emit(\"showAddContactInfo\",o),e.sku)e.sku[r]=\"\";e.form.resetFields()}})},handleReset:function(){var t={isAddContactInfo:!1};for(var e in this.sku)this.sku[e]=\"\";this.form.resetFields(),this.$emit(\"showAddContactInfo\",t)},currentPageChange:function(t){var e=this.getCurrentPageChange(t);e&&(this.listCustomerGoods.length>=this.currentTotal?this.getListCustomerGoods():this.getListCustomerGoods(this.customerGoods))},handleSelect:function(t){var e=this;\"\"!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.listCustomerGoods=[],e.codeKey=t,e.getListCompanyCustomGoods()},500)},getListCompanyCustomGoods:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;Object(y[\"c\"])(S[\"a\"].getListCompanyCustomGoods,{key:this.codeKey,skuType:\"SPRING\",currentPage:e,pageSize:a,custId:this.custId}).then(function(e){var s=e.data.data.records;t.listCustomerGoods=t.listCustomerGoods.concat(s),t.currentPage+=1,t.currentTotal=Number(e.data.data.total),Number(e.data.data.total)<a&&t.getListCustomerGoods()})},getListCustomerGoods:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;e>this.customerGoodsPages&&0!==this.customerGoodsPages||Object(y[\"c\"])(S[\"a\"].getListCompanyGoods,{key:this.codeKey,skuType:\"SPRING\",currentPage:e,pageSize:a}).then(function(e){var a=e.data.data.records;t.listCustomerGoods=t.listCustomerGoods.concat(a),t.customerGoodsPages=Number(e.data.data.pages),t.customerGoods+=1})},odNumberRegx:function(t,e,a){e&&e<=0?a(\"购买数量不能为0\"):a()}}},x=O,A=Object(m[\"a\"])(x,w,I,!1,null,null,null),L=A.exports,P=a(\"350b\"),E={props:{dataSource:{type:Array,required:!0,default:function(){return[]}},custId:{type:String,required:!0},editInfo:{type:Boolean,required:!0,default:!1},editDetial:{type:Boolean,required:!0,default:!1},approval:{type:Boolean},selectAddress:{type:Boolean,required:!1,default:!1}},components:{EditableCell:L,GoodsInfo:P[\"a\"]},data:function(){return{columns:d[\"b\"],towVisible:!1,isAddContactInfo:!1,goodsViewInfo:{},data:this.dataSource}},methods:{moment:_.a,onAddContact:function(){\"\"!==this.custId?this.isAddContactInfo=!0:this.$message.warning(\"请先选择客户名称\")},setOtotalSum:function(t){var e=0;for(var a in t)e+=C()(t[a].odAmount);c[\"a\"].$emit(\"setOtotalSum\",e)},handleOkContact:function(t){var e=this;setTimeout(function(){e.isAddContactInfo=!1},1e3)},showAddContactInfo:function(t){this.isAddContactInfo=t.isAddContactInfo;var e=this.data;t.sku&&(t.sku.key=e.length,e.push(t.sku),this.setOtotalSum(e),this.data=e)},edit:function(t){if(!this.editInfo||this.editDetial){var e=Object(i[\"a\"])(this.data),a=e.filter(function(e){return t===e.key})[0];a&&(a.editable=!0,this.data=e)}},editCell:function(t,e,a){var s=Object(i[\"a\"])(this.data),o=s.filter(function(t){return e===t.key})[0];o&&(o[a]=t,\"odNumber\"!==a&&\"odSkuCustPrice\"!==a||(o[\"odAmount\"]=Number(o[\"odNumber\"])*Number(o[\"odSkuCustPrice\"])),this.data=s,this.setOtotalSum(s))},save:function(t){var e=Object(i[\"a\"])(this.data),a=e.filter(function(e){return t===e.key})[0];a&&(delete a.editable,this.data=e,this.setOtotalSum(e))},cancel:function(t){var e=Object(i[\"a\"])(this.data),a=e.filter(function(e){return t!==e.key});this.data=a,this.setOtotalSum(this.data)},getGoodsViews:function(t){this.getViewInfo(t),this.$store.commit(\"setPromptTitle\",{title:\"产品信息详情\",isEdit:!0})},getViewInfo:function(t){var e=this;Object(y[\"c\"])(S[\"a\"].goodsView+\"?skuId=\".concat(t)).then(function(t){0===t.data.code&&(e.goodsViewInfo=t.data.data,e.towVisible=!0)}).catch(function(t){console.log(t)})},isDrawer:function(){this.towVisible=!1}}},N=E,R=(a(\"cf10\"),Object(m[\"a\"])(N,b,v,!1,null,\"ece1e3da\",null)),$=R.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-row\",[t._l(t.addressList,function(e,s){return a(\"div\",{key:e.id,staticClass:\"address-list\",on:{click:function(a){return t.choseAddress(s,e.id)}}},[t.editInfo&&e.id==t.addressId&&!t.editDetial?a(\"div\",{staticClass:\"address-list-item\",class:{\"item-active\":e.id==t.addressId}},[a(\"div\",{staticClass:\"address-list-item-desc\"},[t._v(\"\\n        \"+t._s(t.ocustName)+\"\\n        \"),a(\"ul\",[a(\"li\",[t._v(\"收件人：\"+t._s(e.receiver))]),a(\"li\",[t._v(\"联系方式：\"+t._s(e.phone))]),a(\"li\",[t._v(\"地址：\"+t._s(e.cityAddress?e.cityAddress:\"\")+t._s(e.detailAddr))])])])]):!t.editInfo||t.editDetial?a(\"div\",{staticClass:\"address-list-item\",class:{\"item-active\":e.id==t.addressId}},[a(\"div\",{staticClass:\"address-list-item-desc\"},[t._v(\"\\n        \"+t._s(t.ocustName)+\"\\n        \"),a(\"ul\",[a(\"li\",[t._v(\"收件人：\"+t._s(e.receiver))]),a(\"li\",[t._v(\"联系方式：\"+t._s(e.phone))]),a(\"li\",[t._v(\"地址：\"+t._s(e.cityAddress?e.cityAddress:\"\")+t._s(e.detailAddr))])])])]):t._e()])}),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.editInfo||t.editDetial,expression:\"!editInfo || editDetial\"}],staticClass:\"editable-add-btn\",on:{click:t.addAddress}},[t._v(\"+添加地址\")]),a(\"a-modal\",{attrs:{title:\"添加地址\",footer:null},model:{value:t.visible,callback:function(e){t.visible=e},expression:\"visible\"}},[a(\"addAddress\",{attrs:{custId:t.custId},on:{addressCancel:t.addressCancel}})],1)],2)},j=[],Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"address\"},[a(\"a-form\",{attrs:{form:t.form}},[a(\"a-form-item\",{attrs:{label:\"收件人姓名\",\"label-col\":{span:5},\"wrapper-col\":{span:16},required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"obj.receiver\",{rules:[{required:!0,message:\"请输入收件人姓名\"}],initialValue:t.obj.receiver}],expression:\"['obj.receiver',{rules:[{ required: true, message: '请输入收件人姓名'}],initialValue:obj.receiver}]\"}]})],1),a(\"a-form-item\",{attrs:{label:\"所在地区\",\"label-col\":{span:5},\"wrapper-col\":{span:16},required:\"\"}},[a(\"a-cascader\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"obj.areas\",{rules:[{required:!0,message:\"请选择收件人所在地区\"}],initialValue:t.obj.areas}],expression:\"['obj.areas',{rules:[{ required: true, message: '请选择收件人所在地区'}],initialValue:obj.areas}]\"}],attrs:{options:t.areas,placeholder:\"\",fieldNames:{label:\"name\",value:\"id\",children:\"childrens\"}},on:{change:t.areaHandleChange}})],1),a(\"a-form-item\",{attrs:{label:\"街道地址\",\"label-col\":{span:5},\"wrapper-col\":{span:16},required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"obj.detailAddr\",{rules:[{required:!0,message:\"请输入收件人详细地址\"}],initialValue:t.obj.detailAddr}],expression:\"['obj.detailAddr',{rules:[{ required: true, message: '请输入收件人详细地址'}],initialValue:obj.detailAddr}]\"}]})],1),a(\"a-form-item\",{attrs:{label:\"手机号码\",\"label-col\":{span:5},\"wrapper-col\":{span:16},required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"obj.phone\",{rules:[{required:!0,message:\"请输入收件人手机号码\"}],initialValue:t.obj.phone}],expression:\"['obj.phone',{rules:[{ required: true, message: '请输入收件人手机号码'}],initialValue:obj.phone}]\"}],attrs:{max:\"11\"}})],1),a(\"a-form-item\",{attrs:{\"label-col\":{span:5},\"wrapper-col\":{span:14,offset:5}}},[a(\"a-checkbox\",{attrs:{defaultChecked:t.defaultAdd},on:{change:t.defaultSelect}},[t._v(\"设为默认收货地址\")])],1),a(\"a-form-item\",{staticStyle:{\"text-align\":\"center\"}},[a(\"a-button\",{staticStyle:{background:\"#8F939A\",border:\"none\",\"margin-right\":\"8px\"},attrs:{type:\"primary\"},on:{click:t.handleCancel}},[t._v(\"关闭\")]),a(\"a-button\",{staticStyle:{background:\"#F0BB2E\",border:\"none\"},attrs:{type:\"primary\"},on:{click:t.handleOk}},[t._v(\"保存\")])],1)],1)],1)},M=[],V=a(\"f46e\"),q={props:{custId:{type:String,default:\"\",required:!1},obj:{type:Object,required:!1,default:function(){return{area:\"\",areaStr:\"\",city:\"\",cityStr:\"\",custId:this.custId,defaultGoodsAddr:\"\",detailAddr:\"\",phone:\"\",province:\"\",provinceStr:\"\",receiver:\"\",areas:[]}}}},data:function(){return{areas:V.areas,defaultAdd:!1,form:this.$form.createForm(this)}},methods:{defaultSelect:function(t){this.defaultAdd=t.target.checked},areaHandleChange:function(t,e){if(t.length){var a=e.map(function(t){return t.name});this.obj.city=t[0],this.obj.province=t[1],this.obj.area=t[2],this.obj.cityStr=a[0],this.obj.provinceStr=a[1],this.obj.areaStr=a[2]}},handleOk:function(t){var e=this;t.preventDefault();var a=this.obj;this.form.validateFields(function(t,s){t||(a=Object(k[\"a\"])({},a,s.obj),a.defaultGoodsAddr=e.defaultAdd?1:0,delete a.areas,Object(y[\"e\"])(S[\"a\"].setAddressIvo,a).then(function(t){0===t.data.code&&e.$message.success(\"添加地址成功\"),e.$emit(\"addressCancel\",!0)}),e.form.resetFields())})},handleCancel:function(t){this.$emit(\"addressCancel\",!1)}}},G=q,B=(a(\"5f8e\"),Object(m[\"a\"])(G,Y,M,!1,null,\"2b3932d8\",null)),W=B.exports,F=a(\"f46e\"),H={props:{ocustName:String,custId:String,editInfo:{type:Boolean,required:!0,default:!1},editDetial:{type:Boolean,required:!0,default:!1},addrId:String},components:{addAddress:W},data:function(){return{addressList:[],visible:!1,areas:F[\"areas\"],addressId:this.addrId}},watch:{custId:function(t){this.getAddressList(t)},deep:!0},created:function(){this.getAddressList(this.custId)},methods:{addAddress:function(){\"\"!==this.custId?this.visible=!0:this.$message.warning(\"请先选择客户名称\")},choseAddress:function(t,e){if(!this.editInfo||this.editDetial){var a=this.addressList;a.forEach(function(t){t.defaultGoodsAddr=0}),a[t].defaultGoodsAddr=1,this.addressId=e,this.$emit(\"setAddressId\",e)}},addressCancel:function(t){t&&this.getAddressList(this.custId),this.visible=!1},getAddressList:function(t){var e=this;Object(y[\"c\"])(S[\"a\"].getAddressList+\"/\".concat(t)).then(function(t){var a=t.data.data;a.length>0&&a.forEach(function(t){null!==t.city&&null!==t.province&&null!==t.area&&(t[\"cityAddress\"]=e.getCPA(e.areas,[t.city,t.province,t.area],0,[]))}),e.addressList=a})},getCPA:function(t,e,a,s){var o=this;return t.forEach(function(t){t.id===e[a]&&(s.push(t.name),t.childrens&&o.getCPA(t.childrens,e,a+1,s))}),s.join(\"\")}}},z=H,U=(a(\"5d91\"),Object(m[\"a\"])(z,T,j,!1,null,\"6b2f8d6c\",null)),K=U.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-row\",[a(\"a-upload\",{attrs:{action:t.url,data:{bizType:\"ORDER\"},headers:t.headers,listType:\"picture-card\",fileList:t.fileList,disabled:t.editInfo&&!t.editDetial||t.selectAddress},on:{preview:t.handlePreview,change:t.handleChange}},[a(\"div\",[a(\"a-icon\",{attrs:{type:\"plus\"}}),a(\"div\",{staticClass:\"ant-upload-text\"},[t._v(\"Upload\")])],1),a(\"a-modal\",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[a(\"uploadShow\",{attrs:{fileList:t.fileList,editInfo:t.editInfo,editDetial:t.editDetial}})],1)],1)],1)},X=[],Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-row\",[a(\"a-col\",{attrs:{span:24}},[a(\"a-row\",[a(\"a-col\",{attrs:{span:16}},[a(\"a-form-item\",{attrs:{label:\"文件描述\",\"label-col\":{span:5},\"wrapper-col\":{span:15}}},[t.editInfo&&!t.editDetial?[a(\"a-tooltip\",{attrs:{placement:\"top\",title:t.current.name}},[t._v(t._s(t.current.name))])]:a(\"a-input\",{model:{value:t.current.name,callback:function(e){t.$set(t.current,\"name\",e)},expression:\"current.name\"}})],2)],1),a(\"a-col\",{attrs:{sapn:1}}),a(\"a-col\",{staticStyle:{\"line-height\":\"39px\"},attrs:{span:7}},[a(\"a-button\",{on:{click:function(e){return t.downloadIamge(t.current)}}},[t._v(\"下载\")])],1)],1)],1),a(\"a-col\",{attrs:{span:24}},[a(\"a-carousel\",{attrs:{dotsClass:\"slick-dots slick-thumb\"},scopedSlots:t._u([{key:\"customPaging\",fn:function(e){return a(\"a\",{},[a(\"a-tooltip\",{attrs:{placement:\"bottom\",title:t.fileList[e.i].name}},[\"img\"===t.fileList[e.i].type?a(\"img\",{attrs:{src:t.fileList[e.i].url},on:{click:function(a){return t.handleImg(e.i)}}}):[\"pdf\"===t.fileList[e.i].type?a(\"span\",{staticClass:\"fileType\",on:{click:function(a){return t.handleImg(e.i)}}},[a(\"a-icon\",{attrs:{type:\"file-pdf\"}})],1):\"word\"===t.fileList[e.i].type?a(\"span\",{staticClass:\"fileType\",on:{click:function(a){return t.handleImg(e.i)}}},[a(\"a-icon\",{attrs:{type:\"file-word\"}})],1):\"xlsx\"===t.fileList[e.i].type?a(\"span\",{staticClass:\"fileType\",on:{click:function(a){return t.handleImg(e.i)}}},[a(\"a-icon\",{attrs:{type:\"file-excel\"}})],1):\"ppt\"===t.fileList[e.i].type?a(\"span\",{staticClass:\"fileType\",on:{click:function(a){return t.handleImg(e.i)}}},[a(\"a-icon\",{attrs:{type:\"file-ppt\"}})],1):a(\"span\",{staticClass:\"fileType\",on:{click:function(a){return t.handleImg(e.i)}}},[a(\"a-icon\",{attrs:{type:\"file\"}})],1)]],2)],1)}}])},t._l(t.fileList,function(t){return a(\"div\",{key:t.url},[\"img\"===t.type?a(\"img\",{attrs:{src:t.url}}):[\"pdf\"===t.type?a(\"span\",{staticClass:\"fileType list-type\"},[a(\"a-icon\",{attrs:{type:\"file-pdf\"}})],1):\"word\"===t.type?a(\"span\",{staticClass:\"fileType list-type\"},[a(\"a-icon\",{attrs:{type:\"file-word\"}})],1):\"xlsx\"===t.type?a(\"span\",{staticClass:\"fileType list-type\"},[a(\"a-icon\",{attrs:{type:\"file-excel\"}})],1):\"ppt\"===t.type?a(\"span\",{staticClass:\"fileType list-type\"},[a(\"a-icon\",{attrs:{type:\"file-ppt\"}})],1):a(\"span\",{staticClass:\"fileType list-type\"},[a(\"a-icon\",{attrs:{type:\"file\"}})],1)]],2)}),0)],1)],1)},Z=[],tt={props:{fileList:{type:Array},editInfo:{type:Boolean,required:!0,default:!1},editDetial:{type:Boolean,required:!0,default:!1}},data:function(){return{current:this.fileList[0]}},methods:{handleImg:function(t){this.current=this.fileList[t]},downloadIamge:function(t){var e=new XMLHttpRequest;e.open(\"get\",t.url,!0),e.responseType=\"blob\",e.onload=function(){if(200===this.status){var e=this.response,a=document.createElement(\"a\");a.download=t.name,a.href=window.URL.createObjectURL(e),a.style.display=\"none\",a.click()}},e.send()}}},et=tt,at=(a(\"52af\"),Object(m[\"a\"])(et,Q,Z,!1,null,\"00360cb8\",null)),st=at.exports,ot={props:{file:{type:Array},editInfo:{type:Boolean,required:!0,default:!1},editDetial:{type:Boolean,required:!0,default:!1},selectAddress:{type:Boolean,required:!1,default:!1}},mixins:[l[\"d\"]],components:{uploadShow:st},data:function(){return{fileList:this.file}}},it=ot,rt=(a(\"ad56\"),Object(m[\"a\"])(it,J,X,!1,null,\"682d04da\",null)),nt=rt.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-row\",[a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"计划员：\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{staticClass:\"inputWidth\",attrs:{placeholder:\"请输入订单编号\"}})],1)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"工厂厂长：\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{staticClass:\"inputWidth\",attrs:{placeholder:\"请输入净价总价\"}})],1)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"生产基地：\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-cascader\",{staticClass:\"inputWidth\",attrs:{options:t.areas,placeholder:\"请选择生产基地\",fieldNames:{label:\"name\",value:\"id\",children:\"childrens\"}}})],1)],1)],1)},dt=[],ct={data:function(){return{labelCol:{span:6},wrapperCol:{span:18},areas:F[\"areas\"]}}},ut=ct,pt=(a(\"ae71\"),Object(m[\"a\"])(ut,lt,dt,!1,null,\"6b0ecd3a\",null)),mt=pt.exports,ft={props:{editInfo:{type:Boolean},detialList:{type:String},selectAddress:{type:Boolean,default:!1},approval:{type:Boolean,default:!1,required:!1}},components:{Address:K,Dispatch:mt,Detail:h,Product:$,Upload:nt},data:function(){return{mallOrderIntactDto:{oorderNumber:\"自动生成\",ocustName:\"\",otype:\"FORMAL\",addrId:\"\",opurchaseOrderno:\"\",custId:\"\",ocustShortName:\"\",ototalSum:\"\",oattachment:\"\",oprePayment:\"\",oremarks:\"\",ostatus:\"\"},dataSource:[],editDetial:!1,custId:\"\",ocustName:\"\",addrId:\"\",fileList:[],timer:\"\"}},methods:{setCustId:function(t){this.custId=t.custId,this.ocustName=t.ocustName},setAddressId:function(t){this.addrId=t},orderSubmit:function(t){var e=this;if(\"\"!==this.custId){var a=this.$refs.upload.uploadFile.join(\",\"),s=this.$refs.detail.mallOrderIntactDto,o=this.$refs.product.data;\"\"!==this.addrId&&void 0!==this.addrId||this.$message.warning(\"暂未设置收货地址\"),s.addrId=this.addrId,s.ocustAddrId=this.addrId,s.oattachment=a,0!==o.length?(this.$emit(\"subLoading\",!0),t?(o.forEach(function(t){delete t.sku}),s.orderDetails=o,delete s.skuList,Object(y[\"f\"])(S[\"a\"].updateOrder,s).then(function(t){0===t.data.code?e.$message.success(\"订单修改成功\",1).then(function(){e.$emit(\"isVisible\",!0)}):(e.$message.error(t.data.msg),e.$emit(\"subLoading\",!1))}).catch(function(){e.$message.error(\"服务出错\"),e.$emit(\"subLoading\",!1)})):(s.skuList=o,delete s.ostatus,delete s.oorderNumber,Object(y[\"e\"])(S[\"a\"].orderSave,s).then(function(t){0===t.data.code?e.$message.success(\"订单添加成功\",1).then(function(){e.$emit(\"isVisible\",!0)}):(e.$message.error(t.data.msg),e.$emit(\"subLoading\",!1))}).catch(function(){e.$message.error(\"服务出错\"),e.$emit(\"subLoading\",!1)}))):this.$message.warning(\"请添加购买商品\")}else this.$message.warning(\"请先选择客户名称\")},getOrderDetail:function(t){var e=this;Object(y[\"c\"])(S[\"a\"].getOrderDetail+\"\".concat(t)).then(function(t){e.mallOrderIntactDto=t.data.data,e.custId=t.data.data.custId,e.addrId=t.data.data.addrId,e.ocustName=t.data.data.ocustName;var a=t.data.data.skuList,s=t.data.data.oattachment;for(var o in a)a[o].key=o;if(e.dataSource=a,s){var i=[],r=s.split(\",\");for(var n in r){var l=r[n].split(\"/\");l=l[l.length-1].split(\".\");var d=l[1];\"jpeg\"!==d&&\"png\"!==d&&\"svg\"!==d&&\"gif\"!==d&&\"jpg\"!==d||(d=\"img\"),i.push({uid:n,name:l[0],type:d,status:\"done\",url:r[n]})}e.fileList=i}}).catch(function(){e.$message.error(\"系统错误\")})}},created:function(){var t=this;this.editInfo&&this.getOrderDetail(this.detialList),c[\"a\"].$on(\"isDisabled\",function(e){if(t.editDetial=!e,e){var a=Object(i[\"a\"])(t.dataSource);a.forEach(function(t){delete t.editable})}}),c[\"a\"].$on(\"isDelete\",function(e){if(!e){var a=t.mallOrderIntactDto.id;Object(y[\"a\"])(S[\"a\"].deletedBatch+\"?idStr=\".concat(a)).then(function(e){0===e.data.code?(t.$message.success(\"删除成功\"),t.$emit(\"isVisible\",!0)):t.$message.error(e.data.msg)})}}),c[\"a\"].$on(\"submitOrder\",function(e){t.orderSubmit(e)})},beforeDestroy:function(){c[\"a\"].$off(\"isDisabled\"),c[\"a\"].$off(\"isDelete\"),c[\"a\"].$off(\"submitOrder\")}},ht=ft,bt=(a(\"5f75\"),Object(m[\"a\"])(ht,s,o,!1,null,\"eb5eda66\",null));e[\"a\"]=bt.exports},\"5f75\":function(t,e,a){\"use strict\";var s=a(\"fb18\"),o=a.n(s);o.a},\"5f8e\":function(t,e,a){\"use strict\";var s=a(\"4372\"),o=a.n(s);o.a},\"5fb8\":function(t,e,a){},6762:function(t,e,a){\"use strict\";var s=a(\"5ca1\"),o=a(\"c366\")(!0);s(s.P,\"Array\",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),a(\"9c6c\")(\"includes\")},\"6f6b\":function(t,e,a){},ad56:function(t,e,a){\"use strict\";var s=a(\"ef35\"),o=a.n(s);o.a},ae71:function(t,e,a){\"use strict\";var s=a(\"5fb8\"),o=a.n(s);o.a},b0bd:function(t,e,a){},b266:function(t,e,a){},c4ce:function(t,e,a){\"use strict\";a.d(e,\"a\",function(){return s}),a.d(e,\"b\",function(){return o}),a.d(e,\"c\",function(){return i});var s=[{title:\"订单编码\",dataIndex:\"oorderNumber\",scopedSlots:{customRender:\"oorderNumber\"},fixed:\"left\",width:200},{title:\"客户单号\",dataIndex:\"opurchaseOrderno\",width:150},{title:\"客户编码\",dataIndex:\"ocustCode\",width:150},{title:\"客户简称\",dataIndex:\"ocustShortName\",width:150},{title:\"订单总计(元)\",dataIndex:\"ototalSum\",width:150},{title:\"订单来源\",dataIndex:\"osource\",scopedSlots:{customRender:\"osource\"},width:150},{title:\"产品编码\",dataIndex:\"odSkuCode\",scopedSlots:{customRender:\"odSkuCode\"},width:150},{title:\"产品名称\",dataIndex:\"odSkuName\",scopedSlots:{customRender:\"odSkuName\"},width:150},{title:\"产品规格\",dataIndex:\"odSpec\",scopedSlots:{customRender:\"odSpec\"},width:150},{title:\"税率(%)\",dataIndex:\"taxRate\",scopedSlots:{customRender:\"taxRate\"},width:150},{title:\"单价(元)\",dataIndex:\"odSkuCustPrice\",scopedSlots:{customRender:\"odSkuCustPrice\"},width:150},{title:\"订单数量\",dataIndex:\"odNumber\",scopedSlots:{customRender:\"odNumber\"},width:150},{title:\"订单总计(元)\",dataIndex:\"odAmount\",scopedSlots:{customRender:\"odAmount\"},width:150},{title:\"要求交期\",dataIndex:\"odRequireDueDate\",scopedSlots:{customRender:\"odRequireDueDate\"},width:150},{title:\"承诺交期\",dataIndex:\"odPromiseDueDate\",scopedSlots:{customRender:\"odPromiseDueDate\"},width:150},{title:\"客户图号\",dataIndex:\"odSkuCustDrawNum\",scopedSlots:{customRender:\"odSkuCustDrawNum\"},width:150},{title:\"订单日期\",dataIndex:\"odOrderplacingTime\",scopedSlots:{customRender:\"odOrderplacingTime\"},width:150},{title:\"状态\",dataIndex:\"ostatus\",width:70,scopedSlots:{customRender:\"ostatus\"},fixed:\"right\"}],o=[{title:\"产品名称\",dataIndex:\"odSkuName\",scopedSlots:{customRender:\"name\"},width:120},{title:\"产品规格\",dataIndex:\"odSpec\",width:120},{title:\"单价\",dataIndex:\"odSkuCustPrice\",scopedSlots:{customRender:\"odSkuCustPrice\"},width:120},{title:\"数量\",dataIndex:\"odNumber\",scopedSlots:{customRender:\"odNumber\"},width:120},{title:\"总计\",dataIndex:\"odAmount\",scopedSlots:{customRender:\"odAmount\"},width:120},{title:\"客户编码\",dataIndex:\"odSkuCustCode\",width:120},{title:\"采购单号\",dataIndex:\"odPurchaseOrderno\",scopedSlots:{customRender:\"odPurchaseOrderno\"},width:120},{title:\"要求交期\",dataIndex:\"odRequireDueDate\",scopedSlots:{customRender:\"odRequireDueDate\"},width:120},{title:\"承诺交期\",dataIndex:\"odPromiseDueDate\",scopedSlots:{customRender:\"odPromiseDueDate\"},width:120},{title:\"操作\",scopedSlots:{customRender:\"operation\"},fixed:\"right\",align:\"center\",width:120}],i=[{label:\"预订单\",value:\"PREORDER\"},{label:\"已提交\",value:\"SUBMISSIONORDER\"},{label:\"已接单\",value:\"ACCEPTORDER\"},{label:\"已拒单\",value:\"REJECTORDE\"},{label:\"已完成\",value:\"FINISH\"},{label:\"已取消\",value:\"CANCEL\"},{label:\"已经发货\",value:\"HAVEDELLIVERY\"},{label:\"部分发货\",value:\"PARTDELLIVERY\"},{label:\"未发货\",value:\"UNDELLIVERY\"},{label:\"已签收\",value:\"ALREADYLIVERY\"}]},cf10:function(t,e,a){\"use strict\";var s=a(\"5ca6\"),o=a.n(s);o.a},d2c8:function(t,e,a){var s=a(\"aae3\"),o=a(\"be13\");t.exports=function(t,e,a){if(s(e))throw TypeError(\"String#\"+a+\" doesn't accept regex!\");return String(o(t))}},d607:function(t,e,a){\"use strict\";var s=a(\"3b29\"),o=a.n(s);o.a},dd71:function(t,e,a){\"use strict\";var s=a(\"fe23\"),o=a.n(s);o.a},e945:function(t,e,a){\"use strict\";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"order\"},[a(\"div\",{staticClass:\"order-add\"},[a(\"a-button\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.getMenuPermission.includes(\"ADD\"),expression:\"getMenuPermission.includes('ADD')\"}],attrs:{type:\"primary\"},on:{click:function(e){return t.orderInfo(\"-1\")}}},[a(\"a-icon\",{attrs:{type:\"plus\"}}),t._v(\"新建\\n    \")],1),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.getMenuPermission.includes(\"DELETES\"),expression:\"getMenuPermission.includes('DELETES')\"}],staticClass:\"delete-btn\",on:{click:t.deleteOrder}},[a(\"a-icon\",{staticClass:\"delete-icon\",attrs:{type:\"delete\"}}),a(\"span\",[t._v(\"删除\")])],1),a(\"a-dropdown\",[a(\"span\",[a(\"a-icon\",{staticClass:\"order-derive\",attrs:{type:\"check-circle\"}}),a(\"span\",[t._v(\"更多\")])],1),a(\"a-menu\",{attrs:{slot:\"overlay\"},slot:\"overlay\"},[a(\"a-menu-item\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.getMenuPermission.includes(\"IMPORT\"),expression:\"getMenuPermission.includes('IMPORT')\"}],key:\"0\"},[a(\"span\",[t._v(\"导入\")])]),a(\"a-menu-item\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.getMenuPermission.includes(\"EXPORT\"),expression:\"getMenuPermission.includes('EXPORT')\"}],key:\"1\"},[a(\"span\",[t._v(\"导出\")])])],1)],1)],1),a(\"div\",{staticClass:\"order-select\"},[a(\"orderSearch\",{on:{dataChange:t.dataChange}})],1),a(\"div\",{staticClass:\"order-table\"},[a(\"a-table\",{attrs:{columns:t.columns,dataSource:t.tabData,pagination:t.pagination,rowSelection:t.rowSelection,loading:t.loading,scroll:{x:2750,y:\"68vh\"}},on:{change:t.onChangePage},scopedSlots:t._u([{key:\"oorderNumber\",fn:function(e,s){return[a(\"a\",{attrs:{href:\"javascript:;\"},on:{click:function(e){return t.orderInfo(s.id)}}},[t._v(t._s(e))])]}},{key:\"osource\",fn:function(e){return[\"MALLONLINE\"===e?a(\"span\",[t._v(\"线上商城\")]):t._e(),\"CUSTOMIZEDONLINE\"===e?a(\"span\",[t._v(\"线上定制\")]):t._e(),\"CUSTOMIZEDUNDERLINE\"===e?a(\"span\",[t._v(\"线下定制\")]):t._e()]}},{key:\"ostatus\",fn:function(e){return[t._l(t.orderStatus,function(s,o){return[e===s.value?a(\"a\",{key:o,staticClass:\"status-color\",class:\"REJECTORDER\"===e?\"status-red\":\"PREORDER\"===e||\"CANCEL\"===e?\"status-gray\":\"status-green\",attrs:{href:\"javascript:;\",title:s.label}}):t._e()]})]}},t._l([\"odSkuCode\",\"odSkuName\",\"odSpec\",\"taxRate\",\"odSkuCustPrice\",\"odNumber\",\"odAmount\",\"odRequireDueDate\",\"odPromiseDueDate\",\"odSkuCustDrawNum\",\"odOrderplacingTime\"],function(e,s){return{key:e,fn:function(s,o){return[t._l(o.skuList,function(s,o){return a(\"div\",{key:o},[a(\"span\",\"taxRate\"===e?[s.sku?a(\"span\",[t._v(t._s(s.sku[e]))]):t._e()]:\"odRequireDueDate\"===e||\"odPromiseDueDate\"===e||\"odOrderplacingTime\"===e?[s[e]?a(\"span\",[t._v(t._s(t._f(\"formatDate\")(s[e])))]):t._e()]:[t._v(t._s(s[e]))])])})]}}})],null,!0)})],1),a(\"a-drawer\",{attrs:{destroyOnClose:\"\",placement:\"right\",closable:!1,width:1040,visible:t.visible,wrapStyle:{height:\"100%\",overflow:\"auto\",paddingBottom:\"108px\"}},on:{close:t.onCustomerInfo}},[a(\"orderInfo\",{attrs:{editInfo:t.editInfo,detialList:t.detialList},on:{isVisible:t.isVisible}})],1)],1)},o=[],i=a(\"cebc\"),r=(a(\"6762\"),a(\"2fdb\"),a(\"0d5e\")),n=a(\"365c\"),l=a(\"2f30\"),d=a(\"c4ce\"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-form\",{staticStyle:{\"margin-bottom\":\"16px\"},attrs:{layout:\"inline\"}},[a(\"a-row\",[a(\"a-col\",{attrs:{span:21}},[a(\"a-row\",[a(\"a-col\",{staticStyle:{margin:\"8px 0\"},attrs:{span:24}},[a(\"a-form-item\",{attrs:{\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol,label:\"订单编号\"}},[a(\"a-input\",{staticClass:\"inputWidth\",on:{change:function(e){t.inputChange(e.target.value,\"oorderNumber\")}},model:{value:t.orderEncapsulation.oorderNumber,callback:function(e){t.$set(t.orderEncapsulation,\"oorderNumber\",e)},expression:\"orderEncapsulation.oorderNumber\"}})],1),a(\"a-form-item\",{attrs:{\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol,label:\"客户信息\"}},[a(\"a-select\",{staticClass:\"inputWidth\",attrs:{showSearch:\"\",allowClear:\"\",showArrow:!1,filterOption:!1,defaultActiveFirstOption:!1,dropdownMatchSelectWidth:!1},on:{search:function(e){return t.handleSelectChange(e,\"customer\")},change:function(e){t.inputChange(e,\"custId\")},popupScroll:function(e){return t.currentPageChange(e,\"customer\")}},model:{value:t.orderEncapsulation.custId,callback:function(e){t.$set(t.orderEncapsulation,\"custId\",e)},expression:\"orderEncapsulation.custId\"}},t._l(t.listCompanyCusts,function(e){return a(\"a-select-option\",{key:e.id},[t._v(t._s(e.custCode)+\" - \"+t._s(e.custShortName))])}),1)],1),a(\"a-form-item\",{attrs:{\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol,label:\"产品编码\"}},[a(\"a-select\",{staticClass:\"inputWidth\",attrs:{showSearch:\"\",allowClear:\"\",showArrow:!1,filterOption:!1,defaultActiveFirstOption:!1},on:{search:function(e){return t.handleSelectChange(e,\"odSkuCode\")},change:function(e){t.inputChange(e,\"odSkuCode\")},popupScroll:function(e){return t.currentPageChange(e,\"companyGoods\")}},model:{value:t.orderEncapsulation.odSkuCode,callback:function(e){t.$set(t.orderEncapsulation,\"odSkuCode\",e)},expression:\"orderEncapsulation.odSkuCode\"}},t._l(t.odSkuCodeList,function(e){return a(\"a-select-option\",{key:e},[t._v(t._s(e))])}),1)],1)],1),t.advanced?a(\"Animation\",{attrs:{name:\"fadeIn\"}},[a(\"a-col\",{attrs:{span:24}},[a(\"a-form-item\",{attrs:{\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol,label:\"产品规格\"}},[a(\"a-select\",{staticClass:\"inputWidth\",attrs:{showSearch:\"\",allowClear:\"\",showArrow:!1,filterOption:!1,defaultActiveFirstOption:!1},on:{search:function(e){return t.handleSelectChange(e,\"odSpec\")},change:function(e){t.inputChange(e,\"odSpec\")},popupScroll:function(e){return t.currentPageChange(e,\"companySpec\")}},model:{value:t.orderEncapsulation.odSpec,callback:function(e){t.$set(t.orderEncapsulation,\"odSpec\",e)},expression:\"orderEncapsulation.odSpec\"}},t._l(t.odSpecList,function(e){return a(\"a-select-option\",{key:e},[t._v(t._s(e))])}),1)],1),a(\"a-form-item\",{attrs:{\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol,label:\"订单来源\"}},[a(\"a-select\",{staticClass:\"inputWidth\",attrs:{allowClear:\"\"},on:{change:function(e){t.inputChange(e,\"osource\")}},model:{value:t.orderEncapsulation.osource,callback:function(e){t.$set(t.orderEncapsulation,\"osource\",e)},expression:\"orderEncapsulation.osource\"}},[a(\"a-select-option\",{attrs:{value:\"0\"}},[t._v(\"线上商城\")]),a(\"a-select-option\",{attrs:{value:\"1\"}},[t._v(\"线上定制\")]),a(\"a-select-option\",{attrs:{value:\"2\"}},[t._v(\"线下定制\")])],1)],1),a(\"a-form-item\",{attrs:{\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol,label:\"订单状态\"}},[a(\"a-select\",{staticClass:\"inputWidth\",attrs:{allowClear:\"\"},on:{change:function(e){t.inputChange(e,\"ostatus\")}},model:{value:t.orderEncapsulation.ostatus,callback:function(e){t.$set(t.orderEncapsulation,\"ostatus\",e)},expression:\"orderEncapsulation.ostatus\"}},[t._l(t.orderStatus,function(e,s){return[a(\"a-select-option\",{key:s,attrs:{value:s}},[t._v(t._s(e.label))])]})],2)],1)],1)],1):t._e(),t.advanced?a(\"Animation\",{staticStyle:{margin:\"8px 0\"},attrs:{name:\"fadeIn\"}},[a(\"a-col\",{attrs:{span:24}},[a(\"a-form-item\",{attrs:{\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol,label:\"承诺交期\"}},[a(\"a-range-picker\",{staticClass:\"inputWidth\",attrs:{format:\"YYYY-MM-DD\"},on:{change:function(e,a){t.dateChange(a)}}})],1)],1)],1):t._e()],1)],1),a(\"a-col\",{staticStyle:{margin:\"8px 0\",\"text-align\":\"right\"},attrs:{span:3}},[a(\"a-form-item\",{staticStyle:{\"text-align\":\"center\"}},[a(\"span\",{staticStyle:{cursor:\"pointer\",\"margin-right\":\"8px\"},on:{click:t.searchRest}},[t._v(\"重置\")]),a(\"span\",{staticStyle:{cursor:\"pointer\"},on:{click:t.toggleAdvanced}},[t._v(\"\\n          \"+t._s(t.advanced?\"收起\":\"展开\")+\"\\n          \"),a(\"a-icon\",{attrs:{type:t.advanced?\"caret-up\":\"caret-down\"}})],1)])],1)],1)],1)},u=[],p=a(\"fd3b\"),m=a(\"c1df\"),f=a.n(m),h=(a(\"5c3a\"),a(\"75cd\"));f.a.locale(\"zh-cn\");var b={mixins:[h[\"b\"],h[\"a\"],h[\"c\"]],components:{Animation:p[\"a\"]},data:function(){return{orderUrl:n[\"a\"].getOrderNumber,labelCol:{span:8},wrapperCol:{span:16},advanced:!1,orderStatus:d[\"c\"],orderEncapsulation:{},timer:\"\"}},methods:{toggleAdvanced:function(){this.advanced=!this.advanced},dateChange:function(t){var e=this;this.orderEncapsulation[\"odStartPromiseDueDate\"]=t[0],this.orderEncapsulation[\"odEndPromiseDueDate\"]=t[1],\"\"!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.$emit(\"dataChange\",e.orderEncapsulation)},500)},inputChange:function(t,e){var a=this;this.orderEncapsulation[e]=t,\"\"!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){a.$emit(\"dataChange\",a.orderEncapsulation)},500)},currentPageChange:function(t,e){var a=this.getCurrentPageChange(t);if(a)switch(e){case\"customer\":this.getListCompanyCusts(this.customerPage);break;case\"companyGoods\":this.getListCompanyGoodsCode(this.codeCurrentPage);break;case\"companySpec\":this.getListCompanySpringSpecs(this.specCurrentPage);break;case\"ocustAmaldar\":this.getCompanyAllUsers(this.locustAmalgamListPage);break}},searchRest:function(){for(var t in this.orderEncapsulation)this.orderEncapsulation[t]=\"\";this.$emit(\"dataChange\",this.orderEncapsulation)},handleSelectChange:function(t,e){var a=this;\"\"!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){a.searchConditions(t,e)},500)},searchConditions:function(t,e){switch(e){case\"ocustAmaldar\":this.locustAmalgamList=[],this.locustAmalgamListValue=t,this.getCompanyAllUsers();break;case\"odSkuCode\":this.odSkuCodeList=[],this.odSkuCodeListValue=t,this.getListCompanyGoodsCode();break;case\"odSpec\":this.odSpecList=[],this.odSpecListValue=t,this.getListCompanySpringSpecs();break;case\"customer\":this.listCompanyCusts=[],this.condition=t,this.getListCompanyCusts();break}}}},v=b,g=(a(\"ebe8\"),a(\"2877\")),C=Object(g[\"a\"])(v,c,u,!1,null,\"5af05e2b\",null),w=C.exports,I={components:{orderInfo:l[\"a\"],orderSearch:w},data:function(){return{editInfo:!1,pagination:{total:0,defaultPageSize:15,pageSize:15,defaultCurrent:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:[\"10\",\"15\",\"30\",\"50\",\"100\"]},columns:d[\"a\"],orderStatus:d[\"c\"],tabData:[],selectedRowKeys:[],selectedRows:[],loading:!0,orderEncapsulation:{},visible:!1,detialList:\"\",buttons:[]}},created:function(){this.getOrderList()},computed:{rowSelection:function(){var t=this.selectedRowKeys;return{selectedRowKeys:t,onChange:this.onChangeTab,hideDefaultSelections:!1}},getMenuPermission:function(){return this.$store.state.menuPermission}},methods:{onChangePage:function(t,e,a){this.pagination.pageSize=t.pageSize,this.getOrderList(t.current)},getOrderList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this.pagination.pageSize;this.loading=!0,Object(r[\"e\"])(n[\"a\"].getOrderList+\"\".concat(e,\"/\").concat(a),this.orderEncapsulation).then(function(e){0===e.data.code?(e.data.data.records?(t.tabData=e.data.data.records,t.tabData.forEach(function(t,e){t.key=e})):t.tabData=[],t.pagination.total=e.data.data.total):t.$message.error(e.data.msg),t.loading=!1,t.selectedRowKeys=[]}).catch(function(){t.loading=!1})},isVisible:function(t){this.visible=!1,t&&this.getOrderList()},onCustomerInfo:function(){this.visible=!1},orderInfo:function(t){\"-1\"===t?(this.editInfo=!1,this.$store.commit(\"setPromptTitle\",{title:\"新建销售订单\",isEdit:!1}),this.visible=!0):this.getMenuPermission.includes(\"DETAIL\")?(this.detialList=t,this.editInfo=!0,this.$store.commit(\"setPromptTitle\",{title:\"销售订单详情\",isEdit:!0}),this.visible=!0):this.$message.error(\"权限不足\")},onChangeTab:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},deleteOrder:function(){var t=this.selectedRowKeys,e=this.selectedRows,a=[],s=this;0===t.length?this.$message.error(\"请选择要删除的订单\"):(e.forEach(function(t,e){a.push(t.id)}),this.$confirm({title:\"您确定要删除订单信息吗？\",content:\"当您点击确定过后将删除选中的订单信息\",cancelText:\"取消\",okText:\"确定\",onOk:function(){Object(r[\"a\"])(n[\"a\"].deletedBatch+\"?idStr=\".concat(a.join(\",\"))).then(function(t){0===t.data.code&&(s.$message.success(\"删除成功\"),s.getOrderList())})}}))},dataChange:function(t){this.orderEncapsulation=Object(i[\"a\"])({},t),this.getOrderList()}}},k=I,y=(a(\"45a7\"),Object(g[\"a\"])(k,s,o,!1,null,\"7f0c31c2\",null));e[\"default\"]=y.exports},ebe8:function(t,e,a){\"use strict\";var s=a(\"b266\"),o=a.n(s);o.a},ef35:function(t,e,a){},fb18:function(t,e,a){},fd3b:function(t,e,a){\"use strict\";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"transition\",{attrs:{name:\"fadeIn\"}},[t._t(\"default\")],2)},o=[],i={name:\"Animation\",data:function(){return{}}},r=i,n=(a(\"dd71\"),a(\"2877\")),l=Object(n[\"a\"])(r,s,o,!1,null,\"05168ffc\",null);e[\"a\"]=l.exports},fe23:function(t,e,a){},fe75:function(t,e,a){}}]);","extractedComments":[]}