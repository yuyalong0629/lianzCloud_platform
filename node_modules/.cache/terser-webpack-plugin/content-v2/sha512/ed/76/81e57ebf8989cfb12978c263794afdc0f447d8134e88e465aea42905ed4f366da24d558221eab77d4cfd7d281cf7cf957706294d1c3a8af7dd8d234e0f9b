{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-8aea553c\"],{\"3b29\":function(t,e,a){},4372:function(t,e,a){},4917:function(t,e,a){\"use strict\";var s=a(\"cb7c\"),o=a(\"9def\"),i=a(\"0390\"),r=a(\"5f1b\");a(\"214f\")(\"match\",1,function(t,e,a,n){return[function(a){var s=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,s):new RegExp(a)[e](String(s))},function(t){var e=n(a,t,this);if(e.done)return e.value;var l=s(t),d=String(this);if(!l.global)return r(l,d);var c=l.unicode;l.lastIndex=0;var u,p=[],m=0;while(null!==(u=r(l,d))){var f=String(u[0]);p[m]=f,\"\"===f&&(l.lastIndex=i(d,o(l.lastIndex),c)),m++}return 0===m?null:p}]})},\"52af\":function(t,e,a){\"use strict\";var s=a(\"6f6b\"),o=a.n(s);o.a},\"5ca6\":function(t,e,a){},\"5d91\":function(t,e,a){\"use strict\";var s=a(\"fe75\"),o=a.n(s);o.a},\"5dbe\":function(t,e,a){\"use strict\";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"div\",{staticClass:\"add-order-list\"},[a(\"a-row\",[a(\"a-col\",{attrs:{span:24}},[a(\"h3\",{staticClass:\"addCustomer-title\"},[t._v(\"订单详情\")])]),a(\"a-col\",{attrs:{span:24}},[a(\"Detail\",{ref:\"detail\",attrs:{mallOrderIntactDto:t.mallOrderIntactDto,editInfo:t.editInfo,editDetial:t.editDetial,selectAddress:t.selectAddress},on:{setCustId:t.setCustId}})],1)],1),a(\"a-row\",[a(\"a-col\",{staticClass:\"mt\",attrs:{span:24}},[a(\"h3\",{staticClass:\"addCustomer-title\"},[t._v(\"产品详情\")])]),t.custId?a(\"a-col\",{attrs:{span:24}},[a(\"Product\",{ref:\"product\",attrs:{custId:t.custId,dataSource:t.dataSource,editInfo:t.editInfo,editDetial:t.editDetial,approval:t.approval,selectAddress:t.selectAddress}})],1):t._e()],1),a(\"a-row\",[a(\"a-col\",{staticClass:\"mt\",attrs:{span:24}},[a(\"h3\",{staticClass:\"addCustomer-title\"},[t._v(\"收货地址\")])]),t.custId?a(\"a-col\",{attrs:{span:24}},[a(\"Address\",{attrs:{ocustName:t.ocustName,custId:t.custId,addrId:t.addrId,editInfo:t.editInfo,editDetial:t.editDetial},on:{setAddressId:t.setAddressId}})],1):t._e()],1),a(\"a-row\",[a(\"a-col\",{staticClass:\"mt\",attrs:{span:24}},[a(\"h3\",{staticClass:\"addCustomer-title\"},[t._v(\"附件\")])]),t.custId?a(\"a-col\",{attrs:{span:24}},[a(\"Upload\",{ref:\"upload\",attrs:{editInfo:t.editInfo,editDetial:t.editDetial,file:t.fileList,selectAddress:t.selectAddress}})],1):t._e()],1)],1)])},o=[],i=a(\"75fc\"),r=(a(\"28a5\"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-row\",[a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"订单编码\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{staticClass:\"inputWidth\",attrs:{value:t.mallOrderIntactDto.oorderNumber,disabled:\"\"}})],1)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"客户名称\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-select\",{staticClass:\"inputWidth\",attrs:{disabled:t.editInfo,showSearch:\"\",showArrow:!1,filterOption:!1,defaultActiveFirstOption:!1,dropdownMatchSelectWidth:!1},on:{search:t.handleSelect,change:function(e){t.inputChange(e)},popupScroll:function(e){return t.currentPageChange(e)}},model:{value:t.mallOrderIntactDto.ocustShortName,callback:function(e){t.$set(t.mallOrderIntactDto,\"ocustShortName\",e)},expression:\"mallOrderIntactDto.ocustShortName\"}},t._l(t.listCompanyCusts,function(e,s){return a(\"a-select-option\",{key:s},[t._v(t._s(e.custCode)+\" - \"+t._s(e.custShortName))])}),1)],1)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"客户单号\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[t.selectAddress?a(\"a-input\",{staticClass:\"inputWidth\",attrs:{disabled:\"\"},model:{value:t.mallOrderIntactDto.opurchaseOrderno,callback:function(e){t.$set(t.mallOrderIntactDto,\"opurchaseOrderno\",e)},expression:\"mallOrderIntactDto.opurchaseOrderno\"}}):a(\"a-input\",{staticClass:\"inputWidth\",attrs:{disabled:t.editInfo&&!t.editDetial},model:{value:t.mallOrderIntactDto.opurchaseOrderno,callback:function(e){t.$set(t.mallOrderIntactDto,\"opurchaseOrderno\",e)},expression:\"mallOrderIntactDto.opurchaseOrderno\"}})],1)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"订单类型\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-select\",{staticClass:\"inputWidth\",attrs:{disabled:t.editInfo},model:{value:t.mallOrderIntactDto.otype,callback:function(e){t.$set(t.mallOrderIntactDto,\"otype\",e)},expression:\"mallOrderIntactDto.otype\"}},[t.editInfo?a(\"a-icon\",{staticStyle:{display:\"none\"},attrs:{slot:\"suffixIcon\",type:\"down\"},slot:\"suffixIcon\"}):t._e(),a(\"a-select-option\",{attrs:{value:\"FORMAL\"}},[t._v(\"正式\")]),a(\"a-select-option\",{attrs:{value:\"SAMPLE\"}},[t._v(\"样品\")]),a(\"a-select-option\",{attrs:{value:\"QUARTERLYRETURN\"}},[t._v(\"季度返点\")])],1)],1)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"总价\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[t.editInfo&&!t.editDetial||t.selectAddress?[t._v(t._s(t.mallOrderIntactDto.ototalSum)+\" 元\")]:a(\"a-input\",{staticClass:\"inputWidth\",model:{value:t.mallOrderIntactDto.ototalSum,callback:function(e){t.$set(t.mallOrderIntactDto,\"ototalSum\",e)},expression:\"mallOrderIntactDto.ototalSum\"}},[a(\"span\",{attrs:{slot:\"addonAfter\"},slot:\"addonAfter\"},[t._v(\"元\")])])],2)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"预收款\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[t.editInfo&&!t.editDetial||t.selectAddress?[t._v(t._s(t.mallOrderIntactDto.oprePayment||0)+\" 元\")]:a(\"a-input\",{staticClass:\"inputWidth\",model:{value:t.mallOrderIntactDto.oprePayment,callback:function(e){t.$set(t.mallOrderIntactDto,\"oprePayment\",e)},expression:\"mallOrderIntactDto.oprePayment\"}},[a(\"span\",{attrs:{slot:\"addonAfter\"},slot:\"addonAfter\"},[t._v(\"元\")])])],2)],1),t.editInfo?a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"状态\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-select\",{attrs:{disabled:\"\",value:t.mallOrderIntactDto.ostatus}},[a(\"a-icon\",{staticStyle:{display:\"none\"},attrs:{slot:\"suffixIcon\",type:\"down\"},slot:\"suffixIcon\"}),t._l(t.orderStatus,function(e,s){return[a(\"a-select-option\",{key:s,attrs:{value:e.value}},[t._v(t._s(e.label))])]})],2)],1)],1):t._e(),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"备注\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[t.selectAddress?a(\"a-input\",{staticClass:\"inputWidth\",attrs:{disabled:\"\"},model:{value:t.mallOrderIntactDto.oremarks,callback:function(e){t.$set(t.mallOrderIntactDto,\"oremarks\",e)},expression:\"mallOrderIntactDto.oremarks\"}}):a(\"a-input\",{staticClass:\"inputWidth\",attrs:{disabled:t.editInfo&&!t.editDetial},model:{value:t.mallOrderIntactDto.oremarks,callback:function(e){t.$set(t.mallOrderIntactDto,\"oremarks\",e)},expression:\"mallOrderIntactDto.oremarks\"}})],1)],1)],1)}),n=[],l=a(\"75cd\"),d=a(\"c4ce\"),c=a(\"cba0\"),u={props:{mallOrderIntactDto:{type:Object,required:!0},editInfo:{type:Boolean,required:!0,default:!1},editDetial:{type:Boolean,required:!0,default:!1},selectAddress:{type:Boolean,required:!1,default:!1}},mixins:[l[\"a\"],l[\"b\"]],data:function(){return{labelCol:{span:6},wrapperCol:{span:18},timer:\"\",orderStatus:d[\"c\"]}},methods:{inputChange:function(t){this.mallOrderIntactDto.ocustShortName=this.listCompanyCusts[t].custShortName,this.mallOrderIntactDto.ocustName=this.listCompanyCusts[t].custName;var e=this.listCompanyCusts[t].id;this.mallOrderIntactDto.custId=e,this.$emit(\"setCustId\",{custId:e,ocustName:this.listCompanyCusts[t].custName})},currentPageChange:function(t){var e=this.getCurrentPageChange(t);e&&this.getListCompanyCusts(this.customerPage)},handleSelect:function(t){var e=this;\"\"!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.listCompanyCusts=[],e.condition=t,e.getListCompanyCusts()},500)}},created:function(){var t=this;this.getListCompanyCusts(),c[\"a\"].$on(\"setOtotalSum\",function(e){t.mallOrderIntactDto.ototalSum=e})},beforeDestroy:function(){c[\"a\"].$off(\"setOtotalSum\")}},p=u,m=(a(\"d607\"),a(\"2877\")),f=Object(m[\"a\"])(p,r,n,!1,null,\"565fed76\",null),h=f.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-row\",[a(\"a-table\",{attrs:{columns:t.columns,dataSource:t.data,pagination:!1,scroll:{x:1250}},scopedSlots:t._u([{key:\"name\",fn:function(e,s){return[a(\"a-tooltip\",{attrs:{placement:\"top\"}},[a(\"template\",{slot:\"title\"},[a(\"span\",[t._v(t._s(s.odSkuName)+\"-\"+t._s(s.code||s.odSkuCode))])]),a(\"a\",{staticClass:\"text-hidden\",attrs:{href:\"javascript:;\"},on:{click:function(e){return t.getGoodsViews(s.skuId)}}},[t._v(t._s(s.odSkuName)+\"-\"+t._s(s.code||s.odSkuCode))])],2)]}},t._l([\"odSkuCustPrice\",\"odNumber\",\"odAmount\",\"odPurchaseOrderno\",\"odRequireDueDate\",\"odPromiseDueDate\"],function(e){return{key:e,fn:function(s,o){return[a(\"div\",{key:e},[o.editable&&\"odRequireDueDate\"!==e&&\"odPromiseDueDate\"!==e?a(\"a-input\",{staticStyle:{width:\"80px\"},attrs:{value:s,size:\"small\"},on:{change:function(a){return t.editCell(a.target.value,o.key,e)}}}):!o.editable||\"odRequireDueDate\"!==e&&\"odPromiseDueDate\"!==e?[a(\"span\",\"odRequireDueDate\"===e||\"odPromiseDueDate\"===e?[t._v(t._s(s?t.moment(s).format(\"YYYY-MM-DD\"):\"\"))]:[t._v(t._s(s))])]:[a(\"a-date-picker\",s?{staticStyle:{width:\"100px\"},attrs:{size:\"small\",defaultValue:t.moment(t.moment(s).format(\"YYYY-MM-DD\"),\"YYYY-MM-DD\"),format:\"YYYY-MM-DD\"},on:{change:function(a,s){return t.editCell(s,o.key,e)}}}:{staticStyle:{width:\"100px\"},attrs:{size:\"small\",format:\"YYYY-MM-DD\"},on:{change:function(a,s){return t.editCell(s,o.key,e)}}},[a(\"span\",{staticStyle:{display:\"none\"},attrs:{slot:\"suffixIcon\"},slot:\"suffixIcon\"})])]],2)]}}}),{key:\"operation\",fn:function(e,s){return[a(\"div\",{staticClass:\"editable-row-operations\"},[s.editable?a(\"span\",[a(\"a\",{staticStyle:{\"margin-right\":\"10px\"},on:{click:function(){return t.save(s.key)}}},[t._v(\"保存\")]),a(\"a-popconfirm\",{attrs:{title:\"确认删除吗?\"},on:{confirm:function(){return t.cancel(s.key)}}},[a(\"a\",{attrs:{href:\"javascript:;\"}},[t._v(\"删除\")])])],1):a(\"span\",[t.selectAddress?a(\"span\"):!t.approval&&t.editDetial||!t.editInfo?a(\"a\",{on:{click:function(){return t.edit(s.key)}}},[t._v(\"编辑\")]):a(\"span\")])])]}}],null,!0)}),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.editInfo,expression:\"!editInfo\"}],staticClass:\"editable-add-btn\",on:{click:t.onAddContact}},[t._v(\"+添加产品\")]),a(\"a-modal\",{attrs:{title:\"添加\",maskClosable:!1,closable:!1,footer:null,visible:t.isAddContactInfo},on:{ok:t.handleOkContact,cancel:t.handleOkContact}},[a(\"EditableCell\",{attrs:{custId:t.custId},on:{showAddContactInfo:t.showAddContactInfo}})],1),a(\"a-drawer\",{attrs:{placement:\"right\",closable:!1,visible:t.towVisible,wrapStyle:{height:\"100%\",overflow:\"auto\",paddingBottom:\"108px\"},width:1040},on:{close:t.isDrawer}},[a(\"GoodsInfo\",{attrs:{goodsViewInfo:t.goodsViewInfo},on:{isDrawer:t.isDrawer}})],1)],1)},b=[],C=(a(\"c5f6\"),a(\"59ad\")),g=a.n(C),I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-form\",{attrs:{form:t.form}},[a(\"a-form-item\",{attrs:{label:\"产品编码\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sku.code\",{rules:[{required:!0,message:\"请选择产品编码\"}],initialValue:t.sku.code}],expression:\"['sku.code',{rules: [{ required: true, message: '请选择产品编码' }],initialValue:sku.code}]\"}],staticStyle:{width:\"280px\"},attrs:{showSearch:\"\",showArrow:!1,filterOption:!1,defaultActiveFirstOption:!1},on:{search:t.handleSelect,change:function(e){t.inputChange(e)},popupScroll:function(e){return t.currentPageChange(e)}}},t._l(t.listCustomerGoods,function(e,s){return a(\"a-select-option\",{key:s},[t._v(t._s(e.code)+\" - \"+t._s(e.name))])}),1)],1),a(\"a-form-item\",{attrs:{label:\"订单数量\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sku.odNumber\",{rules:[{required:!0,message:\"请输入订单数量\"},{validator:t.odNumberRegx}],initialValue:t.sku.odNumber}],expression:\"['sku.odNumber',{rules: [{ required: true, message: '请输入订单数量' }, {validator: odNumberRegx}],initialValue:sku.odNumber}]\"}],staticStyle:{width:\"280px\"},on:{change:function(e){t.inputnumChange(e.target.value)}}},[a(\"span\",{attrs:{slot:\"addonAfter\"},slot:\"addonAfter\"},[t._v(t._s(t.sku.unit))])])],1),a(\"a-form-item\",{attrs:{label:\"产品单价\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sku.odSkuCustPrice\",{initialValue:t.sku.odSkuCustPrice}],expression:\"['sku.odSkuCustPrice',{initialValue:sku.odSkuCustPrice}]\"}],staticStyle:{width:\"280px\"},on:{change:function(e){t.inputPriceChange(e.target.value)}}},[a(\"span\",{attrs:{slot:\"addonAfter\"},slot:\"addonAfter\"},[t._v(\"元\")])])],1),a(\"a-form-item\",{attrs:{label:\"订单总计\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sku.odAmount\",{initialValue:t.sku.odAmount}],expression:\"['sku.odAmount',{initialValue:sku.odAmount}]\"}],staticStyle:{width:\"280px\"}},[a(\"span\",{attrs:{slot:\"addonAfter\"},slot:\"addonAfter\"},[t._v(\"元\")])])],1),a(\"a-form-item\",{attrs:{label:\"采购单号：\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sku.odPurchaseOrderno\"],expression:\"['sku.odPurchaseOrderno']\"}],staticStyle:{width:\"280px\"}})],1),a(\"a-form-item\",{attrs:{label:\"要求交期\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sku.odRequireDueDate\"],expression:\"['sku.odRequireDueDate']\"}],staticStyle:{width:\"280px\"}})],1),a(\"a-form-item\",{attrs:{label:\"承诺交期\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sku.odPromiseDueDate\"],expression:\"['sku.odPromiseDueDate']\"}],staticStyle:{width:\"280px\"}})],1),a(\"a-form-item\",{style:{textAlign:\"center\"}},[a(\"a-button\",{style:{marginRight:\"8px\"},on:{click:t.handleReset}},[t._v(\"取消\")]),a(\"a-button\",{attrs:{type:\"primary\"},on:{click:t.handleEditableInfo}},[t._v(\"确认添加\")])],1)],1)},y=[],w=a(\"cebc\"),k=(a(\"6b54\"),a(\"06db\"),a(\"4917\"),a(\"7f7f\"),a(\"0d5e\")),S=a(\"365c\"),D=a(\"c1df\"),_=a.n(D),A={mixins:[l[\"b\"]],props:{custId:{type:String}},data:function(){return{form:this.$form.createForm(this),customerGoods:1,customerGoodsPages:0,currentPage:1,currentTotal:null,labelCol:{span:6,offset:0},wrapperCol:{span:16},sku:{skuId:\"\",code:void 0,odSkuName:\"\",odSpec:\"\",taxRate:0,odSkuCustPrice:\"\",odAmount:\"\",odSkuCustCode:\"\",unit:\"\"},codeKey:\"\",timer:\"\",listCustomerGoods:[]}},created:function(){this.getListCompanyCustomGoods()},methods:{moment:_.a,inputChange:function(t){var e=this,a=this.listCustomerGoods[t];this.form.resetFields(\"sku.odNumber\"),this.sku.odAmount=\"\",this.sku.odSkuCustPrice=\"\",Object(k[\"c\"])(S[\"a\"].getSkuPrice+\"/\".concat(a.id,\"/\").concat(this.custId)).then(function(t){if(0===t.data.code){var a=t.data.data,s=a.skuCustPrice;e.sku.odSkuName=a.name,e.sku.odSpec=a.spec,e.sku.taxRate=a.taxRate,e.sku.odSkuCustPrice=s.length?s[0].price:a.price,e.sku.code=a.code,e.sku.odSkuCustCode=a.skuCustInfo?a.skuCustInfo.custSkuCode:\"\",e.sku.skuId=a.id,e.sku.unit=a.unit}})},inputnumChange:function(t){var e=this.form.getFieldValue(\"sku.odSkuCustPrice\"),a=0;a=Number((Number(e)*Number(t)).toString().match(/^\\d+(?:\\.\\d{0,2})?/)),this.sku.odAmount=a},inputPriceChange:function(t){var e=this.form.getFieldValue(\"sku.odNumber\"),a=0;a=Number((Number(e)*Number(t)).toString().match(/^\\d+(?:\\.\\d{0,2})?/)),this.sku.odAmount=a},handleEditableInfo:function(t){var e=this;t.preventDefault(),this.form.validateFields(function(t,a){if(!t){var s={odRequireDueDate:a.sku.odRequireDueDate?a.sku.odRequireDueDate.format(\"YYYY-MM-DD\"):\"\",odPromiseDueDate:a.sku.odPromiseDueDate?a.sku.odPromiseDueDate.format(\"YYYY-MM-DD\"):\"\",odAmount:a.sku.odAmount,odNumber:a.sku.odNumber,odSkuCustPrice:a.sku.odSkuCustPrice,odPurchaseOrderno:a.sku.odPurchaseOrderno},o={},i=Object(w[\"a\"])({},e.sku,s);for(var r in o.isAddContactInfo=!1,o.sku=i,e.$emit(\"showAddContactInfo\",o),e.sku)e.sku[r]=\"\";e.form.resetFields()}})},handleReset:function(){var t={isAddContactInfo:!1};for(var e in this.sku)this.sku[e]=\"\";this.form.resetFields(),this.$emit(\"showAddContactInfo\",t)},currentPageChange:function(t){var e=this.getCurrentPageChange(t);e&&(this.listCustomerGoods.length>=this.currentTotal?this.getListCustomerGoods():this.getListCustomerGoods(this.customerGoods))},handleSelect:function(t){var e=this;\"\"!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.listCustomerGoods=[],e.codeKey=t,e.getListCompanyCustomGoods()},500)},getListCompanyCustomGoods:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;Object(k[\"c\"])(S[\"a\"].getListCompanyCustomGoods,{key:this.codeKey,skuType:\"SPRING\",currentPage:e,pageSize:a,custId:this.custId}).then(function(e){var s=e.data.data.records;t.listCustomerGoods=t.listCustomerGoods.concat(s),t.currentPage+=1,t.currentTotal=Number(e.data.data.total),Number(e.data.data.total)<a&&t.getListCustomerGoods()})},getListCustomerGoods:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;e>this.customerGoodsPages&&0!==this.customerGoodsPages||Object(k[\"c\"])(S[\"a\"].getListCompanyGoods,{key:this.codeKey,skuType:\"SPRING\",currentPage:e,pageSize:a}).then(function(e){var a=e.data.data.records;t.listCustomerGoods=t.listCustomerGoods.concat(a),t.customerGoodsPages=Number(e.data.data.pages),t.customerGoods+=1})},odNumberRegx:function(t,e,a){e&&e<=0?a(\"购买数量不能为0\"):a()}}},O=A,R=Object(m[\"a\"])(O,I,y,!1,null,null,null),x=R.exports,P=a(\"350b\"),N={props:{dataSource:{type:Array,required:!0,default:function(){return[]}},custId:{type:String,required:!0},editInfo:{type:Boolean,required:!0,default:!1},editDetial:{type:Boolean,required:!0,default:!1},approval:{type:Boolean},selectAddress:{type:Boolean,required:!1,default:!1}},components:{EditableCell:x,GoodsInfo:P[\"a\"]},data:function(){return{columns:d[\"b\"],towVisible:!1,isAddContactInfo:!1,goodsViewInfo:{},data:this.dataSource}},methods:{moment:_.a,onAddContact:function(){\"\"!==this.custId?this.isAddContactInfo=!0:this.$message.warning(\"请先选择客户名称\")},setOtotalSum:function(t){var e=0;for(var a in t)e+=g()(t[a].odAmount);c[\"a\"].$emit(\"setOtotalSum\",e)},handleOkContact:function(t){var e=this;setTimeout(function(){e.isAddContactInfo=!1},1e3)},showAddContactInfo:function(t){this.isAddContactInfo=t.isAddContactInfo;var e=this.data;t.sku&&(t.sku.key=e.length,e.push(t.sku),this.setOtotalSum(e),this.data=e)},edit:function(t){if(!this.editInfo||this.editDetial){var e=Object(i[\"a\"])(this.data),a=e.filter(function(e){return t===e.key})[0];a&&(a.editable=!0,this.data=e)}},editCell:function(t,e,a){var s=Object(i[\"a\"])(this.data),o=s.filter(function(t){return e===t.key})[0];o&&(o[a]=t,\"odNumber\"!==a&&\"odSkuCustPrice\"!==a||(o[\"odAmount\"]=Number(o[\"odNumber\"])*Number(o[\"odSkuCustPrice\"])),this.data=s,this.setOtotalSum(s))},save:function(t){var e=Object(i[\"a\"])(this.data),a=e.filter(function(e){return t===e.key})[0];a&&(delete a.editable,this.data=e,this.setOtotalSum(e))},cancel:function(t){var e=Object(i[\"a\"])(this.data),a=e.filter(function(e){return t!==e.key});this.data=a,this.setOtotalSum(this.data)},getGoodsViews:function(t){this.getViewInfo(t),this.$store.commit(\"setPromptTitle\",{title:\"产品信息详情\",isEdit:!0})},getViewInfo:function(t){var e=this;Object(k[\"c\"])(S[\"a\"].goodsView+\"?skuId=\".concat(t)).then(function(t){0===t.data.code&&(e.goodsViewInfo=t.data.data,e.towVisible=!0)}).catch(function(t){console.log(t)})},isDrawer:function(){this.towVisible=!1}}},L=N,$=(a(\"cf10\"),Object(m[\"a\"])(L,v,b,!1,null,\"ece1e3da\",null)),j=$.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-row\",[t._l(t.addressList,function(e,s){return a(\"div\",{key:e.id,staticClass:\"address-list\",on:{click:function(a){return t.choseAddress(s,e.id)}}},[t.editInfo&&e.id==t.addressId&&!t.editDetial?a(\"div\",{staticClass:\"address-list-item\",class:{\"item-active\":e.id==t.addressId}},[a(\"div\",{staticClass:\"address-list-item-desc\"},[t._v(\"\\n        \"+t._s(t.ocustName)+\"\\n        \"),a(\"ul\",[a(\"li\",[t._v(\"收件人：\"+t._s(e.receiver))]),a(\"li\",[t._v(\"联系方式：\"+t._s(e.phone))]),a(\"li\",[t._v(\"地址：\"+t._s(e.cityAddress?e.cityAddress:\"\")+t._s(e.detailAddr))])])])]):!t.editInfo||t.editDetial?a(\"div\",{staticClass:\"address-list-item\",class:{\"item-active\":e.id==t.addressId}},[a(\"div\",{staticClass:\"address-list-item-desc\"},[t._v(\"\\n        \"+t._s(t.ocustName)+\"\\n        \"),a(\"ul\",[a(\"li\",[t._v(\"收件人：\"+t._s(e.receiver))]),a(\"li\",[t._v(\"联系方式：\"+t._s(e.phone))]),a(\"li\",[t._v(\"地址：\"+t._s(e.cityAddress?e.cityAddress:\"\")+t._s(e.detailAddr))])])])]):t._e()])}),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.editInfo||t.editDetial,expression:\"!editInfo || editDetial\"}],staticClass:\"editable-add-btn\",on:{click:t.addAddress}},[t._v(\"+添加地址\")]),a(\"a-modal\",{attrs:{title:\"添加地址\",footer:null},model:{value:t.visible,callback:function(e){t.visible=e},expression:\"visible\"}},[a(\"addAddress\",{attrs:{custId:t.custId},on:{addressCancel:t.addressCancel}})],1)],2)},T=[],q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"address\"},[a(\"a-form\",{attrs:{form:t.form}},[a(\"a-form-item\",{attrs:{label:\"收件人姓名\",\"label-col\":{span:5},\"wrapper-col\":{span:16},required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"obj.receiver\",{rules:[{required:!0,message:\"请输入收件人姓名\"}],initialValue:t.obj.receiver}],expression:\"['obj.receiver',{rules:[{ required: true, message: '请输入收件人姓名'}],initialValue:obj.receiver}]\"}]})],1),a(\"a-form-item\",{attrs:{label:\"所在地区\",\"label-col\":{span:5},\"wrapper-col\":{span:16},required:\"\"}},[a(\"a-cascader\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"obj.areas\",{rules:[{required:!0,message:\"请选择收件人所在地区\"}],initialValue:t.obj.areas}],expression:\"['obj.areas',{rules:[{ required: true, message: '请选择收件人所在地区'}],initialValue:obj.areas}]\"}],attrs:{options:t.areas,placeholder:\"\",fieldNames:{label:\"name\",value:\"id\",children:\"childrens\"}},on:{change:t.areaHandleChange}})],1),a(\"a-form-item\",{attrs:{label:\"街道地址\",\"label-col\":{span:5},\"wrapper-col\":{span:16},required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"obj.detailAddr\",{rules:[{required:!0,message:\"请输入收件人详细地址\"}],initialValue:t.obj.detailAddr}],expression:\"['obj.detailAddr',{rules:[{ required: true, message: '请输入收件人详细地址'}],initialValue:obj.detailAddr}]\"}]})],1),a(\"a-form-item\",{attrs:{label:\"手机号码\",\"label-col\":{span:5},\"wrapper-col\":{span:16},required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"obj.phone\",{rules:[{required:!0,message:\"请输入收件人手机号码\"}],initialValue:t.obj.phone}],expression:\"['obj.phone',{rules:[{ required: true, message: '请输入收件人手机号码'}],initialValue:obj.phone}]\"}],attrs:{max:\"11\"}})],1),a(\"a-form-item\",{attrs:{\"label-col\":{span:5},\"wrapper-col\":{span:14,offset:5}}},[a(\"a-checkbox\",{attrs:{defaultChecked:t.defaultAdd},on:{change:t.defaultSelect}},[t._v(\"设为默认收货地址\")])],1),a(\"a-form-item\",{staticStyle:{\"text-align\":\"center\"}},[a(\"a-button\",{staticStyle:{background:\"#8F939A\",border:\"none\",\"margin-right\":\"8px\"},attrs:{type:\"primary\"},on:{click:t.handleCancel}},[t._v(\"关闭\")]),a(\"a-button\",{staticStyle:{background:\"#F0BB2E\",border:\"none\"},attrs:{type:\"primary\"},on:{click:t.handleOk}},[t._v(\"保存\")])],1)],1)],1)},V=[],Y=a(\"f46e\"),G={props:{custId:{type:String,default:\"\",required:!1},obj:{type:Object,required:!1,default:function(){return{area:\"\",areaStr:\"\",city:\"\",cityStr:\"\",custId:this.custId,defaultGoodsAddr:\"\",detailAddr:\"\",phone:\"\",province:\"\",provinceStr:\"\",receiver:\"\",areas:[]}}}},data:function(){return{areas:Y.areas,defaultAdd:!1,form:this.$form.createForm(this)}},methods:{defaultSelect:function(t){this.defaultAdd=t.target.checked},areaHandleChange:function(t,e){if(t.length){var a=e.map(function(t){return t.name});this.obj.city=t[0],this.obj.province=t[1],this.obj.area=t[2],this.obj.cityStr=a[0],this.obj.provinceStr=a[1],this.obj.areaStr=a[2]}},handleOk:function(t){var e=this;t.preventDefault();var a=this.obj;this.form.validateFields(function(t,s){t||(a=Object(w[\"a\"])({},a,s.obj),a.defaultGoodsAddr=e.defaultAdd?1:0,delete a.areas,Object(k[\"e\"])(S[\"a\"].setAddressIvo,a).then(function(t){0===t.data.code&&e.$message.success(\"添加地址成功\"),e.$emit(\"addressCancel\",!0)}),e.form.resetFields())})},handleCancel:function(t){this.$emit(\"addressCancel\",!1)}}},B=G,M=(a(\"5f8e\"),Object(m[\"a\"])(B,q,V,!1,null,\"2b3932d8\",null)),z=M.exports,F=a(\"f46e\"),W={props:{ocustName:String,custId:String,editInfo:{type:Boolean,required:!0,default:!1},editDetial:{type:Boolean,required:!0,default:!1},addrId:String},components:{addAddress:z},data:function(){return{addressList:[],visible:!1,areas:F[\"areas\"],addressId:this.addrId}},watch:{custId:function(t){this.getAddressList(t)},deep:!0},created:function(){this.getAddressList(this.custId)},methods:{addAddress:function(){\"\"!==this.custId?this.visible=!0:this.$message.warning(\"请先选择客户名称\")},choseAddress:function(t,e){if(!this.editInfo||this.editDetial){var a=this.addressList;a.forEach(function(t){t.defaultGoodsAddr=0}),a[t].defaultGoodsAddr=1,this.addressId=e,this.$emit(\"setAddressId\",e)}},addressCancel:function(t){t&&this.getAddressList(this.custId),this.visible=!1},getAddressList:function(t){var e=this;Object(k[\"c\"])(S[\"a\"].getAddressList+\"/\".concat(t)).then(function(t){var a=t.data.data;a.length>0&&a.forEach(function(t){null!==t.city&&null!==t.province&&null!==t.area&&(t[\"cityAddress\"]=e.getCPA(e.areas,[t.city,t.province,t.area],0,[]))}),e.addressList=a})},getCPA:function(t,e,a,s){var o=this;return t.forEach(function(t){t.id===e[a]&&(s.push(t.name),t.childrens&&o.getCPA(t.childrens,e,a+1,s))}),s.join(\"\")}}},U=W,H=(a(\"5d91\"),Object(m[\"a\"])(U,E,T,!1,null,\"6b2f8d6c\",null)),K=H.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-row\",[a(\"a-upload\",{attrs:{action:t.url,data:{bizType:\"ORDER\"},headers:t.headers,listType:\"picture-card\",fileList:t.fileList,disabled:t.editInfo&&!t.editDetial||t.selectAddress},on:{preview:t.handlePreview,change:t.handleChange}},[a(\"div\",[a(\"a-icon\",{attrs:{type:\"plus\"}}),a(\"div\",{staticClass:\"ant-upload-text\"},[t._v(\"Upload\")])],1),a(\"a-modal\",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[a(\"uploadShow\",{attrs:{fileList:t.fileList,editInfo:t.editInfo,editDetial:t.editDetial}})],1)],1)],1)},Q=[],X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-row\",[a(\"a-col\",{attrs:{span:24}},[a(\"a-row\",[a(\"a-col\",{attrs:{span:16}},[a(\"a-form-item\",{attrs:{label:\"文件描述\",\"label-col\":{span:5},\"wrapper-col\":{span:15}}},[t.editInfo&&!t.editDetial?[a(\"a-tooltip\",{attrs:{placement:\"top\",title:t.current.name}},[t._v(t._s(t.current.name))])]:a(\"a-input\",{model:{value:t.current.name,callback:function(e){t.$set(t.current,\"name\",e)},expression:\"current.name\"}})],2)],1),a(\"a-col\",{attrs:{sapn:1}}),a(\"a-col\",{staticStyle:{\"line-height\":\"39px\"},attrs:{span:7}},[a(\"a-button\",{on:{click:function(e){return t.downloadIamge(t.current)}}},[t._v(\"下载\")])],1)],1)],1),a(\"a-col\",{attrs:{span:24}},[a(\"a-carousel\",{attrs:{dotsClass:\"slick-dots slick-thumb\"},scopedSlots:t._u([{key:\"customPaging\",fn:function(e){return a(\"a\",{},[a(\"a-tooltip\",{attrs:{placement:\"bottom\",title:t.fileList[e.i].name}},[\"img\"===t.fileList[e.i].type?a(\"img\",{attrs:{src:t.fileList[e.i].url},on:{click:function(a){return t.handleImg(e.i)}}}):[\"pdf\"===t.fileList[e.i].type?a(\"span\",{staticClass:\"fileType\",on:{click:function(a){return t.handleImg(e.i)}}},[a(\"a-icon\",{attrs:{type:\"file-pdf\"}})],1):\"word\"===t.fileList[e.i].type?a(\"span\",{staticClass:\"fileType\",on:{click:function(a){return t.handleImg(e.i)}}},[a(\"a-icon\",{attrs:{type:\"file-word\"}})],1):\"xlsx\"===t.fileList[e.i].type?a(\"span\",{staticClass:\"fileType\",on:{click:function(a){return t.handleImg(e.i)}}},[a(\"a-icon\",{attrs:{type:\"file-excel\"}})],1):\"ppt\"===t.fileList[e.i].type?a(\"span\",{staticClass:\"fileType\",on:{click:function(a){return t.handleImg(e.i)}}},[a(\"a-icon\",{attrs:{type:\"file-ppt\"}})],1):a(\"span\",{staticClass:\"fileType\",on:{click:function(a){return t.handleImg(e.i)}}},[a(\"a-icon\",{attrs:{type:\"file\"}})],1)]],2)],1)}}])},t._l(t.fileList,function(t){return a(\"div\",{key:t.url},[\"img\"===t.type?a(\"img\",{attrs:{src:t.url}}):[\"pdf\"===t.type?a(\"span\",{staticClass:\"fileType list-type\"},[a(\"a-icon\",{attrs:{type:\"file-pdf\"}})],1):\"word\"===t.type?a(\"span\",{staticClass:\"fileType list-type\"},[a(\"a-icon\",{attrs:{type:\"file-word\"}})],1):\"xlsx\"===t.type?a(\"span\",{staticClass:\"fileType list-type\"},[a(\"a-icon\",{attrs:{type:\"file-excel\"}})],1):\"ppt\"===t.type?a(\"span\",{staticClass:\"fileType list-type\"},[a(\"a-icon\",{attrs:{type:\"file-ppt\"}})],1):a(\"span\",{staticClass:\"fileType list-type\"},[a(\"a-icon\",{attrs:{type:\"file\"}})],1)]],2)}),0)],1)],1)},Z=[],tt={props:{fileList:{type:Array},editInfo:{type:Boolean,required:!0,default:!1},editDetial:{type:Boolean,required:!0,default:!1}},data:function(){return{current:this.fileList[0]}},methods:{handleImg:function(t){this.current=this.fileList[t]},downloadIamge:function(t){var e=new XMLHttpRequest;e.open(\"get\",t.url,!0),e.responseType=\"blob\",e.onload=function(){if(200===this.status){var e=this.response,a=document.createElement(\"a\");a.download=t.name,a.href=window.URL.createObjectURL(e),a.style.display=\"none\",a.click()}},e.send()}}},et=tt,at=(a(\"52af\"),Object(m[\"a\"])(et,X,Z,!1,null,\"00360cb8\",null)),st=at.exports,ot={props:{file:{type:Array},editInfo:{type:Boolean,required:!0,default:!1},editDetial:{type:Boolean,required:!0,default:!1},selectAddress:{type:Boolean,required:!1,default:!1}},mixins:[l[\"d\"]],components:{uploadShow:st},data:function(){return{fileList:this.file}}},it=ot,rt=(a(\"ad56\"),Object(m[\"a\"])(it,J,Q,!1,null,\"682d04da\",null)),nt=rt.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-row\",[a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"计划员：\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{staticClass:\"inputWidth\",attrs:{placeholder:\"请输入订单编号\"}})],1)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"工厂厂长：\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{staticClass:\"inputWidth\",attrs:{placeholder:\"请输入净价总价\"}})],1)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"生产基地：\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-cascader\",{staticClass:\"inputWidth\",attrs:{options:t.areas,placeholder:\"请选择生产基地\",fieldNames:{label:\"name\",value:\"id\",children:\"childrens\"}}})],1)],1)],1)},dt=[],ct={data:function(){return{labelCol:{span:6},wrapperCol:{span:18},areas:F[\"areas\"]}}},ut=ct,pt=(a(\"ae71\"),Object(m[\"a\"])(ut,lt,dt,!1,null,\"6b0ecd3a\",null)),mt=pt.exports,ft={props:{editInfo:{type:Boolean},detialList:{type:String},selectAddress:{type:Boolean,default:!1},approval:{type:Boolean,default:!1,required:!1}},components:{Address:K,Dispatch:mt,Detail:h,Product:j,Upload:nt},data:function(){return{mallOrderIntactDto:{oorderNumber:\"自动生成\",ocustName:\"\",otype:\"FORMAL\",addrId:\"\",opurchaseOrderno:\"\",custId:\"\",ocustShortName:\"\",ototalSum:\"\",oattachment:\"\",oprePayment:\"\",oremarks:\"\",ostatus:\"\"},dataSource:[],editDetial:!1,custId:\"\",ocustName:\"\",addrId:\"\",fileList:[],timer:\"\"}},methods:{setCustId:function(t){this.custId=t.custId,this.ocustName=t.ocustName},setAddressId:function(t){this.addrId=t},orderSubmit:function(t){var e=this;if(\"\"!==this.custId){var a=this.$refs.upload.uploadFile.join(\",\"),s=this.$refs.detail.mallOrderIntactDto,o=this.$refs.product.data;\"\"!==this.addrId&&void 0!==this.addrId||this.$message.warning(\"暂未设置收货地址\"),s.addrId=this.addrId,s.ocustAddrId=this.addrId,s.oattachment=a,0!==o.length?(this.$emit(\"subLoading\",!0),t?(o.forEach(function(t){delete t.sku}),s.orderDetails=o,delete s.skuList,Object(k[\"f\"])(S[\"a\"].updateOrder,s).then(function(t){0===t.data.code?e.$message.success(\"订单修改成功\",1).then(function(){e.$emit(\"isVisible\",!0)}):(e.$message.error(t.data.msg),e.$emit(\"subLoading\",!1))}).catch(function(){e.$message.error(\"服务出错\"),e.$emit(\"subLoading\",!1)})):(s.skuList=o,delete s.ostatus,delete s.oorderNumber,Object(k[\"e\"])(S[\"a\"].orderSave,s).then(function(t){0===t.data.code?e.$message.success(\"订单添加成功\",1).then(function(){e.$emit(\"isVisible\",!0)}):(e.$message.error(t.data.msg),e.$emit(\"subLoading\",!1))}).catch(function(){e.$message.error(\"服务出错\"),e.$emit(\"subLoading\",!1)}))):this.$message.warning(\"请添加购买商品\")}else this.$message.warning(\"请先选择客户名称\")},getOrderDetail:function(t){var e=this;Object(k[\"c\"])(S[\"a\"].getOrderDetail+\"\".concat(t)).then(function(t){e.mallOrderIntactDto=t.data.data,e.custId=t.data.data.custId,e.addrId=t.data.data.addrId,e.ocustName=t.data.data.ocustName;var a=t.data.data.skuList,s=t.data.data.oattachment;for(var o in a)a[o].key=o;if(e.dataSource=a,s){var i=[],r=s.split(\",\");for(var n in r){var l=r[n].split(\"/\");l=l[l.length-1].split(\".\");var d=l[1];\"jpeg\"!==d&&\"png\"!==d&&\"svg\"!==d&&\"gif\"!==d&&\"jpg\"!==d||(d=\"img\"),i.push({uid:n,name:l[0],type:d,status:\"done\",url:r[n]})}e.fileList=i}}).catch(function(){e.$message.error(\"系统错误\")})}},created:function(){var t=this;this.editInfo&&this.getOrderDetail(this.detialList),c[\"a\"].$on(\"isDisabled\",function(e){if(t.editDetial=!e,e){var a=Object(i[\"a\"])(t.dataSource);a.forEach(function(t){delete t.editable})}}),c[\"a\"].$on(\"isDelete\",function(e){if(!e){var a=t.mallOrderIntactDto.id;Object(k[\"a\"])(S[\"a\"].deletedBatch+\"?idStr=\".concat(a)).then(function(e){0===e.data.code?(t.$message.success(\"删除成功\"),t.$emit(\"isVisible\",!0)):t.$message.error(e.data.msg)})}}),c[\"a\"].$on(\"submitOrder\",function(e){t.orderSubmit(e)})},beforeDestroy:function(){c[\"a\"].$off(\"isDisabled\"),c[\"a\"].$off(\"isDelete\"),c[\"a\"].$off(\"submitOrder\")}},ht=ft,vt=(a(\"5f75\"),Object(m[\"a\"])(ht,s,o,!1,null,\"eb5eda66\",null));e[\"a\"]=vt.exports},\"5f75\":function(t,e,a){\"use strict\";var s=a(\"fb18\"),o=a.n(s);o.a},\"5f8e\":function(t,e,a){\"use strict\";var s=a(\"4372\"),o=a.n(s);o.a},\"5fb8\":function(t,e,a){},6121:function(t,e,a){\"use strict\";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Content\")],1)},o=[],i=a(\"7752\"),r={name:\"Initiator\",components:{Content:i[\"a\"]}},n=r,l=a(\"2877\"),d=Object(l[\"a\"])(n,s,o,!1,null,null,null);e[\"default\"]=d.exports},\"6f6b\":function(t,e,a){},\"73e3\":function(t,e,a){},7752:function(t,e,a){\"use strict\";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"examination\"},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:4===t.key,expression:\"key === 4\"}],staticClass:\"examination-search\"},[a(\"a-form\",{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{layout:\"horizontal\"}},[a(\"a-row\",[a(\"a-col\",{attrs:{span:22}},[a(\"a-row\",[a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol,label:\"所属应用\"}},[a(\"a-select\",{staticClass:\"inputWidth\",attrs:{placeholder:\"请选择所属应用\",allowClear:!0},on:{change:function(e){return t.inputChange(e,\"bizType\")}}},t._l(t.useApp,function(e){return a(\"a-select-option\",{key:e.value},[t._v(t._s(e.label))])}),1)],1)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol,label:\"创建时间\"}},[a(\"a-range-picker\",{staticClass:\"inputWidth\",attrs:{format:\"YYYY/MM/DD\"},on:{change:function(e,a){return t.inputChange(a,\"date\")}}})],1)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol,label:\"状态\"}},[a(\"a-select\",{staticClass:\"inputWidth\",attrs:{allowClear:!0,placeholder:\"请选择审批状态\"},on:{change:function(e){return t.inputChange(e,\"processSerarchType\")}}},t._l(t.status,function(e){return a(\"a-select-option\",{key:e.value},[t._v(t._s(e.label))])}),1)],1)],1)],1),a(\"Animation\",{attrs:{name:\"fadeIn\"}},[a(\"a-row\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.advanced,expression:\"advanced\"}]},[a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol,label:\"创建人\"}},[a(\"a-select\",{staticClass:\"inputWidth\",attrs:{mode:\"multiple\",allowClear:!0,placeholder:\"请选择创建人\"},on:{change:function(e){return t.inputChange(e,\"processStarters\")}}},t._l(t.founder,function(e){return a(\"a-select-option\",{key:e.id},[t._v(t._s(e.name))])}),1)],1)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol,label:\"处理时间\"}},[a(\"a-range-picker\",{staticClass:\"inputWidth\",attrs:{format:\"YYYY/MM/DD\"}})],1)],1)],1)],1)],1),a(\"a-col\",{attrs:{span:2}},[a(\"a-form-item\",{staticStyle:{\"text-align\":\"center\"}},[a(\"span\",{staticStyle:{cursor:\"pointer\"},on:{click:t.toggleAdvanced}},[t._v(\"\\n              \"+t._s(t.advanced?\"收起\":\"展开\")+\"\\n              \"),a(\"a-icon\",{attrs:{type:t.advanced?\"caret-up\":\"caret-down\"}})],1)])],1)],1)],1)],1),a(\"div\",{staticClass:\"examination-title\"},[a(\"span\",[t._v(\"标题\")]),a(\"span\",[t._v(\"内容\")]),a(\"span\",[t._v(\"时间\")]),a(\"span\",[t._v(\"操作\")]),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:2===t.key,expression:\"key === 2\"}],on:{click:t.allRead}},[t._v(\"全部已阅\")])]),a(\"div\",{staticClass:\"examination-content\"},[a(\"div\",{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:t.handleInfiniteOnLoad,expression:\"handleInfiniteOnLoad\"}],staticClass:\"examination-content-list\",attrs:{\"infinite-scroll-disabled\":t.busy,\"infinite-scroll-distance\":10,\"infinite-scroll-immediate-check\":!1}},[a(\"a-list\",{attrs:{dataSource:t.dataList},scopedSlots:t._u([{key:\"renderItem\",fn:function(e){return a(\"a-list-item\",{},[a(\"div\",{staticClass:\"examination-content-list-item\"},[a(\"div\",{staticClass:\"list-item-title\"},[a(\"span\",[t._v(t._s(e.foRunProcess.processStarterName))]),t._v(\"\\n              \"+t._s(e.foRunProcess.processName)+\"\\n            \")]),a(\"div\",{staticClass:\"list-item-content\"},[a(\"ul\",t._l(e.foRunProcess.digest.split(\"/\"),function(e,s){return a(\"li\",{key:s},[t._v(t._s(e))])}),0)]),a(\"div\",{staticClass:\"list-item-time\"},[t._v(t._s(t._f(\"formatDate\")(e.foRunProcess.processStarttime)))]),a(\"div\",{staticClass:\"list-item-action\"},[1===t.key?[a(\"a-button\",{attrs:{type:\"primary\",ghost:\"\"},on:{click:function(a){return t.detialView(e,\"RUN\")}}},[t._v(\"进入审批\")])]:t._e(),2===t.key?[\"WAITE_READ\"===e.foRunProcessDtoType?a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(a){return t.detialView(e,\"noRead\")}}},[t._v(\"未阅\")]):t._e(),\"READED\"===e.foRunProcessDtoType?a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(a){return t.detialView(e)}}},[t._v(\"已阅\")]):t._e()]:t._e(),3===t.key?[a(\"a\",{attrs:{href:\"javascript:;\"},on:{click:function(a){return t.detialView(e)}}},[t._v(\"详情\")])]:t._e(),4===t.key?[\"WAITE_READ\"===e.foRunProcessDtoType?a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(a){return t.detialView(e,\"noRead\")}}},[t._v(\"未阅\")]):t._e(),\"READED\"===e.foRunProcessDtoType?a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(a){return t.detialView(e)}}},[t._v(\"已阅\")]):t._e(),\"RUNING\"===e.foRunProcessDtoType?a(\"a-button\",{attrs:{type:\"primary\",ghost:\"\"},on:{click:function(a){return t.detialView(e,\"RUN\")}}},[t._v(\"进入审批\")]):t._e(),\"NO_PASS\"===e.foRunProcessDtoType?a(\"a-button\",{attrs:{type:\"danger\",ghost:\"\"},on:{click:function(a){return t.detialView(e)}}},[t._v(\"审批不通过\")]):t._e(),\"PASS\"===e.foRunProcessDtoType?a(\"a-button\",{attrs:{type:\"primary\",ghost:\"\"},on:{click:function(a){return t.detialView(e)}}},[t._v(\"审批通过\")]):t._e()]:t._e()],2)])])}}])}),t.loadingCompony&&!t.busy?a(\"div\",{staticClass:\"demo-loading-container\"},[a(\"a-spin\")],1):t._e()],1)]),a(\"a-drawer\",{attrs:{destroyOnClose:\"\",visible:t.visible,closable:!1,width:1040,wrapStyle:{overflow:\"auto\",paddingBottom:\"108px\"}},on:{close:t.onClose}},[a(\"approvalInfo\",{attrs:{detial:t.propItem,showAction:t.showAction},on:{onClose:t.onClose}})],1)],1)},o=[],i=(a(\"c5f6\"),a(\"fd3b\")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"purchase-info\"},[a(\"div\",{staticClass:\"prompt-title\"},[a(\"a-row\",[a(\"a-col\",{attrs:{span:18}},[a(\"h3\",{staticClass:\"prompt-h3\"},[t._v(\"流水详情\")])]),t.showAction?t._e():a(\"a-col\",{staticClass:\"prompt-wrapper\",attrs:{span:6}},[t.showAction?t._e():a(\"span\",{staticClass:\"prompt-edit\",on:{click:function(e){return t.auditApproval(\"PASS\")}}},[a(\"a-icon\",{staticStyle:{color:\"#F0BB2E\",\"margin-right\":\"2px\"},attrs:{type:\"check-circle\"}}),a(\"span\",[t._v(\"通过\")])],1),a(\"span\",{staticClass:\"prompt-delete\",on:{click:function(e){return t.auditApproval(\"NOPASS\")}}},[a(\"a-icon\",{staticStyle:{color:\"#D50304\",\"margin-right\":\"2px\"},attrs:{type:\"close-circle\"}}),a(\"span\",[t._v(\"不通过\")])],1),a(\"span\",{staticClass:\"prompt-close\",on:{click:t.onClose}},[a(\"a-icon\",{attrs:{type:\"close\"}})],1)])],1)],1),\"CHANNEL_SALE_ORDER\"===t.detial.foRunProcess.bizType?a(\"orderInfo\",{attrs:{approval:!0,editInfo:!0,detialList:t.detial.foRunProcess.bizId}}):t._e(),t.showAction?t._e():a(\"a-row\",[a(\"a-col\",{attrs:{span:24}},[a(\"h3\",{staticClass:\"purchase-info-title\"},[t._v(\"审批意见\")])]),a(\"a-col\",{attrs:{span:24}},[a(\"a-textarea\",{attrs:{placeholder:\"审批意见\",rows:4},model:{value:t.auditComment,callback:function(e){t.auditComment=e},expression:\"auditComment\"}})],1)],1),a(\"a-row\",[a(\"a-col\",{attrs:{span:24}},[a(\"h3\",{staticClass:\"purchase-info-title\"},[t._v(\"审批流程\")])]),a(\"a-col\",{attrs:{span:24}},[a(\"a-steps\",{attrs:{current:t.approvalStep}},t._l(t.approvalData,function(e,s){return a(\"a-step\",{key:s,attrs:{status:\"PASS\"===e.approveResultStatus?\"finish\":\"NOPASS\"===e.approveResultStatus?\"error\":\"wait\"}},[a(\"span\",{staticClass:\"approval-sure\",attrs:{slot:\"title\"},slot:\"title\"},[t._v(t._s(\"PASS\"===e.approveResultStatus?\"通过\":\"NOPASS\"===e.approveResultStatus?\"不通过\":\"待审\"))]),a(\"a-icon\",{staticStyle:{display:\"none\"},attrs:{slot:\"icon\",type:\"user\"},slot:\"icon\"}),a(\"template\",{slot:\"description\"},[a(\"div\",{staticClass:\"approval-description\"},[a(\"p\",[t._v(t._s(e.names.join(\"/\")))]),e.taskAuditRecords?[1==e.names.length?[a(\"p\",[t._v(t._s(e.taskAuditRecords[0].auditComment))]),a(\"p\",[t._v(t._s(t._f(\"formatDate\")(e.taskAuditRecords[0].auditorTime)))])]:t._l(e.taskAuditRecords,function(e,s){return a(\"p\",{key:s},[t._v(t._s(e.auditorName)+\" \"+t._s(e.auditComment)+\" \"+t._s(t._f(\"formatDate\")(e.auditorTime)))])})]:t._e()],2)])],2)}),1)],1)],1)],1)},n=[],l=a(\"5dbe\"),d=a(\"365c\"),c=a(\"0d5e\"),u=a(\"cba0\"),p={props:[\"detial\",\"showAction\"],components:{orderInfo:l[\"a\"]},data:function(){return{labelCol:{span:6},wrapperCol:{span:14},detialList:\"\",approvalData:[],auditComment:\"\",approvalStep:0}},created:function(){this.getRunProcessDetial()},methods:{onClose:function(){this.$emit(\"onClose\")},getRunProcessDetial:function(){var t=this,e=this.detial,a={};a.defProcessId=e.foRunProcess.processId,a.procesState=e.foRunProcess.processState,a.runProcessId=e.foRunProcess.id,a.version=e.foRunProcess.version,Object(c[\"c\"])(d[\"a\"].getRunProcessDetial,a).then(function(e){if(0===e.data.code){var a=e.data.data;t.approvalData=a,a.forEach(function(e,a){\"PASS\"!==e.approveResultStatus&&\"NOPASS\"!==e.approveResultStatus||(t.approvalStep=a)})}})},auditApproval:function(t){var e=this,a={};a.auditComment=this.auditComment?this.auditComment:\"PASS\"===t?\"通过\":\"不通过\",a.auditResult=t,a.runProcessId=this.detial.foRunProcess.id,a.userId=localStorage.getItem(\"userId\"),Object(c[\"c\"])(d[\"a\"].setAudit,a).then(function(t){0===t.data.code?(e.$message.success(\"操作成功\"),e.$emit(\"onClose\"),u[\"a\"].$emit(\"ToObtain\",!0)):e.$message.error(t.data.msg)})}}},m=p,f=(a(\"f347\"),a(\"2877\")),h=Object(f[\"a\"])(m,r,n,!1,null,\"6e07f17e\",null),v=h.exports,b=a(\"487a\"),C=a.n(b),g=[{value:0,label:\"待办\"},{value:2,label:\"待阅\"},{value:3,label:\"已阅\"},{value:4,label:\"自己发起\"},{value:5,label:\"已办\"}],I=[{value:0,label:\"订单\"},{value:1,label:\"客户\"},{value:2,label:\"产品\"}],y={directives:{infiniteScroll:C.a},components:{Animation:i[\"a\"],approvalInfo:v},data:function(){return{labelCol:{span:6},wrapperCol:{span:18},key:\"\",advanced:!1,visible:!1,dataList:[],dataListSize:0,currentPage:1,pageSize:20,busy:!0,loadingCompony:!1,propItem:{},status:g,useApp:I,founder:[],showAction:!1,dto:{bizType:0,procesEndTime:\"\",procesStartTime:\"\",processSerarchType:-1,processStarters:[]},timer:\"\"}},created:function(){this.$route.query.key&&(this.key=this.$route.query.key),4===this.$route.query.key&&this.getFounder()},methods:{handleInfiniteOnLoad:function(){this.dataList.length>=this.dataListSize&&0!==this.dataListSize?(this.loadingCompony=!1,this.busy=!0):(this.getList(this.key),this.currentPage+=1,this.busy=!1)},toggleAdvanced:function(){this.advanced=!this.advanced},getList:function(t){switch(t){case 1:this.getItem(d[\"a\"].getReviewProcess);break;case 2:this.getItem(d[\"a\"].getProcessListToBeRead,\"READ\");break;case 3:this.getItem(d[\"a\"].foRunProcessByStarter);break;case 4:this.getSearchResult();break}},getItem:function(t,e){var a=this;this.loadingCompony=!0,Object(c[\"c\"])(t,{currentPage:this.currentPage,pageSize:this.pageSize,processSerarch:e}).then(function(t){0===t.data.code&&(a.dataListSize=Number(t.data.data.total),a.loadingCompony=!1,a.dataList=a.dataList.concat(t.data.data.records))})},detialView:function(t,e){var a=this;\"noRead\"===e&&(Object(c[\"c\"])(d[\"a\"].readProcess+\"?runProcessIds=\".concat(t.foRunProcess.id)).then(function(t){0===t.data.code&&(a.currentPage=1,a.dataList=[],u[\"a\"].$emit(\"ToObtain\",!0),a.getList(a.key))}),t.foRunProcessDtoType=\"READED\"),this.showAction=\"RUN\"!==e,this.propItem=t,this.visible=!0},allRead:function(){var t=this,e=this.dataList,a=[];e.forEach(function(t){a.push(\"runProcessIds=\".concat(t.foRunProcess.id))}),a=a.join(\"&\"),Object(c[\"c\"])(d[\"a\"].readProcess+\"?\".concat(a)).then(function(e){0===e.data.code&&(t.currentPage=1,t.dataList=[],t.getList(t.key),u[\"a\"].$emit(\"ToObtain\",!0))})},onClose:function(){this.visible=!1},getFounder:function(){var t=this;Object(c[\"c\"])(d[\"a\"].getCompanyAllUsers).then(function(e){0===e.data.code&&(t.founder=t.founder.concat(e.data.data))})},inputChange:function(t,e){var a=this;this.dataList=[];var s=this.dto;\"date\"===e?(s.procesStartTime=t[0],s.procesEndTime=t[1]):s[e]=t>=0?t:-1,\"\"!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){a.getSearchResult(1)},1e3)},getSearchResult:function(t){var e=this,a=this.dto;a.currentPage=t||this.currentPage,a.pageSize=this.pageSize,Object(c[\"e\"])(d[\"a\"].searchRunProcess,a).then(function(t){0===t.data.code&&(e.dataListSize=Number(t.data.data.total),e.loadingCompony=!1,e.dataList=e.dataList.concat(t.data.data.records))})}}},w=y,k=(a(\"9aec\"),Object(f[\"a\"])(w,s,o,!1,null,\"7ff4bd6c\",null));e[\"a\"]=k.exports},\"8d40\":function(t,e,a){},\"9aec\":function(t,e,a){\"use strict\";var s=a(\"8d40\"),o=a.n(s);o.a},ad56:function(t,e,a){\"use strict\";var s=a(\"ef35\"),o=a.n(s);o.a},ae71:function(t,e,a){\"use strict\";var s=a(\"5fb8\"),o=a.n(s);o.a},c4ce:function(t,e,a){\"use strict\";a.d(e,\"a\",function(){return s}),a.d(e,\"b\",function(){return o}),a.d(e,\"c\",function(){return i});var s=[{title:\"订单编码\",dataIndex:\"oorderNumber\",scopedSlots:{customRender:\"oorderNumber\"},fixed:\"left\",width:200},{title:\"客户单号\",dataIndex:\"opurchaseOrderno\",width:150},{title:\"客户编码\",dataIndex:\"ocustCode\",width:150},{title:\"客户简称\",dataIndex:\"ocustShortName\",width:150},{title:\"订单总计(元)\",dataIndex:\"ototalSum\",width:150},{title:\"订单来源\",dataIndex:\"osource\",scopedSlots:{customRender:\"osource\"},width:150},{title:\"产品编码\",dataIndex:\"odSkuCode\",scopedSlots:{customRender:\"odSkuCode\"},width:150},{title:\"产品名称\",dataIndex:\"odSkuName\",scopedSlots:{customRender:\"odSkuName\"},width:150},{title:\"产品规格\",dataIndex:\"odSpec\",scopedSlots:{customRender:\"odSpec\"},width:150},{title:\"税率(%)\",dataIndex:\"taxRate\",scopedSlots:{customRender:\"taxRate\"},width:150},{title:\"单价(元)\",dataIndex:\"odSkuCustPrice\",scopedSlots:{customRender:\"odSkuCustPrice\"},width:150},{title:\"订单数量\",dataIndex:\"odNumber\",scopedSlots:{customRender:\"odNumber\"},width:150},{title:\"订单总计(元)\",dataIndex:\"odAmount\",scopedSlots:{customRender:\"odAmount\"},width:150},{title:\"要求交期\",dataIndex:\"odRequireDueDate\",scopedSlots:{customRender:\"odRequireDueDate\"},width:150},{title:\"承诺交期\",dataIndex:\"odPromiseDueDate\",scopedSlots:{customRender:\"odPromiseDueDate\"},width:150},{title:\"客户图号\",dataIndex:\"odSkuCustDrawNum\",scopedSlots:{customRender:\"odSkuCustDrawNum\"},width:150},{title:\"订单日期\",dataIndex:\"odOrderplacingTime\",scopedSlots:{customRender:\"odOrderplacingTime\"},width:150},{title:\"状态\",dataIndex:\"ostatus\",width:70,scopedSlots:{customRender:\"ostatus\"},fixed:\"right\"}],o=[{title:\"产品名称\",dataIndex:\"odSkuName\",scopedSlots:{customRender:\"name\"},width:120},{title:\"产品规格\",dataIndex:\"odSpec\",width:120},{title:\"单价\",dataIndex:\"odSkuCustPrice\",scopedSlots:{customRender:\"odSkuCustPrice\"},width:120},{title:\"数量\",dataIndex:\"odNumber\",scopedSlots:{customRender:\"odNumber\"},width:120},{title:\"总计\",dataIndex:\"odAmount\",scopedSlots:{customRender:\"odAmount\"},width:120},{title:\"客户编码\",dataIndex:\"odSkuCustCode\",width:120},{title:\"采购单号\",dataIndex:\"odPurchaseOrderno\",scopedSlots:{customRender:\"odPurchaseOrderno\"},width:120},{title:\"要求交期\",dataIndex:\"odRequireDueDate\",scopedSlots:{customRender:\"odRequireDueDate\"},width:120},{title:\"承诺交期\",dataIndex:\"odPromiseDueDate\",scopedSlots:{customRender:\"odPromiseDueDate\"},width:120},{title:\"操作\",scopedSlots:{customRender:\"operation\"},fixed:\"right\",align:\"center\",width:120}],i=[{label:\"预订单\",value:\"PREORDER\"},{label:\"已提交\",value:\"SUBMISSIONORDER\"},{label:\"已接单\",value:\"ACCEPTORDER\"},{label:\"已拒单\",value:\"REJECTORDE\"},{label:\"已完成\",value:\"FINISH\"},{label:\"已取消\",value:\"CANCEL\"},{label:\"已经发货\",value:\"HAVEDELLIVERY\"},{label:\"部分发货\",value:\"PARTDELLIVERY\"},{label:\"未发货\",value:\"UNDELLIVERY\"},{label:\"已签收\",value:\"ALREADYLIVERY\"}]},cf10:function(t,e,a){\"use strict\";var s=a(\"5ca6\"),o=a.n(s);o.a},d607:function(t,e,a){\"use strict\";var s=a(\"3b29\"),o=a.n(s);o.a},dd71:function(t,e,a){\"use strict\";var s=a(\"fe23\"),o=a.n(s);o.a},ef35:function(t,e,a){},f347:function(t,e,a){\"use strict\";var s=a(\"73e3\"),o=a.n(s);o.a},fb18:function(t,e,a){},fd3b:function(t,e,a){\"use strict\";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"transition\",{attrs:{name:\"fadeIn\"}},[t._t(\"default\")],2)},o=[],i={name:\"Animation\",data:function(){return{}}},r=i,n=(a(\"dd71\"),a(\"2877\")),l=Object(n[\"a\"])(r,s,o,!1,null,\"05168ffc\",null);e[\"a\"]=l.exports},fe23:function(t,e,a){},fe75:function(t,e,a){}}]);","extractedComments":[]}