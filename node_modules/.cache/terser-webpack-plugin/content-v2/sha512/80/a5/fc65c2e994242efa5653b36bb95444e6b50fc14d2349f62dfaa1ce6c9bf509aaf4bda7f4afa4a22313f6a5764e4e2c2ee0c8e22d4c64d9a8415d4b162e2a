{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-5498211c\"],{\"15d6\":function(t,e,a){},3237:function(t,e,a){\"use strict\";var i=a(\"15d6\"),n=a.n(i);n.a},\"487a\":function(t,e,a){(function(e,a){t.exports=a()})(0,function(){\"use strict\";var t=\"@@InfiniteScroll\",e=function(t,e){var a,i,n,s,r,o=function(){t.apply(s,r),i=a};return function(){if(s=this,r=arguments,a=Date.now(),n&&(clearTimeout(n),n=null),i){var t=e-(a-i);t<0?o():n=setTimeout(function(){o()},t)}else o()}},a=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},i=document.defaultView.getComputedStyle,n=function(t){var e=t;while(e&&\"HTML\"!==e.tagName&&\"BODY\"!==e.tagName&&1===e.nodeType){var a=i(e).overflowY;if(\"scroll\"===a||\"auto\"===a)return e;e=e.parentNode}return window},s=function(t){return t===window?document.documentElement.clientHeight:t.clientHeight},r=function(t){return t===window?a(window):t.getBoundingClientRect().top+a(window)},o=function(t){var e=t.parentNode;while(e){if(\"HTML\"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},c=function(){if(!this.binded){this.binded=!0;var t=this,a=t.el,i=a.getAttribute(\"infinite-scroll-throttle-delay\"),s=200;i&&(s=Number(t.vm[i]||i),(isNaN(s)||s<0)&&(s=200)),t.throttleDelay=s,t.scrollEventTarget=n(a),t.scrollListener=e(l.bind(t),t.throttleDelay),t.scrollEventTarget.addEventListener(\"scroll\",t.scrollListener),this.vm.$on(\"hook:beforeDestroy\",function(){t.scrollEventTarget.removeEventListener(\"scroll\",t.scrollListener)});var r=a.getAttribute(\"infinite-scroll-disabled\"),o=!1;r&&(this.vm.$watch(r,function(e){t.disabled=e,!e&&t.immediateCheck&&l.call(t)}),o=Boolean(t.vm[r])),t.disabled=o;var c=a.getAttribute(\"infinite-scroll-distance\"),d=0;c&&(d=Number(t.vm[c]||c),isNaN(d)&&(d=0)),t.distance=d;var u=a.getAttribute(\"infinite-scroll-immediate-check\"),p=!0;u&&(p=Boolean(t.vm[u])),t.immediateCheck=p,p&&l.call(t);var m=a.getAttribute(\"infinite-scroll-listen-for-event\");m&&t.vm.$on(m,function(){l.call(t)})}},l=function(t){var e=this.scrollEventTarget,i=this.el,n=this.distance;if(!0===t||!this.disabled){var o=a(e),c=o+s(e),l=!1;if(e===i)l=e.scrollHeight-c<=n;else{var d=r(i)-r(e)+i.offsetHeight+o;l=c+n>=d}l&&this.expression&&this.expression()}},d={bind:function(e,a,i){e[t]={el:e,vm:i.context,expression:a.value};var n=arguments;e[t].vm.$on(\"hook:mounted\",function(){e[t].vm.$nextTick(function(){o(e)&&c.call(e[t],n),e[t].bindTryCount=0;var a=function a(){e[t].bindTryCount>10||(e[t].bindTryCount++,o(e)?c.call(e[t],n):setTimeout(a,50))};a()})})},unbind:function(e){e&&e[t]&&e[t].scrollEventTarget&&e[t].scrollEventTarget.removeEventListener(\"scroll\",e[t].scrollListener)}},u=function(t){t.directive(\"InfiniteScroll\",d)};return window.Vue&&(window.infiniteScroll=d,Vue.use(u)),d.install=u,d})},\"4b73\":function(t,e,a){},\"867b\":function(t,e,a){\"use strict\";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"dispatch\"},[a(\"a-row\",[a(\"a-col\",{staticClass:\"dispatch-left\",attrs:{span:12}},[a(\"a-form\",{attrs:{layout:\"inline\"}},[a(\"a-row\",{staticClass:\"search\",attrs:{span:24}},[a(\"a-col\",{attrs:{span:24}},[a(\"a-form-item\",{attrs:{label:\"规格\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-select\",{staticClass:\"inputWidth\",attrs:{showSearch:\"\",allowClear:\"\",showArrow:!1,filterOption:!1,defaultActiveFirstOption:!1,notFoundContent:null,getPopupContainer:function(t){return t.parentNode}},on:{search:function(e){return t.handleSelectChange(e,\"spec\")},change:function(e){t.inputChange(e,\"spec\")},popupScroll:function(e){return t.currentPageChange(e,\"spec\")}}},t._l(t.odSpecList,function(e){return a(\"a-select-option\",{key:e},[t._v(t._s(e))])}),1)],1),a(\"a-form-item\",{attrs:{label:\"材质\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-select\",{staticClass:\"inputWidth\",attrs:{showSearch:\"\",allowClear:\"\",showArrow:!1,filterOption:!1,defaultActiveFirstOption:!1,notFoundContent:null,getPopupContainer:function(t){return t.parentNode}},on:{search:function(e){return t.handleSelectChange(e,\"cz\")},change:function(e){t.inputChange(e,\"cz\")},popupScroll:function(e){return t.currentPageChange(e,\"cz\")}}},t._l(t.textures,function(e){return a(\"a-select-option\",{key:e},[t._v(t._s(e))])}),1)],1)],1)],1)],1),a(\"a-row\",{staticClass:\"order-list\",attrs:{span:24}},[a(\"div\",{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:t.handleInfiniteOnLoad,expression:\"handleInfiniteOnLoad\"}],staticClass:\"order-list-item demo-infinite-container\",attrs:{\"infinite-scroll-disabled\":t.busy,\"infinite-scroll-distance\":10}},[a(\"a-list\",{attrs:{dataSource:t.dataCompany},scopedSlots:t._u([{key:\"renderItem\",fn:function(e,i){return a(\"a-list-item\",{},[e.sku?a(\"div\",{staticClass:\"list-item\",class:i===t.setIndex?\"active\":\"\",on:{click:function(a){return t.addCompany(e.id,i)}}},[a(\"div\",{staticClass:\"item-left\"},[a(\"div\",{staticClass:\"item-left-top\"},[a(\"a\",{attrs:{href:\"javascript:;\"}},[t._v(t._s(e.sku.name))]),a(\"span\",[t._v(t._s(e.sku.spec))])]),a(\"ul\",{staticClass:\"item-left-desc\"},[a(\"li\",[t._v(t._s(e.sku.cz))]),a(\"li\",[t._v(t._s(e.sku.standard))]),a(\"li\",[t._v(t._s(e.requireNumber)+\" \"+t._s(e.unit))]),a(\"li\",[t._v(\"当前库存：\"+t._s(e.skuPriceInventory?e.skuPriceInventory.storeCount:0))])])]),a(\"div\",{staticClass:\"item-right\"},[a(\"a-popover\",{attrs:{trigger:\"click\"},model:{value:e.clickedVisible,callback:function(a){t.$set(e,\"clickedVisible\",a)},expression:\"item.clickedVisible\"}},[a(\"template\",{slot:\"content\"},[a(\"a-form-item\",{attrs:{label:\"紧急程度:\",\"label-col\":{span:12},\"wrapper-col\":{span:12}}},[a(\"a-switch\",{model:{value:e.requireLevel,callback:function(a){t.$set(e,\"requireLevel\",a)},expression:\"item.requireLevel\"}})],1),a(\"a-form-item\",{staticClass:\"mb\"},[a(\"a-button\",{attrs:{type:\"danger\"},on:{click:function(a){return t.removeItem(e.id,i)}}},[t._v(\"移除\")])],1)],1),a(\"a-icon\",{staticClass:\"item-right-edit\",attrs:{type:\"ellipsis\"},on:{click:function(e){return t.updataDes(e,i)}}})],2),a(\"a-button\",{attrs:{type:\"primary\",shape:\"circle\",icon:\"plus\"}})],1)]):t._e()])}}])},[t.loadingCompony&&!t.busy?a(\"div\",{staticClass:\"demo-loading-container\"},[a(\"a-spin\")],1):t._e()]),a(\"div\",{staticClass:\"list-item\"},[a(\"div\",{staticClass:\"item-left\"}),a(\"div\",{staticClass:\"item-right-add\"},[a(\"a\",{attrs:{href:\"javascript:;\"},on:{click:t.addMaterial}},[t._v(\"添加新材料\")]),a(\"span\",[t._v(\"\\n                点击这里\\n                \"),a(\"a\",{attrs:{href:\"javascript:;\"},on:{click:t.flushPurchaseOrder}},[t._v(\"刷新\")]),t._v(\" 刷新供应商\\n              \")])])])],1)])],1),a(\"a-col\",{staticClass:\"dispatch-right procurement\",attrs:{span:12}},[a(\"div\",{staticClass:\"title\"}),a(\"div\",{staticClass:\"order-list demo-infinite-container\"},[t._l(t.companyList,function(e,i){return[a(\"div\",{key:i,staticClass:\"list-item\"},[a(\"div\",{staticClass:\"item-left\"},[a(\"div\",{staticClass:\"item-left-top\"},[a(\"a\",{attrs:{href:\"javascript:;\"}},[t._v(t._s(e.company.companyName))])]),a(\"ul\",{staticClass:\"item-left-desc\"},[a(\"li\",[t._v(\"库存：\"+t._s(e.sku.storeCount||0))]),a(\"li\",[t._v(t._s(e.sku.unit))]),a(\"li\",[t._v(t._s(e.sku.price))])])]),a(\"div\",{staticClass:\"item-right\"},[a(\"a-input-number\",{model:{value:e.number,callback:function(a){t.$set(e,\"number\",a)},expression:\"item.number\"}})],1)])]}),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"\"!==t.setIndex,expression:\"setIndex !== ''\"}],staticClass:\"list-item\"},[a(\"div\",{staticClass:\"item-left\"}),a(\"div\",{staticClass:\"item-right\"},[a(\"div\",{staticClass:\"item-right-add\"},[a(\"a\",{attrs:{href:\"javascript:;\"},on:{click:t.addSupplier}},[t._v(\"添加新供应商\")]),a(\"span\",[t._v(\"\\n                点击这里\\n                \"),a(\"a\",{attrs:{href:\"javascript:;\"},on:{click:t.flushMaterialOrder}},[t._v(\"刷新\")]),t._v(\" 刷新供应商\\n              \")])])])]),a(\"div\",{staticStyle:{height:\"40px\"}}),a(\"div\",{staticClass:\"dispatch-right-bottom\"},[a(\"a-button\",{on:{click:t.handleClose}},[t._v(\"取消\")]),a(\"a-button\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.getMenuPermission.includes(\"ADD\"),expression:\"getMenuPermission.includes('ADD')\"}],attrs:{type:\"primary\",loading:t.submitLoading},on:{click:t.submit}},[t._v(\"确定\")])],1)],2)])],1),a(\"a-modal\",{attrs:{title:\"添加供应商\",width:\"820px\",footer:!1},model:{value:t.visible,callback:function(e){t.visible=e},expression:\"visible\"}},[t.visible?a(\"searchSupplier\",{attrs:{supplier:t.supplier}}):t._e()],1),a(\"a-modal\",{attrs:{title:\"添加材料\",width:\"820px\",footer:!1},model:{value:t.meterial,callback:function(e){t.meterial=e},expression:\"meterial\"}},[t.meterial?a(\"newMaterial\"):t._e()],1)],1)},n=[],s=(a(\"c5f6\"),a(\"487a\")),r=a.n(s),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"dispatch\"},[a(\"div\",{staticClass:\"search\"},[a(\"a-row\",{attrs:{span:24}},[a(\"a-col\",{attrs:{span:7}},[a(\"a-form-item\",{attrs:{label:\"规格\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{staticStyle:{width:\"160px\"},model:{value:t.supplier.spec,callback:function(e){t.$set(t.supplier,\"spec\",e)},expression:\"supplier.spec\"}})],1)],1),a(\"a-col\",{attrs:{span:7}},[a(\"a-form-item\",{attrs:{label:\"标准\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{staticStyle:{width:\"160px\"},model:{value:t.supplier.standard,callback:function(e){t.$set(t.supplier,\"standard\",e)},expression:\"supplier.standard\"}})],1)],1),a(\"a-col\",{attrs:{span:7}},[a(\"a-form-item\",{attrs:{label:\"材质\",\"label-col\":t.labelCol,\"wrapper-col\":t.wrapperCol}},[a(\"a-input\",{staticStyle:{width:\"160px\"},model:{value:t.supplier.cz,callback:function(e){t.$set(t.supplier,\"cz\",e)},expression:\"supplier.cz\"}})],1)],1),a(\"a-col\",{attrs:{span:3}},[a(\"a-form-item\",[a(\"a-button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")])],1)],1)],1)],1),a(\"div\",{staticClass:\"order-list\"},[a(\"div\",{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:t.handleInfiniteOnLoad,expression:\"handleInfiniteOnLoad\"}],staticClass:\"order-list-item demo-infinite-container\",attrs:{\"infinite-scroll-disabled\":t.busy,\"infinite-scroll-distance\":10}},[a(\"a-list\",{attrs:{dataSource:t.dataCompany},scopedSlots:t._u([{key:\"renderItem\",fn:function(e,i){return a(\"a-list-item\",{},[a(\"div\",{staticClass:\"list-item\"},[a(\"div\",{staticClass:\"item-left\"},[a(\"div\",{staticClass:\"item-left-top\"},[a(\"a\",{attrs:{href:\"javascript:;\"}},[t._v(t._s(e.company.companyName))]),a(\"span\",[t._v(t._s(e.name)+\" \"+t._s(e.spec))])]),a(\"ul\",{staticClass:\"item-left-desc\"},[a(\"li\",[t._v(\"库存：\"+t._s(e.storeCount))]),a(\"li\",[t._v(t._s(e.unit))]),a(\"li\",[t._v(t._s(e.price)+t._s(t._f(\"moneyFilter\")(e.moneyType)))])])]),a(\"div\",{staticClass:\"item-right\"},[e.have?t._e():a(\"a-button\",{attrs:{type:\"primary\",shape:\"circle\",icon:\"plus\"},on:{click:function(e){return t.addCompany(i)}}}),e.have?a(\"a-button\",{attrs:{type:\"primary\",shape:\"circle\",icon:\"check\"}}):t._e()],1)])])}}])},[t.loadingCompony&&!t.busy?a(\"div\",{staticClass:\"demo-loading-container\"},[a(\"a-spin\")],1):t._e()])],1)])])},c=[],l=a(\"0d5e\"),d=a(\"365c\"),u=a(\"75cd\"),p=a(\"cd34\"),m={props:{supplier:{type:Object,default:function(){return{id:\"\",factoryMaterialId:\"\",cz:\"\",spec:\"\",standard:\"\"}},required:!0}},directives:{infiniteScroll:r.a},mixins:[p[\"a\"],p[\"b\"],u[\"e\"]],data:function(){return{busy:!1,loadingCompony:!1,dataCompanySize:0,dataCompany:[],currentPage:1,pageSize:15}},methods:{handleInfiniteOnLoad:function(){var t=this.dataCompany;this.loadingCompony=!0,t.length>=this.dataCompanySize&&0!==this.dataCompanySize?(this.$message.warning(\"暂时没有更多数据\"),this.busy=!0,this.loadingCompony=!1):(this.getFactoryOrder(this.currentPage),this.loadingCompony=!1)},getFactoryOrder:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a={};a.currentPage=e,a.pageSize=this.pageSize,a.cz=this.supplier.cz,a.spec=this.supplier.spec,a.standard=this.supplier.standard,a.factoryMaterialId=this.supplier.factoryMaterialId,Object(l[\"c\"])(d[\"a\"].selectSupplierList,a).then(function(e){if(0===e.data.code){var a=e.data.data.records;t.dataCompanySize=Number(e.data.data.total),t.dataCompany=t.dataCompany.concat(a),t.currentPage+=1}})},search:function(){this.dataCompany=[],this.getFactoryOrder()},addCompany:function(t){var e=this,a=this.dataCompany[t],i={id:this.supplier.id,supplierId:a.company.id,supplierMaterialId:a.id,factoryMaterialId:this.supplier.factoryMaterialId};Object(l[\"e\"])(d[\"a\"].addSupplierAppend,i).then(function(t){0===t.data.code?(a.have=!0,e.$message.success(\"恭喜！添加成功\")):e.$message.error(t.data.msg)})}}},h=m,f=(a(\"f5a1\"),a(\"2877\")),v=Object(f[\"a\"])(h,o,c,!1,null,\"5035acbb\",null),g=v.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-row\",{staticClass:\"material\"},[a(\"a-col\",{staticClass:\"new-material\",attrs:{span:12}},[a(\"a-tree\",{attrs:{treeData:t.gData,autoExpandParent:t.autoExpandParent},on:{select:t.onExpand}})],1),a(\"a-col\",{staticStyle:{padding:\"0 10px\"},attrs:{span:12}},[a(\"div\",{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:t.handleInfiniteOnLoad,expression:\"handleInfiniteOnLoad\"}],staticClass:\"order-list order-list-item demo-infinite-container\",attrs:{\"infinite-scroll-disabled\":t.busy,\"infinite-scroll-distance\":10}},[a(\"a-list\",{attrs:{dataSource:t.data},scopedSlots:t._u([{key:\"renderItem\",fn:function(e,i){return a(\"a-list-item\",{},[a(\"div\",{staticClass:\"list-item\",on:{click:function(a){return t.addMaterial(e.id,e.unit)}}},[a(\"div\",{staticClass:\"item-left\"},[a(\"div\",{staticClass:\"item-left-top\"},[a(\"a\",{attrs:{href:\"javascript:;\"}},[t._v(t._s(e.name)+\" \"+t._s(e.code))])]),a(\"ul\",{staticClass:\"item-left-desc\"},[a(\"li\",[t._v(t._s(e.spec))]),a(\"li\",[t._v(t._s(e.cz))]),a(\"li\",[t._v(t._s(e.standard))])])]),a(\"div\",{staticClass:\"item-right\"},[a(\"a-button\",{attrs:{type:\"primary\",shape:\"circle\",icon:\"plus\"}})],1)])])}}])},[t.loading&&!t.busy?a(\"div\",{staticClass:\"demo-loading-container\"},[a(\"a-spin\")],1):t._e()])],1)])],1)},C=[],b=a(\"774e\"),w=a.n(b),_=a(\"f499\"),x=a.n(_),k=(a(\"a481\"),{directives:{infiniteScroll:r.a},data:function(){return{expandedKeys:[],autoExpandParent:!0,gData:[],busy:!1,loading:!1,currentPage:1,pages:1,data:[]}},created:function(){this.getCategoryBomTree()},methods:{onExpand:function(t){t.length&&(this.expandedKeys=t,this.data=[],this.currentPage=1,this.getQueryMaterialBaseInfo())},handleInfiniteOnLoad:function(){if(this.busy=!0,this.loading=!0,this.expandedKeys.length){if(this.currentPage>this.pages)return;this.getQueryMaterialBaseInfo(this.currentPage),this.busy=!1,this.loading=!1}},getCategoryBomTree:function(){var t=this;Object(l[\"c\"])(d[\"a\"].bomCategoryTree).then(function(e){if(0===e.data.code){var a={name:\"title\",id:\"key\",childrens:\"children\"},i=JSON.parse(x()(e.data.data).replace(/name|id|childrens/gi,function(t){return a[t]}));t.gData=w()(i)}})},getQueryMaterialBaseInfo:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a={};a.catId=this.expandedKeys[0],a.pageSize=15,a.currentPage=e,Object(l[\"d\"])(d[\"a\"].getQueryMaterialBaseInfo,a).then(function(e){0===e.data.code&&(t.currentPage+=1,t.data=t.data.concat(e.data.data.records),t.pages=Number(e.data.data.pages))})},addMaterial:function(t,e){var a=this;console.log(1),Object(l[\"e\"])(d[\"a\"].addMaterialOrderMateriala,{materialId:t,unit:e}).then(function(t){0===t.data.code?a.$message.success(\"添加成功\"):a.$message.error(t.data.msg)})}}}),I=k,S=(a(\"f798\"),Object(f[\"a\"])(I,y,C,!1,null,\"e711cc8a\",null)),L=S.exports,O={directives:{infiniteScroll:r.a},mixins:[p[\"a\"],p[\"b\"],u[\"b\"],u[\"c\"]],components:{searchSupplier:g,newMaterial:L},data:function(){return{busy:!1,loadingCompony:!1,dataCompanySize:0,dataCompany:[],factoryOrderDetailPostBean:{currentPage:1,pageSize:15,cz:\"\",spec:\"\",standard:\"\"},companyList:[],submitLoading:!1,timer:\"\",setIndex:\"\",meterial:!1,supplier:{id:\"\",factoryMaterialId:\"\",cz:\"\",spec:\"\",standard:\"\"}}},created:function(){this.getFactoryMaterialRequireCz(),this.getFactoryMaterialRequireSpec()},computed:{getMenuPermission:function(){return this.$store.state.menuPermission}},methods:{inputChange:function(t,e){var a=this;this.dataCompany=[],this.companyList=[],this.setIndex=\"\";var i=this.factoryOrderDetailPostBean;i.currentPage=1,i[e]=t,\"\"!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){a.getFactoryOrder()},1e3)},handleInfiniteOnLoad:function(){var t=this.dataCompany;this.loadingCompony=!0,t.length>=this.dataCompanySize&&0!==this.dataCompanySize?(this.$message.warning(\"暂时没有更多订单数据\"),this.busy=!0,this.loadingCompony=!1):(this.getFactoryOrder(),this.loadingCompony=!1)},removeItem:function(t,e){var a=this;this.$confirm({title:\"移除订单信息\",content:\"您确定要删除这条采购订单消息吗?\",zIndex:99999,onOk:function(){Object(l[\"b\"])(d[\"a\"].deleteMaterialOrder,[t]).then(function(t){0===t.data.code?(a.$message.success(\"移除成功\"),a.setIndex=\"\",a.companyList=[],a.dataCompany.splice(e,1)):a.$message.error(t.data.msg)})}})},addCompany:function(t,e){this.setIndex=e,this.companyList=[];var a=this.dataCompany[e].skuSupplierList;if(a.length>0){var i=this;a.forEach(function(t){i.$set(a,\"number\",0)}),this.companyList=a}},handleClose:function(){this.setIndex=\"\",this.companyList=[]},getFactoryOrder:function(){var t=this;Object(l[\"c\"])(d[\"a\"].getPurchasingManagement,this.factoryOrderDetailPostBean).then(function(e){if(0===e.data.code){var a=e.data.data.records;a.length>0&&a.forEach(function(t){t.clickedVisible=!1,t.requireLevel=!1}),t.dataCompanySize=Number(e.data.data.total),t.dataCompany=t.dataCompany.concat(a)}t.factoryOrderDetailPostBean.currentPage+=1})},updataDes:function(t,e){window.event?window.event.cancelBubble=!0:t.stopPropagation(),this.dataCompany[e].clickedVisible=!0},flushPurchaseOrder:function(){this.dataCompany=[],this.companyList=[],this.setIndex=\"\",this.factoryOrderDetailPostBean.currentPage=1,this.getFactoryOrder()},flushMaterialOrder:function(){var t=this;console.log(1);var e=this,a=this.dataCompany[this.setIndex].factoryId,i=this.dataCompany[this.setIndex].materialId;Object(l[\"c\"])(d[\"a\"].flushMaterialOrder+\"/\".concat(a,\"/\").concat(i)).then(function(a){if(0===a.data.code){var i=a.data.data;i.forEach(function(t){e.$set(i,\"number\",0)}),t.companyList=i}})},submit:function(){var t=this;if(0!==this.companyList.length){this.submitLoading=!0;var e={},a=[],i=this.companyList;e.id=this.dataCompany[this.setIndex].id,e.factoryName=localStorage.getItem(\"companyName\"),e.requireLevel=this.dataCompany[this.setIndex].requireLevel?\"LEVEL1\":\"LEVEL0\",i.forEach(function(t){t.number>0&&a.push({number:t.number,supplierId:t.supplierId,supplierMaterialId:t.supplierMaterialId,supplierName:t.company.companyName})}),e.supplierAssignmentList=[].concat(a),0!==e.supplierAssignmentList.length?Object(l[\"e\"])(d[\"a\"].addMaterialOrderSale,e).then(function(e){0===e.data.code?(t.$message.success(\"新增供应商采购成功\"),t.companyList=[],t.dataCompany=[],t.setIndex=\"\",t.factoryOrderDetailPostBean.currentPage=1,t.getFactoryOrder()):t.$message.error(e.data.msg),t.submitLoading=!1}).catch(function(){t.$message.error(\"系统错误\"),t.submitLoading=!1}):this.submitLoading=!1}},currentPageChange:function(t,e){var a=this.getCurrentPageChange(t);a&&(\"cz\"===e?this.getFactoryMaterialRequireCz(this.czCurrentPage):\"spec\"===e&&this.getFactoryMaterialRequireSpec(this.specCurrentPage))},isDrawer:function(t){this.visible=t},addSupplier:function(){var t=this.dataCompany[this.setIndex];this.supplier={id:t.id,factoryMaterialId:t.materialId,cz:t.sku.cz,spec:t.sku.spec,standard:t.sku.standard},this.visible=!0},addMaterial:function(){this.meterial=!0},handleSelectChange:function(t,e){var a=this;\"\"!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){\"cz\"===e?(a.textures=[],a.texturesValue=t,a.getFactoryMaterialRequireCz()):(a.odSpecList=[],a.odSpecListValue=t,a.getFactoryMaterialRequireSpec())},500)}}},P=O,M=(a(\"3237\"),Object(f[\"a\"])(P,i,n,!1,null,\"a0f8cfe0\",null));e[\"default\"]=M.exports},\"8fc0\":function(t,e,a){},f5a1:function(t,e,a){\"use strict\";var i=a(\"4b73\"),n=a.n(i);n.a},f798:function(t,e,a){\"use strict\";var i=a(\"8fc0\"),n=a.n(i);n.a}}]);","extractedComments":[]}