{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-6e0ec682\"],{\"2fdb\":function(e,t,a){\"use strict\";var s=a(\"5ca1\"),r=a(\"d2c8\"),o=\"includes\";s(s.P+s.F*a(\"5147\")(o),\"String\",{includes:function(e){return!!~r(this,e,o).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},3461:function(e,t,a){},3804:function(e,t,a){\"use strict\";var s=a(\"3461\"),r=a.n(s);r.a},5147:function(e,t,a){var s=a(\"2b4c\")(\"match\");e.exports=function(e){var t=/./;try{\"/./\"[e](t)}catch(a){try{return t[s]=!1,!\"/./\"[e](t)}catch(r){}}return!0}},6762:function(e,t,a){\"use strict\";var s=a(\"5ca1\"),r=a(\"c366\")(!0);s(s.P,\"Array\",{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a(\"9c6c\")(\"includes\")},b431:function(e,t,a){\"use strict\";var s=a(\"fc92\"),r=a.n(s);r.a},c3fc2:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"a-row\",[a(\"a-col\",{staticClass:\"purchase-right\",attrs:{span:24}},[a(\"a-form\",{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{layout:\"inline\"}},[a(\"a-form-item\",{attrs:{\"label-col\":e.labelCol,\"wrapper-col\":e.wrapperCol,label:\"入库编号\"}},[a(\"a-input\",{staticClass:\"inputWidth\",attrs:{placeholder:\"请输入入库编号\"},on:{change:function(t){return e.inputChange(t.target.value,\"applyCode\")}},model:{value:e.workshopOrdersPostBean.applyCode,callback:function(t){e.$set(e.workshopOrdersPostBean,\"applyCode\",t)},expression:\"workshopOrdersPostBean.applyCode\"}})],1),a(\"a-form-item\",{attrs:{\"label-col\":e.labelCol,\"wrapper-col\":e.wrapperCol,label:\"产品名称\"}},[a(\"a-input\",{staticClass:\"inputWidth\",attrs:{placeholder:\"请输入产品名称\"},on:{change:function(t){return e.inputChange(t.target.value,\"name\")}},model:{value:e.workshopOrdersPostBean.name,callback:function(t){e.$set(e.workshopOrdersPostBean,\"name\",t)},expression:\"workshopOrdersPostBean.name\"}})],1),a(\"a-form-item\",{attrs:{\"label-col\":e.labelCol,\"wrapper-col\":e.wrapperCol,label:\"紧急程度\"}},[a(\"a-select\",{staticClass:\"inputWidth\",attrs:{allowClear:!0,placeholder:\"请选择紧急程度\"},on:{change:function(t){e.inputChange(t,\"requireLevel\")}},model:{value:e.workshopOrdersPostBean.requireLevel,callback:function(t){e.$set(e.workshopOrdersPostBean,\"requireLevel\",t)},expression:\"workshopOrdersPostBean.requireLevel\"}},[a(\"a-select-option\",{attrs:{value:\"LEVEL0\"}},[e._v(\"正常\")]),a(\"a-select-option\",{attrs:{value:\"LEVEL1\"}},[e._v(\"紧急\")])],1)],1),a(\"a-form-item\",{attrs:{\"label-col\":e.labelCol,\"wrapper-col\":e.wrapperCol,label:\"状态\"}},[a(\"a-select\",{staticClass:\"inputWidth\",attrs:{allowClear:!0,placeholder:\"请选择状态\"},on:{change:function(t){e.inputChange(t,\"status\")}},model:{value:e.workshopOrdersPostBean.status,callback:function(t){e.$set(e.workshopOrdersPostBean,\"status\",t)},expression:\"workshopOrdersPostBean.status\"}},e._l(e.menuStatus,function(t){return a(\"a-select-option\",{key:t.key},[e._v(e._s(t.value))])}),1)],1)],1),a(\"a-table\",{attrs:{columns:e.columns,dataSource:e.data,pagination:e.pagination,rowSelection:e.rowSelection,loading:e.loading},on:{change:e.onChangePage},scopedSlots:e._u([e._l([\"applyCode\",\"code\"],function(t,s){return{key:t,fn:function(r,o){return[a(\"a\",{key:s,attrs:{href:\"javascript:;\"},on:{click:function(a){return e.showDrawer(t,o)}}},[e._v(e._s(o[t]))])]}}}),{key:\"instorageType\",fn:function(t){return[a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"INDEPENDENT\"===t,expression:\"text === 'INDEPENDENT'\"}]},[e._v(\"工厂自主申请\")]),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"PRODUCTION\"===t,expression:\"text === 'PRODUCTION'\"}]},[e._v(\"工厂生产单完成入库申请\")]),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"UPPLIER\"===t,expression:\"text === 'UPPLIER'\"}]},[e._v(\"材料商自主申请\")]),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"VENDOR\"===t,expression:\"text === 'VENDOR'\"}]},[e._v(\"材料商销售单入库申请\")])]}},{key:\"requireLevel\",fn:function(t){return[e._v(e._s(\"LEVEL0\"===t?\"正常\":\"紧急\"))]}},{key:\"status\",fn:function(t){return[e._v(e._s(e._f(\"putStorageStatus\")(t)))]}}],null,!0)})],1)],1),a(\"a-drawer\",{attrs:{destroyOnClose:!0,placement:\"right\",closable:!1,visible:e.visible,width:1040,wrapStyle:{height:\"100%\",overflow:\"auto\",paddingBottom:\"108px\"}},on:{close:e.closeDrawer}},[a(\"purchaseInfo\",{attrs:{purchaseId:e.purchaseId,prchaseDetial:e.prchaseDetial},on:{isDrawer:e.isDrawer}})],1)],1)},r=[],o=(a(\"c5f6\"),a(\"6762\"),a(\"2fdb\"),a(\"365c\")),l=a(\"0d5e\"),i=a(\"cd34\"),n=a(\"6853\"),c=a(\"75cd\"),p=[{title:\"入库单号\",dataIndex:\"applyCode\",scopedSlots:{customRender:\"applyCode\"}},{title:\"生产单号\",dataIndex:\"code\"},{title:\"产品名称\",dataIndex:\"name\"},{title:\"规格\",dataIndex:\"spec\"},{title:\"材质\",dataIndex:\"cz\"},{title:\"入库数量\",dataIndex:\"inCount\"},{title:\"入库类型\",dataIndex:\"instorageType\",scopedSlots:{customRender:\"instorageType\"}},{title:\"紧急程度\",dataIndex:\"requireLevel\",scopedSlots:{customRender:\"requireLevel\"}},{title:\"状态\",dataIndex:\"status\",scopedSlots:{customRender:\"status\"},width:140}],u=[{title:\"销售单号\",dataIndex:\"relateOrderCode\"},{title:\"客户编号\",dataIndex:\"relateCustCode\"},{title:\"订单数量\",dataIndex:\"odNumber\"},{title:\"入库数量\",dataIndex:\"assignCount\"}],d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"purchase-info\"},[a(\"div\",{staticClass:\"prompt-title\"},[a(\"a-row\",[a(\"a-col\",{attrs:{span:18}},[a(\"h3\",{staticClass:\"prompt-h3\"},[e._v(\"入库详情\")])]),a(\"a-col\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.getDetailPermission.includes(\"UPDATE\"),expression:\"getDetailPermission.includes('UPDATE')\"}],staticClass:\"prompt-wrapper\",attrs:{span:6}},[a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.companyType&&\"SUBMISSION\"===e.prchaseDetial.status,expression:\"companyType && prchaseDetial.status === 'SUBMISSION'\"}],staticClass:\"prompt-delete\",on:{click:function(t){return e.orderPick(\"WAITING_IN\")}}},[a(\"a-icon\",{staticStyle:{color:\"#F0BB2E\",\"margin-right\":\"4px\"},attrs:{type:\"plus-circle\"}}),a(\"span\",[e._v(\"确认入库\")])],1),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.companyType&&\"WAITING_IN\"===e.prchaseDetial.status,expression:\"companyType && prchaseDetial.status === 'WAITING_IN'\"}],staticClass:\"prompt-delete\",on:{click:function(t){return e.orderPick(\"STORED_IN\")}}},[a(\"a-icon\",{staticStyle:{color:\"#1890ff\",\"margin-right\":\"4px\"},attrs:{type:\"check-circle\"}}),a(\"span\",[e._v(\"完成入库\")])],1),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"SUBMISSION\"===e.prchaseDetial.status||\"WAITING_IN\"===e.prchaseDetial.status,expression:\"prchaseDetial.status === 'SUBMISSION' || prchaseDetial.status === 'WAITING_IN'\"}],staticClass:\"prompt-delete\",on:{click:function(t){return e.orderPick(\"CANCEL_IN\")}}},[a(\"a-icon\",{staticStyle:{color:\"#D50304\",\"margin-right\":\"4px\"},attrs:{type:\"close-circle\"}}),a(\"span\",[e._v(\"取消入库\")])],1)])],1)],1),a(\"a-row\",[a(\"a-col\",{attrs:{span:24}},[a(\"h3\",{staticClass:\"purchase-info-title\"},[e._v(\"基本数据\")])])],1),a(\"a-row\",[a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"入库单号\",\"label-col\":e.labelCol,\"wrapper-col\":e.wrapperCol}},[[e._v(e._s(e.prchaseDetial.applyCode))]],2)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"生产单号\",\"label-col\":e.labelCol,\"wrapper-col\":e.wrapperCol}},[a(\"a-tooltip\",{attrs:{placement:\"topLeft\",overlayStyle:{maxWidth:\"300px\"}}},[a(\"template\",{slot:\"title\"},[a(\"span\",[e._v(e._s(e.prchaseDetial.productionCode))])]),a(\"span\",[e._v(e._s(e.prchaseDetial.productionCode))])],2)],1)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"入库类型\",\"label-col\":e.labelCol,\"wrapper-col\":e.wrapperCol}},[[e._v(e._s(e._f(\"puStorageType\")(e.prchaseDetial.instorageType)))]],2)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"入库数量\",\"label-col\":e.labelCol,\"wrapper-col\":e.wrapperCol}},[[e._v(e._s(e.prchaseDetial.inCount))]],2)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"紧急程度\",\"label-col\":e.labelCol,\"wrapper-col\":e.wrapperCol}},[[a(\"a-switch\",{attrs:{checked:\"LEVEL0\"!==e.prchaseDetial.requireLevel,disabled:\"\"}})]],2)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"备注\",\"label-col\":e.labelCol,\"wrapper-col\":e.wrapperCol}},[[e._v(e._s(e.prchaseDetial.remark))]],2)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"入库状态\",\"label-col\":e.labelCol,\"wrapper-col\":e.wrapperCol}},[[e._v(e._s(e._f(\"putStorageStatus\")(e.prchaseDetial.status)))]],2)],1)],1),a(\"a-row\",[a(\"a-col\",{attrs:{span:24}},[a(\"h3\",{staticClass:\"purchase-info-title\"},[e._v(\"产品详情\")])])],1),a(\"a-row\",[a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"产品名称\",\"label-col\":e.labelCol,\"wrapper-col\":e.wrapperCol}},[[e._v(e._s(e.prchaseDetial.name))]],2)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"库位\",\"label-col\":e.labelCol,\"wrapper-col\":e.wrapperCol}},[[e._v(e._s(e.prchaseDetial.custName))]],2)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"订单数量\",\"label-col\":e.labelCol,\"wrapper-col\":e.wrapperCol}},[[e._v(e._s(e.prchaseDetial.odNumber))]],2)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"产品规格\",\"label-col\":e.labelCol,\"wrapper-col\":e.wrapperCol}},[[e._v(e._s(e.prchaseDetial.spec))]],2)],1),a(\"a-col\",{attrs:{span:8}},[a(\"a-form-item\",{attrs:{label:\"单位\",\"label-col\":e.labelCol,\"wrapper-col\":e.wrapperCol}},[[e._v(e._s(e.prchaseDetial.unit))]],2)],1)],1),a(\"a-row\",[a(\"a-col\",{attrs:{span:24}},[a(\"h3\",{staticClass:\"purchase-info-title\"},[e._v(\"销售列表\")])])],1),a(\"a-row\",[a(\"a-col\",{attrs:{span:24}},[a(\"a-table\",{attrs:{columns:e.columns,dataSource:e.prchaseDetial.list,pagination:!1}})],1)],1),a(\"a-row\",{staticStyle:{\"margin-top\":\"20px\"}},[a(\"a-col\",{attrs:{span:24}},[a(\"h3\",{staticClass:\"purchase-info-title\"},[e._v(\"订单进度\")])])],1),a(\"a-row\",[a(\"a-col\",{staticStyle:{\"margin-top\":\"20px\"},attrs:{span:12}},[e.prchaseDetial.progressList?a(\"a-steps\",{attrs:{progressDot:\"\",current:e.prchaseDetial.num}},[e._l(e.prchaseDetial.progressList,function(t,s){return[a(\"a-step\",{key:s,attrs:{title:e._f(\"putStorageStatus\")(t.state),status:\"CANCEL_IN\"===t.state?\"error\":\"\"}},[a(\"template\",{slot:\"description\"},[a(\"span\",{staticClass:\"stepC\"},[e._v(e._s(t.name))]),a(\"p\",{staticClass:\"stepC\"},[e._v(e._s(t.date))])])],2)]})],2):e._e()],1)],1),a(\"div\",{style:{position:\"absolute\",left:0,bottom:0,width:\"100%\",borderTop:\"1px solid #E9E9E9\",padding:\"10px 16px\",background:\"#FFF\",textAlign:\"right\"}},[a(\"a-button\",{style:{marginRight:\"8px\"},on:{click:e.onClose}},[e._v(\"取消\")]),a(\"a-button\",{attrs:{type:\"primary\",disabled:!e.edit},on:{click:e.onClose}},[e._v(\"保存\")])],1)],1)},h=[],m={mixins:[i[\"a\"],i[\"c\"],c[\"e\"]],props:[\"prchaseDetial\",\"purchaseId\"],data:function(){return{edit:!1,columns:u,companyType:\"\",actionOrder:!1}},created:function(){this.companyType=\"WAREHOUSE\"===localStorage.getItem(\"companyType\")},computed:{getDetailPermission:function(){return this.$store.state.detailPermission}},methods:{isDisabled:function(e){this.disabled=!e},isDelete:function(e){console.log(e)},orderPick:function(e){var t=this;if(this.actionOrder)this.$message.warning(\"请不要重复操作\");else{this.actionOrder=!0;var a={};a.id=this.purchaseId,a.status=e,Object(l[\"e\"])(o[\"a\"].updateWarehousingStatus,a).then(function(e){0===e.data.code?(t.$message.success(\"操作成功\",1),t.$emit(\"isDrawer\",!0)):(t.actionOrder=!1,t.$message.error(e.data.msg))}).catch(function(){t.actionOrder=!1,t.$message.error(\"系统错误\")})}},orderEdit:function(){this.edit=!this.edit}}},w=m,f=(a(\"3804\"),a(\"2877\")),v=Object(f[\"a\"])(w,d,h,!1,null,\"c565fb36\",null),g=v.exports,C={mixins:[i[\"a\"],i[\"b\"],c[\"e\"]],components:{purchaseInfo:g},data:function(){return{columns:p,menuStatus:n[\"c\"],data:[],selectedRowKeys:[],pagination:{total:0,pageSize:15,defaultCurrent:1,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:[\"10\",\"15\",\"30\",\"50\",\"100\"]},workshopOrdersPostBean:{},prchaseDetial:{},purchaseId:\"\"}},created:function(){this.getFactoryPolicyOrderList()},computed:{rowSelection:function(){var e=this.selectedRowKeys;return{selectedRowKeys:e,onChange:this.onChangeTab,hideDefaultSelections:!1}},getMenuPermission:function(){return this.$store.state.menuPermission}},methods:{inputChange:function(e,t){var a=this;this.workshopOrdersPostBean.currentPage=1,this.workshopOrdersPostBean[t]=e,\"\"!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){a.getFactoryPolicyOrderList()},500)},onChangePage:function(e,t,a){this.pagination.pageSize=e.pageSize,this.getFactoryPolicyOrderList(e.current)},showDrawer:function(e,t){switch(e){case\"applyCode\":this.purchaseId=t.id,this.getProcurementDetial(t.id);break}},getProcurementDetial:function(e){var t=this;this.getMenuPermission.includes(\"DETAIL\")?Object(l[\"e\"])(o[\"a\"].warehousingListDetail,{id:e}).then(function(e){if(0===e.data.code){var a=e.data.data;a.list.forEach(function(e,t){e[\"key\"]=t}),t.prchaseDetial=a,t.visible=!0,t.$store.commit(\"setPromptTitle\",{title:\"采购详情\",isEdit:!1})}else t.$message.error(e.data.msg)}):this.$message.error(\"权限不足\")},isDrawer:function(e){e&&this.getFactoryPolicyOrderList(),this.visible=!1},getFactoryPolicyOrderList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0;var a=this.workshopOrdersPostBean;a.currentPage=t,a.pageSize=this.pagination.pageSize,Object(l[\"e\"])(o[\"a\"].warehousingList,a).then(function(t){if(0===t.data.code){var a=t.data.data.records;a.forEach(function(e,t){e[\"key\"]=t}),e.pagination.total=Number(t.data.data.total),e.data=a}else e.$message.error(t.data.msg);e.loading=!1}).catch(function(){e.$message.error(\"系统错误\"),e.loading=!1})}}},b=C,y=(a(\"b431\"),Object(f[\"a\"])(b,s,r,!1,null,\"72179daf\",null));t[\"default\"]=y.exports},d2c8:function(e,t,a){var s=a(\"aae3\"),r=a(\"be13\");e.exports=function(e,t,a){if(s(t))throw TypeError(\"String#\"+a+\" doesn't accept regex!\");return String(r(e))}},fc92:function(e,t,a){}}]);","extractedComments":[]}